parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JiFC":[function(require,module,exports) {

},{}],"ygGQ":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t){var r=o(t,"string");return"symbol"===e(r)?r:String(r)}function o(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function u(e){var t=f();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!p(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)})(e)}function d(e,t,r){return(d=f()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&y(o,r.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var h={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"},m=function(e){a(n,l(Error));var t=u(n);function n(e){var r;i(this,n);var o=h[e];return(r=t.call(this,o)).code=e,r.name="AssertionError",r.message=o,r}return r(n)}(),v=m;exports.default=v;
},{}],"fKNg":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.preventDefault=f,exports.stopPropagation=a;var u=function(){function t(r){e(this,t),this.propagationStopped,this.defaultPrevented,this.type=r,this.target=null}return o(t,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),t}();function a(t){t.stopPropagation()}function f(t){t.preventDefault()}var p=u;exports.default=p;
},{}],"zehl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"DDda":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(){e(this,t),this.disposed=!1}return o(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}]),t}(),s=u;exports.default=s;
},{}],"luEr":[function(require,module,exports) {
"use strict";function r(r,n,t){var u,i;t=t||e;for(var o=0,f=r.length,a=!1;o<f;)(i=+t(r[u=o+(f-o>>1)],n))<0?o=u+1:(f=u,a=!i);return a?o:~o}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e){return r<e?1:r>e?-1:0}function t(r,e,n){if(r[0]<=e)return 0;var t=r.length;if(e<=r[t-1])return t-1;if("function"==typeof n){for(var u=1;u<t;++u){var i=r[u];if(i===e)return u;if(i<e)return n(e,r[u-1],i)>0?u-1:u}return t-1}if(n>0){for(var o=1;o<t;++o)if(r[o]<e)return o-1;return t-1}if(n<0){for(var f=1;f<t;++f)if(r[f]<=e)return f;return t-1}for(var a=1;a<t;++a){if(r[a]==e)return a;if(r[a]<e)return r[a-1]-e<e-r[a]?a-1:a}return t-1}function u(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function i(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function o(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function a(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function s(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var i=u(r[n-1],e);return!(i>0||t&&0===i)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ascending=e,exports.binarySearch=r,exports.descending=n,exports.equals=f,exports.extend=i,exports.isSorted=s,exports.linearFindNearest=t,exports.remove=o,exports.reverseSubArray=u,exports.stableSort=a;
},{}],"RgA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FALSE=t,exports.TRUE=e,exports.VOID=n,exports.memoizeOne=o,exports.toPromise=s;var r=require("./array.js");function e(){return!0}function t(){return!1}function n(){}function o(e){var t,n,o,s=!1;return function(){var i=Array.prototype.slice.call(arguments);return s&&this===o&&(0,r.equals)(i,n)||(s=!0,o=this,n=i,t=e.apply(this,arguments)),t}}function s(r){return function(){var e;try{e=r()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}
},{"./array.js":"luEr"}],"mH6q":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)delete e[r]}function r(e){var r;for(r in e)return!1;return!r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=e,exports.isEmpty=r;
},{}],"CR4Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../Disposable.js")),t=i(require("./Event.js")),n=require("../functions.js"),r=require("../obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=c(e,"string");return"symbol"===o(t)?t:String(t)}function c(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=d();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(i){f(u,e.default);var o=v(u);function u(e){var t;return s(this,u),(t=o.call(this)).eventTarget_=e,t.pendingRemovals_=null,t.dispatching_=null,t.listeners_=null,t}return l(u,[{key:"addEventListener",value:function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}}},{key:"dispatchEvent",value:function(e){var r="string"==typeof e,i=r?e:e.type,o=this.listeners_&&this.listeners_[i];if(o){var s=r?new t.default(e):e;s.target||(s.target=this.eventTarget_||this);var u,l=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,a[i]=0),++l[i];for(var c=0,f=o.length;c<f;++c)if(!1===(u="handleEvent"in o[c]?o[c].handleEvent(s):o[c].call(this,s))||s.propagationStopped){u=!1;break}if(0==--l[i]){var p=a[i];for(delete a[i];p--;)this.removeEventListener(i,n.VOID);delete l[i]}return u}}},{key:"disposeInternal",value:function(){this.listeners_&&(0,r.clear)(this.listeners_)}},{key:"getListeners",value:function(e){return this.listeners_&&this.listeners_[e]||void 0}},{key:"hasListener",value:function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(e,t){var r=this.listeners_&&this.listeners_[e];if(r){var i=r.indexOf(t);-1!==i&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=n.VOID,++this.pendingRemovals_[e]):(r.splice(i,1),0===r.length&&delete this.listeners_[e]))}}}]),u}(),g=_;exports.default=g;
},{"../Disposable.js":"DDda","./Event.js":"fKNg","../functions.js":"RgA2","../obj.js":"mH6q"}],"C8cu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"UqnM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=r,exports.unlistenByKey=n;var e=require("./obj.js");function t(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var s=r;r=function(){e.removeEventListener(t,r),s.apply(this,arguments)}}var o={target:e,type:t,listener:r};return e.addEventListener(t,r),o}function r(e,r,n,i){return t(e,r,n,i,!0)}function n(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"mH6q"}],"IdSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.unByKey=m;var e=n(require("./events/Target.js")),t=n(require("./events/EventType.js")),r=require("./events.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=a(e,"string");return"symbol"===o(t)?t:String(t)}function a(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=b();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(n){l(u,e.default);var o=y(u);function u(){var e;return i(this,u),(e=o.call(this)).on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return f(u,[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(t.default.CHANGE)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(e,t){if(Array.isArray(e)){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=(0,r.listen)(this,e[i],t);return o}return(0,r.listen)(this,e,t)}},{key:"onceInternal",value:function(e,t){var n;if(Array.isArray(e)){var o=e.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=(0,r.listenOnce)(this,e[i],t)}else n=(0,r.listenOnce)(this,e,t);return t.ol_key=n,n}},{key:"unInternal",value:function(e,t){var r=t.ol_key;if(r)m(r);else if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}]),u}();function m(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)(0,r.unlistenByKey)(e[t]);else(0,r.unlistenByKey)(e)}d.prototype.on,d.prototype.once,d.prototype.un;var O=d;exports.default=O;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./events.js":"UqnM"}],"KniQ":[function(require,module,exports) {
"use strict";function t(){throw new Error("Unimplemented abstract method.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION=void 0,exports.abstract=t,exports.getUid=r;var e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}var o="7.5.1";exports.VERSION=o;
},{}],"PhPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ObjectEvent=void 0;var e=i(require("./events/Event.js")),t=i(require("./ObjectEventType.js")),r=i(require("./Observable.js")),n=require("./util.js"),o=require("./obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=l(e,"string");return"symbol"===u(t)?t:String(t)}function l(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=d();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(t){v(n,e.default);var r=p(n);function n(e,t,o){var i;return f(this,n),(i=r.call(this,e)).key=t,i.oldValue=o,i}return a(n)}();exports.ObjectEvent=j;var O=function(e){v(u,r.default);var i=p(u);function u(e){var t;return f(this,u),(t=i.call(this)).on,t.once,t.un,(0,n.getUid)(b(t)),t.values_=null,void 0!==e&&t.setProperties(e),t}return a(u,[{key:"get",value:function(e){var t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(e,r){var n;n="change:".concat(e),this.hasListener(n)&&this.dispatchEvent(new j(n,e,r)),n=t.default.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new j(n,e,r))}},{key:"addChangeListener",value:function(e,t){this.addEventListener("change:".concat(e),t)}},{key:"removeChangeListener",value:function(e,t){this.removeEventListener("change:".concat(e),t)}},{key:"set",value:function(e,t,r){var n=this.values_||(this.values_={});if(r)n[e]=t;else{var o=n[e];n[e]=t,o!==t&&this.notify(e,o)}}},{key:"setProperties",value:function(e,t){for(var r in e)this.set(r,e[r],t)}},{key:"applyProperties",value:function(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}},{key:"unset",value:function(e,t){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],(0,o.isEmpty)(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}]),u}(),m=O;exports.default=m;
},{"./events/Event.js":"fKNg","./ObjectEventType.js":"zehl","./Observable.js":"IdSm","./util.js":"KniQ","./obj.js":"mH6q"}],"BTrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"FnDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./Object.js")),r=i(require("./CollectionEventType.js")),n=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function a(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=d();return function(){var r,n=_(t);if(e){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b={LENGTH:"length"},g=function(t){l(r,n.default);var e=y(r);function r(t,n,i){var o;return c(this,r),(o=e.call(this,t)).element=n,o.index=i,o}return a(r)}();exports.CollectionEvent=g;var m=function(n){l(o,e.default);var i=y(o);function o(t,e){var r;if(c(this,o),(r=i.call(this)).on,r.once,r.un,e=e||{},r.unique_=!!e.unique,r.array_=t||[],r.unique_)for(var n=0,u=r.array_.length;n<u;++n)r.assertUnique_(r.array_[n],n);return r.updateLength_(),r}return a(o,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(b.LENGTH)}},{key:"insertAt",value:function(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new g(r.default.ADD,e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)}},{key:"removeAt",value:function(t){if(!(t<0||t>=this.getLength())){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new g(r.default.REMOVE,e,t)),e}}},{key:"setAt",value:function(t,e){if(t>=this.getLength())this.insertAt(t,e);else{if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new g(r.default.REMOVE,n,t)),this.dispatchEvent(new g(r.default.ADD,e,t))}}},{key:"updateLength_",value:function(){this.set(b.LENGTH,this.array_.length)}},{key:"assertUnique_",value:function(e,r){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==r)throw new t.default(58)}}]),o}(),w=m;exports.default=w;
},{"./AssertionError.js":"ygGQ","./Object.js":"PhPh","./CollectionEventType.js":"BTrx","./events/Event.js":"fKNg"}],"fLG6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ygGQ"}],"mYW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=_,exports.default=void 0;var e=o(require("./Object.js")),t=o(require("./events/EventType.js")),r=require("./asserts.js"),n=require("./events.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=c(e,"string");return"symbol"===i(t)?t:String(t)}function c(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=d();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(r){l(i,e.default);var o=h(i);function i(e){var t;if(u(this,i),(t=o.call(this)).on,t.once,t.un,t.id_=void 0,t.geometryName_="geometry",t.style_=null,t.styleFunction_=void 0,t.geometryChangeKey_=null,t.addChangeListener(t.geometryName_,t.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;t.setGeometry(r)}else{var n=e;t.setProperties(n)}return t}return s(i,[{key:"clone",value:function(){var e=new i(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();return r&&e.setStyle(r),e}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&((0,n.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,n.listen)(e,t.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(e){this.set(this.geometryName_,e)}},{key:"setStyle",value:function(e){this.style_=e,this.styleFunction_=e?_(e):void 0,this.changed()}},{key:"setId",value:function(e){this.id_=e,this.changed()}},{key:"setGeometryName",value:function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}]),i}();function _(e){if("function"==typeof e)return e;var t;Array.isArray(e)?t=e:((0,r.assert)("function"==typeof e.getZIndex,41),t=[e]);return function(){return t}}var b=v;exports.default=b;
},{"./Object.js":"PhPh","./events/EventType.js":"C8cu","./asserts.js":"fLG6","./events.js":"UqnM"}],"f3Nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WORKER_OFFSCREEN_CANVAS=exports.WEBKIT=exports.SAFARI_BUG_237906=exports.SAFARI=exports.PASSIVE_EVENT_LISTENERS=exports.MAC=exports.IMAGE_DECODE=exports.FIREFOX=exports.DEVICE_PIXEL_RATIO=void 0;var e="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",o=e.includes("firefox");exports.FIREFOX=o;var r=e.includes("safari")&&!e.includes("chrom");exports.SAFARI=r;var t=r&&(e.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(e));exports.SAFARI_BUG_237906=t;var s=e.includes("webkit")&&!e.includes("edge");exports.WEBKIT=s;var n=e.includes("macintosh");exports.MAC=n;var i="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=i;var a="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=a;var E="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=E;var p=function(){var e=!1;try{var o=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,o),window.removeEventListener("_",null,o)}catch(r){}return e}();exports.PASSIVE_EVENT_LISTENERS=p;
},{}],"P4eA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.apply=c,exports.compose=v,exports.composeCssTransform=l,exports.create=o,exports.determinant=h,exports.invert=y,exports.makeInverse=d,exports.makeScale=x,exports.multiply=u,exports.reset=s,exports.rotate=p,exports.scale=f,exports.set=a,exports.setFromArray=i,exports.toString=M,exports.translate=m;var r,t=require("./has.js"),e=require("./asserts.js"),n=new Array(6);function o(){return[1,0,0,1,0,0]}function s(r){return a(r,1,0,0,1,0,0)}function u(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],m=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*m+u,r[5]=n*x+s*m+a,r}function a(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function i(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function c(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function p(r,t){var e=Math.cos(t),o=Math.sin(t);return u(r,a(n,e,o,-o,e,0,0))}function f(r,t,e){return u(r,a(n,t,0,0,e,0,0))}function x(r,t,e){return a(r,t,0,0,e,0,0)}function m(r,t,e){return u(r,a(n,1,0,0,1,t,e))}function v(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function l(r,t,e,n,s,u,a){return M(v(o(),r,t,e,n,s,u,a))}function y(r){return d(r,r)}function d(r,t){var n=h(t);(0,e.assert)(0!==n,32);var o=t[0],s=t[1],u=t[2],a=t[3],i=t[4],c=t[5];return r[0]=a/n,r[1]=-s/n,r[2]=-u/n,r[3]=o/n,r[4]=(u*c-a*i)/n,r[5]=-(o*c-s*i)/n,r}function h(r){return r[0]*r[3]-r[1]*r[2]}function M(e){var n="matrix("+e.join(", ")+")";if(t.WORKER_OFFSCREEN_CANVAS)return n;var o=r||(r=document.createElement("div"));return o.style.transform=n,o.style.transform}
},{"./has.js":"f3Nv","./asserts.js":"fLG6"}],"bUAS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"QDir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyTransform=rt,exports.approximatelyEquals=A,exports.boundingExtent=s,exports.buffer=p,exports.clone=l,exports.closestSquaredDistanceXY=x,exports.containsCoordinate=d,exports.containsExtent=h,exports.containsXY=m,exports.coordinateRelationship=g,exports.createEmpty=v,exports.createOrUpdate=y,exports.createOrUpdateEmpty=M,exports.createOrUpdateFromCoordinate=E,exports.createOrUpdateFromCoordinates=b,exports.createOrUpdateFromFlatCoordinates=O,exports.createOrUpdateFromRings=T,exports.equals=C,exports.extend=I,exports.extendCoordinate=F,exports.extendCoordinates=R,exports.extendFlatCoordinates=S,exports.extendRings=N,exports.extendXY=U,exports.forEachCorner=j,exports.getArea=w,exports.getBottomLeft=B,exports.getBottomRight=L,exports.getCenter=W,exports.getCorner=X,exports.getEnlargedArea=G,exports.getForViewAndSize=q,exports.getHeight=H,exports.getIntersection=Y,exports.getIntersectionArea=_,exports.getMargin=z,exports.getRotatedViewport=V,exports.getSize=K,exports.getTopLeft=D,exports.getTopRight=P,exports.getWidth=$,exports.intersects=k,exports.intersectsSegment=tt,exports.isEmpty=J,exports.returnOrUpdate=Q,exports.scaleFromCenter=Z,exports.wrapAndSliceX=nt,exports.wrapX=et;var t=e(require("./extent/Relationship.js")),r=require("./asserts.js");function e(t){return t&&t.__esModule?t:{default:t}}function n(t,r){return f(t)||i(t,r)||u(t,r)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,r){if(t){if("string"==typeof t)return a(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,a,i=[],f=!0,s=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=u.call(e)).done)&&(i.push(n.value),i.length!==r);f=!0);}catch(c){s=!0,o=c}finally{try{if(!f&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw o}}return i}}function f(t){if(Array.isArray(t))return t}function s(t){for(var r=v(),e=0,n=t.length;e<n;++e)F(r,t[e]);return r}function c(t,r,e){return y(Math.min.apply(null,t),Math.min.apply(null,r),Math.max.apply(null,t),Math.max.apply(null,r),e)}function p(t,r,e){return e?(e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]+r,e[3]=t[3]+r,e):[t[0]-r,t[1]-r,t[2]+r,t[3]+r]}function l(t,r){return r?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r):t.slice()}function x(t,r,e){var n,o;return(n=r<t[0]?t[0]-r:t[2]<r?r-t[2]:0)*n+(o=e<t[1]?t[1]-e:t[3]<e?e-t[3]:0)*o}function d(t,r){return m(t,r[0],r[1])}function h(t,r){return t[0]<=r[0]&&r[2]<=t[2]&&t[1]<=r[1]&&r[3]<=t[3]}function m(t,r,e){return t[0]<=r&&r<=t[2]&&t[1]<=e&&e<=t[3]}function g(r,e){var n=r[0],o=r[1],u=r[2],a=r[3],i=e[0],f=e[1],s=t.default.UNKNOWN;return i<n?s|=t.default.LEFT:i>u&&(s|=t.default.RIGHT),f<o?s|=t.default.BELOW:f>a&&(s|=t.default.ABOVE),s===t.default.UNKNOWN&&(s=t.default.INTERSECTING),s}function v(){return[1/0,1/0,-1/0,-1/0]}function y(t,r,e,n,o){return o?(o[0]=t,o[1]=r,o[2]=e,o[3]=n,o):[t,r,e,n]}function M(t){return y(1/0,1/0,-1/0,-1/0,t)}function E(t,r){var e=t[0],n=t[1];return y(e,n,e,n,r)}function b(t,r){return R(M(r),t)}function O(t,r,e,n,o){return S(M(o),t,r,e,n)}function T(t,r){return N(M(r),t)}function C(t,r){return t[0]==r[0]&&t[2]==r[2]&&t[1]==r[1]&&t[3]==r[3]}function A(t,r,e){return Math.abs(t[0]-r[0])<e&&Math.abs(t[2]-r[2])<e&&Math.abs(t[1]-r[1])<e&&Math.abs(t[3]-r[3])<e}function I(t,r){return r[0]<t[0]&&(t[0]=r[0]),r[2]>t[2]&&(t[2]=r[2]),r[1]<t[1]&&(t[1]=r[1]),r[3]>t[3]&&(t[3]=r[3]),t}function F(t,r){r[0]<t[0]&&(t[0]=r[0]),r[0]>t[2]&&(t[2]=r[0]),r[1]<t[1]&&(t[1]=r[1]),r[1]>t[3]&&(t[3]=r[1])}function R(t,r){for(var e=0,n=r.length;e<n;++e)F(t,r[e]);return t}function S(t,r,e,n,o){for(;e<n;e+=o)U(t,r[e],r[e+1]);return t}function N(t,r){for(var e=0,n=r.length;e<n;++e)R(t,r[e]);return t}function U(t,r,e){t[0]=Math.min(t[0],r),t[1]=Math.min(t[1],e),t[2]=Math.max(t[2],r),t[3]=Math.max(t[3],e)}function j(t,r){var e;return(e=r(B(t)))?e:(e=r(L(t)))?e:(e=r(P(t)))?e:(e=r(D(t)))||!1}function w(t){var r=0;return J(t)||(r=$(t)*H(t)),r}function B(t){return[t[0],t[1]]}function L(t){return[t[2],t[1]]}function W(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function X(t,e){var n;return"bottom-left"===e?n=B(t):"bottom-right"===e?n=L(t):"top-left"===e?n=D(t):"top-right"===e?n=P(t):(0,r.assert)(!1,13),n}function G(t,r){var e=Math.min(t[0],r[0]),n=Math.min(t[1],r[1]);return(Math.max(t[2],r[2])-e)*(Math.max(t[3],r[3])-n)}function q(t,r,e,o,u){var a=n(V(t,r,e,o),8),i=a[0],f=a[1],s=a[2],c=a[3],p=a[4],l=a[5],x=a[6],d=a[7];return y(Math.min(i,s,p,x),Math.min(f,c,l,d),Math.max(i,s,p,x),Math.max(f,c,l,d),u)}function V(t,r,e,n){var o=r*n[0]/2,u=r*n[1]/2,a=Math.cos(e),i=Math.sin(e),f=o*a,s=o*i,c=u*a,p=u*i,l=t[0],x=t[1];return[l-f+p,x-s-c,l-f-p,x-s+c,l+f-p,x+s+c,l+f+p,x+s-c,l-f+p,x-s-c]}function H(t){return t[3]-t[1]}function _(t,r){return w(Y(t,r))}function Y(t,r,e){var n=e||v();return k(t,r)?(t[0]>r[0]?n[0]=t[0]:n[0]=r[0],t[1]>r[1]?n[1]=t[1]:n[1]=r[1],t[2]<r[2]?n[2]=t[2]:n[2]=r[2],t[3]<r[3]?n[3]=t[3]:n[3]=r[3]):M(n),n}function z(t){return $(t)+H(t)}function K(t){return[t[2]-t[0],t[3]-t[1]]}function D(t){return[t[0],t[3]]}function P(t){return[t[2],t[3]]}function $(t){return t[2]-t[0]}function k(t,r){return t[0]<=r[2]&&t[2]>=r[0]&&t[1]<=r[3]&&t[3]>=r[1]}function J(t){return t[2]<t[0]||t[3]<t[1]}function Q(t,r){return r?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r):t}function Z(t,r){var e=(t[2]-t[0])/2*(r-1),n=(t[3]-t[1])/2*(r-1);t[0]-=e,t[2]+=e,t[1]-=n,t[3]+=n}function tt(r,e,n){var o=!1,u=g(r,e),a=g(r,n);if(u===t.default.INTERSECTING||a===t.default.INTERSECTING)o=!0;else{var i,f,s=r[0],c=r[1],p=r[2],l=r[3],x=e[0],d=e[1],h=n[0],m=n[1],v=(m-d)/(h-x);a&t.default.ABOVE&&!(u&t.default.ABOVE)&&(o=(i=h-(m-l)/v)>=s&&i<=p),o||!(a&t.default.RIGHT)||u&t.default.RIGHT||(o=(f=m-(h-p)*v)>=c&&f<=l),o||!(a&t.default.BELOW)||u&t.default.BELOW||(o=(i=h-(m-c)/v)>=s&&i<=p),o||!(a&t.default.LEFT)||u&t.default.LEFT||(o=(f=m-(h-s)*v)>=c&&f<=l)}return o}function rt(t,r,e,n){if(J(t))return M(e);var o=[];if(n>1)for(var u=t[2]-t[0],a=t[3]-t[1],i=0;i<n;++i)o.push(t[0]+u*i/n,t[1],t[2],t[1]+a*i/n,t[2]-u*i/n,t[3],t[0],t[3]-a*i/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];r(o,o,2);for(var f=[],s=[],p=0,l=o.length;p<l;p+=2)f.push(o[p]),s.push(o[p+1]);return c(f,s,e)}function et(t,r){var e=r.getExtent(),n=W(t);if(r.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){var o=$(e),u=Math.floor((n[0]-e[0])/o)*o;t[0]-=u,t[2]-=u}return t}function nt(t,r){if(r.canWrapX()){var e=r.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[e[0],t[1],e[2],t[3]]];et(t,r);var n=$(e);if($(t)>n)return[[e[0],t[1],e[2],t[3]]];if(t[0]<e[0])return[[t[0]+n,t[1],e[2],t[3]],[e[0],t[1],t[2],t[3]]];if(t[2]>e[2])return[[t[0],t[1],e[2],t[3]],[e[0],t[1],t[2]-n,t[3]]]}return[t]}
},{"./extent/Relationship.js":"bUAS","./asserts.js":"fLG6"}],"yZx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.METERS_PER_UNIT=void 0,exports.fromCode=r;var e={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function r(r){return e[r]}var t={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};exports.METERS_PER_UNIT=t;
},{}],"WUar":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,u(i.key),i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=l(t,"string");return"symbol"===n(e)?e:String(e)}function l(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var a=function(){function t(e){i(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return r(t,[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}]),t}(),s=a;exports.default=s;
},{"./Units.js":"yZx6"}],"lohs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WORLD_EXTENT=exports.RADIUS=exports.PROJECTIONS=exports.MAX_SAFE_Y=exports.HALF_SIZE=exports.EXTENT=void 0,exports.fromEPSG4326=m,exports.toEPSG4326=O;var t=e(require("./Projection.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=6378137;exports.RADIUS=v;var h=Math.PI*v;exports.HALF_SIZE=h;var w=[-h,-h,h,h];exports.EXTENT=w;var d=[-180,-85,180,85];exports.WORLD_EXTENT=d;var E=v*Math.log(Math.tan(Math.PI/2));exports.MAX_SAFE_Y=E;var P=function(e){f(n,t.default);var r=l(n);function n(t){return c(this,n),r.call(this,{code:t,units:"m",extent:w,global:!0,worldExtent:d,getPointResolution:function(t,e){return t/Math.cosh(e[1]/v)}})}return o(n)}(),S=[new P("EPSG:3857"),new P("EPSG:102100"),new P("EPSG:102113"),new P("EPSG:900913"),new P("http://www.opengis.net/def/crs/EPSG/0/3857"),new P("http://www.opengis.net/gml/srs/epsg.xml#3857")];function m(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r){e[o]=h*t[o]/180;var i=v*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));i>E?i=E:i<-E&&(i=-E),e[o+1]=i}return e}function O(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r)e[o]=180*t[o]/h,e[o+1]=360*Math.atan(Math.exp(t[o+1]/v))/Math.PI-90;return e}exports.PROJECTIONS=S;
},{"./Projection.js":"WUar"}],"ZniN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RADIUS=exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=void 0;var t=e(require("./Projection.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=6378137;exports.RADIUS=w;var d=[-180,-90,180,90];exports.EXTENT=d;var v=Math.PI*w/180;exports.METERS_PER_UNIT=v;var O=function(e){f(n,t.default);var r=l(n);function n(t,e){return c(this,n),r.call(this,{code:t,units:"degrees",extent:d,axisOrientation:e,global:!0,metersPerUnit:v,worldExtent:d})}return o(n)}(),m=[new O("CRS:84"),new O("EPSG:4326","neu"),new O("urn:ogc:def:crs:OGC:1.3:CRS84"),new O("urn:ogc:def:crs:OGC:2:84"),new O("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new O("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new O("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];exports.PROJECTIONS=m;
},{"./Projection.js":"WUar"}],"tlE8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.clear=r,exports.get=t;var e={};function r(){e={}}function t(r){return e[r]||e[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function n(r,t){e[r]=t}
},{}],"uhlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=o,exports.clear=r,exports.get=i,exports.remove=n;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"mH6q"}],"B96G":[function(require,module,exports) {
"use strict";function r(r,t,e){return Math.min(Math.max(r,t),e)}function t(r,t,n,o,a,u){var s=a-n,i=u-o;if(0!==s||0!==i){var f=((r-n)*s+(t-o)*i)/(s*s+i*i);f>1?(n=a,o=u):f>0&&(n+=s*f,o+=i*f)}return e(r,t,n,o)}function e(r,t,e,n){var o=e-r,a=n-t;return o*o+a*a}function n(r){for(var t=r.length,e=0;e<t;e++){for(var n=e,o=Math.abs(r[e][e]),a=e+1;a<t;a++){var u=Math.abs(r[a][e]);u>o&&(o=u,n=a)}if(0===o)return null;var s=r[n];r[n]=r[e],r[e]=s;for(var i=e+1;i<t;i++)for(var f=-r[i][e]/r[e][e],c=e;c<t+1;c++)e==c?r[i][c]=0:r[i][c]+=f*r[e][c]}for(var p=new Array(t),v=t-1;v>=0;v--){p[v]=r[v][t]/r[v][v];for(var x=v-1;x>=0;x--)r[x][t]-=r[x][v]*p[v]}return p}function o(r){return 180*r/Math.PI}function a(r){return r*Math.PI/180}function u(r,t){var e=r%t;return e*t<0?e+t:e}function s(r,t,e){return r+e*(t-r)}function i(r,t){var e=Math.pow(10,t);return Math.round(r*e)/e}function f(r,t){return Math.round(i(r,t))}function c(r,t){return Math.floor(i(r,t))}function p(r,t){return Math.ceil(i(r,t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=p,exports.clamp=r,exports.floor=c,exports.lerp=s,exports.modulo=u,exports.round=f,exports.solveLinearSystem=n,exports.squaredDistance=e,exports.squaredSegmentDistance=t,exports.toDegrees=o,exports.toFixed=i,exports.toRadians=a;
},{}],"AiCK":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareVersions=r,exports.padNumber=e;
},{}],"nGsj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=u,exports.createStringXY=a,exports.degreesToStringHDMS=s,exports.distance=d,exports.equals=c,exports.format=i,exports.getWorldsAway=M,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.squaredDistanceToSegment=g,exports.toStringHDMS=l,exports.toStringXY=h,exports.wrapX=v;var t=require("./extent.js"),r=require("./math.js"),e=require("./string.js");function n(t,r){return t[0]+=+r[0],t[1]+=+r[1],t}function o(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],u=n[1],a=t[0]-o,s=t[1]-u;0===a&&0===s&&(a=1);var i=Math.sqrt(a*a+s*s);return[o+e*a/i,u+e*s/i]}function u(t,r){var e,n,o=t[0],u=t[1],a=r[0],s=r[1],i=a[0],c=a[1],f=s[0],p=s[1],x=f-i,d=p-c,g=0===x&&0===d?0:(x*(o-i)+d*(u-c))/(x*x+d*d||0);return g<=0?(e=i,n=c):g>=1?(e=f,n=p):(e=i+g*x,n=c+g*d),[e,n]}function a(t){return function(r){return h(r,t)}}function s(t,n,o){var u=(0,r.modulo)(n+180,360)-180,a=Math.abs(3600*u),s=o||0,i=Math.floor(a/3600),c=Math.floor((a-3600*i)/60),f=(0,r.toFixed)(a-3600*i-60*c,s);f>=60&&(f=0,c+=1),c>=60&&(c=0,i+=1);var p=i+"";return 0===c&&0===f||(p+=" "+(0,e.padNumber)(c,2)+""),0!==f&&(p+=" "+(0,e.padNumber)(f,2,s)+""),0!==u&&(p+=" "+t.charAt(u<0?1:0)),p}function i(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function c(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function f(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,u=t[1]*e+t[0]*n;return t[0]=o,t[1]=u,t}function p(t,r){return t[0]*=r,t[1]*=r,t}function x(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function d(t,r){return Math.sqrt(x(t,r))}function g(t,r){return x(t,u(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return i(t,"{x}, {y}",r)}function v(r,e){if(e.canWrapX()){var n=(0,t.getWidth)(e.getExtent()),o=M(r,e,n);o&&(r[0]-=o*n)}return r}function M(r,e,n){var o=e.getExtent(),u=0;return e.canWrapX()&&(r[0]<o[0]||r[0]>o[2])&&(n=n||(0,t.getWidth)(o),u=Math.floor((r[0]-o[0])/n)),u}
},{"./extent.js":"QDir","./math.js":"B96G","./string.js":"AiCK"}],"q4ER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_RADIUS=void 0,exports.getArea=s,exports.getDistance=a,exports.getLength=o,exports.offset=i;var t=require("./math.js"),e=6371008.8;function a(a,r,o){o=o||e;var n=(0,t.toRadians)(a[1]),s=(0,t.toRadians)(r[1]),i=(s-n)/2,h=(0,t.toRadians)(r[0]-a[0])/2,c=Math.sin(i)*Math.sin(i)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(s);return 2*o*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function r(t,e){for(var r=0,o=0,n=t.length;o<n-1;++o)r+=a(t[o],t[o+1],e);return r}function o(t,a){var n=(a=a||{}).radius||e,s=a.projection||"EPSG:3857",i=t.getType();"GeometryCollection"!==i&&(t=t.clone().transform(s,"EPSG:4326"));var h,c,g,M,l,u,f=0;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":f=r(h=t.getCoordinates(),n);break;case"MultiLineString":case"Polygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)f+=r(h[g],n);break;case"MultiPolygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)for(l=0,u=(c=h[g]).length;l<u;++l)f+=r(c[l],n);break;case"GeometryCollection":var d=t.getGeometries();for(g=0,M=d.length;g<M;++g)f+=o(d[g],a);break;default:throw new Error("Unsupported geometry type: "+i)}return f}function n(e,a){for(var r=0,o=e.length,n=e[o-1][0],s=e[o-1][1],i=0;i<o;i++){var h=e[i][0],c=e[i][1];r+=(0,t.toRadians)(h-n)*(2+Math.sin((0,t.toRadians)(s))+Math.sin((0,t.toRadians)(c))),n=h,s=c}return r*a*a/2}function s(t,a){var r=(a=a||{}).radius||e,o=a.projection||"EPSG:3857",i=t.getType();"GeometryCollection"!==i&&(t=t.clone().transform(o,"EPSG:4326"));var h,c,g,M,l,u,f=0;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(h=t.getCoordinates(),f=Math.abs(n(h[0],r)),g=1,M=h.length;g<M;++g)f-=Math.abs(n(h[g],r));break;case"MultiPolygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)for(c=h[g],f+=Math.abs(n(c[0],r)),l=1,u=c.length;l<u;++l)f-=Math.abs(n(c[l],r));break;case"GeometryCollection":var d=t.getGeometries();for(g=0,M=d.length;g<M;++g)f+=s(d[g],a);break;default:throw new Error("Unsupported geometry type: "+i)}return f}function i(a,r,o,n){n=n||e;var s=(0,t.toRadians)(a[1]),i=(0,t.toRadians)(a[0]),h=r/n,c=Math.asin(Math.sin(s)*Math.cos(h)+Math.cos(s)*Math.sin(h)*Math.cos(o)),g=i+Math.atan2(Math.sin(o)*Math.sin(h)*Math.cos(s),Math.cos(h)-Math.sin(s)*Math.sin(c));return[(0,t.toDegrees)(g),(0,t.toDegrees)(c)]}exports.DEFAULT_RADIUS=e;
},{"./math.js":"B96G"}],"n6up":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.error=a,exports.log=n,exports.setLevel=e,exports.warn=t;var r={info:1,warn:2,error:3,none:4},o=r.info;function e(e){o=r[e]}function n(...e){var n;o>r.info||(n=console).log.apply(n,e)}function t(...e){var n;o>r.warn||(n=console).warn.apply(n,e)}function a(...e){var n;o>r.error||(n=console).error.apply(n,e)}
},{}],"Diht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return o.METERS_PER_UNIT}}),Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return e.default}}),exports.addCommon=B,exports.addCoordinateTransforms=_,exports.addEquivalentProjections=m,exports.addEquivalentTransforms=T,exports.addProjection=x,exports.addProjections=P,exports.clearAllProjections=U,exports.clearUserProjection=b,exports.cloneTransform=g,exports.createProjection=R,exports.createSafeCoordinateTransform=z,exports.createTransformFromCoordinateTransform=S,exports.disableCoordinateWarning=l,exports.equivalent=q,exports.fromLonLat=h,exports.fromUserCoordinate=A,exports.fromUserExtent=D,exports.fromUserResolution=k,exports.get=v,exports.getPointResolution=j,exports.getTransform=I,exports.getTransformFromProjections=M,exports.getUserProjection=w,exports.identityTransform=E,exports.setUserProjection=W,exports.toLonLat=C,exports.toUserCoordinate=L,exports.toUserExtent=F,exports.toUserResolution=X,exports.transform=N,exports.transformExtent=O,exports.transformWithProjections=G,exports.useGeographic=J;var e=d(require("./proj/Projection.js")),r=require("./proj/epsg3857.js"),t=require("./proj/epsg4326.js"),o=require("./proj/Units.js"),n=require("./proj/projections.js"),i=require("./proj/transforms.js"),s=require("./extent.js"),u=require("./math.js"),a=require("./coordinate.js"),c=require("./sphere.js"),f=require("./console.js");function d(e){return e&&e.__esModule?e:{default:e}}var p=!0;function l(e){p=!(void 0===e||e)}function g(e,r){if(void 0!==r){for(var t=0,o=e.length;t<o;++t)r[t]=e[t];r=r}else r=e.slice();return r}function E(e,r){if(void 0!==r&&e!==r){for(var t=0,o=e.length;t<o;++t)r[t]=e[t];e=r}return e}function x(e){(0,n.add)(e.getCode(),e),(0,i.add)(e,e,g)}function P(e){e.forEach(x)}function v(e){return"string"==typeof e?(0,n.get)(e):e||null}function j(e,r,t,n){var i,s=(e=v(e)).getPointResolutionFunc();if(s){if(i=s(r,t),n&&n!==e.getUnits()){var u=e.getMetersPerUnit();u&&(i=i*u/o.METERS_PER_UNIT[n])}}else{var a=e.getUnits();if("degrees"==a&&!n||"degrees"==n)i=r;else{var f=M(e,v("EPSG:4326"));if(f===E&&"degrees"!==a)i=r*e.getMetersPerUnit();else{var d=[t[0]-r/2,t[1],t[0]+r/2,t[1],t[0],t[1]-r/2,t[0],t[1]+r/2];d=f(d,d,2),i=((0,c.getDistance)(d.slice(0,2),d.slice(2,4))+(0,c.getDistance)(d.slice(4,6),d.slice(6,8)))/2}var p=n?o.METERS_PER_UNIT[n]:e.getMetersPerUnit();void 0!==p&&(i/=p)}}return i}function m(e){P(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,i.add)(r,e,g)})})}function T(e,r,t,o){e.forEach(function(e){r.forEach(function(r){(0,i.add)(e,r,t),(0,i.add)(r,e,o)})})}function U(){(0,n.clear)(),(0,i.clear)()}function R(e,r){return e?"string"==typeof e?v(e):e:v(r)}function S(e){return function(r,t,o){var n=r.length;o=void 0!==o?o:2,t=void 0!==t?t:new Array(n);for(var i=0;i<n;i+=o)for(var s=e(r.slice(i,i+o)),u=s.length,a=0,c=o;a<c;++a)t[i+a]=a>=u?r[i+a]:s[a];return t}}function _(e,r,t,o){var n=v(e),s=v(r);(0,i.add)(n,s,S(t)),(0,i.add)(s,n,S(o))}function h(e,r){return l(),N(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function C(e,r){var t=N(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),o=t[0];return(o<-180||o>180)&&(t[0]=(0,u.modulo)(o+180,360)-180),t}function q(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:M(e,r)===g&&t}function M(e,r){var t=e.getCode(),o=r.getCode(),n=(0,i.get)(t,o);return n||(n=E),n}function I(e,r){return M(v(e),v(r))}function N(e,r,t){return I(r,t)(e,void 0,e.length)}function O(e,r,t,o){var n=I(r,t);return(0,s.applyTransform)(e,n,void 0,o)}function G(e,r,t){return M(r,t)(e)}var y=null;function W(e){y=v(e)}function b(){y=null}function w(){return y}function J(){W("EPSG:4326")}function L(e,r){return y?N(e,r,y):e}function A(e,r){return y?N(e,y,r):(p&&!(0,a.equals)(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(p=!1,(0,f.warn)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function F(e,r){return y?O(e,r,y):e}function D(e,r){return y?O(e,y,r):e}function X(e,r){if(!y)return e;var t=v(r).getUnits(),n=y.getUnits();return t&&n?e*o.METERS_PER_UNIT[t]/o.METERS_PER_UNIT[n]:e}function k(e,r){if(!y)return e;var t=v(r).getUnits(),n=y.getUnits();return t&&n?e*o.METERS_PER_UNIT[n]/o.METERS_PER_UNIT[t]:e}function z(e,r,t){return function(o){var n,i;if(e.canWrapX()){var c=e.getExtent(),f=(0,s.getWidth)(c);o=o.slice(0),(i=(0,a.getWorldsAway)(o,e,f))&&(o[0]=o[0]-i*f),o[0]=(0,u.clamp)(o[0],c[0],c[2]),o[1]=(0,u.clamp)(o[1],c[1],c[3]),n=t(o)}else n=t(o);return i&&r.canWrapX()&&(n[0]+=i*(0,s.getWidth)(r.getExtent())),n}}function B(){m(r.PROJECTIONS),m(t.PROJECTIONS),T(t.PROJECTIONS,r.PROJECTIONS,r.fromEPSG4326,r.toEPSG4326)}B();
},{"./proj/Projection.js":"WUar","./proj/epsg3857.js":"lohs","./proj/epsg4326.js":"ZniN","./proj/Units.js":"yZx6","./proj/projections.js":"tlE8","./proj/transforms.js":"uhlP","./extent.js":"QDir","./math.js":"B96G","./coordinate.js":"nGsj","./sphere.js":"q4ER","./console.js":"n6up"}],"LGwr":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){a=a||[];for(var f=0,s=t;s<e;s+=n){var l=r[s],u=r[s+1];a[f++]=o[0]*l+o[2]*u+o[4],a[f++]=o[1]*l+o[3]*u+o[5]}return a&&a.length!=f&&(a.length=f),a}function t(r,t,e,n,o,a,f){f=f||[];for(var s=Math.cos(o),l=Math.sin(o),u=a[0],v=a[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;f[h++]=u+g*s-i*l,f[h++]=v+g*l+i*s;for(var p=c+2;p<c+n;++p)f[h++]=r[p]}return f&&f.length!=h&&(f.length=h),f}function e(r,t,e,n,o,a,f,s){s=s||[];for(var l=f[0],u=f[1],v=0,h=t;h<e;h+=n){var c=r[h]-l,g=r[h+1]-u;s[v++]=l+o*c,s[v++]=u+a*g;for(var i=h+2;i<h+n;++i)s[v++]=r[i]}return s&&s.length!=v&&(s.length=v),s}function n(r,t,e,n,o,a,f){f=f||[];for(var s=0,l=t;l<e;l+=n){f[s++]=r[l]+o,f[s++]=r[l+1]+a;for(var u=l+2;u<l+n;++u)f[s++]=r[u]}return f&&f.length!=s&&(f.length=s),f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotate=t,exports.scale=e,exports.transform2D=r,exports.translate=n;
},{}],"F8sI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../Object.js")),e=require("../util.js"),r=require("../transform.js"),n=require("../extent.js"),o=require("../proj.js"),i=require("../functions.js"),u=require("./flat/transform.js");function a(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=p(t,"string");return"symbol"===c(e)?e:String(e)}function p(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=g();return function(){var r,n=j(t);if(e){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=(0,r.create)(),O=function(a){m(f,t.default);var c=b(f);function f(){var t;return s(this,f),(t=c.call(this)).extent_=(0,n.createEmpty)(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=(0,i.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)}),t}return l(f,[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return(0,e.abstract)()}},{key:"closestPointXY",value:function(t,r,n,o){return(0,e.abstract)()}},{key:"containsXY",value:function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return(0,e.abstract)()}},{key:"getExtent",value:function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&(0,n.createOrUpdateEmpty)(e),this.extentRevision_=this.getRevision()}return(0,n.returnOrUpdate)(this.extent_,t)}},{key:"rotate",value:function(t,r){(0,e.abstract)()}},{key:"scale",value:function(t,r,n){(0,e.abstract)()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return(0,e.abstract)()}},{key:"getType",value:function(){return(0,e.abstract)()}},{key:"applyTransform",value:function(t){(0,e.abstract)()}},{key:"intersectsExtent",value:function(t){return(0,e.abstract)()}},{key:"translate",value:function(t,r){(0,e.abstract)()}},{key:"transform",value:function(t,e){var i=(0,o.get)(t),a="tile-pixels"==i.getUnits()?function(t,a,c){var s=i.getExtent(),f=i.getWorldExtent(),l=(0,n.getHeight)(f)/(0,n.getHeight)(s);return(0,r.compose)(x,f[0],f[3],l,-l,0,0,0),(0,u.transform2D)(t,0,t.length,c,x,a),(0,o.getTransform)(i,e)(t,a,c)}:(0,o.getTransform)(i,e);return this.applyTransform(a),this}}]),f}(),k=O;exports.default=k;
},{"../Object.js":"PhPh","../util.js":"KniQ","../transform.js":"P4eA","../extent.js":"QDir","../proj.js":"Diht","../functions.js":"RgA2","./flat/transform.js":"LGwr"}],"pnrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getStrideForLayout=C,exports.transformGeom2D=S;var t=i(require("./Geometry.js")),e=require("../util.js"),r=require("../extent.js"),n=require("./flat/transform.js");function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function s(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(i){c(u,t.default);var o=y(u);function u(){var t;return a(this,u),(t=o.call(this)).layout="XY",t.stride=2,t.flatCoordinates=null,t}return s(u,[{key:"computeExtent",value:function(t){return(0,r.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return(0,e.abstract)()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=C(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,r){(0,e.abstract)()}},{key:"setLayout",value:function(t,e,r){var n;if(t)n=C(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=b(n=e.length)}this.layout=t,this.stride=n}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.rotate)(r,0,r.length,i,t,e,r),this.changed()}}},{key:"scale",value:function(t,e,i){void 0===e&&(e=t),i||(i=(0,r.getCenter)(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();(0,n.scale)(o,0,o.length,a,t,e,i,o),this.changed()}}},{key:"translate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.translate)(r,0,r.length,i,t,e,r),this.changed()}}}]),u}();function b(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function C(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function S(t,e,r){var i=t.getFlatCoordinates();if(!i)return null;var o=t.getStride();return(0,n.transform2D)(i,0,i.length,o,e,r)}var j=m;exports.default=j;
},{"./Geometry.js":"F8sI","../util.js":"KniQ","../extent.js":"QDir","./flat/transform.js":"LGwr"}],"rMra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayMaxSquaredDelta=a,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i,exports.assignClosestPoint=s,exports.maxSquaredDelta=t,exports.multiArrayMaxSquaredDelta=n;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(var N=0;N<n;++N)i[N]=e[u+N];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}h=h||[NaN,NaN];for(var N=a+s;N<n;)if(e(t,N-s,N,s,u,f,h),(c=(0,r.squaredDistance)(u,f,h[0],h[1]))<v){for(v=c,g=0;g<s;++g)l[g]=h[g];l.length=s,N+=s}else N+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,h),(c=(0,r.squaredDistance)(u,f,h[0],h[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=h[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){v=v||[NaN,NaN];for(var h=0,g=t.length;h<g;++h){var c=t[h];l=s(r,e,c,a,n,o,i,u,f,l,v),e=c}return l}function i(r,e,t,a,n,s,i,u,f,l,v){v=v||[NaN,NaN];for(var h=0,g=t.length;h<g;++h){var c=t[h];l=o(r,e,c,a,n,s,i,u,f,l,v),e=c[c.length-1]}return l}
},{"../../math.js":"B96G"}],"FNhl":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var l=t[o],f=0;f<n;++f)e[r++]=l[f];return r}function t(e,t,n,o,a){a=a||[];for(var l=0,f=0,u=n.length;f<u;++f){var i=r(e,t,n[f],o);a[l++]=i,t=i}return a.length=l,a}function n(e,r,n,o,a){a=a||[];for(var l=0,f=0,u=n.length;f<u;++f){var i=t(e,r,n[f],o,a[l]);0===i.length&&(i[0]=r),a[l++]=i,r=i[i.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"IEpt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f,exports.radialDistance=a,exports.simplifyLineString=e,exports.snap=o;var r=require("../../math.js");function e(r,e,n,u,o,i,s){return s=void 0!==s?s:[],i||(n=a(r,e,n,u,o,s,0),r=s,e=0,u=2),s.length=t(r,e,n,u,o,s,0),s}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(var k=0;k<s;++k)f[k]&&(o[i++]=e[t+k*u],o[i++]=e[t+k*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"B96G"}],"znXl":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){o=void 0!==o?o:[];for(var i=0,a=r;a<t;a+=n)o[i++]=e.slice(a,a+n);return o.length=i,o}function r(r,t,n,o,i){i=void 0!==i?i:[];for(var a=0,l=0,s=n.length;l<s;++l){var f=n[l];i[a++]=e(r,t,f,o,i[a]),t=f}return i.length=a,i}function t(e,t,n,o,i){i=void 0!==i?i:[];for(var a=0,l=0,s=n.length;l<s;++l){var f=n[l];i[a++]=1===f.length&&f[0]===t?[]:r(e,t,f,o,i[a]),t=f[f.length-1]}return i.length=a,i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"EOSm":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"jRgU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./SimpleGeometry.js")),e=require("./flat/closest.js"),r=require("../extent.js"),n=require("./flat/deflate.js"),o=require("./flat/simplify.js"),i=require("./flat/inflate.js"),a=require("./flat/area.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function c(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=d(t,"string");return"symbol"===u(e)?e:String(e)}function d(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=g();return function(){var r,n=C(t);if(e){var o=C(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(s){h(f,t.default);var u=v(f);function f(t,e){var r;return l(this,f),(r=u.call(this)).maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?r.setCoordinates(t,e):r.setFlatCoordinates(e,t),r}return c(f,[{key:"clone",value:function(){return new f(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,n,o,i){return i<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,e.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,e.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,o,i))}},{key:"getArea",value:function(){return(0,a.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return(0,i.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=(0,o.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new f(e,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),f}(),_=j;exports.default=_;
},{"./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","./flat/inflate.js":"znXl","./flat/area.js":"EOSm"}],"gLcY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./SimpleGeometry.js")),e=require("../extent.js"),r=require("./flat/deflate.js"),n=require("../math.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function f(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=s(t,"string");return"symbol"===i(e)?e:String(e)}function s(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(o){l(a,t.default);var i=p(a);function a(t,e){var r;return u(this,a),(r=i.call(this)).setCoordinates(t,e),r}return f(a,[{key:"clone",value:function(){var t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,o){var i=this.flatCoordinates,u=(0,n.squaredDistance)(t,e,i[0],i[1]);if(u<o){for(var a=this.stride,f=0;f<a;++f)r[f]=i[f];return r.length=a,u}return o}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(t){return(0,e.createOrUpdateFromCoordinate)(this.flatCoordinates,t)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return(0,e.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),a}(),j=m;exports.default=j;
},{"./SimpleGeometry.js":"pnrv","../extent.js":"QDir","./flat/deflate.js":"FNhl","../math.js":"B96G"}],"dzdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"QDir"}],"UDvN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("../../array.js"),e=require("./contains.js");function t(t,n,a,o,s,i,u){for(var f,g,l,v,h,c,p,y=s[i+1],N=[],d=0,j=a.length;d<j;++d){var x=a[d];for(v=t[x-o],c=t[x-o+1],f=n;f<x;f+=o)h=t[f],p=t[f+1],(y<=c&&p<=y||c<=y&&y<=p)&&(l=(y-c)/(p-c)*(h-v)+v,N.push(l)),v=h,c=p}var M=NaN,O=-1/0;for(N.sort(r.ascending),v=N[0],f=1,g=N.length;f<g;++f){h=N[f];var P=Math.abs(h-v);P>O&&(l=(v+h)/2,(0,e.linearRingsContainsXY)(t,n,a,o,l,y)&&(M=l,O=P)),v=h}return isNaN(M)&&(M=s[i]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var s=[],i=0,u=n.length;i<u;++i){var f=n[i];s=t(r,e,f,a,o,2*i,s),e=f[f.length-1]}return s}
},{"../../array.js":"luEr","./contains.js":"dzdN"}],"U8i0":[function(require,module,exports) {
"use strict";function e(e,r,t,o,s){var c;for(r+=o;r<t;r+=o)if(c=s(e.slice(r-o,r),e.slice(r,r+o)))return c;return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"GZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./segments.js"),r=require("./contains.js");function t(r,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),r,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,e.forEach)(r,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,e,i,s,a){return!!t(n,e,i,s,a)||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[1])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[3])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[1])||!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[3]))))}function a(n,e,i,a,o){if(!s(n,e,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,r.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"QDir","./segments.js":"U8i0","./contains.js":"dzdN"}],"ElTe":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"cJkE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateEnds=s,exports.linearRingIsClockwise=e,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("./reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var u=r[e],a=r[e+1];i+=(u-o)*(a+s),o=u,s=a}return 0===i?void 0:i>0}function n(r,n,t,i,o){o=void 0!==o&&o;for(var s=0,u=t.length;s<u;++s){var a=t[s],f=e(r,n,a,i);if(0===s){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=a}return!0}function t(r,e,t,i,o){for(var s=0,u=t.length;s<u;++s){var a=t[s];if(!n(r,e,a,i,o))return!1;a.length&&(e=a[a.length-1])}return!0}function i(n,t,i,o,s){s=void 0!==s&&s;for(var u=0,a=i.length;u<a;++u){var f=i[u],l=e(n,t,f,o);(0===u?s&&l||!s&&!l:s&&!l||!s&&l)&&(0,r.coordinates)(n,t,f,o),t=f}return t}function o(r,e,n,t,o){for(var s=0,u=n.length;s<u;++s)e=i(r,e,n[s],t,o);return e}function s(r,n){for(var t=[],i=0,o=0,s=0,u=n.length;s<u;++s){var a=n[s];if(e(r,i,a,2)){if(0===t.length)continue;t[t.length-1].push(n[o])}else t.push(n.slice(o,s+1));o=s+1,i=a}return t}
},{"./reverse.js":"ElTe"}],"Nwwk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=I,exports.default=void 0,exports.fromCircle=L,exports.fromExtent=E,exports.makeRegular=M;var t=v(require("./LinearRing.js")),e=v(require("./Point.js")),n=v(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),i=require("../extent.js"),o=require("./flat/deflate.js"),s=require("../array.js"),a=require("./flat/interiorpoint.js"),l=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),d=require("./flat/area.js"),h=require("./flat/contains.js"),c=require("../math.js"),y=require("./flat/simplify.js"),g=require("../sphere.js");function v(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function m(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t){var e=R(t,"string");return"symbol"===p(e)?e:String(e)}function R(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}function P(t,e){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=q();return function(){var n,r=k(t);if(e){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return O(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(c){j(v,n.default);var g=w(v);function v(t,e,n){var r;return _(this,v),(r=g.call(this)).ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==e&&n?(r.setFlatCoordinates(e,t),r.ends_=n):r.setCoordinates(t,e),r}return m(v,[{key:"appendLinearRing",value:function(t){this.flatCoordinates?(0,s.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new v(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,o){return o<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))}},{key:"containsXY",value:function(t,e){return(0,h.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return(0,d.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,l.inflateCoordinatesArray)(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,i.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,a.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new e.default(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(e){return e<0||this.ends_.length<=e?null:new t.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLinearRings",value:function(){for(var e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[],o=0,s=0,a=r.length;s<a;++s){var l=r[s],u=new t.default(n.slice(o,l),e);i.push(u),o=l}return i}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],n=[];return e.length=(0,y.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new v(e,"XY",n)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=(0,o.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}]),v}(),S=F;function I(t,e,n,r){n=n||32;for(var i=[],o=0;o<n;++o)(0,s.extend)(i,(0,g.offset)(t,e,2*Math.PI*o/n,r));return i.push(i[0],i[1]),new F(i,"XY",[i.length])}function E(t){if((0,i.isEmpty)(t))throw new Error("Cannot create polygon from empty extent");var e=t[0],n=t[1],r=t[2],o=t[3],s=[e,n,e,o,r,o,r,n,e,n];return new F(s,"XY",[s.length])}function L(t,e,n){e=e||32;for(var r=t.getStride(),i=t.getLayout(),o=t.getCenter(),s=r*(e+1),a=new Array(s),l=0;l<s;l+=r){a[l]=0,a[l+1]=0;for(var u=2;u<r;u++)a[l+u]=o[u]}var f=[a.length],d=new F(a,i,f);return M(d,o,t.getRadius(),n),d}function M(t,e,n,r){for(var i=t.getFlatCoordinates(),o=t.getStride(),s=i.length/o-1,a=r||0,l=0;l<=s;++l){var u=l*o,f=a+2*(0,c.modulo)(l,s)*Math.PI/s;i[u]=e[0]+n*Math.cos(f),i[u+1]=e[1]+n*Math.sin(f)}t.changed()}exports.default=S;
},{"./LinearRing.js":"jRgU","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","../array.js":"luEr","./flat/interiorpoint.js":"UDvN","./flat/inflate.js":"znXl","./flat/intersectsextent.js":"GZir","./flat/orient.js":"cJkE","./flat/area.js":"EOSm","./flat/contains.js":"dzdN","../math.js":"B96G","./flat/simplify.js":"IEpt","../sphere.js":"q4ER"}],"X4ix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GeolocationError=void 0;var t=o(require("./events/Event.js")),e=o(require("./Object.js")),n=require("./geom/Polygon.js"),r=require("./proj.js"),i=require("./math.js");function o(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=u(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=h(t,"string");return"symbol"===c(e)?e:String(e)}function h(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=T();return function(){var n,r=_(t);if(e){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return O(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},b={ERROR:"error"},A=function(e){d(r,t.default);var n=y(r);function r(t){var e;return p(this,r),(e=n.call(this,b.ERROR)).code=t.code,e.message=t.message,e}return l(r)}();exports.GeolocationError=A;var E=function(t){d(c,e.default);var o=y(c);function c(t){var e;return p(this,c),(e=o.call(this)).on,e.once,e.un,t=t||{},e.position_=null,e.transform_=r.identityTransform,e.watchId_=void 0,e.addChangeListener(C.PROJECTION,e.handleProjectionChanged_),e.addChangeListener(C.TRACKING,e.handleTrackingChanged_),void 0!==t.projection&&e.setProjection(t.projection),void 0!==t.trackingOptions&&e.setTrackingOptions(t.trackingOptions),e.setTracking(void 0!==t.tracking&&t.tracking),e}return l(c,[{key:"disposeInternal",value:function(){this.setTracking(!1),a(_(c.prototype),"disposeInternal",this).call(this)}},{key:"handleProjectionChanged_",value:function(){var t=this.getProjection();t&&(this.transform_=(0,r.getTransformFromProjections)((0,r.get)("EPSG:4326"),t),this.position_&&this.set(C.POSITION,this.transform_(this.position_)))}},{key:"handleTrackingChanged_",value:function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}},{key:"positionChange_",value:function(t){var e=t.coords;this.set(C.ACCURACY,e.accuracy),this.set(C.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(C.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(C.HEADING,null===e.heading?void 0:(0,i.toRadians)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(C.POSITION,r.slice()),this.set(C.SPEED,null===e.speed?void 0:e.speed);var o=(0,n.circular)(this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(C.ACCURACY_GEOMETRY,o),this.changed()}},{key:"positionError_",value:function(t){this.dispatchEvent(new A(t))}},{key:"getAccuracy",value:function(){return this.get(C.ACCURACY)}},{key:"getAccuracyGeometry",value:function(){return this.get(C.ACCURACY_GEOMETRY)||null}},{key:"getAltitude",value:function(){return this.get(C.ALTITUDE)}},{key:"getAltitudeAccuracy",value:function(){return this.get(C.ALTITUDE_ACCURACY)}},{key:"getHeading",value:function(){return this.get(C.HEADING)}},{key:"getPosition",value:function(){return this.get(C.POSITION)}},{key:"getProjection",value:function(){return this.get(C.PROJECTION)}},{key:"getSpeed",value:function(){return this.get(C.SPEED)}},{key:"getTracking",value:function(){return this.get(C.TRACKING)}},{key:"getTrackingOptions",value:function(){return this.get(C.TRACKING_OPTIONS)}},{key:"setProjection",value:function(t){this.set(C.PROJECTION,(0,r.get)(t))}},{key:"setTracking",value:function(t){this.set(C.TRACKING,t)}},{key:"setTrackingOptions",value:function(t){this.set(C.TRACKING_OPTIONS,t)}}]),c}(),I=E;exports.default=I;
},{"./events/Event.js":"fKNg","./Object.js":"PhPh","./geom/Polygon.js":"Nwwk","./proj.js":"Diht","./math.js":"B96G"}],"z39m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"AFcg":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o(t,r){for(var o=0;o<r.length;o++){var e=r[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,n(e.key),e)}}function e(t,r,e){return r&&o(t.prototype,r),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(r){var o=i(r,"string");return"symbol"===t(o)?o:String(o)}function i(r,o){if("object"!==t(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,o||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(o){r(this,t),o=o||{},this.color_=void 0!==o.color?o.color:null}return e(t,[{key:"clone",value:function(){var r=this.getColor();return new t({color:Array.isArray(r)?r.slice():r||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(t){this.color_=t}}]),t}(),l=u;exports.default=l;
},{}],"rDTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a,f){var o,s,v=(i-t)/l;if(1===v)o=t;else if(2===v)o=t,s=u;else if(0!==v){for(var c=n[t],p=n[t+1],h=0,d=[0],g=t+l;g<i;g+=l){var x=n[g],y=n[g+1];h+=Math.sqrt((x-c)*(x-c)+(y-p)*(y-p)),d.push(h),c=x,p=y}var M=u*h,j=(0,r.binarySearch)(d,M);j<0?(s=(M-d[-j-2])/(d[-j-1]-d[-j-2]),o=t+(-j-2)*l):o=t+j*l}f=f>1?f:2,a=a||new Array(f);for(var q=0;q<f;++q)a[q]=void 0===o?NaN:void 0===s?n[o+q]:(0,e.lerp)(n[o+q],n[o+l+q],s);return a}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,o=t/i;f<o;){var s=f+o>>1;l<r[(s+1)*i-1]?o=s:f=s+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var o=0,s=n.length;o<s;++o){var v=n[o];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"luEr","../../math.js":"B96G"}],"ZZrx":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"DfxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./SimpleGeometry.js")),e=require("./flat/closest.js"),i=require("../extent.js"),n=require("./flat/deflate.js"),r=require("./flat/simplify.js"),o=require("../array.js"),s=require("./flat/segments.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/length.js");function c(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function p(t,e,i){return e&&y(t.prototype,e),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t){var e=g(t,"string");return"symbol"===h(e)?e:String(e)}function g(t,e){if("object"!==h(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function C(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=S();return function(){var i,n=x(t);if(e){var r=x(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return j(this,i)}}function j(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(c){C(y,t.default);var h=m(y);function y(t,e){var i;return d(this,y),(i=h.call(this)).flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?i.setCoordinates(t,e):i.setFlatCoordinates(e,t),i}return p(y,[{key:"appendCoordinate",value:function(t){this.flatCoordinates?(0,o.extend)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}},{key:"clone",value:function(){var t=new y(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,n,r,o){return o<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,e.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,e.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,r,o))}},{key:"forEachSegment",value:function(t){return(0,s.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinateAtM",value:function(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}},{key:"getCoordinates",value:function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}},{key:"getLength",value:function(){return(0,f.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=(0,r.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new y(e,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),y}(),w=P;exports.default=w;
},{"./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","../array.js":"luEr","./flat/segments.js":"U8i0","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir","./flat/length.js":"ZZrx"}],"TXDt":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t){var i=r(t,"string");return"symbol"===e(i)?i:String(i)}function r(t,i){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,i||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function(){function e(i){t(this,e),i=i||{},this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return n(e,[{key:"clone",value:function(){var t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(e){this.color_=e}},{key:"setLineCap",value:function(e){this.lineCap_=e}},{key:"setLineDash",value:function(e){this.lineDash_=e}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset_=e}},{key:"setLineJoin",value:function(e){this.lineJoin_=e}},{key:"setMiterLimit",value:function(e){this.miterLimit_=e}},{key:"setWidth",value:function(e){this.width_=e}}]),e}(),l=s;exports.default=l;
},{}],"u3kG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"TAHd":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"S8ow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=require("../size.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){var e=u(t,"string");return"symbol"===i(e)?e:String(e)}function u(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var c=function(){function i(t){n(this,i),this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,e.toSize)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}return a(i,[{key:"clone",value:function(){var t=this.getScale();return new i({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return(0,t.abstract)()}},{key:"getImage",value:function(e){return(0,t.abstract)()}},{key:"getHitDetectionImage",value:function(){return(0,t.abstract)()}},{key:"getPixelRatio",value:function(t){return 1}},{key:"getImageState",value:function(){return(0,t.abstract)()}},{key:"getImageSize",value:function(){return(0,t.abstract)()}},{key:"getOrigin",value:function(){return(0,t.abstract)()}},{key:"getSize",value:function(){return(0,t.abstract)()}},{key:"setDisplacement",value:function(t){this.displacement_=t}},{key:"setOpacity",value:function(t){this.opacity_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(t)}},{key:"listenImageChange",value:function(e){(0,t.abstract)()}},{key:"load",value:function(){(0,t.abstract)()}},{key:"unlistenImageChange",value:function(e){(0,t.abstract)()}}]),i}(),l=c;exports.default=l;
},{"../util.js":"KniQ","../size.js":"TAHd"}],"eucy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asArray=i,exports.asString=a,exports.fromString=void 0,exports.isStringColor=l,exports.normalize=p,exports.toString=c;var r=require("./asserts.js"),t=require("./math.js"),e=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(r){return"string"==typeof r?r:c(r)}function n(r){var t=document.createElement("div");if(t.style.color=r,""!==t.style.color){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}var o=function(){var r={},t=0;return function(e){var s;if(r.hasOwnProperty(e))s=r[e];else{if(t>=1024){var a=0;for(var n in r)0==(3&a++)&&(delete r[n],--t)}s=u(e),r[e]=s,++t}return s}}();function i(r){return Array.isArray(r)?r:o(r)}function u(t){var a,o,i,u,c;if(s.exec(t)&&(t=n(t)),e.exec(t)){var l,f=t.length-1;l=f<=4?1:2;var v=4===f||8===f;a=parseInt(t.substr(1+0*l,l),16),o=parseInt(t.substr(1+1*l,l),16),i=parseInt(t.substr(1+2*l,l),16),u=v?parseInt(t.substr(1+3*l,l),16):255,1==l&&(a=(a<<4)+a,o=(o<<4)+o,i=(i<<4)+i,v&&(u=(u<<4)+u)),c=[a,o,i,u/255]}else t.startsWith("rgba(")?p(c=t.slice(5,-1).split(",").map(Number)):t.startsWith("rgb(")?((c=t.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,t.clamp)(r[0]+.5|0,0,255),r[1]=(0,t.clamp)(r[1]+.5|0,0,255),r[2]=(0,t.clamp)(r[2]+.5|0,0,255),r[3]=(0,t.clamp)(r[3],0,1),r}function c(r){var t=r[0];t!=(0|t)&&(t=t+.5|0);var e=r[1];e!=(0|e)&&(e=e+.5|0);var s=r[2];return s!=(0|s)&&(s=s+.5|0),"rgba("+t+","+e+","+s+","+(void 0===r[3]?1:Math.round(100*r[3])/100)+")"}function l(r){return s.test(r)&&(r=n(r)),e.test(r)||r.startsWith("rgba(")||r.startsWith("rgb(")}exports.fromString=o;
},{"./asserts.js":"fLG6","./math.js":"B96G"}],"V5XN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"eucy"}],"Xno5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerHeight=o,exports.outerWidth=n,exports.releaseCanvas=r,exports.removeChildren=s,exports.removeNode=i,exports.replaceChildren=d,exports.replaceNode=a;var e=require("./has.js");function t(t,r,n,o){var a;return a=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas"),t&&(a.width=t),r&&(a.height=r),a.getContext("2d",o)}function r(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function n(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function o(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function a(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function i(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function s(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function d(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],a=t[n];if(!o&&!a)break;o!==a&&(o?a?e.insertBefore(a,o):(e.removeChild(o),--n):e.appendChild(a))}}
},{"./has.js":"f3Nv"}],"HgMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=exports.CLASS_CONTROL=exports.CLASS_COLLAPSED=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var r="ol-selectable";exports.CLASS_SELECTABLE=r;var t="ol-unselectable";exports.CLASS_UNSELECTABLE=t;var s="ol-unsupported";exports.CLASS_UNSUPPORTED=s;var l="ol-control";exports.CLASS_CONTROL=l;var a="ol-collapsed";exports.CLASS_COLLAPSED=a;var o=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),S=["style","variant","weight","size","lineHeight","family"],i=function(e){var r=e.match(o);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},s=0,l=S.length;s<l;++s){var a=r[s+1];void 0!==a&&(t[S[s]]=a)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"iAG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultPadding=exports.defaultMiterLimit=exports.defaultLineWidth=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFont=exports.defaultFillStyle=exports.checkedFonts=void 0,exports.drawImageOrLabel=j,exports.getTextDimensions=M,exports.measureAndCacheTextWidth=H,exports.measureTextHeight=void 0,exports.measureTextWidth=A,exports.registerFont=void 0,exports.rotateAtOffset=C,exports.textHeights=void 0;var e=s(require("../Object.js")),t=require("../has.js"),r=require("../obj.js"),a=require("../dom.js"),n=require("../css.js");function s(e){return e&&e.__esModule?e:{default:e}}var o="10px sans-serif";exports.defaultFont=o;var i="#000";exports.defaultFillStyle=i;var l="round";exports.defaultLineCap=l;var u=[];exports.defaultLineDash=u;var d=0;exports.defaultLineDashOffset=d;var f="round";exports.defaultLineJoin=f;var p=10;exports.defaultMiterLimit=p;var x="#000";exports.defaultStrokeStyle=x;var v="center";exports.defaultTextAlign=v;var h="middle";exports.defaultTextBaseline=h;var c=[0,0,0,0];exports.defaultPadding=c;var g=1;exports.defaultLineWidth=g;var m=new e.default;exports.checkedFonts=m;var y,L=null,T={};exports.textHeights=T;var b=function(){var e,t,a=100,s="32px ",o=["monospace","serif"],i=o.length,l="wmytzilWMYTZIL@#/&?$%10";function u(e,r,a){for(var n=!0,u=0;u<i;++u){var d=o[u];if(t=A(e+" "+r+" "+s+d,l),a!=d){var f=A(e+" "+r+" "+s+a+","+d,l);n=n&&f!=t}}return!!n}function d(){for(var t=!0,n=m.getKeys(),s=0,o=n.length;s<o;++s){var i=n[s];m.get(i)<a&&(u.apply(this,i.split("\n"))?((0,r.clear)(T),L=null,y=void 0,m.set(i,a)):(m.set(i,m.get(i)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=(0,n.getFontParameters)(t);if(r)for(var s=r.families,o=0,i=s.length;o<i;++o){var l=s[o],f=r.style+"\n"+r.weight+"\n"+l;void 0===m.get(f)&&(m.set(f,a,!0),u(r.style,r.weight,l)||(m.set(f,0,!0),void 0===e&&(e=setInterval(d,32))))}}}();exports.registerFont=b;var F=function(){var e;return function(r){var a=T[r];if(null==a){if(t.WORKER_OFFSCREEN_CANVAS){var s=(0,n.getFontParameters)(r),o=w(r,"g");a=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=r,document.body.appendChild(e),a=e.offsetHeight,document.body.removeChild(e);T[r]=a}return a}}();function w(e,t){return L||(L=(0,a.createCanvasContext2D)(1,1)),e!=y&&(L.font=e,y=L.font),L.measureText(t)}function A(e,t){return w(e,t).width}function H(e,t,r){if(t in r)return r[t];var a=t.split("\n").reduce(function(t,r){return Math.max(t,A(e,r))},0);return r[t]=a,a}function M(e,t){for(var r=[],a=[],n=[],s=0,o=0,i=0,l=0,u=0,d=t.length;u<=d;u+=2){var f=t[u];if("\n"!==f&&u!==d){var p=t[u+1]||e.font,x=A(p,f);r.push(x),o+=x;var v=F(p);a.push(v),l=Math.max(l,v)}else s=Math.max(s,o),n.push(o),o=0,i+=l}return{width:s,height:i,widths:r,heights:a,lineWidths:n}}function C(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}function j(e,t,r,a,n,s,o,i,l,u,d){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.setTransform.apply(e,t),a.contextInstructions?(e.translate(l,u),e.scale(d[0],d[1]),I(a,e)):d[0]<0||d[1]<0?(e.translate(l,u),e.scale(d[0],d[1]),e.drawImage(a,n,s,o,i,0,0,o,i)):e.drawImage(a,n,s,o,i,l,u,o*d[0],i*d[1]),e.restore()}function I(e,t){for(var r=e.contextInstructions,a=0,n=r.length;a<n;a+=2)Array.isArray(r[a+1])?t[r[a]].apply(t,r[a+1]):t[r[a]]=r[a+1]}exports.measureTextHeight=F;
},{"../Object.js":"PhPh","../has.js":"f3Nv","../obj.js":"mH6q","../dom.js":"Xno5","../css.js":"HgMV"}],"il3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../ImageState.js")),e=s(require("./Image.js")),i=require("../color.js"),r=require("../colorlike.js"),n=require("../dom.js"),o=require("../render/canvas.js");function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function c(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t){var e=f(t,"string");return"symbol"===a(e)?e:String(e)}function f(t,e){if("object"!==a(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=p();return function(){var i,r=k(t);if(e){var n=k(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return _(this,i)}}function _(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(s){v(u,e.default);var a=y(u);function u(t){var e;l(this,u);var i=void 0!==t.rotateWithView&&t.rotateWithView;return(e=a.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})).canvas_=void 0,e.hitDetectionCanvas_=null,e.fill_=void 0!==t.fill?t.fill:null,e.origin_=[0,0],e.points_=t.points,e.radius_=void 0!==t.radius?t.radius:t.radius1,e.radius2_=t.radius2,e.angle_=void 0!==t.angle?t.angle:0,e.stroke_=void 0!==t.stroke?t.stroke:null,e.size_=null,e.renderOptions_=null,e.render(),e}return c(u,[{key:"clone",value:function(){var t=this.getScale(),e=new u({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"getAnchor",value:function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}},{key:"getImage",value:function(t){var e=this.canvas_[t];if(!e){var i=this.renderOptions_,r=(0,n.createCanvasContext2D)(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvas_[t]=e}return e}},{key:"getPixelRatio",value:function(t){return t}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return t.default.LOADED}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t,this.render()}},{key:"listenImageChange",value:function(t){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(t){}},{key:"calculateLineJoinSize_",value:function(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.radius_,n=void 0===this.radius2_?r:this.radius2_;if(r<n){var o=r;r=n,n=o}var s=void 0===this.radius2_?this.points_:2*this.points_,a=2*Math.PI/s,l=n*Math.sin(a),u=r-Math.sqrt(n*n-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if("miter"===t&&h<=i)return h*e;var f=e/2/h,v=e/2*(u/c),d=Math.sqrt((r+f)*(r+f)+v*v)-r;if(void 0===this.radius2_||"bevel"===t)return 2*d;var y=r*Math.sin(a),_=n-Math.sqrt(r*r-y*y),g=Math.sqrt(y*y+_*_)/y;if(g<=i){var p=g*e/2-n-r;return 2*Math.max(d,p)}return 2*d}},{key:"createRenderOptions",value:function(){var t,e=o.defaultLineJoin,i=0,n=null,s=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=o.defaultStrokeStyle),t=(0,r.asColorLike)(t),void 0===(a=this.stroke_.getWidth())&&(a=o.defaultLineWidth),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=o.defaultLineJoin),void 0===(i=this.stroke_.getMiterLimit())&&(i=o.defaultMiterLimit));var l=this.calculateLineJoinSize_(e,a,i),u=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*u+l),lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:i}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}},{key:"draw_",value:function(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n=o.defaultFillStyle),e.fillStyle=(0,r.asColorLike)(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},{key:"createHitDetectionCanvas_",value:function(t){if(this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=(0,i.asArray)(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var o=(0,n.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}},{key:"createPath_",value:function(t){var e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var n=this.angle_-Math.PI/2,o=2*Math.PI/e,s=0;s<e;s++){var a=n+s*o,l=s%2==0?i:r;t.lineTo(l*Math.cos(a),l*Math.sin(a))}t.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=o.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}]),u}(),b=m;exports.default=b;
},{"../ImageState.js":"u3kG","./Image.js":"S8ow","../color.js":"eucy","../colorlike.js":"V5XN","../dom.js":"Xno5","../render/canvas.js":"iAG7"}],"cdf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=c(t,"string");return"symbol"===r(e)?e:String(e)}function c(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=y();return function(){var r,o=d(t);if(e){var n=d(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return f(this,r)}}function f(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){l(n,t.default);var r=s(n);function n(t){return o(this,n),t=t||{radius:5},r.call(this,{points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}return i(n,[{key:"clone",value:function(){var t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"setRadius",value:function(t){this.radius_=t,this.render()}}]),n}(),h=b;exports.default=h;
},{"./RegularShape.js":"il3X"}],"he4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultStyle=d,exports.createEditingStyle=h,exports.default=void 0,exports.toFunction=y;var e=i(require("./Circle.js")),t=i(require("./Fill.js")),n=i(require("./Stroke.js")),r=require("../asserts.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===o(t)?t:String(t)}function f(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var a=function(){function e(t){u(this,e),t=t||{},this.geometry_=null,this.geometryFunction_=v,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return s(e,[{key:"clone",value:function(){var t=this.getGeometry();return t&&"object"===o(t)&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(e){this.renderer_=e}},{key:"setHitDetectionRenderer",value:function(e){this.hitDetectionRenderer_=e}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(e){this.text_=e}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=v,this.geometry_=e}},{key:"setZIndex",value:function(e){this.zIndex_=e}}]),e}();function y(e){var t;if("function"==typeof e)t=e;else{var n;if(Array.isArray(e))n=e;else(0,r.assert)("function"==typeof e.getZIndex,41),n=[e];t=function(){return n}}return t}var g=null;function d(r,i){if(!g){var o=new t.default({color:"rgba(255,255,255,0.4)"}),u=new n.default({color:"#3399CC",width:1.25});g=[new a({image:new e.default({fill:o,stroke:u,radius:5}),fill:o,stroke:u})]}return g}function h(){var r={},i=[255,255,255,1],o=[0,153,255,1];return r.Polygon=[new a({fill:new t.default({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new a({stroke:new n.default({color:i,width:5})}),new a({stroke:new n.default({color:o,width:3})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new a({image:new e.default({radius:6,fill:new t.default({color:o}),stroke:new n.default({color:i,width:1.5})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function v(e){return e.getGeometry()}var m=a;exports.default=m;
},{"./Circle.js":"cdf1","./Fill.js":"AFcg","./Stroke.js":"TXDt","../asserts.js":"fLG6"}],"RPsG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Fill.js")),e=require("../size.js");function i(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function l(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=s(t,"string");return"symbol"===n(e)?e:String(e)}function s(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var a="#333",f=function(){function i(n){o(this,i),n=n||{},this.font_=n.font,this.rotation_=n.rotation,this.rotateWithView_=n.rotateWithView,this.scale_=n.scale,this.scaleArray_=(0,e.toSize)(void 0!==n.scale?n.scale:1),this.text_=n.text,this.textAlign_=n.textAlign,this.justify_=n.justify,this.repeat_=n.repeat,this.textBaseline_=n.textBaseline,this.fill_=void 0!==n.fill?n.fill:new t.default({color:a}),this.maxAngle_=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.placement_=void 0!==n.placement?n.placement:"point",this.overflow_=!!n.overflow,this.stroke_=void 0!==n.stroke?n.stroke:null,this.offsetX_=void 0!==n.offsetX?n.offsetX:0,this.offsetY_=void 0!==n.offsetY?n.offsetY:0,this.backgroundFill_=n.backgroundFill?n.backgroundFill:null,this.backgroundStroke_=n.backgroundStroke?n.backgroundStroke:null,this.padding_=void 0===n.padding?null:n.padding}return l(i,[{key:"clone",value:function(){var t=this.getScale();return new i({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getRepeat",value:function(){return this.repeat_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"setOverflow",value:function(t){this.overflow_=t}},{key:"setFont",value:function(t){this.font_=t}},{key:"setMaxAngle",value:function(t){this.maxAngle_=t}},{key:"setOffsetX",value:function(t){this.offsetX_=t}},{key:"setOffsetY",value:function(t){this.offsetY_=t}},{key:"setPlacement",value:function(t){this.placement_=t}},{key:"setRepeat",value:function(t){this.repeat_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setFill",value:function(t){this.fill_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(void 0!==t?t:1)}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"setText",value:function(t){this.text_=t}},{key:"setTextAlign",value:function(t){this.textAlign_=t}},{key:"setJustify",value:function(t){this.justify_=t}},{key:"setTextBaseline",value:function(t){this.textBaseline_=t}},{key:"setBackgroundFill",value:function(t){this.backgroundFill_=t}},{key:"setBackgroundStroke",value:function(t){this.backgroundStroke_=t}},{key:"setPadding",value:function(t){this.padding_=t}}]),i}(),c=f;exports.default=c;
},{"./Fill.js":"AFcg","../size.js":"TAHd"}],"HbeD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};exports.default=e;
},{}],"T6DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../Object.js")),e=i(require("./Property.js")),n=require("../util.js"),r=require("../asserts.js"),o=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===u(e)?e:String(e)}function f(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=d(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function d(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=m();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(i){p(c,t.default);var s=h(c);function c(t){var n;a(this,c),(n=s.call(this)).on,n.once,n.un,n.background_=t.background;var o=Object.assign({},t);return"object"===u(t.properties)&&(delete o.properties,Object.assign(o,t.properties)),o[e.default.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,r.assert)("number"==typeof o[e.default.OPACITY],64),o[e.default.VISIBLE]=void 0===t.visible||t.visible,o[e.default.Z_INDEX]=t.zIndex,o[e.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,o[e.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,o[e.default.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,o[e.default.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,n.className_=void 0!==o.className?o.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return l(c,[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=(0,o.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}},{key:"getLayersArray",value:function(t){return(0,n.abstract)()}},{key:"getLayerStatesArray",value:function(t){return(0,n.abstract)()}},{key:"getExtent",value:function(){return this.get(e.default.EXTENT)}},{key:"getMaxResolution",value:function(){return this.get(e.default.MAX_RESOLUTION)}},{key:"getMinResolution",value:function(){return this.get(e.default.MIN_RESOLUTION)}},{key:"getMinZoom",value:function(){return this.get(e.default.MIN_ZOOM)}},{key:"getMaxZoom",value:function(){return this.get(e.default.MAX_ZOOM)}},{key:"getOpacity",value:function(){return this.get(e.default.OPACITY)}},{key:"getSourceState",value:function(){return(0,n.abstract)()}},{key:"getVisible",value:function(){return this.get(e.default.VISIBLE)}},{key:"getZIndex",value:function(){return this.get(e.default.Z_INDEX)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set(e.default.EXTENT,t)}},{key:"setMaxResolution",value:function(t){this.set(e.default.MAX_RESOLUTION,t)}},{key:"setMinResolution",value:function(t){this.set(e.default.MIN_RESOLUTION,t)}},{key:"setMaxZoom",value:function(t){this.set(e.default.MAX_ZOOM,t)}},{key:"setMinZoom",value:function(t){this.set(e.default.MIN_ZOOM,t)}},{key:"setOpacity",value:function(t){(0,r.assert)("number"==typeof t,64),this.set(e.default.OPACITY,t)}},{key:"setVisible",value:function(t){this.set(e.default.VISIBLE,t)}},{key:"setZIndex",value:function(t){this.set(e.default.Z_INDEX,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),y(O(c.prototype),"disposeInternal",this).call(this)}}]),c}(),M=_;exports.default=M;
},{"../Object.js":"PhPh","./Property.js":"HbeD","../util.js":"KniQ","../asserts.js":"fLG6","../math.js":"B96G"}],"cuLW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"cE7c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"mOEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"Rc7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=a,exports.none=e;var t=require("./math.js");function a(a,e,r){return function(n,o,u,h,i){if(n){if(!o&&!e)return n;var M=e?0:u[0]*o,c=e?0:u[1]*o,l=i?i[0]:0,x=i?i[1]:0,f=a[0]+M/2+l,m=a[2]-M/2+l,s=a[1]+c/2+x,p=a[3]-c/2+x;f>m&&(m=f=(m+f)/2),s>p&&(p=s=(p+s)/2);var v=(0,t.clamp)(n[0],f,m),g=(0,t.clamp)(n[1],s,p);if(h&&r&&o){var d=30*o;v+=-d*Math.log(1+Math.max(0,f-n[0])/d)+d*Math.log(1+Math.max(0,n[0]-m)/d),g+=-d*Math.log(1+Math.max(0,s-n[1])/d)+d*Math.log(1+Math.max(0,n[1]-p)/d)}return[v,g]}}}function e(t){return t}
},{"./math.js":"B96G"}],"o7nl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinMaxResolution=h,exports.createSnapToPower=o,exports.createSnapToResolutions=i;var t=require("./math.js"),a=require("./extent.js"),r=require("./array.js");function e(t,r,e,n){var i=(0,a.getWidth)(r)/e[0],o=(0,a.getHeight)(r)/e[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function n(a,r,e){var n=Math.min(a,r);return n*=Math.log(1+50*Math.max(0,a/r-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/a-1))/50+1),(0,t.clamp)(n,e/2,2*r)}function i(a,i,o,h){return i=void 0===i||i,function(u,M,l,c){if(void 0!==u){var m=a[0],f=a[a.length-1],v=o?e(m,o,l,h):m;if(c)return i?n(u,v,f):(0,t.clamp)(u,f,v);var s=Math.min(v,u),p=Math.floor((0,r.linearFindNearest)(a,s,M));return a[p]>v&&p<a.length-1?a[p+1]:a[p]}}}function o(a,r,i,o,h,u){return o=void 0===o||o,i=void 0!==i?i:0,function(M,l,c,m){if(void 0!==M){var f=h?e(r,h,c,u):r;if(m)return o?n(M,f,i):(0,t.clamp)(M,i,f);var v=Math.ceil(Math.log(r/f)/Math.log(a)-1e-9),s=-l*(.5-1e-9)+.5,p=Math.min(f,M),d=Math.floor(Math.log(r/p)/Math.log(a)+s),g=Math.max(v,d),x=r/Math.pow(a,g);return(0,t.clamp)(x,i,f)}}}function h(a,r,i,o,h){return i=void 0===i||i,function(u,M,l,c){if(void 0!==u){var m=o?e(a,o,l,h):a;return i&&c?n(u,m,r):(0,t.clamp)(u,r,m)}}}
},{"./math.js":"B96G","./extent.js":"QDir","./array.js":"luEr"}],"EKd0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToN=o,exports.createSnapToZero=n,exports.disable=r,exports.none=t;var e=require("./math.js");function r(e){if(void 0!==e)return 0}function t(e){if(void 0!==e)return e}function o(e){var r=2*Math.PI/e;return function(e,t){return t?e:void 0!==e?e=Math.floor(e/r+.5)*r:void 0}}function n(r){return r=r||(0,e.toRadians)(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=r?0:e:void 0}}
},{"./math.js":"B96G"}],"IeCz":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"hNqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=O,exports.createResolutionConstraint=T,exports.createRotationConstraint=Z,exports.default=void 0,exports.isNoopAnimation=N;var t=m(require("./Object.js")),e=m(require("./ViewHint.js")),n=m(require("./ViewProperty.js")),o=require("./tilegrid/common.js"),i=require("./proj.js"),r=require("./functions.js"),a=require("./coordinate.js"),s=require("./asserts.js"),u=require("./centerconstraint.js"),l=require("./math.js"),h=require("./resolutionconstraint.js"),c=require("./rotationconstraint.js"),g=require("./easing.js"),f=require("./extent.js"),v=require("./array.js"),d=require("./geom/Polygon.js");function m(t){return t&&t.__esModule?t:{default:t}}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,C(o.key),o)}}function y(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t){var e=x(t,"string");return"symbol"===_(e)?e:String(e)}function x(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==_(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function I(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function j(t){var e=S();return function(){var n,o=A(t);if(e){var i=A(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return M(this,n)}}function M(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=0,w=function(o){I(h,t.default);var u=j(h);function h(t){var e;return R(this,h),(e=u.call(this)).on,e.once,e.un,t=Object.assign({},t),e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=(0,i.createProjection)(t.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.nextCenter_=null,e.nextResolution_,e.nextRotation_,e.cancelAnchor_=void 0,t.projection&&(0,i.disableCoordinateWarning)(),t.center&&(t.center=(0,i.fromUserCoordinate)(t.center,e.projection_)),t.extent&&(t.extent=(0,i.fromUserExtent)(t.extent,e.projection_)),e.applyOptions_(t),e}return y(h,[{key:"applyOptions_",value:function(t){var e=Object.assign({},t);for(var o in n.default)delete e[o];this.setProperties(e,!0);var i=T(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;var r=O(t),a=i.constraint,s=Z(t);this.constraints_={center:r,resolution:a,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenterInternal();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),a=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-a])}}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=Object.assign({},o)).center=(0,i.fromUserCoordinate)(o.center,this.getProjection())),o.anchor&&((o=Object.assign({},o)).anchor=(0,i.fromUserCoordinate)(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){var n,o=arguments.length;o>1&&"function"==typeof arguments[o-1]&&(n=arguments[o-1],--o);for(var i=0;i<o&&!this.isDef();++i){var r=arguments[i];r.center&&this.setCenterInternal(r.center),void 0!==r.zoom?this.setZoom(r.zoom):r.resolution&&this.setResolution(r.resolution),void 0!==r.rotation&&this.setRotation(r.rotation)}if(i!==o){for(var a=Date.now(),s=this.targetCenter_.slice(),u=this.targetResolution_,h=this.targetRotation_,c=[];i<o;++i){var f=arguments[i],v={start:a,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||g.inAndOut,callback:n};if(f.center&&(v.sourceCenter=s,v.targetCenter=f.center.slice(),s=v.targetCenter),void 0!==f.zoom?(v.sourceResolution=u,v.targetResolution=this.getResolutionForZoom(f.zoom),u=v.targetResolution):f.resolution&&(v.sourceResolution=u,v.targetResolution=f.resolution,u=v.targetResolution),void 0!==f.rotation){v.sourceRotation=h;var d=(0,l.modulo)(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=h+d,h=v.targetRotation}N(v)?v.complete=!0:a+=v.duration,c.push(v)}this.animations_.push(c),this.setHint(e.default.ANIMATING,1),this.updateAnimations_()}else n&&P(n,!0)}},{key:"getAnimating",value:function(){return this.hints_[e.default.ANIMATING]>0}},{key:"getInteracting",value:function(){return this.hints_[e.default.INTERACTING]>0}},{key:"cancelAnimations",value:function(){var t;this.setHint(e.default.ANIMATING,-this.hints_[e.default.ANIMATING]);for(var n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&P(i[0].callback,!1),!t)for(var r=0,a=i.length;r<a;++r){var s=i[r];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],r=!0,a=0,s=i.length;a<s;++a){var u=i[a];if(!u.complete){var h=t-u.start,c=u.duration>0?h/u.duration:1;c>=1?(u.complete=!0,c=1):r=!1;var g=u.easing(c);if(u.sourceCenter){var f=u.sourceCenter[0],v=u.sourceCenter[1],d=u.targetCenter[0],m=u.targetCenter[1];this.nextCenter_=u.targetCenter;var _=f+g*(d-f),R=v+g*(m-v);this.targetCenter_=[_,R]}if(u.sourceResolution&&u.targetResolution){var p=1===g?u.targetResolution:u.sourceResolution+g*(u.targetResolution-u.sourceResolution);if(u.anchor){var y=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(p,0,y,!0);this.targetCenter_=this.calculateCenterZoom(C,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var x=1===g?(0,l.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+g*(u.targetRotation-u.sourceRotation);if(u.anchor){var I=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(I,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),n=!0,!u.complete)break}}if(r){this.animations_[o]=null,this.setHint(e.default.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var k=i[0].callback;k&&P(k,!0)}}this.animations_=this.animations_.filter(Boolean),n&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var n,o=this.getCenterInternal();return void 0!==o&&(n=[o[0]-e[0],o[1]-e[1]],(0,a.rotate)(n,t-this.getRotation()),(0,a.add)(n,e)),n}},{key:"calculateCenterZoom",value:function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]);return n}},{key:"getViewportSize_",value:function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t?(0,i.toUserCoordinate)(t,this.getProjection()):t}},{key:"getCenterInternal",value:function(){return this.get(n.default.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){var e=this.calculateExtentInternal(t);return(0,i.toUserExtent)(e,this.getProjection())}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal();(0,s.assert)(e,1);var n=this.getResolution();(0,s.assert)(void 0!==n,2);var o=this.getRotation();return(0,s.assert)(void 0!==o,3),(0,f.getForViewAndSize)(e,n,o,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(n.default.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal((0,i.fromUserExtent)(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var n=(0,f.getWidth)(t)/e[0],o=(0,f.getHeight)(t)/e[1];return Math.max(n,o)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*o)}}},{key:"getRotation",value:function(){return this.get(n.default.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}}},{key:"getViewportSizeMinusPadding_",value:function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}},{key:"getState",value:function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=z(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}},{key:"getViewStateAndExtent",value:function(){return{viewState:this.getState(),extent:this.calculateExtent()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=(0,v.linearFindNearest)(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,l.clamp)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,(0,l.clamp)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var n;if((0,s.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,s.assert)(!(0,f.isEmpty)(t),25);var o=(0,i.fromUserExtent)(t,this.getProjection());n=(0,d.fromExtent)(o)}else if("Circle"===t.getType()){var r=(0,i.fromUserExtent)(t.getExtent(),this.getProjection());(n=(0,d.fromExtent)(r)).rotate(this.getRotation(),(0,f.getCenter)(r))}else{var a=(0,i.getUserProjection)();n=a?t.clone().transform(a,this.getProjection()):t}this.fitInternal(n,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,h=0,c=i.length;h<c;h+=r){var g=i[h]*n-i[h+1]*o,f=i[h]*o+i[h+1]*n;a=Math.min(a,g),s=Math.min(s,f),u=Math.max(u,g),l=Math.max(l,f)}return[a,s,u,l]}},{key:"fitInternal",value:function(t,e){var n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());var o,i=void 0!==e.padding?e.padding:[0,0,0,0],a=void 0!==e.nearest&&e.nearest;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var s=this.rotatedExtentForGeometry(t),u=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);u=isNaN(u)?o:Math.max(u,o),u=this.getConstrainedResolution(u,a?0:1);var l=this.getRotation(),h=Math.sin(l),c=Math.cos(l),g=(0,f.getCenter)(s);g[0]+=(i[1]-i[3])/2*u,g[1]+=(i[0]-i[2])/2*u;var v=g[0]*c-g[1]*h,d=g[1]*c+g[0]*h,m=this.getConstrainedCenter([v,d],u),_=e.callback?e.callback:r.VOID;void 0!==e.duration?this.animateInternal({resolution:u,center:m,duration:e.duration,easing:e.easing},_):(this.targetResolution_=u,this.targetCenter_=m,this.applyTargetState_(!1,!0),P(_,!0))}},{key:"centerOn",value:function(t,e,n){this.centerOnInternal((0,i.fromUserCoordinate)(t,this.getProjection()),e,n)}},{key:"centerOnInternal",value:function(t,e,n){this.setCenterInternal(z(t,e,n,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,n,o){var i,r=this.padding_;if(r&&t){var a=this.getViewportSizeMinusPadding_(-n),s=z(t,o,[a[0]/2+r[3],a[1]/2+r[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=(0,i.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&(0,i.fromUserCoordinate)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e&&(e=(0,i.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t?(0,i.fromUserCoordinate)(t,this.getProjection()):t)}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var o=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,o),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,o),u=this.constraints_.center(this.targetCenter_,s,r,o,this.calculateCenterShift(this.targetCenter_,s,i,r));this.get(n.default.ROTATION)!==i&&this.set(n.default.ROTATION,i),this.get(n.default.RESOLUTION)!==s&&(this.set(n.default.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),u&&this.get(n.default.CENTER)&&(0,a.equals)(this.get(n.default.CENTER),u)||this.set(n.default.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,n){t=void 0!==t?t:200;var o=e||0,i=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,o,r),u=this.constraints_.center(this.targetCenter_,s,r,!1,this.calculateCenterShift(this.targetCenter_,s,i,r));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=i,this.targetCenter_=u,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===i&&this.getCenterInternal()&&(0,a.equals)(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:u,resolution:s,duration:t,easing:g.easeOut,anchor:n}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(e.default.INTERACTING,1)}},{key:"endInteraction",value:function(t,e,n){n=n&&(0,i.fromUserCoordinate)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}},{key:"endInteractionInternal",value:function(t,n,o){this.getInteracting()&&(this.setHint(e.default.INTERACTING,-1),this.resolveConstraints(t,n,o))}},{key:"getConstrainedCenter",value:function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}},{key:"getConstrainedZoom",value:function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}]),h}();function P(t,e){setTimeout(function(){t(e)},0)}function O(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,u.createExtent)(t.extent,t.constrainOnlyCenter,e)}var n=(0,i.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,(0,u.createExtent)(o,!1,!1)}return u.none}function T(t){var e,n,r,a=void 0!==t.minZoom?t.minZoom:E,s=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,g=void 0!==t.showFullExtent&&t.showFullExtent,v=(0,i.createProjection)(t.projection,"EPSG:3857"),d=v.getExtent(),m=t.constrainOnlyCenter,_=t.extent;if(l||_||!v.isGlobal()||(m=!1,_=d),void 0!==t.resolutions){var R=t.resolutions;n=R[a],r=void 0!==R[s]?R[s]:R[R.length-1],e=t.constrainResolution?(0,h.createSnapToResolutions)(R,c,!m&&_,g):(0,h.createMinMaxResolution)(n,r,c,!m&&_,g)}else{var p=(d?Math.max((0,f.getWidth)(d),(0,f.getHeight)(d)):360*i.METERS_PER_UNIT.degrees/v.getMetersPerUnit())/o.DEFAULT_TILE_SIZE/Math.pow(2,E),y=p/Math.pow(2,28-E);void 0!==(n=t.maxResolution)?a=0:n=p/Math.pow(u,a),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(u,s):p/Math.pow(u,s):y),s=a+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,s-a),e=t.constrainResolution?(0,h.createSnapToPower)(u,n,r,c,!m&&_,g):(0,h.createMinMaxResolution)(n,r,c,!m&&_,g)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:a,zoomFactor:u}}function Z(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,c.createSnapToZero)():!1===e?c.none:"number"==typeof e?(0,c.createSnapToN)(e):c.none}return c.disable}function N(t){return!(t.sourceCenter&&t.targetCenter&&!(0,a.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function z(t,e,n,o,i){var r=Math.cos(-i),a=Math.sin(-i),s=t[0]*r-t[1]*a,u=t[1]*r+t[0]*a;return[(s+=(e[0]/2-n[0])*o)*r-(u+=(n[1]-e[1]/2)*o)*(a=-a),u*r+s*a]}var F=w;exports.default=F;
},{"./Object.js":"PhPh","./ViewHint.js":"cuLW","./ViewProperty.js":"cE7c","./tilegrid/common.js":"mOEX","./proj.js":"Diht","./functions.js":"RgA2","./coordinate.js":"nGsj","./asserts.js":"fLG6","./centerconstraint.js":"Rc7z","./math.js":"B96G","./resolutionconstraint.js":"o7nl","./rotationconstraint.js":"EKd0","./easing.js":"IeCz","./extent.js":"QDir","./array.js":"luEr","./geom/Polygon.js":"Nwwk"}],"GCgv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.inView=j;var e=s(require("./Base.js")),t=s(require("../events/EventType.js")),r=s(require("./Property.js")),n=s(require("../render/EventType.js")),u=s(require("../View.js")),i=require("../asserts.js"),o=require("../extent.js"),a=require("../events.js");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function y(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=h(e,"string");return"symbol"===c(t)?t:String(t)}function h(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=v(e,t);if(n){var u=Object.getOwnPropertyDescriptor(n,t);return u.get?u.get.call(arguments.length<3?e:r):u.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=R();return function(){var r,n=P(e);if(t){var u=P(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(s){g(f,e.default);var c=_(f);function f(e){var t;l(this,f);var n=Object.assign({},e);delete n.source,(t=c.call(this,n)).on,t.once,t.un,t.mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,t.sourceReady_=!1,t.rendered=!1,e.render&&(t.render=e.render),e.map&&t.setMap(e.map),t.addChangeListener(r.default.SOURCE,t.handleSourcePropertyChange_);var u=e.source?e.source:null;return t.setSource(u),t}return y(f,[{key:"getLayersArray",value:function(e){return(e=e||[]).push(this),e}},{key:"getLayerStatesArray",value:function(e){return(e=e||[]).push(this.getLayerState()),e}},{key:"getSource",value:function(){return this.get(r.default.SOURCE)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var e=this.getSource();return e?e.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}},{key:"handleSourcePropertyChange_",value:function(){var e=this;this.sourceChangeKey_&&((0,a.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;var r=this.getSource();r&&(this.sourceChangeKey_=(0,a.listen)(r,t.default.CHANGE,this.handleSourceChange_,this),"ready"===r.getState()&&(this.sourceReady_=!0,setTimeout(function(){e.dispatchEvent("sourceready")},0))),this.changed()}},{key:"getFeatures",value:function(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}},{key:"getData",value:function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}},{key:"isVisible",value:function(e){var t,r,n=this,i=this.getMapInternal();!e&&i&&(e=i.getView()),!(t=e instanceof u.default?{viewState:e.getState(),extent:e.calculateExtent()}:e).layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),r=t.layerStatesArray?t.layerStatesArray.find(function(e){return e.layer===n}):this.getLayerState();var a=this.getExtent();return j(r,t.viewState)&&(!a||(0,o.intersects)(a,t.extent))}},{key:"getAttributions",value:function(e){if(!this.isVisible(e))return[];var t,r=this.getSource();if(r&&(t=r.getAttributions()),!t)return[];var n=t(e instanceof u.default?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}},{key:"render",value:function(e,t){var r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(e){e||this.unrender(),this.set(r.default.MAP,e)}},{key:"getMapInternal",value:function(){return this.get(r.default.MAP)}},{key:"setMap",value:function(e){this.mapPrecomposeKey_&&((0,a.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&((0,a.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=(0,a.listen)(e,n.default.PRECOMPOSE,function(e){var t=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,i.assert)(!t.some(function(e){return e.layer===r.layer}),67),t.push(r)},this),this.mapRenderKey_=(0,a.listen)(this,t.default.CHANGE,e.render,e),this.changed())}},{key:"setSource",value:function(e){this.set(r.default.SOURCE,e)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),p(P(f.prototype),"disposeInternal",this).call(this)}}]),f}();function j(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var k=O;exports.default=k;
},{"./Base.js":"T6DQ","../events/EventType.js":"C8cu","./Property.js":"HbeD","../render/EventType.js":"z39m","../View.js":"hNqE","../asserts.js":"fLG6","../extent.js":"QDir","../events.js":"UqnM"}],"XGea":[function(require,module,exports) {
var define;
var t;!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var m=n[r],c=e,p=a;for(i(n,e,r),h(n[a],m)>0&&i(n,e,a);c<p;){for(i(n,c,p),c++,p--;h(n[c],m)<0;)c++;for(;h(n[p],m)>0;)p--}0===h(n[e],m)?i(n,e,p):i(n,++p,a),p<=r&&(e=p+1),r<=p&&(a=p-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,void 0,void 0,void 0,void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"V0oB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var c=function(){function e(){r(this,e),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n(e,[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var r=this.cache_[t];0!=(3&e++)||r.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}},{key:"get",value:function(e,t,r){var i=u(e,t,r);return i in this.cache_?this.cache_[i]:null}},{key:"set",value:function(e,t,r,i){var n=u(e,t,r);this.cache_[n]=i,++this.cacheSize_}},{key:"setSize",value:function(e){this.maxCacheSize_=e,this.expire()}}]),e}();function u(t,r,i){return r+":"+t+":"+(i?(0,e.asString)(i):"null")}var s=c;exports.default=s;var h=new c;exports.shared=h;
},{"../color.js":"eucy"}],"Ojbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./events/Target.js")),e=n(require("./events/EventType.js")),r=require("./util.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function c(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=a(t,"string");return"symbol"===o(e)?e:String(e)}function a(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(n){l(i,t.default);var o=y(i);function i(t,e,r,n){var c;return u(this,i),(c=o.call(this)).extent=t,c.pixelRatio_=r,c.resolution=e,c.state=n,c}return c(i,[{key:"changed",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return(0,r.abstract)()}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){(0,r.abstract)()}}]),i}(),m=h;exports.default=m;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./util.js":"KniQ"}],"DHWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.listenImage=O;var t=u(require("./events/EventType.js")),e=u(require("./ImageBase.js")),n=u(require("./ImageState.js")),i=require("./has.js"),r=require("./extent.js"),o=require("./events.js");function u(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=h(t,"string");return"symbol"===a(e)?e:String(e)}function h(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=_();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){d(o,e.default);var i=g(o);function o(t,e,r,u,a,c,f){var l;return s(this,o),(l=i.call(this,t,e,r,n.default.IDLE)).src_=u,l.image_=new Image,null!==a&&(l.image_.crossOrigin=a),l.context_=f,l.unlisten_=null,l.state=n.default.IDLE,l.imageLoadFunction_=c,l}return f(o,[{key:"getImage",value:function(){if(this.state==n.default.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){var t=this.context_.canvas;t.width=this.image_.width,t.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}},{key:"handleImageError_",value:function(){this.state=n.default.ERROR,this.unlistenImage_(),this.changed()}},{key:"handleImageLoad_",value:function(){void 0===this.resolution&&(this.resolution=(0,r.getHeight)(this.extent)/this.image_.height),this.state=n.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state!=n.default.IDLE&&this.state!=n.default.ERROR||(this.state=n.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=O(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"setImage",value:function(t){this.image_=t,this.resolution=(0,r.getHeight)(this.extent)/this.image_.height}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),o}();function O(e,n,r){var u=e,a=!0,s=!1,c=!1,f=[(0,o.listenOnce)(u,t.default.LOAD,function(){c=!0,s||n()})];return u.src&&i.IMAGE_DECODE?(s=!0,u.decode().then(function(){a&&n()}).catch(function(t){a&&(c?n():r())})):f.push((0,o.listenOnce)(u,t.default.ERROR,r)),function(){a=!1,f.forEach(o.unlistenByKey)}}var E=b;exports.default=E;
},{"./events/EventType.js":"C8cu","./ImageBase.js":"Ojbp","./ImageState.js":"u3kG","./has.js":"f3Nv","./extent.js":"QDir","./events.js":"UqnM"}],"XCOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.get=w;var t=s(require("../events/Target.js")),e=s(require("../events/EventType.js")),i=s(require("../ImageState.js")),n=require("../color.js"),r=require("../dom.js"),a=require("./IconImageCache.js"),o=require("../Image.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function h(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=_(t,"string");return"symbol"===u(e)?e:String(e)}function _(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=p();return function(){var i,n=b(t);if(e){var r=b(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y(this,i)}}function y(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=null,O=function(a){g(u,t.default);var s=d(u);function u(t,e,i,n,r,a){var o;return c(this,u),(o=s.call(this)).hitDetectionImage_=null,o.image_=t,o.crossOrigin_=n,o.canvas_={},o.color_=a,o.unlisten_=null,o.imageState_=r,o.size_=i,o.src_=e,o.tainted_,o}return h(u,[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&this.imageState_===i.default.LOADED){I||(I=(0,r.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})),I.drawImage(this.image_,0,0);try{I.getImageData(0,0,1,1),this.tainted_=!1}catch(t){I=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"handleImageError_",value:function(){this.imageState_=i.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=i.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}},{key:"getImage",value:function(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}},{key:"getPixelRatio",value:function(t){return this.replaceColor_(t),this.canvas_[t]?t:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=(0,r.createCanvasContext2D)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){if(this.imageState_===i.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=i.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,o.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===i.default.LOADED){var e=this.image_,r=document.createElement("canvas");r.width=Math.ceil(e.width*t),r.height=Math.ceil(e.height*t);var a=r.getContext("2d");a.scale(t,t),a.drawImage(e,0,0),a.globalCompositeOperation="multiply",a.fillStyle=(0,n.asString)(this.color_),a.fillRect(0,0,r.width/t,r.height/t),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0),this.canvas_[t]=r}}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),u}();function w(t,e,i,n,r,o){var s=a.shared.get(e,n,o);return s||(s=new O(t,e,i,n,r,o),a.shared.set(e,n,o,s)),s}var S=O;exports.default=S;
},{"../events/Target.js":"CR4Y","../events/EventType.js":"C8cu","../ImageState.js":"u3kG","../color.js":"eucy","../dom.js":"Xno5","./IconImageCache.js":"V0oB","../Image.js":"DHWK"}],"z2xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("../events/EventType.js")),e=c(require("../ImageState.js")),i=c(require("./Image.js")),r=require("../color.js"),n=require("../asserts.js"),o=require("./IconImage.js"),a=require("../util.js");function c(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return v(t)||g(t,e)||f(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function g(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,a,c=[],s=!0,l=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;s=!1}else for(;!(s=(r=o.call(i)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(u){l=!0,n=u}finally{try{if(!s&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(l)throw n}}return c}}function v(t){if(Array.isArray(t))return t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function y(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=p(t,"string");return"symbol"===s(e)?e:String(e)}function p(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function O(){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=b(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}}).apply(this,arguments)}function b(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}function I(t,e){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function z(t){var e=A();return function(){var i,r=k(t);if(e){var n=k(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return w(this,i)}}function w(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e,i,r){return void 0!==i&&void 0!==r?[i/t,r/e]:void 0!==i?i/t:void 0!==r?r/e:1}var P=function(c){S(u,i.default);var s=z(u);function u(t){var i;d(this,u);var c=void 0!==(t=t||{}).opacity?t.opacity:1,f=void 0!==t.rotation?t.rotation:0,h=void 0!==t.scale?t.scale:1,g=void 0!==t.rotateWithView&&t.rotateWithView;(i=s.call(this,{opacity:c,rotation:f,scale:h,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:g,declutterMode:t.declutterMode})).anchor_=void 0!==t.anchor?t.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",i.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",i.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",i.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;var v=void 0!==t.img?t.img:null;i.imgSize_=t.imgSize;var _=t.src;(0,n.assert)(!(void 0!==_&&v),4),(0,n.assert)(!v||v&&i.imgSize_,5),void 0!==_&&0!==_.length||!v||(_=v.src||(0,a.getUid)(v)),(0,n.assert)(void 0!==_&&_.length>0,6),(0,n.assert)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),69);var y=void 0!==t.src?e.default.IDLE:e.default.LOADED;if(i.color_=void 0!==t.color?(0,r.asArray)(t.color):null,i.iconImage_=(0,o.get)(v,_,void 0!==i.imgSize_?i.imgSize_:null,i.crossOrigin_,y,i.color_),i.offset_=void 0!==t.offset?t.offset:[0,0],i.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",i.origin_=null,i.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){var m,p;if(t.size){var O=l(t.size,2);m=O[0],p=O[1]}else{var b=i.getImage(1);if(!(b instanceof HTMLCanvasElement||b.src&&b.complete)){i.initialOptions_=t;return i.listenImageChange(function e(){if(i.unlistenImageChange(e),i.initialOptions_){var r=i.iconImage_.getSize();i.setScale(E(r[0],r[1],t.width,t.height))}}),w(i)}m=b.width,p=b.height}void 0!==m&&i.setScale(E(m,p,t.width,t.height))}return i}return y(u,[{key:"clone",value:function(){var t,e,i;this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t);var r=new u({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r}},{key:"getAnchor",value:function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var i=this.getDisplacement(),r=this.getScaleArray();return[t[0]-i[0]/r[0],t[1]+i[1]/r[1]]}},{key:"setAnchor",value:function(t){this.anchor_=t,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(t){return this.iconImage_.getImage(t)}},{key:"getPixelRatio",value:function(t){return this.iconImage_.getPixelRatio(t)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_?this.size_:this.iconImage_.getSize()}},{key:"getWidth",value:function(){var t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==e.default.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}},{key:"getHeight",value:function(){var t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==e.default.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}},{key:"setScale",value:function(t){delete this.initialOptions_,O(k(u.prototype),"setScale",this).call(this,t)}},{key:"listenImageChange",value:function(e){this.iconImage_.addEventListener(t.default.CHANGE,e)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(e){this.iconImage_.removeEventListener(t.default.CHANGE,e)}}]),u}(),U=P;exports.default=U;
},{"../events/EventType.js":"C8cu","../ImageState.js":"u3kG","./Image.js":"S8ow","../color.js":"eucy","../asserts.js":"fLG6","./IconImage.js":"XCOy","../util.js":"KniQ"}],"iE24":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultStyle=h,exports.toStyle=l;var e=c(require("../style/Circle.js")),t=c(require("./Fill.js")),i=c(require("./Icon.js")),r=c(require("./RegularShape.js")),o=c(require("./Stroke.js")),n=c(require("./Style.js")),a=c(require("./Text.js"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return new n.default({fill:s(e,""),stroke:u(e,""),text:d(e),image:f(e)})}function s(e,i){var r=e[i+"fill-color"];if(r)return"none"===r?null:new t.default({color:r})}function u(e,t){var i=e[t+"stroke-width"],r=e[t+"stroke-color"];if(i||r)return new o.default({width:i,color:r,lineCap:e[t+"stroke-line-cap"],lineJoin:e[t+"stroke-line-join"],lineDash:e[t+"stroke-line-dash"],lineDashOffset:e[t+"stroke-line-dash-offset"],miterLimit:e[t+"stroke-miter-limit"]})}function d(e){var t=e["text-value"];if(t)return new a.default({text:t,font:e["text-font"],maxAngle:e["text-max-angle"],offsetX:e["text-offset-x"],offsetY:e["text-offset-y"],overflow:e["text-overflow"],placement:e["text-placement"],repeat:e["text-repeat"],scale:e["text-scale"],rotateWithView:e["text-rotate-with-view"],rotation:e["text-rotation"],textAlign:e["text-align"],justify:e["text-justify"],textBaseline:e["text-baseline"],padding:e["text-padding"],fill:s(e,"text-"),backgroundFill:s(e,"text-background-"),stroke:u(e,"text-"),backgroundStroke:u(e,"text-background-")})}function f(t){var o=t["icon-src"],n=t["icon-img"];if(o||n)return new i.default({src:o,img:n,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],width:t["icon-width"],height:t["icon-height"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});var a=t["shape-points"];if(a){return new r.default({points:a,fill:s(t,"shape-"),stroke:u(t,"shape-"),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}var c=t["circle-radius"];if(c){return new e.default({radius:c,fill:s(t,"circle-"),stroke:u(t,"circle-"),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}function h(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}
},{"../style/Circle.js":"cdf1","./Fill.js":"AFcg","./Icon.js":"z2xv","./RegularShape.js":"il3X","./Stroke.js":"TXDt","./Style.js":"he4w","./Text.js":"RPsG"}],"pskK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Layer.js")),t=o(require("rbush")),r=i(require("../style/Style.js")),n=require("../style/flat.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function a(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=y(e,"string");return"symbol"===l(t)?t:String(t)}function y(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=d(e,t);if(n){var u=Object.getOwnPropertyDescriptor(n,t);return u.get?u.get.call(arguments.length<3?e:r):u.value}}).apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=_();return function(){var r,n=j(e);if(t){var u=j(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m={RENDER_ORDER:"renderOrder"},R=function(u){v(o,e.default);var i=b(o);function o(e){var t;f(this,o),e=e||{};var r=Object.assign({},e);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(t=i.call(this,r)).declutter_=void 0!==e.declutter&&e.declutter,t.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,t.style_=null,t.styleFunction_=void 0,t.setStyle(e.style),t.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,t.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,t}return a(o,[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(e){return p(j(o.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(m.RENDER_ORDER)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(e){e.declutterTree||(e.declutterTree=new t.default(9)),this.getRenderer().renderDeclutter(e)}},{key:"setRenderOrder",value:function(e){this.set(m.RENDER_ORDER,e)}},{key:"setStyle",value:function(e){var t;if(void 0===e)t=r.createDefaultStyle;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof r.default)t=e;else if(Array.isArray(e)){for(var u=e.length,i=new Array(u),o=0;o<u;++o){var l=e[o];l instanceof r.default?i[o]=l:i[o]=(0,n.toStyle)(l)}t=i}else t=(0,n.toStyle)(e);this.style_=t,this.styleFunction_=null===e?void 0:(0,r.toFunction)(this.style_),this.changed()}}]),o}(),w=R;exports.default=w;
},{"./Layer.js":"GCgv","rbush":"XGea","../style/Style.js":"he4w","../style/flat.js":"iE24"}],"kTJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.strokeInstruction=exports.fillInstruction=exports.default=exports.closePathInstruction=exports.beginPathInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"LQER":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(t){var n=u(t,"string");return"symbol"===e(n)?n:String(n)}function u(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function e(){t(this,e)}return o(e,[{key:"drawCustom",value:function(e,t,n,o){}},{key:"drawGeometry",value:function(e){}},{key:"setStyle",value:function(e){}},{key:"drawCircle",value:function(e,t){}},{key:"drawFeature",value:function(e,t){}},{key:"drawGeometryCollection",value:function(e,t){}},{key:"drawLineString",value:function(e,t){}},{key:"drawMultiLineString",value:function(e,t){}},{key:"drawMultiPoint",value:function(e,t){}},{key:"drawMultiPolygon",value:function(e,t){}},{key:"drawPoint",value:function(e,t){}},{key:"drawPolygon",value:function(e,t){}},{key:"drawText",value:function(e,t){}},{key:"setFillStrokeStyle",value:function(e,t){}},{key:"setImageStyle",value:function(e,t){}},{key:"setTextStyle",value:function(e,t){}}]),e}(),l=i;exports.default=l;
},{}],"QBj4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./Instruction.js")),e=u(require("../../extent/Relationship.js")),i=u(require("../VectorContext.js")),n=require("../../colorlike.js"),r=require("../../extent.js"),o=require("../canvas.js"),s=require("../../array.js"),a=require("../../geom/flat/inflate.js");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function h(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=p(t,"string");return"symbol"===l(e)?e:String(e)}function p(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=C();return function(){var i,n=S(t);if(e){var r=S(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g(this,i)}}function g(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(u){y(f,i.default);var l=b(f);function f(t,e,i,n){var r;return c(this,f),(r=l.call(this)).tolerance=t,r.maxExtent=e,r.pixelRatio=n,r.maxLineWidth=0,r.resolution=i,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return h(f,[{key:"applyPixelRatio",value:function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}},{key:"appendFlatPointCoordinates",value:function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates,s=o.length,a=0,u=t.length;a<u;a+=e)n[0]=t[a],n[1]=t[a+1],(0,r.containsCoordinate)(i,n)&&(o[s++]=n[0],o[s++]=n[1]);return s}},{key:"appendFlatLineCoordinates",value:function(t,i,n,o,s,a){var u=this.coordinates,l=u.length,c=this.getBufferedMaxExtent();a&&(i+=o);var f,h,d,p=t[i],y=t[i+1],v=this.tmpCoordinate_,b=!0;for(f=i+o;f<n;f+=o)v[0]=t[f],v[1]=t[f+1],(d=(0,r.coordinateRelationship)(c,v))!==h?(b&&(u[l++]=p,u[l++]=y,b=!1),u[l++]=v[0],u[l++]=v[1]):d===e.default.INTERSECTING?(u[l++]=v[0],u[l++]=v[1],b=!1):b=!0,p=v[0],y=v[1],h=d;return(s&&b||f===i+o)&&(u[l++]=p,u[l++]=y),l}},{key:"drawCustomCoordinates_",value:function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatLineCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e}},{key:"drawCustom",value:function(e,i,n,r){this.beginGeometry(e,i);var o,s,u,l,c,f=e.getType(),h=e.getStride(),d=this.coordinates.length;switch(f){case"MultiPolygon":o=e.getOrientedFlatCoordinates(),l=[];var p=e.getEndss();c=0;for(var y=0,v=p.length;y<v;++y){var b=[];c=this.drawCustomCoordinates_(o,c,p[y],h,b),l.push(b)}this.instructions.push([t.default.CUSTOM,d,l,e,n,a.inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,l,e,r||n,a.inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":u=[],o="Polygon"==f?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),c=this.drawCustomCoordinates_(o,0,e.getEnds(),h,u),this.instructions.push([t.default.CUSTOM,d,u,e,n,a.inflateCoordinatesArray]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,u,e,r||n,a.inflateCoordinatesArray]);break;case"LineString":case"Circle":o=e.getFlatCoordinates(),s=this.appendFlatLineCoordinates(o,0,o.length,h,!1,!1),this.instructions.push([t.default.CUSTOM,d,s,e,n,a.inflateCoordinates]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n,a.inflateCoordinates]);break;case"MultiPoint":o=e.getFlatCoordinates(),(s=this.appendFlatPointCoordinates(o,h))>d&&(this.instructions.push([t.default.CUSTOM,d,s,e,n,a.inflateCoordinates]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n,a.inflateCoordinates]));break;case"Point":o=e.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),s=this.coordinates.length,this.instructions.push([t.default.CUSTOM,d,s,e,n]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n])}this.endGeometry(i)}},{key:"beginGeometry",value:function(e,i){this.beginGeometryInstruction1_=[t.default.BEGIN_GEOMETRY,i,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[t.default.BEGIN_GEOMETRY,i,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var e,i=this.hitDetectionInstructions;i.reverse();var n,r,o=i.length,a=-1;for(e=0;e<o;++e)(r=(n=i[e])[0])==t.default.END_GEOMETRY?a=e:r==t.default.BEGIN_GEOMETRY&&(n[2]=e,(0,s.reverseSubArray)(this.hitDetectionInstructions,a,e),a=-1)}},{key:"setFillStrokeStyle",value:function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=(0,n.asColorLike)(r||o.defaultFillStyle)}else i.fillStyle=void 0;if(e){var s=e.getColor();i.strokeStyle=(0,n.asColorLike)(s||o.defaultStrokeStyle);var a=e.getLineCap();i.lineCap=void 0!==a?a:o.defaultLineCap;var u=e.getLineDash();i.lineDash=u?u.slice():o.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||o.defaultLineDashOffset;var c=e.getLineJoin();i.lineJoin=void 0!==c?c:o.defaultLineJoin;var f=e.getWidth();i.lineWidth=void 0!==f?f:o.defaultLineWidth;var h=e.getMiterLimit();i.miterLimit=void 0!==h?h:o.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}},{key:"createFill",value:function(e){var i=e.fillStyle,n=[t.default.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n}},{key:"applyStroke",value:function(t){this.instructions.push(this.createStroke(t))}},{key:"createStroke",value:function(e){return[t.default.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}},{key:"updateStrokeStyle",value:function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,u=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,s.equals)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=u||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=u,t.currentMiterLimit=l)}},{key:"endGeometry",value:function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[t.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,r.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,r.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}]),f}(),_=L;exports.default=_;
},{"./Instruction.js":"kTJv","../../extent/Relationship.js":"bUAS","../VectorContext.js":"LQER","../../colorlike.js":"V5XN","../../extent.js":"QDir","../canvas.js":"iAG7","../../array.js":"luEr","../../geom/flat/inflate.js":"znXl"}],"JWDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Builder.js")),i=e(require("./Instruction.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function h(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var i=s(t,"string");return"symbol"===o(i)?i:String(i)}function s(t,i){if("object"!==o(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,i||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,i,e){var o=l(t,i);if(o){var r=Object.getOwnPropertyDescriptor(o,i);return r.get?r.get.call(arguments.length<3?t:e):r.value}}).apply(this,arguments)}function l(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=y(t)););return t}function u(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&_(t,i)}function _(t,i){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function f(t){var i=p();return function(){var e,o=y(t);if(i){var r=y(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return d(this,e)}}function d(t,i){if(i&&("object"===o(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(e){u(n,t.default);var o=f(n);function n(t,i,e,h){var a;return r(this,n),(a=o.call(this,t,i,e,h)).hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterMode_=void 0,a.declutterImageWithText_=void 0,a}return h(n,[{key:"drawPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,h=this.appendFlatPointCoordinates(o,r);this.instructions.push([i.default.DRAW_IMAGE,n,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,n,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"drawMultiPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,h=this.appendFlatPointCoordinates(o,r);this.instructions.push([i.default.DRAW_IMAGE,n,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,n,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,c(y(n.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(t,i){var e=t.getAnchor(),o=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}]),n}(),v=m;exports.default=v;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv"}],"ppsk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Builder.js")),e=i(require("./Instruction.js")),r=require("../canvas.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function i(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var s=o?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=t[u]}return i.default=t,r&&r.set(t,i),i}function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function l(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===u(e)?e:String(e)}function f(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=h(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=S();return function(){var r,n=O(t);if(e){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(n){y(o,t.default);var i=b(o);function o(t,e,r,n){return s(this,o),i.call(this,t,e,r,n)}return l(o,[{key:"drawFlatCoordinates_",value:function(t,r,n,i){var o=this.coordinates.length,u=this.appendFlatLineCoordinates(t,r,n,i,!1,!1),s=[e.default.MOVE_TO_LINE_TO,o,u];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}},{key:"drawLineString",value:function(t,n){var i=this.state,o=i.strokeStyle,u=i.lineWidth;if(void 0!==o&&void 0!==u){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,r.defaultLineDash,r.defaultLineDashOffset],e.beginPathInstruction);var s=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(n)}}},{key:"drawMultiLineString",value:function(t,n){var i=this.state,o=i.strokeStyle,u=i.lineWidth;if(void 0!==o&&void 0!==u){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,r.defaultLineDash,r.defaultLineDashOffset],e.beginPathInstruction);for(var s=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride(),c=0,f=0,p=s.length;f<p;++f)c=this.drawFlatCoordinates_(a,c,s[f],l);this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(n)}}},{key:"finish",value:function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(e.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,p(O(o.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(e.strokeInstruction),t.lastStroke=this.coordinates.length),t.lastStroke=0,p(O(o.prototype),"applyStroke",this).call(this,t),this.instructions.push(e.beginPathInstruction)}}]),o}(),m=k;exports.default=m;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../canvas.js":"iAG7"}],"e19k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Builder.js")),e=o(require("./Instruction.js")),i=require("../canvas.js"),n=require("../../geom/flat/simplify.js");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(r=function(t){return t?i:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=r(e);if(i&&i.has(t))return i.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=o?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=t[s]}return n.default=t,i&&i.set(t,n),n}function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=h(t,"string");return"symbol"===u(e)?e:String(e)}function h(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=y(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=O();return function(){var i,n=_(t);if(e){var r=_(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return b(this,i)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=function(r){d(s,t.default);var o=S(s);function s(t,e,i,n){return l(this,s),o.call(this,t,e,i,n)}return a(s,[{key:"drawFlatCoordinatess_",value:function(t,i,n,r){var o=this.state,s=void 0!==o.fillStyle,u=void 0!==o.strokeStyle,l=n.length;this.instructions.push(e.beginPathInstruction),this.hitDetectionInstructions.push(e.beginPathInstruction);for(var c=0;c<l;++c){var a=n[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,i,a,r,!0,!u),p=[e.default.MOVE_TO_LINE_TO,f,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),u&&(this.instructions.push(e.closePathInstruction),this.hitDetectionInstructions.push(e.closePathInstruction)),i=a}return s&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),u&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),i}},{key:"drawCircle",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,i.defaultLineDash,i.defaultLineDashOffset]);var u=t.getFlatCoordinates(),l=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,l,!1,!1);var a=[e.default.CIRCLE,c];this.instructions.push(e.beginPathInstruction,a),this.hitDetectionInstructions.push(e.beginPathInstruction,a),void 0!==r.fillStyle&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),void 0!==r.strokeStyle&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),this.endGeometry(n)}}},{key:"drawPolygon",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,i.defaultLineDash,i.defaultLineDashOffset]);var u=t.getEnds(),l=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(l,0,u,c),this.endGeometry(n)}}},{key:"drawMultiPolygon",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,i.defaultLineDash,i.defaultLineDashOffset]);for(var u=t.getEndss(),l=t.getOrientedFlatCoordinates(),c=t.getStride(),a=0,f=0,h=u.length;f<h;++f)a=this.drawFlatCoordinatess_(l,a,u[f],c);this.endGeometry(n)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,r=e.length;i<r;++i)e[i]=(0,n.snap)(e[i],t);return p(_(s.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}]),s}(),m=I;exports.default=m;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../canvas.js":"iAG7","../../geom/flat/simplify.js":"IEpt"}],"EgcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineChunk=a;var r=require("../../math.js");function e(r,e){return o(r)||u(r,e)||n(r,e)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(r,e){if(r){if("string"==typeof r)return l(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(r,e):void 0}}function l(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function u(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,l,u,o,a=[],i=!0,s=!1;try{if(u=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;i=!1}else for(;!(i=(n=u.call(t)).done)&&(a.push(n.value),a.length!==e);i=!0);}catch(c){s=!0,l=c}finally{try{if(!i&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw l}}return a}}function o(r){if(Array.isArray(r))return r}function a(t,n,l,u,o){for(var a=[],i=l,s=0,c=n.slice(l,2);s<t&&i+o<u;){var f=e(c.slice(-2),2),p=f[0],h=f[1],y=n[i+o],v=n[i+o+1],b=Math.sqrt((y-p)*(y-p)+(v-h)*(v-h));if((s+=b)>=t){var d=(t-s+b)/b,m=(0,r.lerp)(p,y,d),j=(0,r.lerp)(h,v,d);c.push(m,j),a.push(c),c=[m,j],s==t&&(i+=o),s=0}else if(s<t)c.push(n[i+o],n[i+o+1]),i+=o;else{var g=b-s,A=(0,r.lerp)(p,y,g/b),O=(0,r.lerp)(h,v,g/b);c.push(A,O),a.push(c),c=[A,O],s=0,i+=o}}return s>0&&a.push(c),a}
},{"../../math.js":"B96G"}],"hCfl":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"DEzw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=a(require("./Builder.js")),e=a(require("./Instruction.js")),i=require("../../colorlike.js"),l=require("../canvas.js"),r=require("../../util.js"),n=require("../../extent.js"),o=require("../../geom/flat/linechunk.js"),s=require("../../geom/flat/straightchunk.js");function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var l=e[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,d(l.key),l)}}function c(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=g(t,"string");return"symbol"===u(e)?e:String(e)}function g(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var l=i.call(t,e||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var l=p(t,e);if(l){var r=Object.getOwnPropertyDescriptor(l,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}function x(t,e){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=b();return function(){var i,l=m(t);if(e){var r=m(this).constructor;i=Reflect.construct(l,arguments,r)}else i=l.apply(this,arguments);return _(this,i)}}function _(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=O;var F=function(a){S(h,t.default);var u=v(h);function h(t,e,i,r){var n;return f(this,h),(n=u.call(this,t,e,i,r)).labels_=null,n.text_="",n.textOffsetX_=0,n.textOffsetY_=0,n.textRotateWithView_=void 0,n.textRotation_=0,n.textFillState_=null,n.fillStates={},n.fillStates[l.defaultFillStyle]={fillStyle:l.defaultFillStyle},n.textStrokeState_=null,n.strokeStates={},n.textState_={},n.textStates={},n.textKey_="",n.fillKey_="",n.strokeKey_="",n.declutterImageWithText_=void 0,n}return c(h,[{key:"finish",value:function(){var t=y(m(h.prototype),"finish",this).call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}},{key:"drawText",value:function(t,i){var r=this.textFillState_,a=this.textStrokeState_,u=this.textState_;if(""!==this.text_&&u&&(r||a)){var f=this.coordinates,h=f.length,c=t.getType(),d=null,g=t.getStride();if("line"!==u.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){var y=u.overflow?null:[];switch(c){case"Point":case"MultiPoint":d=t.getFlatCoordinates();break;case"LineString":d=t.getFlatMidpoint();break;case"Circle":d=t.getCenter();break;case"MultiLineString":d=t.getFlatMidpoints(),g=2;break;case"Polygon":d=t.getFlatInteriorPoint(),u.overflow||y.push(d[2]/this.resolution),g=3;break;case"MultiPolygon":var p=t.getFlatInteriorPoints();d=[];for(var S=0,x=p.length;S<x;S+=3)u.overflow||y.push(p[S+2]/this.resolution),d.push(p[S],p[S+1]);if(0===d.length)return;g=2}var v=this.appendFlatPointCoordinates(d,g);if(v===h)return;if(y&&(v-h)/2!=d.length/g){var _=h/2;y=y.filter(function(t,e){var i=f[2*(_+e)]===d[e*g]&&f[2*(_+e)+1]===d[e*g+1];return i||--_,i})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&this.updateFillStyle(this.state,this.createFill),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var k=u.padding;if(k!=l.defaultPadding&&(u.scale[0]<0||u.scale[1]<0)){var b=u.padding[0],m=u.padding[1],O=u.padding[2],F=u.padding[3];u.scale[0]<0&&(m=-m,F=-F),u.scale[1]<0&&(b=-b,O=-O),k=[b,m,O,F]}var w=this.pixelRatio;this.instructions.push([e.default.DRAW_IMAGE,h,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,k==l.defaultPadding?l.defaultPadding:k.map(function(t){return t*w}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);var P=1/w,j=this.state.fillStyle;u.backgroundFill&&(this.state.fillStyle=l.defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([e.default.DRAW_IMAGE,h,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[P,P],NaN,void 0,this.declutterImageWithText_,k,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?l.defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),u.backgroundFill&&(this.state.fillStyle=j,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(i)}else{if(!(0,n.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var R;if(d=t.getFlatCoordinates(),"LineString"==c)R=[d.length];else if("MultiLineString"==c)R=t.getEnds();else if("Polygon"==c)R=t.getEnds().slice(0,1);else if("MultiPolygon"==c){var L=t.getEndss();R=[];for(var T=0,A=L.length;T<A;++T)R.push(L[T][0])}this.beginGeometry(t,i);for(var D=u.repeat,C=D?void 0:u.textAlign,W=0,K=0,N=R.length;K<N;++K)for(var M=void 0,I=0,B=(M=D?(0,o.lineChunk)(D*this.resolution,d,W,R[K],g):[d.slice(W,R[K])]).length;I<B;++I){var E=M[I],q=0,G=E.length;if(null==C){var J=(0,s.matchingChunk)(u.maxAngle,E,0,E.length,2);q=J[0],G=J[1]}for(var X=q;X<G;X+=g)f.push(E[X],E[X+1]);var Y=f.length;W=R[K],this.drawChars_(h,Y),h=Y}this.endGeometry(i)}}}},{key:"saveTextStates_",value:function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||l.defaultTextAlign,justify:e.justify,textBaseline:e.textBaseline||l.defaultTextBaseline,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}},{key:"drawChars_",value:function(t,i){var r=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,f=O[n.textBaseline],h=this.textOffsetY_*u,c=this.text_,d=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([e.default.DRAW_CHARS,t,i,f,n.overflow,a,n.maxAngle,u,h,o,d*u,c,s,1]),this.hitDetectionInstructions.push([e.default.DRAW_CHARS,t,i,f,n.overflow,a?l.defaultFillStyle:a,n.maxAngle,1,h,o,d,c,s,1/u])}},{key:"setTextStyle",value:function(t,e){var n,o,s;if(t){var a=t.getFill();a?((o=this.textFillState_)||(o={},this.textFillState_=o),o.fillStyle=(0,i.asColorLike)(a.getColor()||l.defaultFillStyle)):(o=null,this.textFillState_=o);var u=t.getStroke();if(u){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);var f=u.getLineDash(),h=u.getLineDashOffset(),c=u.getWidth(),d=u.getMiterLimit();s.lineCap=u.getLineCap()||l.defaultLineCap,s.lineDash=f?f.slice():l.defaultLineDash,s.lineDashOffset=void 0===h?l.defaultLineDashOffset:h,s.lineJoin=u.getLineJoin()||l.defaultLineJoin,s.lineWidth=void 0===c?l.defaultLineWidth:c,s.miterLimit=void 0===d?l.defaultMiterLimit:d,s.strokeStyle=(0,i.asColorLike)(u.getColor()||l.defaultStrokeStyle)}else s=null,this.textStrokeState_=s;n=this.textState_;var g=t.getFont()||l.defaultFont;(0,l.registerFont)(g);var y=t.getScaleArray();n.overflow=t.getOverflow(),n.font=g,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||l.defaultTextBaseline,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||l.defaultPadding,n.scale=void 0===y?[1,1]:y;var p=t.getOffsetX(),S=t.getOffsetY(),x=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===S?0:S,this.textRotateWithView_=void 0!==x&&x,this.textRotation_=void 0===v?0:v,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,r.getUid)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+(0,r.getUid)(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}]),h}(),w=F;exports.default=w;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../../colorlike.js":"V5XN","../canvas.js":"iAG7","../../util.js":"KniQ","../../extent.js":"QDir","../../geom/flat/linechunk.js":"EgcX","../../geom/flat/straightchunk.js":"hCfl"}],"vqHd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Builder.js")),t=o(require("./ImageBuilder.js")),r=o(require("./LineStringBuilder.js")),i=o(require("./PolygonBuilder.js")),n=o(require("./TextBuilder.js"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function f(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=d(e,"string");return"symbol"===u(t)?t:String(t)}function d(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c={Circle:i.default,Default:e.default,Image:t.default,LineString:r.default,Polygon:i.default,Text:n.default},y=function(){function e(t,r,i,n){l(this,e),this.tolerance_=t,this.maxExtent_=r,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return f(e,[{key:"finish",value:function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var r=this.buildersByZIndex_[t];for(var i in r){var n=r[i].finish();e[t][i]=n}}return e}},{key:"getBuilder",value:function(e,t){var r=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(i={},this.buildersByZIndex_[r]=i);var n=i[t];void 0===n&&(n=new(0,c[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=n);return n}}]),e}(),v=y;exports.default=v;
},{"./Builder.js":"QBj4","./ImageBuilder.js":"JWDt","./LineStringBuilder.js":"ppsk","./PolygonBuilder.js":"e19k","./TextBuilder.js":"DEzw"}],"fpOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../events/EventType.js")),t=o(require("../ImageState.js")),r=o(require("../Observable.js")),n=require("../util.js");function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===u(t)?t:String(t)}function f(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=d(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=h();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(o){y(i,r.default);var u=b(i);function i(e){var t;return a(this,i),(t=u.call(this)).ready=!0,t.boundHandleImageChange_=t.handleImageChange_.bind(g(t)),t.layer_=e,t.declutterExecutorGroup=null,t}return l(i,[{key:"getFeatures",value:function(e){return(0,n.abstract)()}},{key:"getData",value:function(e){return null}},{key:"prepareFrame",value:function(e){return(0,n.abstract)()}},{key:"renderFrame",value:function(e,t){return(0,n.abstract)()}},{key:"loadedTileCallback",value:function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(e,t,r){var n=this;return function(o,u){var a=n.loadedTileCallback.bind(n,r,o);return e.forEachLoadedTile(t,o,u,a)}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(e){var r=e.target;r.getState()!==t.default.LOADED&&r.getState()!==t.default.ERROR||this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(r){var n=r.getState();return n!=t.default.LOADED&&n!=t.default.ERROR&&r.addEventListener(e.default.CHANGE,this.boundHandleImageChange_),n==t.default.IDLE&&(r.load(),n=r.getState()),n==t.default.LOADED}},{key:"renderIfReadyAndVisible",value:function(){var e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,s(m(i.prototype),"disposeInternal",this).call(this)}}]),i}(),j=O;exports.default=j;
},{"../events/EventType.js":"C8cu","../ImageState.js":"u3kG","../Observable.js":"IdSm","../util.js":"KniQ"}],"EB6P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(e){f(n,t.default);var r=a(n);function n(t,e,o,i){var u;return c(this,n),(u=r.call(this,t)).inversePixelTransform=e,u.frameState=o,u.context=i,u}return o(n)}(),d=v;exports.default=d;
},{"../events/Event.js":"fKNg"}],"vPfl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.canvasPool=void 0;var e=l(require("../Layer.js")),t=l(require("../../render/Event.js")),r=l(require("../../render/EventType.js")),n=require("../../transform.js"),o=require("../../color.js"),a=require("../../dom.js"),i=require("../../array.js"),u=require("../../extent.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=d(e,"string");return"symbol"===c(t)?t:String(t)}function d(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=h(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=P();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=[];exports.canvasPool=j;var O=null;function w(){O=(0,a.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})}var E=function(l){m(f,e.default);var c=g(f);function f(e){var t;return s(this,f),(t=c.call(this,e)).container=null,t.renderedResolution,t.tempTransform=(0,n.create)(),t.pixelTransform=(0,n.create)(),t.inversePixelTransform=(0,n.create)(),t.context=null,t.containerReused=!1,t.pixelContext_=null,t.frameState=null,t}return p(f,[{key:"getImageData",value:function(e,t,r){var n;O||w(),O.clearRect(0,0,1,1);try{O.drawImage(e,t,r,1,1,0,0,1,1),n=O.getImageData(0,0,1,1).data}catch(o){return O=null,null}return n}},{key:"getBackground",value:function(e){var t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}},{key:"useContainer",value:function(e,t,r){var n,u,l=this.getLayer().getClassName();if(e&&e.className===l&&(!r||e&&e.style.backgroundColor&&(0,i.equals)((0,o.asArray)(e.style.backgroundColor),(0,o.asArray)(r)))){var c=e.firstElementChild;c instanceof HTMLCanvasElement&&(u=c.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(n=document.createElement("div")).className=l;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var f=(u=(0,a.createCanvasContext2D)()).canvas;n.appendChild(f),(s=f.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=u}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}},{key:"clipUnrotated",value:function(e,t,r){var o=(0,u.getTopLeft)(r),a=(0,u.getTopRight)(r),i=(0,u.getBottomRight)(r),l=(0,u.getBottomLeft)(r);(0,n.apply)(t.coordinateToPixelTransform,o),(0,n.apply)(t.coordinateToPixelTransform,a),(0,n.apply)(t.coordinateToPixelTransform,i),(0,n.apply)(t.coordinateToPixelTransform,l);var c=this.inversePixelTransform;(0,n.apply)(c,o),(0,n.apply)(c,a),(0,n.apply)(c,i),(0,n.apply)(c,l),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}},{key:"dispatchRenderEvent_",value:function(e,r,n){var o=this.getLayer();if(o.hasListener(e)){var a=new t.default(e,this.inversePixelTransform,n,r);o.dispatchEvent(a)}}},{key:"preRender",value:function(e,t){this.frameState=t,this.dispatchRenderEvent_(r.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(r.default.POSTRENDER,e,t)}},{key:"getRenderTransform",value:function(e,t,r,o,a,i,u){var l=a/2,c=i/2,s=o/t,f=-s,p=-e[0]+u,y=-e[1];return(0,n.compose)(this.tempTransform,l,c,s,f,-r,p,y)}},{key:"disposeInternal",value:function(){delete this.frameState,v(x(f.prototype),"disposeInternal",this).call(this)}}]),f}(),k=E;exports.default=k;
},{"../Layer.js":"fpOz","../../render/Event.js":"EB6P","../../render/EventType.js":"z39m","../../transform.js":"P4eA","../../color.js":"eucy","../../dom.js":"Xno5","../../array.js":"luEr","../../extent.js":"QDir"}],"JxN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=e;var r=require("../../math.js"),a=require("./transform.js");function e(e,t,n,i,s,v,l,u,f,o,p,h){var M=e[t],b=e[t+1],c=0,d=0,g=0,j=0;function q(){c=M,d=b,M=e[t+=i],b=e[t+1],j+=g,g=Math.sqrt((M-c)*(M-c)+(b-d)*(b-d))}do{q()}while(t<n-i&&j+g<v);for(var x=0===g?0:(v-j)/g,P=(0,r.lerp)(c,M,x),m=(0,r.lerp)(d,b,x),w=t-i,O=j,_=v+u*f(o,s,p);t<n-i&&j+g<_;)q();x=0===g?0:(_-j)/g;var k,y=(0,r.lerp)(c,M,x),I=(0,r.lerp)(d,b,x);if(h){var T=[P,m,y,I];(0,a.rotate)(T,0,4,2,h,T,T),k=T[0]>T[2]}else k=P>y;var z,A=Math.PI,B=[],C=w+i===t;if(g=0,j=O,M=e[t=w],b=e[t+1],C){q(),z=Math.atan2(b-d,M-c),k&&(z+=z>0?-A:A);var D=(y+P)/2,E=(I+m)/2;return B[0]=[D,E,(_-v)/2,z,s],B}for(var F=0,G=(s=s.replace(/\n/g," ")).length;F<G;){q();var H=Math.atan2(b-d,M-c);if(k&&(H+=H>0?-A:A),void 0!==z){var J=H-z;if(J+=J>A?-2*A:J<-A?2*A:0,Math.abs(J)>l)return null}z=H;for(var K=F,L=0;F<G;++F){var N=u*f(o,s[k?G-F-1:F],p);if(t+i<n&&j+g<v+L+N/2)break;L+=N}if(F!==K){var Q=k?s.substring(G-K,G-F):s.substring(K,F);x=0===g?0:(v+L/2-j)/g;var R=(0,r.lerp)(c,M,x),S=(0,r.lerp)(d,b,x);B.push([R,S,L/2,H,Q]),v+=L}}return B}
},{"../../math.js":"B96G","./transform.js":"LGwr"}],"pZKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("./Instruction.js")),e=require("./TextBuilder.js"),i=require("../../transform.js"),a=require("../../extent.js"),r=require("../canvas.js"),n=require("../../geom/flat/textpath.js"),l=require("../../array.js"),s=require("../../geom/flat/length.js"),o=require("../../geom/flat/transform.js");function h(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,p(a.key),a)}}function f(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=v(t,"string");return"symbol"===u(e)?e:String(e)}function v(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!==u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m=(0,a.createEmpty)(),g=[],y=[],_=[],x=[];function b(t){return t[3].declutterBox}var S=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function T(t,i){return"start"===i?i=S.test(t)?"right":"left":"end"===i&&(i=S.test(t)?"left":"right"),e.TEXT_ALIGN[i]}function k(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}var w=function(){function h(t,e,a,r){c(this,h),this.overlaps=a,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,i.create)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return f(h,[{key:"createLabel",value:function(t,i,a,n){var l=t+i+a+n;if(this.labels_[l])return this.labels_[l];var s=n?this.strokeStates[n]:null,o=a?this.fillStates[a]:null,h=this.textStates[i],u=this.pixelRatio,c=[h.scale[0]*u,h.scale[1]*u],d=Array.isArray(t),f=h.justify?e.TEXT_ALIGN[h.justify]:T(Array.isArray(t)?t[0]:t,h.textAlign||r.defaultTextAlign),p=n&&s.lineWidth?s.lineWidth:0,v=d?t:t.split("\n").reduce(k,[]),m=(0,r.getTextDimensions)(h,v),g=m.width,y=m.height,_=m.widths,x=m.heights,b=m.lineWidths,S=g+p,w=[],C=(S+2)*c[0],I=(y+p)*c[1],L={width:C<0?Math.floor(C):Math.ceil(C),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:w};1==c[0]&&1==c[1]||w.push("scale",c),n&&(w.push("strokeStyle",s.strokeStyle),w.push("lineWidth",p),w.push("lineCap",s.lineCap),w.push("lineJoin",s.lineJoin),w.push("miterLimit",s.miterLimit),w.push("setLineDash",[s.lineDash]),w.push("lineDashOffset",s.lineDashOffset)),a&&w.push("fillStyle",o.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");for(var M,O=.5-f,A=f*S+O*p,E=[],R=[],D=0,P=0,j=0,B=0,W=0,Y=v.length;W<Y;W+=2){var X=v[W];if("\n"!==X){var N=v[W+1]||h.font;N!==M&&(n&&E.push("font",N),a&&R.push("font",N),M=N),D=Math.max(D,x[j]);var q=[X,A+O*_[j]+f*(_[j]-b[B]),.5*(p+D)+P];A+=_[j],n&&E.push("strokeText",q),a&&R.push("fillText",q),++j}else P+=D,D=0,A=f*S+O*p,++B}return Array.prototype.push.apply(w,E),Array.prototype.push.apply(w,R),this.labels_[l]=L,L}},{key:"replayTextBackground_",value:function(t,e,i,a,r,n,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,r),t.lineTo.apply(t,e),n&&(this.alignFill_=n[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(t,e,r,n,l,s,o,h,u,c,d,f,p,v,b,S){var T,k=r-(o*=f[0]),w=n-(h*=f[1]),C=l+u>t?t-u:l,I=s+c>e?e-c:s,L=v[3]+C*f[0]+v[1],M=v[0]+I*f[1]+v[2],O=k-v[3],A=w-v[0];return(b||0!==d)&&(g[0]=O,x[0]=O,g[1]=A,y[1]=A,y[0]=O+L,_[0]=y[0],_[1]=A+M,x[1]=_[1]),0!==d?(T=(0,i.compose)((0,i.create)(),r,n,1,1,d,-r,-n),(0,i.apply)(T,g),(0,i.apply)(T,y),(0,i.apply)(T,_),(0,i.apply)(T,x),(0,a.createOrUpdate)(Math.min(g[0],y[0],_[0],x[0]),Math.min(g[1],y[1],_[1],x[1]),Math.max(g[0],y[0],_[0],x[0]),Math.max(g[1],y[1],_[1],x[1]),m)):(0,a.createOrUpdate)(Math.min(O,O+L),Math.min(A,A+M),Math.max(O,O+L),Math.max(A,A+M),m),p&&(k=Math.round(k),w=Math.round(w)),{drawImageX:k,drawImageY:w,drawImageW:C,drawImageH:I,originX:u,originY:c,declutterBox:{minX:m[0],minY:m[1],maxX:m[2],maxY:m[3],value:S},canvasTransform:T,scale:f}}},{key:"replayImageOrLabel_",value:function(t,e,i,a,n,l,s){var o=!(!l&&!s),h=a.declutterBox,u=t.canvas,c=s?s[2]*a.scale[0]/2:0;return h.minX-c<=u.width/e&&h.maxX+c>=0&&h.minY-c<=u.height/e&&h.maxY+c>=0&&(o&&this.replayTextBackground_(t,g,y,_,x,l,s),(0,r.drawImageOrLabel)(t,a.canvasTransform,n,i,a.originX,a.originY,a.drawImageW,a.drawImageH,a.drawImageX,a.drawImageY,a.scale)),!0}},{key:"fill_",value:function(t){if(this.alignFill_){var e=(0,i.apply)(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;t.save(),t.translate(e[0]%a,e[1]%a),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}},{key:"setStrokeStyle_",value:function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}},{key:"drawLabelWithPointPlacement_",value:function(t,i,a,n){var l=this.textStates[i],s=this.createLabel(t,i,n,a),o=this.strokeStates[a],h=this.pixelRatio,u=T(Array.isArray(t)?t[0]:t,l.textAlign||r.defaultTextAlign),c=e.TEXT_ALIGN[l.textBaseline||r.defaultTextBaseline],d=o&&o.lineWidth?o.lineWidth:0;return{label:s,anchorX:u*(s.width/h-2*l.scale[0])+2*(.5-u)*d,anchorY:c*s.height/h+2*(.5-c)*d}}},{key:"execute_",value:function(e,h,u,c,d,f,p,v){var m;this.pixelCoordinates_&&(0,l.equals)(u,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=(0,o.transform2D)(this.coordinates,0,this.coordinates.length,2,u,this.pixelCoordinates_),(0,i.setFromArray)(this.renderedTransform_,u));for(var g,y,_,x,S,k,w,C,I,L,M,O,A,E,R,D,P=0,j=c.length,B=0,W=0,Y=0,X=null,N=null,q=this.coordinateCache_,G=this.viewRotation_,F=Math.round(1e12*Math.atan2(-u[1],u[0]))/1e12,H={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},J=this.instructions!=c||this.overlaps?0:200;P<j;){var U=c[P];switch(U[0]){case t.default.BEGIN_GEOMETRY:A=U[1],D=U[3],A.getGeometry()?void 0===p||(0,a.intersects)(p,D.getExtent())?++P:P=U[2]+1:P=U[2];break;case t.default.BEGIN_PATH:W>J&&(this.fill_(e),W=0),Y>J&&(e.stroke(),Y=0),W||Y||(e.beginPath(),x=NaN,S=NaN),++P;break;case t.default.CIRCLE:var K=m[B=U[1]],V=m[B+1],z=m[B+2]-K,Q=m[B+3]-V,Z=Math.sqrt(z*z+Q*Q);e.moveTo(K+Z,V),e.arc(K,V,Z,0,2*Math.PI,!0),++P;break;case t.default.CLOSE_PATH:e.closePath(),++P;break;case t.default.CUSTOM:B=U[1],g=U[2];var $=U[3],tt=U[4],et=6==U.length?U[5]:void 0;H.geometry=$,H.feature=A,P in q||(q[P]=[]);var it=q[P];et?et(m,B,g,2,it):(it[0]=m[B],it[1]=m[B+1],it.length=2),tt(it,H),++P;break;case t.default.DRAW_IMAGE:B=U[1],g=U[2],C=U[3],y=U[4],_=U[5];var at=U[6],rt=U[7],nt=U[8],lt=U[9],st=U[10],ot=U[11],ht=U[12],ut=U[13],ct=U[14],dt=U[15];if(!C&&U.length>=20){I=U[19],L=U[20],M=U[21],O=U[22];var ft=this.drawLabelWithPointPlacement_(I,L,M,O);C=ft.label,U[3]=C;var pt=U[23];y=(ft.anchorX-pt)*this.pixelRatio,U[4]=y;var vt=U[24];_=(ft.anchorY-vt)*this.pixelRatio,U[5]=_,at=C.height,U[6]=at,ut=C.width,U[13]=ut}var mt=void 0;U.length>25&&(mt=U[25]);var gt=void 0,yt=void 0,_t=void 0;U.length>17?(gt=U[16],yt=U[17],_t=U[18]):(gt=r.defaultPadding,yt=!1,_t=!1),st&&F?ot+=G:st||F||(ot-=G);for(var xt=0;B<g;B+=2)if(!(mt&&mt[xt++]<ut/this.pixelRatio)){var bt=this.calculateImageOrLabelDimensions_(C.width,C.height,m[B],m[B+1],ut,at,y,_,nt,lt,ot,ht,d,gt,yt||_t,A),St=[e,h,C,bt,rt,yt?X:null,_t?N:null];if(v){if("none"===ct)continue;if("obstacle"===ct){v.insert(bt.declutterBox);continue}var Tt=void 0,kt=void 0;if(dt){var wt=g-B;if(!dt[wt]){dt[wt]=St;continue}if(Tt=dt[wt],delete dt[wt],kt=b(Tt),v.collides(kt))continue}if(v.collides(bt.declutterBox))continue;Tt&&(v.insert(kt),this.replayImageOrLabel_.apply(this,Tt)),v.insert(bt.declutterBox)}this.replayImageOrLabel_.apply(this,St)}++P;break;case t.default.DRAW_CHARS:var Ct=U[1],It=U[2],Lt=U[3],Mt=U[4];O=U[5];var Ot=U[6],At=U[7],Et=U[8];M=U[9];var Rt=U[10];I=U[11],L=U[12];var Dt=[U[13],U[13]],Pt=this.textStates[L],jt=Pt.font,Bt=[Pt.scale[0]*At,Pt.scale[1]*At],Wt=void 0;jt in this.widths_?Wt=this.widths_[jt]:(Wt={},this.widths_[jt]=Wt);var Yt=(0,s.lineStringLength)(m,Ct,It,2),Xt=Math.abs(Bt[0])*(0,r.measureAndCacheTextWidth)(jt,I,Wt);if(Mt||Xt<=Yt){var Nt=(Yt-Xt)*T(I,this.textStates[L].textAlign),qt=(0,n.drawTextOnPath)(m,Ct,It,2,I,Nt,Ot,Math.abs(Bt[0]),r.measureAndCacheTextWidth,jt,Wt,F?0:this.viewRotation_);t:if(qt){var Gt=[],Ft=void 0,Ht=void 0,Jt=void 0,Ut=void 0,Kt=void 0;if(M)for(Ft=0,Ht=qt.length;Ft<Ht;++Ft){Jt=(Kt=qt[Ft])[4],Ut=this.createLabel(Jt,L,"",M),y=Kt[2]+(Bt[0]<0?-Rt:Rt),_=Lt*Ut.height+2*(.5-Lt)*Rt*Bt[1]/Bt[0]-Et;var Vt=this.calculateImageOrLabelDimensions_(Ut.width,Ut.height,Kt[0],Kt[1],Ut.width,Ut.height,y,_,0,0,Kt[3],Dt,!1,r.defaultPadding,!1,A);if(v&&v.collides(Vt.declutterBox))break t;Gt.push([e,h,Ut,Vt,1,null,null])}if(O)for(Ft=0,Ht=qt.length;Ft<Ht;++Ft){Jt=(Kt=qt[Ft])[4],Ut=this.createLabel(Jt,L,O,""),y=Kt[2],_=Lt*Ut.height-Et;var zt=this.calculateImageOrLabelDimensions_(Ut.width,Ut.height,Kt[0],Kt[1],Ut.width,Ut.height,y,_,0,0,Kt[3],Dt,!1,r.defaultPadding,!1,A);if(v&&v.collides(zt.declutterBox))break t;Gt.push([e,h,Ut,zt,1,null,null])}v&&v.load(Gt.map(b));for(var Qt=0,Zt=Gt.length;Qt<Zt;++Qt)this.replayImageOrLabel_.apply(this,Gt[Qt])}}++P;break;case t.default.END_GEOMETRY:if(void 0!==f){var $t=f(A=U[1],D);if($t)return $t}++P;break;case t.default.FILL:J?W++:this.fill_(e),++P;break;case t.default.MOVE_TO_LINE_TO:for(B=U[1],g=U[2],E=m[B],w=(R=m[B+1])+.5|0,(k=E+.5|0)===x&&w===S||(e.moveTo(E,R),x=k,S=w),B+=2;B<g;B+=2)k=(E=m[B])+.5|0,w=(R=m[B+1])+.5|0,B!=g-2&&k===x&&w===S||(e.lineTo(E,R),x=k,S=w);++P;break;case t.default.SET_FILL_STYLE:X=U,this.alignFill_=U[2],W&&(this.fill_(e),W=0,Y&&(e.stroke(),Y=0)),e.fillStyle=U[1],++P;break;case t.default.SET_STROKE_STYLE:N=U,Y&&(e.stroke(),Y=0),this.setStrokeStyle_(e,U),++P;break;case t.default.STROKE:J?Y++:e.stroke(),++P;break;default:++P}}W&&this.fill_(e),Y&&e.stroke()}},{key:"execute",value:function(t,e,i,a,r,n){this.viewRotation_=a,this.execute_(t,e,i,this.instructions,r,void 0,void 0,n)}},{key:"executeHitDetection",value:function(t,e,i,a,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,a,r)}}]),h}(),C=w;exports.default=C;
},{"./Instruction.js":"kTJv","./TextBuilder.js":"DEzw","../../transform.js":"P4eA","../../extent.js":"QDir","../canvas.js":"iAG7","../../geom/flat/textpath.js":"JxN9","../../array.js":"luEr","../../geom/flat/length.js":"ZZrx","../../geom/flat/transform.js":"LGwr"}],"ngEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getPixelIndexArray=I;var e=u(require("./Executor.js")),t=require("../../array.js"),r=require("../../extent.js"),n=require("../../transform.js"),o=require("../../dom.js"),i=require("../../obj.js"),a=require("../../geom/flat/transform.js");function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return h(e)||l(e)||f(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function l(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){if(Array.isArray(e))return v(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function x(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=b(e,"string");return"symbol"===y(t)?t:String(t)}function b(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var g=["Polygon","Circle","LineString","Image","Text","Default"],_=function(){function u(e,t,r,o,i,a){d(this,u),this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,n.create)(),this.createExecutors_(i)}return x(u,[{key:"clip",value:function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}},{key:"createExecutors_",value:function(t){for(var r in t){var n=this.executorsByZIndex_[r];void 0===n&&(n={},this.executorsByZIndex_[r]=n);var o=t[r];for(var i in o){var a=o[i];n[i]=new e.default(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}}},{key:"hasExecutors",value:function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],n=0,o=e.length;n<o;++n)if(e[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(e,i,a,u,s,c){var f=2*(u=Math.round(u))+1,l=(0,n.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/i,-1/i,-a,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=(0,o.createCanvasContext2D)(f,f,void 0,{willReadFrequently:!0}));var v,y=this.hitDetectionContext_;y.canvas.width!==f||y.canvas.height!==f?(y.canvas.width=f,y.canvas.height=f):h||y.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(v=(0,r.createEmpty)(),(0,r.extendCoordinate)(v,e),(0,r.buffer)(v,i*(this.renderBuffer_+u),v));var d,p=I(u);function x(e,t){for(var r=y.getImageData(0,0,f,f).data,n=0,o=p.length;n<o;n++)if(r[p[n]]>0){if(!c||"Image"!==d&&"Text"!==d||c.includes(e)){var i=(p[n]-3)/4,a=u-i%f,l=u-(i/f|0),h=s(e,t,a*a+l*l);if(h)return h}y.clearRect(0,0,f,f);break}}var m,b,_,j,S,C=Object.keys(this.executorsByZIndex_).map(Number);for(C.sort(t.ascending),m=C.length-1;m>=0;--m){var E=C[m].toString();for(_=this.executorsByZIndex_[E],b=g.length-1;b>=0;--b)if(void 0!==(j=_[d=g[b]])&&(S=j.executeHitDetection(y,l,a,x,v)))return S}}},{key:"getClipCoords",value:function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],n=t[1],o=t[2],i=t[3],u=[r,n,r,i,o,i,o,n];return(0,a.transform2D)(u,0,8,2,e,u),u}},{key:"isEmpty",value:function(){return(0,i.isEmpty)(this.executorsByZIndex_)}},{key:"execute",value:function(e,r,n,o,i,a,u){var s,c,f,l,h,v,y=Object.keys(this.executorsByZIndex_).map(Number);for(y.sort(t.ascending),this.maxExtent_&&(e.save(),this.clip(e,n)),a=a||g,u&&y.reverse(),s=0,c=y.length;s<c;++s){var d=y[s].toString();for(h=this.executorsByZIndex_[d],f=0,l=a.length;f<l;++f){void 0!==(v=h[a[f]])&&v.execute(e,r,n,o,i,u)}}this.maxExtent_&&e.restore()}}]),u}(),j={};function I(e){if(void 0!==j[e])return j[e];for(var t=2*e+1,r=e*e,n=new Array(r+1),o=0;o<=e;++o)for(var i=0;i<=e;++i){var a=o*o+i*i;if(a>r)break;var u=n[a];u||(u=[],n[a]=u),u.push(4*((e+o)*t+(e+i))+3),o>0&&u.push(4*((e-o)*t+(e+i))+3),i>0&&(u.push(4*((e+o)*t+(e-i))+3),o>0&&u.push(4*((e-o)*t+(e-i))+3))}for(var c=[],f=0,l=n.length;f<l;++f)n[f]&&c.push.apply(c,s(n[f]));return j[e]=c,c}var S=_;exports.default=S;
},{"./Executor.js":"pZKE","../../array.js":"luEr","../../extent.js":"QDir","../../transform.js":"P4eA","../../dom.js":"Xno5","../../obj.js":"mH6q","../../geom/flat/transform.js":"LGwr"}],"fo6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../VectorContext.js")),e=require("../../colorlike.js"),i=require("../../transform.js"),a=require("../canvas.js"),r=require("../../array.js"),n=require("../../extent.js"),s=require("../../math.js"),o=require("../../geom/flat/transform.js"),l=require("../../geom/SimpleGeometry.js");function h(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,c(a.key),a)}}function g(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=m(t,"string");return"symbol"===f(e)?e:String(e)}function m(t,e){if("object"!==f(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!==f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}function S(t,e){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=p();return function(){var i,a=k(t);if(e){var r=k(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return y(this,i)}}function y(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(h){x(u,t.default);var f=d(u);function u(t,e,a,r,n,o,l){var h;return _(this,u),(h=f.call(this)).context_=t,h.pixelRatio_=e,h.extent_=a,h.transform_=r,h.transformRotation_=r?(0,s.toFixed)(Math.atan2(r[1],r[0]),10):0,h.viewRotation_=n,h.squaredTolerance_=o,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,i.create)(),h}return g(u,[{key:"drawImages_",value:function(t,e,a,r){if(this.image_){var n=(0,o.transform2D)(t,e,a,r,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.tmpLocalTransform_,h=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=h*this.imageOpacity_);var f=this.imageRotation_;0===this.transformRotation_&&(f-=this.viewRotation_),this.imageRotateWithView_&&(f+=this.viewRotation_);for(var _=0,u=n.length;_<u;_+=2){var g=n[_]-this.imageAnchorX_,c=n[_+1]-this.imageAnchorY_;if(0!==f||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=g+this.imageAnchorX_,x=c+this.imageAnchorY_;(0,i.compose)(l,m,x,1,1,f,-m,-x),s.setTransform.apply(s,l),s.translate(m,x),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,c,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=h)}}},{key:"drawText_",value:function(t,e,i,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=(0,o.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.textRotation_;for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=a){var l=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(n.translate(l-this.textOffsetX_,h-this.textOffsetY_),n.rotate(s),n.translate(this.textOffsetX_,this.textOffsetY_),n.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&n.strokeText(this.text_,0,0),this.textFillState_&&n.fillText(this.text_,0,0),n.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&n.strokeText(this.text_,l,h),this.textFillState_&&n.fillText(this.text_,l,h))}}}},{key:"moveToLineTo_",value:function(t,e,i,a,r){var n=this.context_,s=(0,o.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_);n.moveTo(s[0],s[1]);var l=s.length;r&&(l-=2);for(var h=2;h<l;h+=2)n.lineTo(s[h],s[h+1]);return r&&n.closePath(),i}},{key:"drawRings_",value:function(t,e,i,a){for(var r=0,n=i.length;r<n;++r)e=this.moveToLineTo_(t,e,i[r],a,!0);return e}},{key:"drawCircle",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,l.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],a=e[3]-e[1],r=Math.sqrt(i*i+a*a),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}},{key:"setStyle",value:function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}},{key:"setTransform",value:function(t){this.transform_=t}},{key:"drawGeometry",value:function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}},{key:"drawFeature",value:function(t,e){var i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}},{key:"drawGeometryCollection",value:function(t){for(var e=t.getGeometriesArray(),i=0,a=e.length;i<a;++i)this.drawGeometry(e[i])}},{key:"drawPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawMultiPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawLineString",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}}},{key:"drawMultiLineString",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,n.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,a=t.getFlatCoordinates(),r=0,s=t.getEnds(),o=t.getStride();i.beginPath();for(var l=0,h=s.length;l<h;++l)r=this.moveToLineTo_(a,r,s[l],o,!1);i.stroke()}if(""!==this.text_){var f=t.getFlatMidpoints();this.drawText_(f,0,f.length,2)}}}},{key:"drawPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}},{key:"drawMultiPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),a=0,r=t.getEndss(),s=t.getStride();e.beginPath();for(var o=0,l=r.length;o<l;++o){var h=r[o];a=this.drawRings_(i,a,h,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var f=t.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}}},{key:"setContextFillState_",value:function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}},{key:"setContextStrokeState_",value:function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,r.equals)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}},{key:"setContextTextState_",value:function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:a.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}},{key:"setFillStrokeStyle",value:function(t,i){var r=this;if(t){var n=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(n||a.defaultFillStyle)}}else this.fillState_=null;if(i){var s=i.getColor(),o=i.getLineCap(),l=i.getLineDash(),h=i.getLineDashOffset(),f=i.getLineJoin(),_=i.getWidth(),u=i.getMiterLimit(),g=l||a.defaultLineDash;this.strokeState_={lineCap:void 0!==o?o:a.defaultLineCap,lineDash:1===this.pixelRatio_?g:g.map(function(t){return t*r.pixelRatio_}),lineDashOffset:(h||a.defaultLineDashOffset)*this.pixelRatio_,lineJoin:void 0!==f?f:a.defaultLineJoin,lineWidth:(void 0!==_?_:a.defaultLineWidth)*this.pixelRatio_,miterLimit:void 0!==u?u:a.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(s||a.defaultStrokeStyle)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(t){var e;if(t&&(e=t.getSize())){var i=t.getPixelRatio(this.pixelRatio_),a=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=a[0]*i,this.imageAnchorY_=a[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();var n=t.getScaleArray();this.imageScale_=[n[0]*this.pixelRatio_/i,n[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}else this.image_=null}},{key:"setTextStyle",value:function(t){if(t){var i=t.getFill();if(i){var r=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(r||a.defaultFillStyle)}}else this.textFillState_=null;var n=t.getStroke();if(n){var s=n.getColor(),o=n.getLineCap(),l=n.getLineDash(),h=n.getLineDashOffset(),f=n.getLineJoin(),_=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:a.defaultLineCap,lineDash:l||a.defaultLineDash,lineDashOffset:h||a.defaultLineDashOffset,lineJoin:void 0!==f?f:a.defaultLineJoin,lineWidth:void 0!==_?_:a.defaultLineWidth,miterLimit:void 0!==u?u:a.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(s||a.defaultStrokeStyle)}}else this.textStrokeState_=null;var g=t.getFont(),c=t.getOffsetX(),m=t.getOffsetY(),x=t.getRotateWithView(),S=t.getRotation(),d=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),p=t.getTextBaseline();this.textState_={font:void 0!==g?g:a.defaultFont,textAlign:void 0!==v?v:a.defaultTextAlign,textBaseline:void 0!==p?p:a.defaultTextBaseline},this.text_=void 0!==y?Array.isArray(y)?y.reduce(function(t,e,i){return t+(i%2?" ":e)},""):y:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==x&&x,this.textRotation_=void 0!==S?S:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}else this.text_=""}}]),u}(),w=T;exports.default=w;
},{"../VectorContext.js":"LQER","../../colorlike.js":"V5XN","../../transform.js":"P4eA","../canvas.js":"iAG7","../../array.js":"luEr","../../extent.js":"QDir","../../math.js":"B96G","../../geom/flat/transform.js":"LGwr","../../geom/SimpleGeometry.js":"pnrv"}],"qeKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"cdf1","./style/Fill.js":"AFcg","./style/Icon.js":"z2xv","./style/IconImage.js":"XCOy","./style/Image.js":"S8ow","./style/RegularShape.js":"il3X","./style/Stroke.js":"TXDt","./style/Style.js":"he4w","./style/Text.js":"RPsG"}],"MrCe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HIT_DETECT_RESOLUTION=void 0,exports.createHitDetectionImageData=s,exports.hitDetect=g;var e=n(require("./Immediate.js")),t=require("../../style.js"),r=require("../../array.js"),a=require("../../math.js"),i=require("../../dom.js"),o=require("../../extent.js");function n(e){return e&&e.__esModule?e:{default:e}}var l=.5;function s(a,n,s,g,h,c,v){var u=a[0]*l,f=a[1]*l,d=(0,i.createCanvasContext2D)(u,f);d.imageSmoothingEnabled=!1;for(var m=d.canvas,p=new e.default(d,l,h,null,v),y=s.length,S=Math.floor(16777215/y),x={},I=1;I<=y;++I){var T=s[I-1],C=T.getStyleFunction()||g;if(C){var M=C(T,c);if(M){Array.isArray(M)||(M=[M]);for(var w=(I*S).toString(16).padStart(7,"#00000"),D=0,j=M.length;D<j;++D){var E=M[D],_=E.getGeometryFunction()(T);if(_&&(0,o.intersects)(h,_.getExtent())){var O=E.clone(),q=O.getFill();q&&q.setColor(w);var R=O.getStroke();R&&(R.setColor(w),R.setLineDash(null)),O.setText(void 0);var b=E.getImage();if(b){var z=b.getImageSize();if(!z)continue;var A=(0,i.createCanvasContext2D)(z[0],z[1],void 0,{alpha:!1}),G=A.canvas;A.fillStyle=w,A.fillRect(0,0,G.width,G.height),O.setImage(new t.Icon({img:G,imgSize:z,anchor:b.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:b.getOrigin(),opacity:1,size:b.getSize(),scale:b.getScale(),rotation:b.getRotation(),rotateWithView:b.getRotateWithView()}))}var L=O.getZIndex()||0,U=x[L];U||(U={},x[L]=U,U.Polygon=[],U.Circle=[],U.LineString=[],U.Point=[]);var F=_.getType();if("GeometryCollection"===F)for(var H=_.getGeometriesArrayRecursive(),N=0,P=H.length;N<P;++N){var k=H[N];U[k.getType().replace("Multi","")].push(k,O)}else U[F.replace("Multi","")].push(_,O)}}}}}for(var V=Object.keys(x).map(Number).sort(r.ascending),W=0,X=V.length;W<X;++W){var Y=x[V[W]];for(var Z in Y)for(var B=Y[Z],J=0,K=B.length;J<K;J+=2){p.setStyle(B[J+1]);for(var Q=0,$=n.length;Q<$;++Q)p.setTransform(n[Q]),p.drawGeometry(B[J])}}return d.getImageData(0,0,m.width,m.height)}function g(e,t,r){var i=[];if(r){var o=Math.floor(Math.round(e[0])*l),n=Math.floor(Math.round(e[1])*l),s=4*((0,a.clamp)(o,0,r.width-1)+(0,a.clamp)(n,0,r.height-1)*r.width),g=r.data[s],h=r.data[s+1],c=r.data[s+2]+256*(h+256*g),v=Math.floor(16777215/t.length);c&&c%v==0&&i.push(t[c/v-1])}return i}exports.HIT_DETECT_RESOLUTION=l;
},{"./Immediate.js":"fo6K","../../style.js":"qeKX","../../array.js":"luEr","../../math.js":"B96G","../../dom.js":"Xno5","../../extent.js":"QDir"}],"UCah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=n,exports.getSquaredTolerance=a,exports.getTolerance=l,exports.renderFeature=d;var e=r(require("../ImageState.js")),t=require("../util.js");function r(e){return e&&e.__esModule?e:{default:e}}var g=.5,i={Point:I,LineString:v,Polygon:y,MultiPoint:S,MultiLineString:T,MultiPolygon:s,GeometryCollection:f,Circle:o};function n(e,r){return parseInt((0,t.getUid)(e),10)-parseInt((0,t.getUid)(r),10)}function a(e,t){var r=l(e,t);return r*r}function l(e,t){return g*e/t}function o(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(n||a){var l=e.getBuilder(r.getZIndex(),"Circle");l.setFillStrokeStyle(n,a),l.drawCircle(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}function d(t,r,g,i,n,a,l){var o=!1,d=g.getImage();if(d){var x=d.getImageState();x==e.default.LOADED||x==e.default.ERROR?d.unlistenImageChange(n):(x==e.default.IDLE&&d.load(),d.listenImageChange(n),o=!0)}return u(t,r,g,i,a,l),o}function u(e,t,r,g,n,a){var l=r.getGeometryFunction()(t);if(l){var o=l.simplifyTransformed(g,n);if(r.getRenderer())x(e,o,r,t);else(0,i[o.getType()])(e,o,r,t,a)}}function x(e,t,r,g){if("GeometryCollection"!=t.getType())e.getBuilder(r.getZIndex(),"Default").drawCustom(t,g,r.getRenderer(),r.getHitDetectionRenderer());else for(var i=t.getGeometries(),n=0,a=i.length;n<a;++n)x(e,i[n],r,g)}function f(e,t,r,g,n){var a,l,o=t.getGeometriesArray();for(a=0,l=o.length;a<l;++a){(0,i[o[a].getType()])(e,o[a],r,g,n)}}function v(e,t,r,g,i){var n=r.getStroke();if(n){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawLineString(t,g)}var l=r.getText();if(l&&l.getText()){var o=(i||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,g)}}function T(e,t,r,g,i){var n=r.getStroke();if(n){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawMultiLineString(t,g)}var l=r.getText();if(l&&l.getText()){var o=(i||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,g)}}function s(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(a||n){var l=e.getBuilder(r.getZIndex(),"Polygon");l.setFillStrokeStyle(n,a),l.drawMultiPolygon(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}function I(t,r,g,i,n){var a,l=g.getImage(),o=g.getText();if(l){if(l.getImageState()!=e.default.LOADED)return;var d=t;if(n){var u=l.getDeclutterMode();if("none"!==u)if(d=n,"obstacle"===u){var x=t.getBuilder(g.getZIndex(),"Image");x.setImageStyle(l,a),x.drawPoint(r,i)}else o&&o.getText()&&(a={})}var f=d.getBuilder(g.getZIndex(),"Image");f.setImageStyle(l,a),f.drawPoint(r,i)}if(o&&o.getText()){var v=t;n&&(v=n);var T=v.getBuilder(g.getZIndex(),"Text");T.setTextStyle(o,a),T.drawText(r,i)}}function S(t,r,g,i,n){var a,l=g.getImage(),o=g.getText();if(l){if(l.getImageState()!=e.default.LOADED)return;var d=t;if(n){var u=l.getDeclutterMode();if("none"!==u)if(d=n,"obstacle"===u){var x=t.getBuilder(g.getZIndex(),"Image");x.setImageStyle(l,a),x.drawMultiPoint(r,i)}else o&&o.getText()&&(a={})}var f=d.getBuilder(g.getZIndex(),"Image");f.setImageStyle(l,a),f.drawMultiPoint(r,i)}if(o&&o.getText()){var v=t;n&&(v=n);var T=v.getBuilder(g.getZIndex(),"Text");T.setTextStyle(o,a),T.drawText(r,i)}}function y(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(n||a){var l=e.getBuilder(r.getZIndex(),"Polygon");l.setFillStrokeStyle(n,a),l.drawPolygon(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}
},{"../ImageState.js":"u3kG","../util.js":"KniQ"}],"F2e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=v(require("../../render/canvas/BuilderGroup.js")),t=y(require("./Layer.js")),r=v(require("../../render/canvas/ExecutorGroup.js")),n=v(require("../../render/EventType.js")),i=v(require("../../ViewHint.js")),o=require("../../render/canvas/hitdetect.js"),a=require("../../transform.js"),s=require("../../extent.js"),u=require("../../dom.js"),l=require("../vector.js"),c=require("../../array.js"),d=require("../../proj.js"),h=require("../../util.js"),f=require("../../coordinate.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function v(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function x(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e){var t=b(e,"string");return"symbol"===g(t)?t:String(t)}function b(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=j();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(p){R(v,t.default);var y=T(v);function v(e){var t;return _(this,v),(t=y.call(this,e)).boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(w(t)),t.animatingOrInteracting_,t.hitDetectionImageData_=null,t.renderedFeatures_=null,t.renderedRevision_=-1,t.renderedResolution_=NaN,t.renderedExtent_=(0,s.createEmpty)(),t.wrappedRenderedExtent_=(0,s.createEmpty)(),t.renderedRotation_,t.renderedCenter_=null,t.renderedProjection_=null,t.renderedRenderOrder_=null,t.replayGroup_=null,t.replayGroupChanged=!0,t.declutterExecutorGroup=null,t.clipping=!0,t.compositionContext_=null,t.opacity_=1,t}return x(v,[{key:"renderWorlds",value:function(e,t,r){var n=t.extent,o=t.viewState,a=o.center,u=o.resolution,l=o.projection,c=o.rotation,d=l.getExtent(),h=this.getLayer().getSource(),f=t.pixelRatio,p=t.viewHints,y=!(p[i.default.ANIMATING]||p[i.default.INTERACTING]),v=this.compositionContext_,g=Math.round(t.size[0]*f),_=Math.round(t.size[1]*f),m=h.getWrapX()&&l.canWrapX(),x=m?(0,s.getWidth)(d):null,E=m?Math.ceil((n[2]-d[2])/x)+1:1,b=m?Math.floor((n[0]-d[0])/x):0;do{var R=this.getRenderTransform(a,u,c,f,g,_,b*x);e.execute(v,1,R,c,y,void 0,r)}while(++b<E)}},{key:"setupCompositionContext_",value:function(){if(1!==this.opacity_){var e=(0,u.createCanvasContext2D)(this.context.canvas.width,this.context.canvas.height,t.canvasPool);this.compositionContext_=e}else this.compositionContext_=this.context}},{key:"releaseCompositionContext_",value:function(){if(1!==this.opacity_){var e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,(0,u.releaseCanvas)(this.compositionContext_),t.canvasPool.push(this.compositionContext_.canvas),this.compositionContext_=null}}},{key:"renderDeclutter",value:function(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}},{key:"renderFrame",value:function(e,t){var r=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];(0,a.makeScale)(this.pixelTransform,1/r,1/r),(0,a.makeInverse)(this.inversePixelTransform,this.pixelTransform);var o=(0,a.toString)(this.pixelTransform);this.useContainer(t,o,this.getBackground(e));var u=this.context,l=u.canvas,c=this.replayGroup_,h=this.declutterExecutorGroup,f=c&&!c.isEmpty()||h&&!h.isEmpty();if(!f&&!(this.getLayer().hasListener(n.default.PRERENDER)||this.getLayer().hasListener(n.default.POSTRENDER)))return null;var p=Math.round(e.size[0]*r),y=Math.round(e.size[1]*r);l.width!=p||l.height!=y?(l.width=p,l.height=y,l.style.transform!==o&&(l.style.transform=o)):this.containerReused||u.clearRect(0,0,p,y),this.preRender(u,e);var v=e.viewState,g=v.projection;this.opacity_=i.opacity,this.setupCompositionContext_();var _=!1;if(f&&i.extent&&this.clipping){var m=(0,d.fromUserExtent)(i.extent,g);(_=(f=(0,s.intersects)(m,e.extent))&&!(0,s.containsExtent)(m,e.extent))&&this.clipUnrotated(this.compositionContext_,e,m)}return f&&this.renderWorlds(c,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(u,e),this.renderedRotation_!==v.rotation&&(this.renderedRotation_=v.rotation,this.hitDetectionImageData_=null),this.container}},{key:"getFeatures",value:function(e){var t=this;return new Promise(function(r){if(!t.hitDetectionImageData_&&!t.animatingOrInteracting_){var n=[t.context.canvas.width,t.context.canvas.height];(0,a.apply)(t.pixelTransform,n);var i=t.renderedCenter_,u=t.renderedResolution_,l=t.renderedRotation_,c=t.renderedProjection_,d=t.wrappedRenderedExtent_,h=t.getLayer(),f=[],p=n[0]*o.HIT_DETECT_RESOLUTION,y=n[1]*o.HIT_DETECT_RESOLUTION;f.push(t.getRenderTransform(i,u,l,o.HIT_DETECT_RESOLUTION,p,y,0).slice());var v=h.getSource(),g=c.getExtent();if(v.getWrapX()&&c.canWrapX()&&!(0,s.containsExtent)(g,d)){for(var _,m=d[0],x=(0,s.getWidth)(g),E=0;m<g[0];)_=x*--E,f.push(t.getRenderTransform(i,u,l,o.HIT_DETECT_RESOLUTION,p,y,_).slice()),m+=x;for(E=0,m=d[2];m>g[2];)_=x*++E,f.push(t.getRenderTransform(i,u,l,o.HIT_DETECT_RESOLUTION,p,y,_).slice()),m-=x}t.hitDetectionImageData_=(0,o.createHitDetectionImageData)(n,f,t.renderedFeatures_,h.getStyleFunction(),d,u,l)}r((0,o.hitDetect)(e,t.renderedFeatures_,t.hitDetectionImageData_))})}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){var o=this;if(this.replayGroup_){var a,s=t.viewState.resolution,u=t.viewState.rotation,l=this.getLayer(),c={},d=function(e,t,r){var o=(0,h.getUid)(e),a=c[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return c[o]=!0,i.splice(i.lastIndexOf(a),1),n(e,l,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return c[o]=!0,n(e,l,t);i.push(c[o]={feature:e,layer:l,geometry:t,distanceSq:r,callback:n})}},f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(function(n){return a=n.forEachFeatureAtCoordinate(e,s,u,r,d,n===o.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(function(e){return e.value}):null)}),a}}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(t){var n=this,o=this.getLayer(),a=o.getSource();if(!a)return!1;var u=t.viewHints[i.default.ANIMATING],h=t.viewHints[i.default.INTERACTING],p=o.getUpdateWhileAnimating(),y=o.getUpdateWhileInteracting();if(this.ready&&!p&&u||!y&&h)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var v=t.extent,g=t.viewState,_=g.projection,m=g.resolution,x=t.pixelRatio,E=o.getRevision(),b=o.getRenderBuffer(),R=o.getRenderOrder();void 0===R&&(R=l.defaultOrder);var C=g.center.slice(),T=(0,s.buffer)(v,b*m),O=T.slice(),w=[T.slice()],j=_.getExtent();if(a.getWrapX()&&_.canWrapX()&&!(0,s.containsExtent)(j,t.extent)){var I=(0,s.getWidth)(j),S=Math.max((0,s.getWidth)(T)/2,I);T[0]=j[0]-S,T[2]=j[2]+S,(0,f.wrapX)(C,_);var D=(0,s.wrapX)(w[0],_);D[0]<j[0]&&D[2]<j[2]?w.push([D[0]+I,D[1],D[2]+I,D[3]]):D[0]>j[0]&&D[2]>j[2]&&w.push([D[0]-I,D[1],D[2]-I,D[3]])}if(this.ready&&this.renderedResolution_==m&&this.renderedRevision_==E&&this.renderedRenderOrder_==R&&(0,s.containsExtent)(this.wrappedRenderedExtent_,T))return(0,c.equals)(this.renderedExtent_,O)||(this.hitDetectionImageData_=null,this.renderedExtent_=O),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var P,G=new e.default((0,l.getTolerance)(m,x),T,m,x);this.getLayer().getDeclutter()&&(P=new e.default((0,l.getTolerance)(m,x),T,m,x));var F,k=(0,d.getUserProjection)();if(k){for(var q=0,N=w.length;q<N;++q){var W=w[q],A=(0,d.toUserExtent)(W,_);a.loadFeatures(A,(0,d.toUserResolution)(m,_),k)}F=(0,d.getTransformFromProjections)(k,_)}else for(var L=0,M=w.length;L<M;++L)a.loadFeatures(w[L],m,_);var U=(0,l.getSquaredTolerance)(m,x),H=!0,X=function(e){var t,r=e.getStyleFunction()||o.getStyleFunction();if(r&&(t=r(e,m)),t){var i=n.renderFeature(e,U,t,G,F,P);H=H&&!i}},B=(0,d.toUserExtent)(T,_),z=a.getFeaturesInExtent(B);R&&z.sort(R);for(var V=0,J=z.length;V<J;++V)X(z[V]);this.renderedFeatures_=z,this.ready=H;var K=G.finish(),Q=new r.default(T,m,x,a.getOverlaps(),K,o.getRenderBuffer());return P&&(this.declutterExecutorGroup=new r.default(T,m,x,a.getOverlaps(),P.finish(),o.getRenderBuffer())),this.renderedResolution_=m,this.renderedRevision_=E,this.renderedRenderOrder_=R,this.renderedExtent_=O,this.wrappedRenderedExtent_=T,this.renderedCenter_=C,this.renderedProjection_=_,this.replayGroup_=Q,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(e,t,r,n,i,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,u=r.length;s<u;++s)a=(0,l.renderFeature)(n,e,r[s],t,this.boundHandleStyleImageChange_,i,o)||a;else a=(0,l.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i,o);return a}}]),v}(),D=S;exports.default=D;
},{"../../render/canvas/BuilderGroup.js":"vqHd","./Layer.js":"vPfl","../../render/canvas/ExecutorGroup.js":"ngEc","../../render/EventType.js":"z39m","../../ViewHint.js":"cuLW","../../render/canvas/hitdetect.js":"MrCe","../../transform.js":"P4eA","../../extent.js":"QDir","../../dom.js":"Xno5","../vector.js":"UCah","../../array.js":"luEr","../../proj.js":"Diht","../../util.js":"KniQ","../../coordinate.js":"nGsj"}],"dflx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseVector.js")),e=r(require("../renderer/canvas/VectorLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){a(u,t.default);var n=s(u);function u(t){return o(this,u),n.call(this,t)}return i(u,[{key:"createRenderer",value:function(){return new e.default(this)}}]),u}(),m=v;exports.default=m;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorLayer.js":"F2e3"}],"MiUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("rbush")),e=require("../extent.js"),r=require("../util.js"),n=require("../obj.js");function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function s(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=f(t,"string");return"symbol"===u(e)?e:String(e)}function f(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m=function(){function i(e){o(this,i),this.rbush_=new t.default(e),this.items_={}}return s(i,[{key:"insert",value:function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[(0,r.getUid)(e)]=n}},{key:"load",value:function(t,e){for(var n=new Array(e.length),i=0,u=e.length;i<u;i++){var o=t[i],a=e[i],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[i]=s,this.items_[(0,r.getUid)(a)]=s}this.rbush_.load(n)}},{key:"remove",value:function(t){var e=(0,r.getUid)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}},{key:"update",value:function(t,n){var i=this.items_[(0,r.getUid)(n)],u=[i.minX,i.minY,i.maxX,i.maxY];(0,e.equals)(u,t)||(this.remove(n),this.insert(t,n))}},{key:"getAll",value:function(){return this.rbush_.all().map(function(t){return t.value})}},{key:"getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}},{key:"forEach",value:function(t){return this.forEach_(this.getAll(),t)}},{key:"forEachInExtent",value:function(t,e){return this.forEach_(this.getInExtent(t),e)}},{key:"forEach_",value:function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r}},{key:"isEmpty",value:function(){return(0,n.isEmpty)(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(t){var r=this.rbush_.toJSON();return(0,e.createOrUpdate)(r.minX,r.minY,r.maxX,r.maxY,t)}},{key:"concat",value:function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]}}]),i}(),c=m;exports.default=c;
},{"rbush":"XGea","../extent.js":"QDir","../util.js":"KniQ","../obj.js":"mH6q"}],"H38a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../Object.js")),e=require("../proj.js");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=a(t,"string");return"symbol"===n(e)?e:String(e)}function a(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){l(i,t.default);var n=s(i);function i(t){var r;o(this,i),(r=n.call(this)).projection=(0,e.get)(t.projection),r.attributions_=d(t.attributions),r.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,r.loading=!1,r.state_=void 0!==t.state?t.state:"ready",r.wrapX_=void 0!==t.wrapX&&t.wrapX,r.interpolate_=!!t.interpolate,r.viewResolver=null,r.viewRejector=null;var u=y(r);return r.viewPromise_=new Promise(function(t,e){u.viewResolver=t,u.viewRejector=e}),r}return u(i,[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(t){return null}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=d(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}]),i}();function d(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var w=h;exports.default=w;
},{"../Object.js":"PhPh","../proj.js":"Diht"}],"s8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};exports.default=e;
},{}],"JpXE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=t,exports.bbox=r,exports.tile=o;var e=require("./proj.js");function t(e,t){return[[-1/0,-1/0,1/0,1/0]]}function r(e,t){return[e]}function o(t){return function(r,o,n){var u=t.getZForResolution((0,e.fromUserResolution)(o,n)),i=t.getTileRangeForExtentAndZ((0,e.fromUserExtent)(r,n),u),s=[],x=[u,0,0];for(x[1]=i.minX;x[1]<=i.maxX;++x[1])for(x[2]=i.minY;x[2]<=i.maxY;++x[2])s.push((0,e.toUserExtent)(t.getTileCoordExtent(x),n));return s}}
},{"./proj.js":"Diht"}],"U3JP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=t,exports.setWithCredentials=n,exports.xhr=s;var e=require("./functions.js"),r=!1;function t(e,t,s,n,o,a,u){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(s,n,o):e,!0),"arraybuffer"==t.getType()&&(i.responseType="arraybuffer"),i.withCredentials=r,i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var r,n=t.getType();"json"==n||"text"==n?r=i.responseText:"xml"==n?(r=i.responseXML)||(r=(new DOMParser).parseFromString(i.responseText,"application/xml")):"arraybuffer"==n&&(r=i.response),r?a(t.readFeatures(r,{extent:s,featureProjection:o}),t.readProjection(r)):u()}else u()},i.onerror=u,i.send()}function s(r,s){return function(n,o,a,u,i){var p=this;t(r,s,n,o,a,function(e,r){p.addFeatures(e),void 0!==u&&u(e)},i||e.VOID)}}function n(e){r=e}
},{"./functions.js":"RgA2"}],"ZS12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=p(require("../Collection.js")),t=p(require("../CollectionEventType.js")),r=p(require("../events/Event.js")),n=p(require("../events/EventType.js")),i=p(require("../ObjectEventType.js")),a=p(require("../structs/RBush.js")),u=p(require("./Source.js")),o=p(require("./VectorEventType.js")),s=require("../functions.js"),l=require("../loadingstrategy.js"),f=require("../asserts.js"),c=require("../extent.js"),d=require("../array.js"),h=require("../util.js"),v=require("../obj.js"),y=require("../events.js"),_=require("../featureloader.js");function p(e){return e&&e.__esModule?e:{default:e}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return F(e)||R(e)||x(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function R(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function F(e){if(Array.isArray(e))return I(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=C(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function A(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e){var t=w(e,"string");return"symbol"===E(t)?t:String(t)}function w(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=D();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){S(n,r.default);var t=G(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,e)).feature=r,a.features=i,a}return A(n)}();exports.VectorSourceEvent=L;var K=function(r){S(E,u.default);var p=G(E);function E(t){var r;O(this,E),t=t||{},(r=p.call(this,{attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX})).on,r.once,r.un,r.loader_=s.VOID,r.format_=t.format,r.overlaps_=void 0===t.overlaps||t.overlaps,r.url_=t.url,void 0!==t.loader?r.loader_=t.loader:void 0!==r.url_&&((0,f.assert)(r.format_,7),r.loader_=(0,_.xhr)(r.url_,r.format_)),r.strategy_=void 0!==t.strategy?t.strategy:l.all;var n,i,u=void 0===t.useSpatialIndex||t.useSpatialIndex;return r.featuresRtree_=u?new a.default:null,r.loadedExtentsRtree_=new a.default,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(n=t.features).getArray()),u||void 0!==n||(n=new e.default(i)),void 0!==i&&r.addFeaturesInternal(i),void 0!==n&&r.bindFeaturesCollection_(n),r}return A(E,[{key:"addFeature",value:function(e){this.addFeatureInternal(e),this.changed()}},{key:"addFeatureInternal",value:function(e){var t=(0,h.getUid)(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new L(o.default.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)}},{key:"setupChangeEvents_",value:function(e,t){this.featureChangeKeys_[e]=[(0,y.listen)(t,n.default.CHANGE,this.handleFeatureChange_,this),(0,y.listen)(t,i.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]}},{key:"addToIndex_",value:function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,f.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r}},{key:"addFeatures",value:function(e){this.addFeaturesInternal(e),this.changed()}},{key:"addFeaturesInternal",value:function(e){for(var t=[],r=[],n=[],i=0,a=e.length;i<a;i++){var u=e[i],s=(0,h.getUid)(u);this.addToIndex_(s,u)&&r.push(u)}for(var l=0,f=r.length;l<f;l++){var c=r[l],d=(0,h.getUid)(c);this.setupChangeEvents_(d,c);var v=c.getGeometry();if(v){var y=v.getExtent();t.push(y),n.push(c)}else this.nullGeometryFeatures_[d]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(o.default.ADDFEATURE))for(var _=0,p=r.length;_<p;_++)this.dispatchEvent(new L(o.default.ADDFEATURE,r[_]))}},{key:"bindFeaturesCollection_",value:function(e){var r=this,n=!1;this.addEventListener(o.default.ADDFEATURE,function(t){n||(n=!0,e.push(t.feature),n=!1)}),this.addEventListener(o.default.REMOVEFEATURE,function(t){n||(n=!0,e.remove(t.feature),n=!1)}),e.addEventListener(t.default.ADD,function(e){n||(n=!0,r.addFeature(e.element),n=!1)}),e.addEventListener(t.default.REMOVE,function(e){n||(n=!0,r.removeFeature(e.element),n=!1)}),this.featuresCollection_=e}},{key:"clear",value:function(e){var t=this;if(e){for(var r in this.featureChangeKeys_){this.featureChangeKeys_[r].forEach(y.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){for(var n in this.featuresRtree_.forEach(function(e){t.removeFeatureInternal(e)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new L(o.default.CLEAR);this.dispatchEvent(i),this.changed()}},{key:"forEachFeature",value:function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureAtCoordinateDirect",value:function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}},{key:"forEachFeatureInExtent",value:function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureIntersectingExtent",value:function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,v.isEmpty)(this.nullGeometryFeatures_)||(0,d.extend)(e,Object.values(this.nullGeometryFeatures_))),e}},{key:"getFeaturesAtCoordinate",value:function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}},{key:"getFeaturesInExtent",value:function(e,t){var r=this;if(this.featuresRtree_){var n;if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);var i=(0,c.wrapAndSliceX)(e,t);return(n=[]).concat.apply(n,g(i.map(function(e){return r.featuresRtree_.getInExtent(e)})))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(e,t){var r=e[0],n=e[1],i=null,a=[NaN,NaN],u=1/0,o=[-1/0,-1/0,1/0,1/0];return t=t||s.TRUE,this.featuresRtree_.forEachInExtent(o,function(e){if(t(e)){var s=e.getGeometry(),l=u;if((u=s.closestPointXY(r,n,a,u))<l){i=e;var f=Math.sqrt(u);o[0]=r-f,o[1]=n-f,o[2]=r+f,o[3]=n+f}}}),i}},{key:"getExtent",value:function(e){return this.featuresRtree_.getExtent(e)}},{key:"getFeatureById",value:function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null}},{key:"getFeatureByUid",value:function(e){var t=this.uidIndex_[e];return void 0!==t?t:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(e){var t=e.target,r=(0,h.getUid)(t),n=t.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var a=t.getId();if(void 0!==a){var u=a.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new L(o.default.CHANGEFEATURE,t))}},{key:"hasFeature",value:function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:(0,h.getUid)(e)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.isEmpty)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(e,t,r){for(var n=this,i=this.loadedExtentsRtree_,a=this.strategy_(e,t,r),u=function(){var e=a[s];i.forEachInExtent(e,function(t){return(0,c.containsExtent)(t.extent,e)})||(++n.loadingExtentsCount_,n.dispatchEvent(new L(o.default.FEATURESLOADSTART)),n.loader_.call(n,e,t,r,function(e){--n.loadingExtentsCount_,n.dispatchEvent(new L(o.default.FEATURESLOADEND,void 0,e))},function(){--n.loadingExtentsCount_,n.dispatchEvent(new L(o.default.FEATURESLOADERROR))}),i.insert(e,{extent:e.slice()}))},s=0,l=a.length;s<l;++s)u();this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),b(P(E.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,c.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)}},{key:"removeFeature",value:function(e){if(e){var t=(0,h.getUid)(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}}},{key:"removeFeatureInternal",value:function(e){var t=(0,h.getUid)(e),r=this.featureChangeKeys_[t];if(r){r.forEach(y.unlistenByKey),delete this.featureChangeKeys_[t];var n=e.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[t],this.dispatchEvent(new L(o.default.REMOVEFEATURE,e)),e}}},{key:"removeFromIdIndex_",value:function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"setUrl",value:function(e){(0,f.assert)(this.format_,7),this.url_=e,this.setLoader((0,_.xhr)(e,this.format_))}}]),E}(),N=K;exports.default=N;
},{"../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../ObjectEventType.js":"zehl","../structs/RBush.js":"MiUH","./Source.js":"H38a","./VectorEventType.js":"s8Fc","../functions.js":"RgA2","../loadingstrategy.js":"JpXE","../asserts.js":"fLG6","../extent.js":"QDir","../array.js":"luEr","../util.js":"KniQ","../obj.js":"mH6q","../events.js":"UqnM","../featureloader.js":"U3JP"}],"RvU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRenderPixel=l,exports.getVectorContext=a,exports.toContext=s;var e=i(require("./render/canvas/Immediate.js")),r=require("./has.js"),t=require("./transform.js"),n=require("./renderer/vector.js"),o=require("./proj.js");function i(e){return e&&e.__esModule?e:{default:e}}function s(n,o){var i=n.canvas,s=(o=o||{}).pixelRatio||r.DEVICE_PIXEL_RATIO,a=o.size;a&&(i.width=a[0]*s,i.height=a[1]*s,i.style.width=a[0]+"px",i.style.height=a[1]+"px");var l=[0,0,i.width,i.height],u=(0,t.scale)((0,t.create)(),s,s);return new e.default(n,s,l,u,0)}function a(r){if(!(r.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var i,s=r.inversePixelTransform[0],a=r.inversePixelTransform[1],l=Math.sqrt(s*s+a*a),u=r.frameState,c=(0,t.multiply)(r.inversePixelTransform.slice(),u.coordinateToPixelTransform),f=(0,n.getSquaredTolerance)(u.viewState.resolution,l),x=(0,o.getUserProjection)();return x&&(i=(0,o.getTransformFromProjections)(x,u.viewState.projection)),new e.default(r.context,l,u.extent,c,u.viewState.rotation,f,i)}function l(e,r){return(0,t.apply)(e.inversePixelTransform,r.slice(0))}
},{"./render/canvas/Immediate.js":"fo6K","./has.js":"f3Nv","./transform.js":"P4eA","./renderer/vector.js":"UCah","./proj.js":"Diht"}],"w0c6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greatCircleArc=n,exports.meridian=e,exports.parallel=o;var t=require("../../proj.js"),a=require("../../math.js");function r(t,r,n){for(var e,o,s,i,u,p,h=[],c=t(0),M=t(1),f=r(c),g=r(M),d=[M,c],l=[g,f],v=[1,0],R={},m=1e5;--m>0&&v.length>0;)s=v.pop(),c=d.pop(),f=l.pop(),(p=s.toString())in R||(h.push(f[0],f[1]),R[p]=!0),i=v.pop(),M=d.pop(),g=l.pop(),o=r(e=t(u=(s+i)/2)),(0,a.squaredSegmentDistance)(o[0],o[1],f[0],f[1],g[0],g[1])<n?(h.push(g[0],g[1]),R[p=i.toString()]=!0):(v.push(i,u,u,s),l.push(g,o,o,f),d.push(M,e,e,c));return h}function n(n,e,o,s,i,u){var p=(0,t.get)("EPSG:4326"),h=Math.cos((0,a.toRadians)(e)),c=Math.sin((0,a.toRadians)(e)),M=Math.cos((0,a.toRadians)(s)),f=Math.sin((0,a.toRadians)(s)),g=Math.cos((0,a.toRadians)(o-n)),d=Math.sin((0,a.toRadians)(o-n)),l=c*f+h*M*g;return r(function(t){if(1<=l)return[o,s];var r=t*Math.acos(l),e=Math.cos(r),i=Math.sin(r),u=d*M,p=h*f-c*M*g,v=Math.atan2(u,p),R=Math.asin(c*e+h*i*Math.cos(v)),m=(0,a.toRadians)(n)+Math.atan2(Math.sin(v)*i*h,e-c*Math.sin(R));return[(0,a.toDegrees)(m),(0,a.toDegrees)(R)]},(0,t.getTransform)(p,i),u)}function e(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[a,n+(e-n)*t]},(0,t.getTransform)(i,o),s)}function o(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[n+(e-n)*t,a]},(0,t.getTransform)(i,o),s)}
},{"../../proj.js":"Diht","../../math.js":"B96G"}],"wXs0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("../Collection.js")),e=p(require("../render/EventType.js")),a=p(require("../Feature.js")),i=p(require("../style/Fill.js")),r=p(require("../geom/LineString.js")),n=p(require("../geom/Point.js")),l=p(require("../style/Stroke.js")),o=p(require("../style/Style.js")),s=p(require("../style/Text.js")),h=p(require("./Vector.js")),_=p(require("../source/Vector.js")),u=require("../extent.js"),m=require("../math.js"),d=require("../coordinate.js"),f=require("../proj.js"),L=require("../render.js"),c=require("../geom/flat/geodesic.js");function p(t){return t&&t.__esModule?t:{default:t}}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,x(i.key),i)}}function y(t,e,a){return e&&v(t.prototype,e),a&&v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function x(t){var e=S(t,"string");return"symbol"===b(e)?e:String(e)}function S(t,e){if("object"!==b(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!==b(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}function P(t,e){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=T();return function(){var a,i=k(t);if(e){var r=k(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return M(this,a)}}function M(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return E(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=new l.default({color:"rgba(0,0,0,0.2)"}),F=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],X=function(p){j(v,h.default);var b=w(v);function v(a){var r;g(this,v),a=a||{};var n=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},a);return delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,(r=b.call(this,n)).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==a.targetSize?a.targetSize:100,r.maxLines_=void 0!==a.maxLines?a.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==a.strokeStyle?a.strokeStyle:C,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,a.showLabels&&(r.lonLabelFormatter_=null==a.lonLabelFormatter?d.degreesToStringHDMS.bind(E(r),"EW"):a.lonLabelFormatter,r.latLabelFormatter_=null==a.latLabelFormatter?d.degreesToStringHDMS.bind(E(r),"NS"):a.latLabelFormatter,r.lonLabelPosition_=null==a.lonLabelPosition?0:a.lonLabelPosition,r.latLabelPosition_=null==a.latLabelPosition?1:a.latLabelPosition,r.lonLabelStyleBase_=new o.default({text:void 0!==a.lonLabelStyle?a.lonLabelStyle.clone():new s.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return r.lonLabelStyleBase_.getText().setText(e),r.lonLabelStyleBase_},r.latLabelStyleBase_=new o.default({text:void 0!==a.latLabelStyle?a.latLabelStyle.clone():new s.default({font:"12px Calibri,sans-serif",textAlign:"right",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return r.latLabelStyleBase_.getText().setText(e),r.latLabelStyleBase_},r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener(e.default.POSTRENDER,r.drawLabels_.bind(E(r)))),r.intervals_=void 0!==a.intervals?a.intervals:F,r.setSource(new _.default({loader:r.loaderFunction.bind(E(r)),strategy:r.strategyFunction.bind(E(r)),features:new t.default,overlaps:!1,useSpatialIndex:!1,wrapX:a.wrapX})),r.featurePool_=[],r.lineStyle_=new o.default({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.renderedResolution_=null,r.setRenderOrder(null),r}return y(v,[{key:"strategyFunction",value:function(t,e){var a=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,u.wrapX)(a,this.projection_),this.loadedExtent_&&((0,u.approximatelyEquals)(this.loadedExtent_,a,e)?a=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[a]}},{key:"loaderFunction",value:function(t,e,i){this.loadedExtent_=t;var r=this.getSource(),n=this.getExtent()||[-1/0,-1/0,1/0,1/0],l=(0,u.getIntersection)(n,t);if(!(this.renderedExtent_&&(0,u.equals)(this.renderedExtent_,l)&&this.renderedResolution_===e||(this.renderedExtent_=l,this.renderedResolution_=e,(0,u.isEmpty)(l)))){var o=(0,u.getCenter)(l),s=e*e/4;(!this.projection_||!(0,f.equivalent)(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(l,o,e,s);var h,_=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(_+=this.meridians_.length),this.parallelsLabels_&&(_+=this.parallels_.length);_>this.featurePool_.length;)h=new a.default,this.featurePool_.push(h);var m=r.getFeaturesCollection();m.clear();var d,L,c=0;for(d=0,L=this.meridians_.length;d<L;++d)(h=this.featurePool_[c++]).setGeometry(this.meridians_[d]),h.setStyle(this.lineStyle_),m.push(h);for(d=0,L=this.parallels_.length;d<L;++d)(h=this.featurePool_[c++]).setGeometry(this.parallels_[d]),h.setStyle(this.lineStyle_),m.push(h)}}},{key:"addMeridian_",value:function(t,e,a,i,r,l){var o=this.getMeridian_(t,e,a,i,l);if((0,u.intersects)(o.getExtent(),r)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);l in this.meridiansLabels_?this.meridiansLabels_[l].text=s:this.meridiansLabels_[l]={geom:new n.default([]),text:s}}this.meridians_[l++]=o}return l}},{key:"addParallel_",value:function(t,e,a,i,r,l){var o=this.getParallel_(t,e,a,i,l);if((0,u.intersects)(o.getExtent(),r)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);l in this.parallelsLabels_?this.parallelsLabels_[l].text=s:this.parallelsLabels_[l]={geom:new n.default([]),text:s}}this.parallels_[l++]=o}return l}},{key:"drawLabels_",value:function(t){var e=t.frameState.viewState.rotation,a=t.frameState.viewState.resolution,i=t.frameState.size,r=t.frameState.extent,n=(0,u.getCenter)(r),l=r;if(e){var o=i[0]*a,s=i[1]*a;l=[n[0]-o/2,n[1]-s/2,n[0]+o/2,n[1]+s/2]}var h=0,_=0,m=this.latLabelPosition_<.5,d=this.projection_.getExtent(),f=(0,u.getWidth)(d);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,u.containsExtent)(d,r)&&(h=Math.floor((r[0]-d[0])/f),_=Math.ceil((r[2]-d[2])/f),m=m!==Math.abs(e)>Math.PI/2);for(var c=(0,L.getVectorContext)(t),p=h;p<=_;++p){var b=this.meridians_.length+this.parallels_.length,g=void 0,v=void 0,y=void 0,x=void 0;if(this.meridiansLabels_)for(v=0,y=this.meridiansLabels_.length;v<y;++v){var S=this.meridians_[v];if(e||0!==p){var j=S.clone();j.translate(p*f,0),j.rotate(-e,n),(x=this.getMeridianPoint_(j,l,v)).rotate(e,n)}else x=this.getMeridianPoint_(S,r,v);(g=this.featurePool_[b++]).setGeometry(x),g.set("graticule_label",this.meridiansLabels_[v].text),c.drawFeature(g,this.lonLabelStyle_(g))}if(this.parallelsLabels_&&(p===h&&m||p===_&&!m))for(v=0,y=this.parallels_.length;v<y;++v){var P=this.parallels_[v];if(e||0!==p){var w=P.clone();w.translate(p*f,0),w.rotate(-e,n),(x=this.getParallelPoint_(w,l,v)).rotate(e,n)}else x=this.getParallelPoint_(P,r,v);(g=this.featurePool_[b++]).setGeometry(x),g.set("graticule_label",this.parallelsLabels_[v].text),c.drawFeature(g,this.latLabelStyle_(g))}}}},{key:"createGraticule_",value:function(t,e,a,i){var r=this.getInterval_(a);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var n=!1,l=this.projection_.getExtent(),o=(0,u.getWidth)(l);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,u.containsExtent)(l,t)&&((0,u.getWidth)(t)>=o?(t[0]=l[0],t[2]=l[2]):n=!0);var s=[(0,m.clamp)(e[0],this.minX_,this.maxX_),(0,m.clamp)(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(s);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var _,d,f,L,c=(0,m.clamp)(h[0],this.minLon_,this.maxLon_),p=(0,m.clamp)(h[1],this.minLat_,this.maxLat_),b=this.maxLines_,g=t;n||(g=[(0,m.clamp)(t[0],this.minX_,this.maxX_),(0,m.clamp)(t[1],this.minY_,this.maxY_),(0,m.clamp)(t[2],this.minX_,this.maxX_),(0,m.clamp)(t[3],this.minY_,this.maxY_)]);var v=(0,u.applyTransform)(g,this.toLonLatTransform_,void 0,8),y=v[3],x=v[2],S=v[1],j=v[0];if(n||((0,u.containsCoordinate)(g,this.bottomLeft_)&&(j=this.minLon_,S=this.minLat_),(0,u.containsCoordinate)(g,this.bottomRight_)&&(x=this.maxLon_,S=this.minLat_),(0,u.containsCoordinate)(g,this.topLeft_)&&(j=this.minLon_,y=this.maxLat_),(0,u.containsCoordinate)(g,this.topRight_)&&(x=this.maxLon_,y=this.maxLat_),y=(0,m.clamp)(y,p,this.maxLat_),x=(0,m.clamp)(x,c,this.maxLon_),S=(0,m.clamp)(S,this.minLat_,p),j=(0,m.clamp)(j,this.minLon_,c)),c=Math.floor(c/r)*r,L=(0,m.clamp)(c,this.minLon_,this.maxLon_),d=this.addMeridian_(L,S,y,i,t,0),_=0,n)for(;(L-=r)>=j&&_++<b;)d=this.addMeridian_(L,S,y,i,t,d);else for(;L!=this.minLon_&&_++<b;)L=Math.max(L-r,this.minLon_),d=this.addMeridian_(L,S,y,i,t,d);if(L=(0,m.clamp)(c,this.minLon_,this.maxLon_),_=0,n)for(;(L+=r)<=x&&_++<b;)d=this.addMeridian_(L,S,y,i,t,d);else for(;L!=this.maxLon_&&_++<b;)L=Math.min(L+r,this.maxLon_),d=this.addMeridian_(L,S,y,i,t,d);for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),p=Math.floor(p/r)*r,f=(0,m.clamp)(p,this.minLat_,this.maxLat_),d=this.addParallel_(f,j,x,i,t,0),_=0;f!=this.minLat_&&_++<b;)f=Math.max(f-r,this.minLat_),d=this.addParallel_(f,j,x,i,t,d);for(f=(0,m.clamp)(p,this.minLat_,this.maxLat_),_=0;f!=this.maxLat_&&_++<b;)f=Math.min(f+r,this.maxLat_),d=this.addParallel_(f,j,x,i,t,d);this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)}},{key:"getInterval_",value:function(t){for(var e=this.projectionCenterLonLat_[0],a=this.projectionCenterLonLat_[1],i=-1,r=Math.pow(this.targetSize_*t,2),n=[],l=[],o=0,s=this.intervals_.length;o<s;++o){var h=(0,m.clamp)(this.intervals_[o]/2,0,90),_=(0,m.clamp)(a,-90+h,90-h);if(n[0]=e-h,n[1]=_-h,l[0]=e+h,l[1]=_+h,this.fromLonLatTransform_(n,n),this.fromLonLatTransform_(l,l),Math.pow(l[0]-n[0],2)+Math.pow(l[1]-n[1],2)<=r)break;i=this.intervals_[o]}return i}},{key:"getMeridian_",value:function(t,e,a,i,n){var l=(0,c.meridian)(t,e,a,this.projection_,i),o=this.meridians_[n];return o?(o.setFlatCoordinates("XY",l),o.changed()):(o=new r.default(l,"XY"),this.meridians_[n]=o),o}},{key:"getMeridianPoint_",value:function(t,e,a){var i=t.getFlatCoordinates(),r=1,n=i.length-1;i[r]>i[n]&&(r=n,n=1);var l=Math.max(e[1],i[r]),o=Math.min(e[3],i[n]),s=(0,m.clamp)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,l,o),h=[i[r-1]+(i[n-1]-i[r-1])*(s-i[r])/(i[n]-i[r]),s],_=this.meridiansLabels_[a].geom;return _.setCoordinates(h),_}},{key:"getMeridians",value:function(){return this.meridians_}},{key:"getParallel_",value:function(t,e,a,i,n){var l=(0,c.parallel)(t,e,a,this.projection_,i),o=this.parallels_[n];return o?(o.setFlatCoordinates("XY",l),o.changed()):o=new r.default(l,"XY"),o}},{key:"getParallelPoint_",value:function(t,e,a){var i=t.getFlatCoordinates(),r=0,n=i.length-2;i[r]>i[n]&&(r=n,n=0);var l=Math.max(e[0],i[r]),o=Math.min(e[2],i[n]),s=(0,m.clamp)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,l,o),h=[s,i[r+1]+(i[n+1]-i[r+1])*(s-i[r])/(i[n]-i[r])],_=this.parallelsLabels_[a].geom;return _.setCoordinates(h),_}},{key:"getParallels",value:function(){return this.parallels_}},{key:"updateProjectionInfo_",value:function(t){var e=(0,f.get)("EPSG:4326"),a=t.getWorldExtent();this.maxLat_=a[3],this.maxLon_=a[2],this.minLat_=a[1],this.minLon_=a[0];var i=(0,f.getTransform)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{var r=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,a){for(var n=i(t,e,a=a||2),l=0,o=n.length;l<o;l+=a)n[l]<r&&(n[l]+=360);return n}}this.fromLonLatTransform_=(0,f.getTransform)(e,t);var n=(0,u.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=n[0],this.maxX_=n[2],this.minY_=n[1],this.maxY_=n[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,u.getCenter)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}]),v}(),q=X;exports.default=q;
},{"../Collection.js":"FnDa","../render/EventType.js":"z39m","../Feature.js":"mYW9","../style/Fill.js":"AFcg","../geom/LineString.js":"DfxW","../geom/Point.js":"gLcY","../style/Stroke.js":"TXDt","../style/Style.js":"he4w","../style/Text.js":"RPsG","./Vector.js":"dflx","../source/Vector.js":"ZS12","../extent.js":"QDir","../math.js":"B96G","../coordinate.js":"nGsj","../proj.js":"Diht","../render.js":"RvU2","../geom/flat/geodesic.js":"w0c6"}],"K7j2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./ImageBase.js")),e=r(require("./ImageState.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=d();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){c(u,t.default);var n=s(u);function u(t,r,i,a,f){var c;o(this,u);var l=void 0!==f?e.default.IDLE:e.default.LOADED;return(c=n.call(this,t,r,i,l)).loader_=void 0!==f?f:null,c.canvas_=a,c.error_=null,c}return i(u,[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(t){t?(this.error_=t,this.state=e.default.ERROR):this.state=e.default.LOADED,this.changed()}},{key:"load",value:function(){this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}]),u}(),h=v;exports.default=h;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3kG"}],"IWZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./events/Target.js")),e=o(require("./events/EventType.js")),r=o(require("./TileState.js")),n=require("./util.js"),i=require("./easing.js");function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function l(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=c(t,"string");return"symbol"===u(e)?e:String(e)}function c(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var r,n=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(o){y(s,t.default);var u=p(s);function s(t,e,r){var n;return a(this,s),r=r||{},(n=u.call(this)).tileCoord=t,n.state=e,n.interimTile=null,n.key="",n.transition_=void 0===r.transition?250:r.transition,n.transitionStarts_={},n.interpolate=!!r.interpolate,n}return l(s,[{key:"changed",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"release",value:function(){this.state===r.default.ERROR&&this.setState(r.default.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==r.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}},{key:"refreshInterimChain",value:function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==r.default.LOADED){t.interimTile=null;break}t.getState()==r.default.LOADING?e=t:t.getState()==r.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(this.state!==r.default.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}},{key:"load",value:function(){(0,n.abstract)()}},{key:"getAlpha",value:function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:(0,i.easeIn)(n/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}]),s}(),T=_;exports.default=T;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./TileState.js":"u3kG","./util.js":"KniQ","./easing.js":"IeCz"}],"TOsW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Tile.js")),e=i(require("./TileState.js")),n=require("./dom.js"),r=require("./Image.js");function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=c(t,"string");return"symbol"===o(e)?e:String(e)}function c(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=g();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(n){f(o,t.default);var i=y(o);function o(t,e,n,r,a,s){var l;return u(this,o),(l=i.call(this,t,e,s)).crossOrigin_=r,l.src_=n,l.key=n,l.image_=new Image,null!==r&&(l.image_.crossOrigin=r),l.unlisten_=null,l.tileLoadFunction_=a,l}return s(o,[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t,this.state=e.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=b(),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,r.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),o}();function b(){var t=(0,n.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var v=_;exports.default=v;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG","./dom.js":"Xno5","./Image.js":"DHWK"}],"gAnK":[function(require,module,exports) {
"use strict";function t(i){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(i){var e=r(i,"string");return"symbol"===t(e)?e:String(e)}function r(i,e){if("object"!==t(i)||null===i)return i;var n=i[Symbol.toPrimitive];if(void 0!==n){var o=n.call(i,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function(){function t(e,n,o){i(this,t),this.decay_=e,this.minVelocity_=n,this.delay_=o,this.points_=[],this.angle_=0,this.initialVelocity_=0}return n(t,[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(t,i){this.points_.push(t,i,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var e=i-3;e>0&&this.points_[e+2]>t;)e-=3;var n=this.points_[i+2]-this.points_[e+2];if(n<1e3/60)return!1;var o=this.points_[i]-this.points_[e],r=this.points_[i+1]-this.points_[e+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/n,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}]),t}(),a=s;exports.default=a;
},{}],"oIh9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../Disposable.js")),t=require("../functions.js"),r=require("../util.js"),n=require("../transform.js"),o=require("../extent.js"),i=require("../style/IconImageCache.js"),u=require("../layer/Layer.js"),a=require("../coordinate.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=v(e,"string");return"symbol"===f(t)?t:String(t)}function v(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(c){d(s,e.default);var f=h(s);function s(e){var t;return l(this,s),(t=f.call(this)).map_=e,t}return p(s,[{key:"dispatchRenderEvent",value:function(e,t){(0,r.abstract)()}},{key:"calculateMatrices2D",value:function(e){var t=e.viewState,r=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;(0,n.compose)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,n.makeInverse)(o,r)}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i,c,f,l){var s,p=t.viewState;function y(e,t,r,n){return i.call(c,t,e?r:null,n)}var v=p.projection,d=(0,a.wrapX)(e.slice(),v),b=[[0,0]];if(v.canWrapX()&&n){var h=v.getExtent(),m=(0,o.getWidth)(h);b.push([-m,0],[m,0])}for(var j=t.layerStatesArray,g=j.length,w=[],O=[],S=0;S<b.length;S++)for(var E=g-1;E>=0;--E){var _=j[E],P=_.layer;if(P.hasRenderer()&&(0,u.inView)(_,p)&&f.call(l,P)){var x=P.getRenderer(),k=P.getSource();if(x&&k){var q=k.getWrapX()?d:e,R=y.bind(null,_.managed);O[0]=q[0]+b[S][0],O[1]=q[1]+b[S][1],s=x.forEachFeatureAtCoordinate(O,t,r,R,w)}if(s)return s}}if(0!==w.length){var C=1/w.length;return w.forEach(function(e,t){return e.distanceSq+=t*C}),w.sort(function(e,t){return e.distanceSq-t.distanceSq}),w.some(function(e){return s=e.callback(e.feature,e.layer,e.geometry)}),s}}},{key:"hasFeatureAtCoordinate",value:function(e,r,n,o,i,u){return void 0!==this.forEachFeatureAtCoordinate(e,r,n,o,t.TRUE,this,i,u)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(e){(0,r.abstract)()}},{key:"flushDeclutterItems",value:function(e){}},{key:"scheduleExpireIconCache",value:function(e){i.shared.canExpireCache()&&e.postRenderFunctions.push(S)}}]),s}();function S(e,t){i.shared.expire()}var E=O;exports.default=E;
},{"../Disposable.js":"DDda","../functions.js":"RgA2","../util.js":"KniQ","../transform.js":"P4eA","../extent.js":"QDir","../style/IconImageCache.js":"V0oB","../layer/Layer.js":"GCgv","../coordinate.js":"nGsj"}],"MHsB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./Map.js")),t=c(require("../ObjectEventType.js")),r=c(require("../render/Event.js")),n=c(require("../render/EventType.js")),i=require("../css.js"),o=require("../render/canvas.js"),l=require("../layer/Layer.js"),u=require("../events.js"),s=require("../dom.js");function c(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=h(e,"string");return"symbol"===a(t)?t:String(t)}function h(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=b(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=w();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(c){m(d,e.default);var a=g(d);function d(e){var r;f(this,d),(r=a.call(this,e)).fontChangeListenerKey_=(0,u.listen)(o.checkedFonts,t.default.PROPERTYCHANGE,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=i.CLASS_UNSELECTABLE+" ol-layers";var l=e.getViewport();return l.insertBefore(r.element_,l.firstChild||null),r.children_=[],r.renderedVisible_=!0,r.declutterLayers_=[],r}return p(d,[{key:"dispatchRenderEvent",value:function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new r.default(e,void 0,t);n.dispatchEvent(i)}}},{key:"disposeInternal",value:function(){(0,u.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),v(E(d.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(n.default.PRECOMPOSE,e);var t=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),r=e.viewState;this.children_.length=0;var i=this.declutterLayers_;i.length=0;for(var o=null,u=0,c=t.length;u<c;++u){var a=t[u];e.layerIndex=u;var f=a.layer,d=f.getSourceState();if(!(0,l.inView)(a,r)||"ready"!=d&&"undefined"!=d)f.unrender();else{var p=f.render(e,o);p&&(p!==o&&(this.children_.push(p),o=p),"getDeclutter"in f&&i.push(f))}}this.flushDeclutterItems(e),(0,s.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(n.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}},{key:"flushDeclutterItems",value:function(e){for(var t=this.declutterLayers_,r=t.length-1;r>=0;--r)t[r].renderDeclutter(e);e.declutterTree=null,t.length=0}}]),d}(),S=P;exports.default=S;
},{"./Map.js":"oIh9","../ObjectEventType.js":"zehl","../render/Event.js":"EB6P","../render/EventType.js":"z39m","../css.js":"HgMV","../render/canvas.js":"iAG7","../layer/Layer.js":"GCgv","../events.js":"UqnM","../dom.js":"Xno5"}],"q0nK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GroupEvent=void 0;var e=c(require("./Base.js")),t=c(require("../Collection.js")),r=c(require("../CollectionEventType.js")),n=c(require("../events/Event.js")),i=c(require("../events/EventType.js")),o=c(require("../ObjectEventType.js")),a=require("../asserts.js"),s=require("../obj.js"),u=require("../extent.js"),l=require("../util.js"),y=require("../events.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=p(e,"string");return"symbol"===f(t)?t:String(t)}function p(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=j();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){g(r,n.default);var t=L(r);function r(e,n){var i;return m(this,r),(i=t.call(this,e)).layer=n,i}return d(r)}();exports.GroupEvent=R;var w={LAYERS:"layers"},A=function(n){g(f,e.default);var c=L(f);function f(e){var r;m(this,f),e=e||{};var n=Object.assign({},e);delete n.layers;var i=e.layers;return(r=c.call(this,n)).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(w.LAYERS,r.handleLayersChanged_),i?Array.isArray(i)?i=new t.default(i.slice(),{unique:!0}):(0,a.assert)("function"==typeof i.getArray,43):i=new t.default(void 0,{unique:!0}),r.setLayers(i),r}return d(f,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(y.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push((0,y.listen)(e,r.default.ADD,this.handleLayersAdd_,this),(0,y.listen)(e,r.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(y.unlistenByKey);(0,s.clear)(this.listenerKeys_);for(var n=e.getArray(),i=0,o=n.length;i<o;i++){var a=n[i];this.registerLayerListeners_(a),this.dispatchEvent(new R("addlayer",a))}this.changed()}},{key:"registerLayerListeners_",value:function(e){var t=[(0,y.listen)(e,o.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,y.listen)(e,i.default.CHANGE,this.handleLayerChange_,this)];e instanceof f&&t.push((0,y.listen)(e,"addlayer",this.handleLayerGroupAdd_,this),(0,y.listen)(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,l.getUid)(e)]=t}},{key:"handleLayerGroupAdd_",value:function(e){this.dispatchEvent(new R("addlayer",e.layer))}},{key:"handleLayerGroupRemove_",value:function(e){this.dispatchEvent(new R("removelayer",e.layer))}},{key:"handleLayersAdd_",value:function(e){var t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new R("addlayer",t)),this.changed()}},{key:"handleLayersRemove_",value:function(e){var t=e.element,r=(0,l.getUid)(t);this.listenerKeys_[r].forEach(y.unlistenByKey),delete this.listenerKeys_[r],this.dispatchEvent(new R("removelayer",t)),this.changed()}},{key:"getLayers",value:function(){return this.get(w.LAYERS)}},{key:"setLayers",value:function(e){var t=this.getLayers();if(t)for(var r=t.getArray(),n=0,i=r.length;n<i;++n)this.dispatchEvent(new R("removelayer",r[n]));this.set(w.LAYERS,e)}},{key:"getLayersArray",value:function(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}},{key:"getLayerStatesArray",value:function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});var n=this.getLayerState(),i=n.zIndex;e||void 0!==n.zIndex||(i=0);for(var o=r,a=t.length;o<a;o++){var s=t[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=(0,u.getIntersection)(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=i)}return t}},{key:"getSourceState",value:function(){return"ready"}}]),f}(),O=A;exports.default=O;
},{"./Base.js":"T6DQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../ObjectEventType.js":"zehl","../asserts.js":"fLG6","../obj.js":"mH6q","../extent.js":"QDir","../util.js":"KniQ","../events.js":"UqnM"}],"vFcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)}function i(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(e){f(n,t.default);var r=a(n);function n(t,e,o){var u;return c(this,n),(u=r.call(this,t)).map=e,u.frameState=void 0!==o?o:null,u}return o(n)}(),d=v;exports.default=d;
},{"./events/Event.js":"fKNg"}],"HMLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=c(t,"string");return"symbol"===r(e)?e:String(e)}function c(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){a(o,t.default);var r=s(o);function o(t,e,i,u,c,l){var f;return n(this,o),(f=r.call(this,t,e,c)).originalEvent=i,f.pixel_=null,f.coordinate_=null,f.dragging=void 0!==u&&u,f.activePointers=l,f}return i(o,[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t}},{key:"preventDefault",value:function(){l(h(o.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){l(h(o.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}]),o}(),g=d;exports.default=g;
},{"./MapEvent.js":"vFcA"}],"YhDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"C8cu"}],"TaSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"ohHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./events/EventType.js")),t=a(require("./MapBrowserEvent.js")),n=a(require("./MapBrowserEventType.js")),i=a(require("./pointer/EventType.js")),r=a(require("./events/Target.js")),o=require("./has.js"),s=require("./events.js");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=f(e,"string");return"symbol"===u(t)?t:String(t)}function f(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=v(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=b();return function(){var n,i=E(e);if(t){var r=E(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(a){p(c,r.default);var u=g(c);function c(t,n){var r;l(this,c),(r=u.call(this,t)).map_=t,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===n?1:n,r.down_=null;var a=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=a,r.pointerdownListenerKey_=(0,s.listen)(a,i.default.POINTERDOWN,r.handlePointerDown_,m(r)),r.originalPointerMoveEvent_,r.relayedListenerKey_=(0,s.listen)(a,i.default.POINTERMOVE,r.relayMoveEvent_,m(r)),r.boundHandleTouchMove_=r.handleTouchMove_.bind(m(r)),r.element_.addEventListener(e.default.TOUCHMOVE,r.boundHandleTouchMove_,!!o.PASSIVE_EVENT_LISTENERS&&{passive:!1}),r}return d(c,[{key:"emulateClick_",value:function(e){var i=this,r=new t.default(n.default.CLICK,this.map_,e);this.dispatchEvent(r),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new t.default(n.default.DBLCLICK,this.map_,e),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout(function(){i.clickTimeoutId_=void 0;var r=new t.default(n.default.SINGLECLICK,i.map_,e);i.dispatchEvent(r)},250)}},{key:"updateActivePointers_",value:function(e){var t=e,i=t.pointerId;if(t.type==n.default.POINTERUP||t.type==n.default.POINTERCANCEL){for(var r in delete this.trackedTouches_[i],this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else t.type!=n.default.POINTERDOWN&&t.type!=n.default.POINTERMOVE||(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(e){this.updateActivePointers_(e);var i=new t.default(n.default.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(e){return 0===e.button}},{key:"handlePointerDown_",value:function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var i=new t.default(n.default.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,s.listen)(r,n.default.POINTERMOVE,this.handlePointerMove_,this),(0,s.listen)(r,n.default.POINTERUP,this.handlePointerUp_,this),(0,s.listen)(this.element_,n.default.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push((0,s.listen)(this.element_.getRootNode(),n.default.POINTERUP,this.handlePointerUp_,this))}}},{key:"handlePointerMove_",value:function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var i=new t.default(n.default.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}},{key:"relayMoveEvent_",value:function(e){this.originalPointerMoveEvent_=e;var i=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new t.default(n.default.POINTERMOVE,this.map_,e,i))}},{key:"handleTouchMove_",value:function(e){var t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()}},{key:"isMoving_",value:function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&((0,s.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(e.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,s.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,_(E(c.prototype),"disposeInternal",this).call(this)}}]),c}(),O=T;exports.default=O;
},{"./events/EventType.js":"C8cu","./MapBrowserEvent.js":"HMLS","./MapBrowserEventType.js":"YhDM","./pointer/EventType.js":"TaSm","./events/Target.js":"CR4Y","./has.js":"f3Nv","./events.js":"UqnM"}],"xLGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};exports.default=e;
},{}],"zlNQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"RQLY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var e=require("../asserts.js"),t=require("../obj.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=o(e,"string");return"symbol"===i(t)?t:String(t)}function o(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var l=1/0;exports.DROP=l;var h=function(){function i(e,t){n(this,i),this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return u(i,[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,(0,t.clear)(this.queuedElements_)}},{key:"dequeue",value:function(){var e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i}},{key:"enqueue",value:function(t){(0,e.assert)(!(this.keyFunction_(t)in this.queuedElements_),31);var i=this.priorityFunction_(t);return i!=l&&(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(e){return 2*e+1}},{key:"getRightChildIndex_",value:function(e){return 2*e+2}},{key:"getParentIndex_",value:function(e){return e-1>>1}},{key:"heapify_",value:function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(e){return e in this.queuedElements_}},{key:"isQueued",value:function(e){return this.isKeyQueued(this.keyFunction_(e))}},{key:"siftUp_",value:function(e){for(var t=this.elements_,i=this.priorities_,n=t.length,r=t[e],u=i[e],s=e;e<n>>1;){var o=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),h=l<n&&i[l]<i[o]?l:o;t[e]=t[h],i[e]=i[h],e=h}t[e]=r,i[e]=u,this.siftDown_(s,e)}},{key:"siftDown_",value:function(e,t){for(var i=this.elements_,n=this.priorities_,r=i[t],u=n[t];t>e;){var s=this.getParentIndex_(t);if(!(n[s]>u))break;i[t]=i[s],n[t]=n[s],t=s}i[t]=r,n[t]=u}},{key:"reprioritize",value:function(){var e,t,i,n=this.priorityFunction_,r=this.elements_,u=this.priorities_,s=0,o=r.length;for(t=0;t<o;++t)(i=n(e=r[t]))==l?delete this.queuedElements_[this.keyFunction_(e)]:(u[s]=i,r[s++]=e);r.length=s,u.length=s,this.heapify_()}}]),i}(),a=h;exports.default=a;
},{"../asserts.js":"fLG6","../obj.js":"mH6q"}],"tHOl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getTilePriority=P;var e=i(require("./events/EventType.js")),t=o(require("./structs/PriorityQueue.js")),r=i(require("./TileState.js"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=i?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=s(e,"string");return"symbol"===u(t)?t:String(t)}function s(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=O();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(n){d(i,t.default);var o=g(i);function i(e,t){var r;return a(this,i),(r=o.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()})).boundHandleTileChange_=r.handleTileChange.bind(v(r)),r.tileChangeCallback_=t,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return f(i,[{key:"enqueue",value:function(t){var r=p(_(i.prototype),"enqueue",this).call(this,t);r&&t[0].addEventListener(e.default.CHANGE,this.boundHandleTileChange_);return r}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(t){var n=t.target,o=n.getState();if(o===r.default.LOADED||o===r.default.ERROR||o===r.default.EMPTY){o!==r.default.ERROR&&n.removeEventListener(e.default.CHANGE,this.boundHandleTileChange_);var i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(e,t){for(var n,o,i=0;this.tilesLoading_<e&&i<t&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),n.getState()!==r.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())}}]),i}(),w=j;function P(e,r,n,o,i){if(!(e&&n in e.wantedTiles))return t.DROP;if(!e.wantedTiles[n][r.getKey()])return t.DROP;var u=e.viewState.center,a=o[0]-u[0],l=o[1]-u[1];return 65536*Math.log(i)+Math.sqrt(a*a+l*l)/i}exports.default=w;
},{"./events/EventType.js":"C8cu","./structs/PriorityQueue.js":"RQLY","./TileState.js":"u3kG"}],"xxE2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../Object.js")),t=i(require("../MapEventType.js")),r=require("../functions.js"),n=require("../events.js"),o=require("../dom.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=a(e,"string");return"symbol"===u(t)?t:String(t)}function a(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(i){d(c,e.default);var u=h(c);function c(e){var t;l(this,c),t=u.call(this);var r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),t.element=r||null,t.target_=null,t.map_=null,t.listenerKeys=[],e.render&&(t.render=e.render),e.target&&t.setTarget(e.target),t}return s(c,[{key:"disposeInternal",value:function(){(0,o.removeNode)(this.element),p(O(c.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(e){this.map_&&(0,o.removeNode)(this.element);for(var i=0,u=this.listenerKeys.length;i<u;++i)(0,n.unlistenByKey)(this.listenerKeys[i]);(this.listenerKeys.length=0,this.map_=e,e)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.VOID&&this.listenerKeys.push((0,n.listen)(e,t.default.POSTRENDER,this.render,this)),e.render())}},{key:"render",value:function(e){}},{key:"setTarget",value:function(e){this.target_="string"==typeof e?document.getElementById(e):e}}]),c}(),_=j;exports.default=_;
},{"../Object.js":"PhPh","../MapEventType.js":"xLGm","../functions.js":"RgA2","../events.js":"UqnM","../dom.js":"Xno5"}],"Q4Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=r(require("../events/EventType.js")),l=require("../css.js"),o=require("../array.js"),n=require("../dom.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var l=0;l<t.length;l++){var o=t[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,c(o.key),o)}}function u(e,t,l){return t&&s(e.prototype,t),l&&s(e,l),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=p(e,"string");return"symbol"===i(t)?t:String(t)}function p(e,t){if("object"!==i(e)||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var o=l.call(e,t||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=y();return function(){var l,o=v(e);if(t){var n=v(this).constructor;l=Reflect.construct(o,arguments,n)}else l=o.apply(this,arguments);return _(this,l)}}function _(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(r){d(s,e.default);var i=b(s);function s(e){var o;a(this,s),e=e||{},(o=i.call(this,{element:document.createElement("div"),render:e.render,target:e.target})).ulElement_=document.createElement("ul"),o.collapsed_=void 0===e.collapsed||e.collapsed,o.userCollapsed_=o.collapsed_,o.overrideCollapsible_=void 0!==e.collapsible,o.collapsible_=void 0===e.collapsible||e.collapsible,o.collapsible_||(o.collapsed_=!1);var n=void 0!==e.className?e.className:"ol-attribution",r=void 0!==e.tipLabel?e.tipLabel:"Attributions",u=void 0!==e.expandClassName?e.expandClassName:n+"-expand",c=void 0!==e.collapseLabel?e.collapseLabel:"",p=void 0!==e.collapseClassName?e.collapseClassName:n+"-collapse";"string"==typeof c?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=c,o.collapseLabel_.className=p):o.collapseLabel_=c;var d=void 0!==e.label?e.label:"i";"string"==typeof d?(o.label_=document.createElement("span"),o.label_.textContent=d,o.label_.className=u):o.label_=d;var f=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_;o.toggleButton_=document.createElement("button"),o.toggleButton_.setAttribute("type","button"),o.toggleButton_.setAttribute("aria-expanded",String(!o.collapsed_)),o.toggleButton_.title=r,o.toggleButton_.appendChild(f),o.toggleButton_.addEventListener(t.default.CLICK,o.handleClick_.bind(h(o)),!1);var b=n+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+(o.collapsed_&&o.collapsible_?" "+l.CLASS_COLLAPSED:"")+(o.collapsible_?"":" ol-uncollapsible"),_=o.element;return _.className=b,_.appendChild(o.toggleButton_),_.appendChild(o.ulElement_),o.renderedAttributions_=[],o.renderedVisible_=!0,o}return u(s,[{key:"collectSourceAttributions_",value:function(e){var t=Array.from(new Set(this.getMap().getAllLayers().flatMap(function(t){return t.getAttributions(e)}))),l=!this.getMap().getAllLayers().some(function(e){return e.getSource()&&!1===e.getSource().getAttributionsCollapsible()});return this.overrideCollapsible_||this.setCollapsible(l),t}},{key:"updateElement_",value:function(e){if(e){var t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!(0,o.equals)(t,this.renderedAttributions_)){(0,n.removeChildren)(this.ulElement_);for(var r=0,i=t.length;r<i;++r){var a=document.createElement("li");a.innerHTML=t[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle(l.CLASS_COLLAPSED),this.collapsed_?(0,n.replaceNode)(this.collapseLabel_,this.label_):(0,n.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(e){this.updateElement_(e.frameState)}}]),s}(),g=m;exports.default=g;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../array.js":"luEr","../dom.js":"Xno5"}],"sCgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Control.js")),e=n(require("../events/EventType.js")),r=require("../css.js"),o=require("../easing.js");function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function u(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=c(t,"string");return"symbol"===i(e)?e:String(e)}function c(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=y();return function(){var r,o=m(t);if(e){var n=m(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(n){f(l,t.default);var i=p(l);function l(t){var o;a(this,l),t=t||{},o=i.call(this,{element:document.createElement("div"),render:t.render,target:t.target});var n=void 0!==t.className?t.className:"ol-rotate",u=void 0!==t.label?t.label:"",s=void 0!==t.compassClassName?t.compassClassName:"ol-compass";o.label_=null,"string"==typeof u?(o.label_=document.createElement("span"),o.label_.className=s,o.label_.textContent=u):(o.label_=u,o.label_.classList.add(s));var c=t.tipLabel?t.tipLabel:"Reset rotation",f=document.createElement("button");f.className=n+"-reset",f.setAttribute("type","button"),f.title=c,f.appendChild(o.label_),f.addEventListener(e.default.CLICK,o.handleClick_.bind(v(o)),!1);var d=n+" "+r.CLASS_UNSELECTABLE+" "+r.CLASS_CONTROL,p=o.element;return p.className=d,p.appendChild(f),o.callResetNorth_=t.resetNorth?t.resetNorth:void 0,o.duration_=void 0!==t.duration?t.duration:250,o.autoHide_=void 0===t.autoHide||t.autoHide,o.rotation_=void 0,o.autoHide_&&o.element.classList.add(r.CLASS_HIDDEN),o}return u(l,[{key:"handleClick_",value:function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))}}},{key:"render",value:function(t){var e=t.frameState;if(e){var o=e.viewState.rotation;if(o!=this.rotation_){var n="rotate("+o+"rad)";if(this.autoHide_){var i=this.element.classList.contains(r.CLASS_HIDDEN);i||0!==o?i&&0!==o&&this.element.classList.remove(r.CLASS_HIDDEN):this.element.classList.add(r.CLASS_HIDDEN)}this.label_.style.transform=n}this.rotation_=o}}}]),l}(),_=h;exports.default=_;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../easing.js":"IeCz"}],"L3CO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=r(require("../events/EventType.js")),o=require("../css.js"),n=require("../easing.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===i(t)?t:String(t)}function f(e,t){if("object"!==i(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=y();return function(){var o,n=v(e);if(t){var r=v(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return m(this,o)}}function m(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(r){s(a,e.default);var i=p(a);function a(e){var n;u(this,a),e=e||{},n=i.call(this,{element:document.createElement("div"),target:e.target});var r=void 0!==e.className?e.className:"ol-zoom",l=void 0!==e.delta?e.delta:1,c=void 0!==e.zoomInClassName?e.zoomInClassName:r+"-in",f=void 0!==e.zoomOutClassName?e.zoomOutClassName:r+"-out",s=void 0!==e.zoomInLabel?e.zoomInLabel:"+",d=void 0!==e.zoomOutLabel?e.zoomOutLabel:"",p=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",m=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",y=document.createElement("button");y.className=c,y.setAttribute("type","button"),y.title=p,y.appendChild("string"==typeof s?document.createTextNode(s):s),y.addEventListener(t.default.CLICK,n.handleClick_.bind(b(n),l),!1);var v=document.createElement("button");v.className=f,v.setAttribute("type","button"),v.title=m,v.appendChild("string"==typeof d?document.createTextNode(d):d),v.addEventListener(t.default.CLICK,n.handleClick_.bind(b(n),-l),!1);var h=r+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,O=n.element;return O.className=h,O.appendChild(y),O.appendChild(v),n.duration_=void 0!==e.duration?e.duration:250,n}return l(a,[{key:"handleClick_",value:function(e,t){t.preventDefault(),this.zoomByDelta_(e)}},{key:"zoomByDelta_",value:function(e){var t=this.getMap().getView();if(t){var o=t.getZoom();if(void 0!==o){var r=t.getConstrainedZoom(o+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:r,duration:this.duration_,easing:n.easeOut})):t.setZoom(r)}}}}]),a}(),O=h;exports.default=O;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../easing.js":"IeCz"}],"cZGD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=i;var t=u(require("./Attribution.js")),e=u(require("../Collection.js")),o=u(require("./Rotate.js")),r=u(require("./Zoom.js"));function u(t){return t&&t.__esModule?t:{default:t}}function i(u){u=u||{};var i=new e.default;return(void 0===u.zoom||u.zoom)&&i.push(new r.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new o.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new t.default(u.attributionOptions)),i}
},{"./Attribution.js":"Q4Cf","../Collection.js":"FnDa","./Rotate.js":"sCgw","./Zoom.js":"L3CO"}],"caOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"jB2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.pan=h,exports.zoomByDelta=g;var t=r(require("../Object.js")),e=r(require("./Property.js")),n=require("../easing.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(n){l(o,t.default);var r=p(o);function o(t){var e;return i(this,o),(e=r.call(this)).on,e.once,e.un,t&&t.handleEvent&&(e.handleEvent=t.handleEvent),e.map_=null,e.setActive(!0),e}return a(o,[{key:"getActive",value:function(){return this.get(e.default.ACTIVE)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(t){return!0}},{key:"setActive",value:function(t){this.set(e.default.ACTIVE,t)}},{key:"setMap",value:function(t){this.map_=t}}]),o}();function h(t,e,r){var o=t.getCenterInternal();if(o){var i=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:n.linear,center:t.getConstrainedCenter(i)})}}function g(t,e,r,o){var i=t.getZoom();if(void 0!==i){var u=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(u);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==o?o:250,easing:n.easeOut})}}var j=m;exports.default=j;
},{"../Object.js":"PhPh","./Property.js":"caOi","../easing.js":"IeCz"}],"NSa4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Interaction.js")),e=r(require("../MapBrowserEventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var f=i?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(o,u,f):o[u]=t[u]}return o.default=t,r&&r.set(t,o),o}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function c(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(r){p(o,t.default);var n=y(o);function o(t){var e;return u(this,o),t=t||{},(e=n.call(this)).delta_=t.delta?t.delta:1,e.duration_=void 0!==t.duration?t.duration:250,e}return c(o,[{key:"handleEvent",value:function(r){var n=!1;if(r.type==e.default.DBLCLICK){var o=r.originalEvent,i=r.map,u=r.coordinate,f=o.shiftKey?-this.delta_:this.delta_,c=i.getView();(0,t.zoomByDelta)(c,f,u,this.duration_),o.preventDefault(),n=!0}return!n}}]),o}(),j=O;exports.default=j;
},{"./Interaction.js":"jB2p","../MapBrowserEventType.js":"YhDM"}],"dnA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=b,exports.default=void 0;var e=n(require("./Interaction.js")),t=n(require("../MapBrowserEventType.js"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=l(e,"string");return"symbol"===r(t)?t:String(t)}function l(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=d();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(n){c(i,e.default);var r=s(i);function i(e){var t;return o(this,i),e=e||{},t=r.call(this,e),e.handleDownEvent&&(t.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(t.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(t.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(t.handleUpEvent=e.handleUpEvent),e.stopDown&&(t.stopDown=e.stopDown),t.handlingDownUpSequence=!1,t.targetPointers=[],t}return u(i,[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(e){return!1}},{key:"handleDragEvent",value:function(e){}},{key:"handleEvent",value:function(e){if(!e.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==t.default.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==t.default.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==t.default.POINTERDOWN){var o=this.handleDownEvent(e);this.handlingDownUpSequence=o,n=this.stopDown(o)}else e.type==t.default.POINTERMOVE&&this.handleMoveEvent(e);return!n}},{key:"handleMoveEvent",value:function(e){}},{key:"handleUpEvent",value:function(e){return!1}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(e){e.activePointers&&(this.targetPointers=e.activePointers)}}]),i}();function b(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return{clientX:n/t,clientY:r/t}}var E=y;exports.default=E;
},{"./Interaction.js":"jB2p","../MapBrowserEventType.js":"YhDM"}],"YcID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=i,exports.touchOnly=exports.targetNotEditable=exports.singleClick=exports.shiftKeyOnly=exports.primaryAction=exports.pointerMove=exports.platformModifierKeyOnly=exports.platformModifierKey=exports.penOnly=exports.noModifierKeys=exports.never=exports.mouseOnly=exports.mouseActionButton=exports.focusWithTabindex=exports.focus=exports.doubleClick=exports.click=exports.always=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=o(require("../MapBrowserEventType.js")),t=require("../functions.js"),r=require("../has.js"),n=require("../asserts.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments;return function(e){for(var r=!0,n=0,o=t.length;n<o&&(r=r&&t[n](e));++n);return r}}var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=a;var s=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=s;var u=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)};exports.focus=u;var l=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||u(e)};exports.focusWithTabindex=l;var p=t.TRUE;exports.always=p;var y=function(t){return t.type==e.default.CLICK};exports.click=y;var v=function(e){var t=e.originalEvent;return 0==t.button&&!(r.WEBKIT&&r.MAC&&t.ctrlKey)};exports.mouseActionButton=v;var c=t.FALSE;exports.never=c;var f=function(e){return"pointermove"==e.type};exports.pointerMove=f;var x=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=x;var K=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=K;var m=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=m;var E=function(e){var t=e.originalEvent;return!t.altKey&&(r.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=E;var d=function(e){var t=e.originalEvent;return r.MAC?t.metaKey:t.ctrlKey};exports.platformModifierKey=d;var g=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=g;var h=function(e){var t=e.originalEvent,r=t.target.tagName;return"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r&&!t.target.isContentEditable};exports.targetNotEditable=h;var O=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"mouse"==t.pointerType};exports.mouseOnly=O;var C=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"touch"===t.pointerType};exports.touchOnly=C;var M=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"pen"===t.pointerType};exports.penOnly=M;var T=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),t.isPrimary&&0===t.button};exports.primaryAction=T;
},{"../MapBrowserEventType.js":"YhDM","../functions.js":"RgA2","../has.js":"f3Nv","../asserts.js":"fLG6"}],"N4gU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),r=require("../easing.js"),i=require("../coordinate.js");function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=p(t,"string");return"symbol"===u(e)?e:String(e)}function p(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=v();return function(){var n,r=_(t);if(e){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(o){h(u,t.default);var a=d(u);function u(t){var r;c(this,u),t=t||{},(r=a.call(this,{stopDown:e.FALSE})).kinetic_=t.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1;var i=t.condition?t.condition:(0,n.all)(n.noModifierKeys,n.primaryAction);return r.condition_=t.onFocusOnly?(0,n.all)(n.focusWithTabindex,i):i,r.noKinetic_=!1,r}return l(u,[{key:"handleDragEvent",value:function(e){var n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());var r=this.targetPointers,o=n.getEventPixel((0,t.centroid)(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var a=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],u=e.map.getView();(0,i.scale)(a,u.getResolution()),(0,i.rotate)(a,u.getRotation()),u.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=n.getCenterInternal(),u=e.getPixelFromCoordinateInternal(a),c=e.getCoordinateFromPixelInternal([u[0]-i*Math.cos(o),u[1]-i*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:r.easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}]),u}(),P=m;exports.default=P;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../events/condition.js":"YcID","../easing.js":"IeCz","../coordinate.js":"nGsj"}],"PgBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),r=require("../rotationconstraint.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function a(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(o){s(c,t.default);var i=y(c);function c(t){var r;return u(this,c),t=t||{},(r=i.call(this,{stopDown:e.FALSE})).condition_=t.condition?t.condition:n.altShiftKeysOnly,r.lastAngle_=void 0,r.duration_=void 0!==t.duration?t.duration:250,r}return a(c,[{key:"handleDragEvent",value:function(t){if((0,n.mouseOnly)(t)){var e=t.map,o=e.getView();if(o.getConstraints().rotation!==r.disable){var i=e.getSize(),u=t.pixel,c=Math.atan2(i[1]/2-u[1],u[0]-i[0]/2);if(void 0!==this.lastAngle_){var a=c-this.lastAngle_;o.adjustRotationInternal(-a)}this.lastAngle_=c}}}},{key:"handleUpEvent",value:function(t){return!(0,n.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){return!!(0,n.mouseOnly)(t)&&(!(!(0,n.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}}]),c}(),g=m;exports.default=g;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../events/condition.js":"YcID","../rotationconstraint.js":"EKd0"}],"bMDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../Disposable.js")),t=r(require("../geom/Polygon.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)}function a(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=h();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(r){s(i,e.default);var n=f(i);function i(e){var t;return o(this,i),(t=n.call(this)).geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.style.pointerEvents="auto",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t}return u(i,[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var e=this.startPixel_,t=this.endPixel_,r=this.element_.style;r.left=Math.min(e[0],t[0])+"px",r.top=Math.min(e[1],t[1])+"px",r.width=Math.abs(t[0]-e[0])+"px",r.height=Math.abs(t[1]-e[1])+"px"}},{key:"setMap",value:function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var e=this.startPixel_,r=this.endPixel_,n=[e,[e[0],r[1]],r,[r[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new t.default([n])}},{key:"getGeometry",value:function(){return this.geometry_}}]),i}(),_=d;exports.default=_;
},{"../Disposable.js":"DDda","../geom/Polygon.js":"Nwwk"}],"AQRw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DragBoxEvent=void 0;var t=r(require("../events/Event.js")),e=r(require("./Pointer.js")),n=r(require("../render/Box.js")),o=require("../events/condition.js");function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var n,o=x(t);if(e){var r=x(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},E=function(e){f(o,t.default);var n=p(o);function o(t,e,r){var i;return s(this,o),(i=n.call(this,t)).coordinate=e,i.mapBrowserEvent=r,i}return c(o)}();exports.DragBoxEvent=E;var _=function(t){f(i,e.default);var r=p(i);function i(t){var e;return s(this,i),(e=r.call(this)).on,e.once,e.un,t=t||{},e.box_=new n.default(t.className||"ol-dragbox"),e.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(e.onBoxEnd=t.onBoxEnd),e.startPixel_=null,e.condition_=t.condition?t.condition:o.mouseActionButton,e.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:e.defaultBoxEndCondition,e}return c(i,[{key:"defaultBoxEndCondition",value:function(t,e,n){var o=n[0]-e[0],r=n[1]-e[1];return o*o+r*r>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new E(h.BOXDRAG,t.coordinate,t))}},{key:"handleUpEvent",value:function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new E(e?h.BOXEND:h.BOXCANCEL,t.coordinate,t)),!1}},{key:"handleDownEvent",value:function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new E(h.BOXSTART,t.coordinate,t)),!0)}},{key:"onBoxEnd",value:function(t){}}]),i}(),m=_;exports.default=m;
},{"../events/Event.js":"fKNg","./Pointer.js":"dnA2","../render/Box.js":"bMDg","../events/condition.js":"YcID"}],"pTqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./DragBox.js")),e=require("../easing.js"),r=require("../events/condition.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=a(t,"string");return"symbol"===o(e)?e:String(e)}function a(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(n){l(u,t.default);var o=y(u);function u(t){var e;i(this,u);var n=(t=t||{}).condition?t.condition:r.shiftKeyOnly;return(e=o.call(this,{condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea})).duration_=void 0!==t.duration?t.duration:200,e.out_=void 0!==t.out&&t.out,e}return c(u,[{key:"onBoxEnd",value:function(t){var r=this.getMap().getView(),n=this.getGeometry();if(this.out_){var o=r.rotatedExtentForGeometry(n),i=r.getResolutionForExtentInternal(o),u=r.getResolution()/i;(n=n.clone()).scale(u*u)}r.fitInternal(n,{duration:this.duration_,easing:e.easeOut})}}]),u}(),h=m;exports.default=h;
},{"./DragBox.js":"AQRw","../easing.js":"IeCz","../events/condition.js":"YcID"}],"k7on":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};exports.default=r;
},{}],"CFRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("../events/EventType.js")),e=u(require("./Interaction.js")),r=f(require("../events/Key.js")),n=require("../events/condition.js"),o=require("../coordinate.js");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var f=o?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=t[u]}return n.default=t,r&&r.set(t,n),n}function f(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function p(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=y(t,"string");return"symbol"===a(e)?e:String(e)}function y(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=h();return function(){var r,n=_(t);if(e){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}function O(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(i){d(f,e.default);var u=b(f);function f(t){var e;return c(this,f),t=t||{},(e=u.call(this)).defaultCondition_=function(t){return(0,n.noModifierKeys)(t)&&(0,n.targetNotEditable)(t)},e.condition_=void 0!==t.condition?t.condition:e.defaultCondition_,e.duration_=void 0!==t.duration?t.duration:100,e.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128,e}return p(f,[{key:"handleEvent",value:function(n){var i=!1;if(n.type==t.default.KEYDOWN){var u=n.originalEvent,f=u.key;if(this.condition_(n)&&(f==r.default.DOWN||f==r.default.LEFT||f==r.default.RIGHT||f==r.default.UP)){var a=n.map.getView(),c=a.getResolution()*this.pixelDelta_,l=0,p=0;f==r.default.DOWN?p=-c:f==r.default.LEFT?l=-c:f==r.default.RIGHT?l=c:p=c;var s=[l,p];(0,o.rotate)(s,a.getRotation()),(0,e.pan)(a,s,this.duration_),u.preventDefault(),i=!0}}return!i}}]),f}(),w=m;exports.default=w;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../events/Key.js":"k7on","../events/condition.js":"YcID","../coordinate.js":"nGsj"}],"S8wR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=o(require("./Interaction.js")),r=require("../events/condition.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var f=i?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(o,u,f):o[u]=t[u]}return o.default=t,r&&r.set(t,o),o}function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function a(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=p(t,"string");return"symbol"===u(e)?e:String(e)}function p(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=O();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(n){s(i,e.default);var o=d(i);function i(t){var e;return f(this,i),t=t||{},(e=o.call(this)).condition_=t.condition?t.condition:function(t){return!(0,r.platformModifierKey)(t)&&(0,r.targetNotEditable)(t)},e.delta_=t.delta?t.delta:1,e.duration_=void 0!==t.duration?t.duration:100,e}return a(i,[{key:"handleEvent",value:function(r){var n=!1;if(r.type==t.default.KEYDOWN||r.type==t.default.KEYPRESS){var o=r.originalEvent,i=o.key;if(this.condition_(r)&&("+"===i||"-"===i)){var u=r.map,f="+"===i?this.delta_:-this.delta_,c=u.getView();(0,e.zoomByDelta)(c,f,void 0,this.duration_),o.preventDefault(),n=!0}}return!n}}]),i}(),m=j;exports.default=m;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../events/condition.js":"YcID"}],"kPt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../events/EventType.js")),e=a(require("./Interaction.js")),o=require("../has.js"),n=require("../events/condition.js"),r=require("../math.js");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(i=function(t){return t?o:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=i(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=r?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,o&&o.set(t,n),n}function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function f(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=h(t,"string");return"symbol"===s(e)?e:String(e)}function h(t,e){if("object"!==s(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=b();return function(){var o,n=O(t);if(e){var r=O(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return v(this,o)}}function v(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(i){_(u,e.default);var a=m(u);function u(t){var e;l(this,u),t=t||{},(e=a.call(this,t)).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,e.duration_=void 0!==t.duration?t.duration:250,e.timeout_=void 0!==t.timeout?t.timeout:80,e.useAnchor_=void 0===t.useAnchor||t.useAnchor,e.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;var o=t.condition?t.condition:n.always;return e.condition_=t.onFocusOnly?(0,n.all)(n.focusWithTabindex,o):o,e.lastAnchor_=null,e.startTime_=void 0,e.timeoutId_,e.mode_=void 0,e.trackpadEventGap_=400,e.trackpadTimeoutId_,e.deltaPerZoom_=300,e}return f(u,[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(e){if(!this.condition_(e))return!0;if(e.type!==t.default.WHEEL)return!0;var n,r=e.map,i=e.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==t.default.WHEEL&&(n=i.deltaY,o.FIREFOX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=o.DEVICE_PIXEL_RATIO),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");var u=r.getView();if("trackpad"===this.mode_&&!u.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=n;var s=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),s),!1}},{key:"handleWheelZoom_",value:function(t){var o=t.getView();o.getAnimating()&&o.cancelAnimations();var n=-(0,r.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(o.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),(0,e.zoomByDelta)(o,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}]),u}(),g=j;exports.default=g;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../has.js":"f3Nv","../events/condition.js":"YcID","../math.js":"B96G"}],"hbGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Pointer.js")),e=require("../functions.js"),r=require("../rotationconstraint.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=t[a]}return o.default=t,r&&r.set(t,o),o}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=f(t,"string");return"symbol"===i(e)?e:String(e)}function f(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=v();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(n){s(i,t.default);var o=h(i);function i(t){var r;a(this,i);var n=t=t||{};return n.stopDown||(n.stopDown=e.FALSE),(r=o.call(this,n)).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==t.threshold?t.threshold:.3,r.duration_=void 0!==t.duration?t.duration:250,r}return c(i,[{key:"handleDragEvent",value:function(e){var n=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.lastAngle_){var u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=a;var c=e.map,l=c.getView();l.getConstraints().rotation!==r.disable&&(this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel((0,t.centroid)(this.targetPointers))),this.rotating_&&(c.render(),l.adjustRotationInternal(n,this.anchor_)))}},{key:"handleUpEvent",value:function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),i}(),_=g;exports.default=_;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../rotationconstraint.js":"EKd0"}],"rcXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Pointer.js")),e=require("../functions.js");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=t[a]}return o.default=t,n&&n.set(t,o),o}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=l(t,"string");return"symbol"===o(e)?e:String(e)}function l(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(r){f(o,t.default);var n=p(o);function o(t){var r;i(this,o);var a=t=t||{};return a.stopDown||(a.stopDown=e.FALSE),(r=n.call(this,a)).anchor_=null,r.duration_=void 0!==t.duration?t.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return u(o,[{key:"handleDragEvent",value:function(e){var r=1,n=this.targetPointers[0],o=this.targetPointers[1],i=n.clientX-o.clientX,a=n.clientY-o.clientY,u=Math.sqrt(i*i+a*a);void 0!==this.lastDistance_&&(r=this.lastDistance_/u),this.lastDistance_=u;var c=e.map,l=c.getView();1!=r&&(this.lastScaleDelta_=r),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel((0,t.centroid)(this.targetPointers))),c.render(),l.adjustResolutionInternal(r,this.anchor_)}},{key:"handleUpEvent",value:function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),o}(),g=b;exports.default=g;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2"}],"PYDc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=m;var o=h(require("../Collection.js")),e=h(require("./DoubleClickZoom.js")),u=h(require("./DragPan.js")),t=h(require("./DragRotate.js")),r=h(require("./DragZoom.js")),a=h(require("./KeyboardPan.js")),i=h(require("./KeyboardZoom.js")),n=h(require("../Kinetic.js")),d=h(require("./MouseWheelZoom.js")),l=h(require("./PinchRotate.js")),s=h(require("./PinchZoom.js"));function h(o){return o&&o.__esModule?o:{default:o}}function m(h){h=h||{};var m=new o.default,c=new n.default(-.005,.05,100);return(void 0===h.altShiftDragRotate||h.altShiftDragRotate)&&m.push(new t.default),(void 0===h.doubleClickZoom||h.doubleClickZoom)&&m.push(new e.default({delta:h.zoomDelta,duration:h.zoomDuration})),(void 0===h.dragPan||h.dragPan)&&m.push(new u.default({onFocusOnly:h.onFocusOnly,kinetic:c})),(void 0===h.pinchRotate||h.pinchRotate)&&m.push(new l.default),(void 0===h.pinchZoom||h.pinchZoom)&&m.push(new s.default({duration:h.zoomDuration})),(void 0===h.keyboard||h.keyboard)&&(m.push(new a.default),m.push(new i.default({delta:h.zoomDelta,duration:h.zoomDuration}))),(void 0===h.mouseWheelZoom||h.mouseWheelZoom)&&m.push(new d.default({onFocusOnly:h.onFocusOnly,duration:h.zoomDuration})),(void 0===h.shiftDragZoom||h.shiftDragZoom)&&m.push(new r.default({duration:h.zoomDuration})),m}
},{"../Collection.js":"FnDa","./DoubleClickZoom.js":"NSa4","./DragPan.js":"N4gU","./DragRotate.js":"PgBj","./DragZoom.js":"pTqW","./KeyboardPan.js":"CFRo","./KeyboardZoom.js":"S8wR","../Kinetic.js":"gAnK","./MouseWheelZoom.js":"kPt6","./PinchRotate.js":"hbGN","./PinchZoom.js":"rcXm"}],"kYy5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=D(require("./Object.js")),t=D(require("./Collection.js")),r=D(require("./CollectionEventType.js")),n=D(require("./renderer/Composite.js")),i=D(require("./events/EventType.js")),a=D(require("./layer/Layer.js")),o=j(require("./layer/Group.js")),s=D(require("./MapBrowserEvent.js")),l=D(require("./MapBrowserEventHandler.js")),u=D(require("./MapBrowserEventType.js")),d=D(require("./MapEvent.js")),h=D(require("./MapEventType.js")),v=D(require("./MapProperty.js")),f=D(require("./ObjectEventType.js")),y=D(require("./pointer/EventType.js")),c=D(require("./render/EventType.js")),p=j(require("./TileQueue.js")),g=D(require("./View.js")),_=D(require("./ViewHint.js")),E=require("./has.js"),m=require("./functions.js"),w=require("./transform.js"),T=require("./asserts.js"),C=require("./extent.js"),L=require("./control/defaults.js"),R=require("./interaction/defaults.js"),b=require("./array.js"),S=require("./proj.js"),O=require("./util.js"),k=require("./size.js"),P=require("./events.js"),x=require("./dom.js"),I=require("./console.js");function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function D(e){return e&&e.__esModule?e:{default:e}}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function M(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e){var t=q(e,"string");return"symbol"===N(t)?t:String(t)}function q(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function G(){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=K(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function K(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=Q();return function(){var r,n=X(e);if(t){var i=X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){e instanceof a.default?e.setMapInternal(null):e instanceof o.default&&e.getLayers().forEach(Z)}function J(e,t){if(e instanceof a.default)e.setMapInternal(t);else if(e instanceof o.default)for(var r=e.getLayers().getArray(),n=0,i=r.length;n<i;++n)J(r[n],t)}var $=function(a){B(A,e.default);var T=W(A);function A(e){var t;F(this,A),e=e||{},(t=T.call(this)).on,t.once,t.un;var n=ee(e);t.renderComplete_,t.loaded_=!0,t.boundHandleBrowserEvent_=t.handleBrowserEvent.bind(Y(t)),t.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,t.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:E.DEVICE_PIXEL_RATIO,t.postRenderTimeoutHandle_,t.animationDelayKey_,t.animationDelay_=t.animationDelay_.bind(Y(t)),t.coordinateToPixelTransform_=(0,w.create)(),t.pixelToCoordinateTransform_=(0,w.create)(),t.frameIndex_=0,t.frameState_=null,t.previousExtent_=null,t.viewPropertyListenerKey_=null,t.viewChangeListenerKey_=null,t.layerGroupPropertyListenerKeys_=null,t.viewport_=document.createElement("div"),t.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),t.viewport_.style.position="relative",t.viewport_.style.overflow="hidden",t.viewport_.style.width="100%",t.viewport_.style.height="100%",t.overlayContainer_=document.createElement("div"),t.overlayContainer_.style.position="absolute",t.overlayContainer_.style.zIndex="0",t.overlayContainer_.style.width="100%",t.overlayContainer_.style.height="100%",t.overlayContainer_.style.pointerEvents="none",t.overlayContainer_.className="ol-overlaycontainer",t.viewport_.appendChild(t.overlayContainer_),t.overlayContainerStopEvent_=document.createElement("div"),t.overlayContainerStopEvent_.style.position="absolute",t.overlayContainerStopEvent_.style.zIndex="0",t.overlayContainerStopEvent_.style.width="100%",t.overlayContainerStopEvent_.style.height="100%",t.overlayContainerStopEvent_.style.pointerEvents="none",t.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",t.viewport_.appendChild(t.overlayContainerStopEvent_),t.mapBrowserEventHandler_=null,t.moveTolerance_=e.moveTolerance,t.keyboardEventTarget_=n.keyboardEventTarget,t.targetChangeHandlerKeys_=null,t.targetElement_=null,t.resizeObserver_=new ResizeObserver(function(){return t.updateSize()}),t.controls=n.controls||(0,L.defaults)(),t.interactions=n.interactions||(0,R.defaults)({onFocusOnly:!0}),t.overlays_=n.overlays,t.overlayIdIndex_={},t.renderer_=null,t.postRenderFunctions_=[],t.tileQueue_=new p.default(t.getTilePriority.bind(Y(t)),t.handleTileChange_.bind(Y(t))),t.addChangeListener(v.default.LAYERGROUP,t.handleLayerGroupChanged_),t.addChangeListener(v.default.VIEW,t.handleViewChanged_),t.addChangeListener(v.default.SIZE,t.handleSizeChanged_),t.addChangeListener(v.default.TARGET,t.handleTargetChanged_),t.setProperties(n.values);var i=Y(t);return!e.view||e.view instanceof g.default||e.view.then(function(e){i.setView(new g.default(e))}),t.controls.addEventListener(r.default.ADD,function(e){e.element.setMap(Y(t))}),t.controls.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}),t.interactions.addEventListener(r.default.ADD,function(e){e.element.setMap(Y(t))}),t.interactions.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}),t.overlays_.addEventListener(r.default.ADD,function(e){t.addOverlayInternal_(e.element)}),t.overlays_.addEventListener(r.default.REMOVE,function(e){var r=e.element.getId();void 0!==r&&delete t.overlayIdIndex_[r.toString()],e.element.setMap(null)}),t.controls.forEach(function(e){e.setMap(Y(t))}),t.interactions.forEach(function(e){e.setMap(Y(t))}),t.overlays_.forEach(t.addOverlayInternal_.bind(Y(t))),t}return M(A,[{key:"addControl",value:function(e){this.getControls().push(e)}},{key:"addInteraction",value:function(e){this.getInteractions().push(e)}},{key:"addLayer",value:function(e){this.getLayerGroup().getLayers().push(e)}},{key:"handleLayerAdd_",value:function(e){J(e.layer,this)}},{key:"addOverlay",value:function(e){this.getOverlays().push(e)}},{key:"addOverlayInternal_",value:function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),G(X(A.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(e,t,r){if(this.frameState_&&this.renderer_){var n=this.getCoordinateFromPixelInternal(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,a=void 0!==r.layerFilter?r.layerFilter:m.TRUE,o=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,o,t,null,a,null)}}},{key:"getFeaturesAtPixel",value:function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r}},{key:"getAllLayers",value:function(){var e=[];return function t(r){r.forEach(function(r){r instanceof o.default?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}},{key:"hasFeatureAtPixel",value:function(e,t){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:m.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance:0,a=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,a,n,null)}},{key:"getEventCoordinate",value:function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}},{key:"getEventCoordinateInternal",value:function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}},{key:"getEventPixel",value:function(e){var t=this.viewport_.getBoundingClientRect(),r=this.getSize(),n=t.width/r[0],i=t.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-t.left)/n,(a.clientY-t.top)/i]}},{key:"getTarget",value:function(){return this.get(v.default.TARGET)}},{key:"getTargetElement",value:function(){return this.targetElement_}},{key:"getCoordinateFromPixel",value:function(e){return(0,S.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(e){var t=this.frameState_;return t?(0,w.apply)(t.pixelToCoordinateTransform,e.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(v.default.LAYERGROUP)}},{key:"setLayers",value:function(e){var r=this.getLayerGroup();if(e instanceof t.default)r.setLayers(e);else{var n=r.getLayers();n.clear(),n.extend(e)}}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t];if(n.visible){var i=n.layer.getRenderer();if(i&&!i.ready)return!0;var a=n.layer.getSource();if(a&&a.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(e){var t=(0,S.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}},{key:"getPixelFromCoordinateInternal",value:function(e){var t=this.frameState_;return t?(0,w.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(v.default.SIZE)}},{key:"getView",value:function(){return this.get(v.default.VIEW)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var e=this.getTargetElement();return e?e.ownerDocument:document}},{key:"getTilePriority",value:function(e,t,r,n){return(0,p.getTilePriority)(this.frameState_,e,t,r,n)}},{key:"handleBrowserEvent",value:function(e,t){t=t||e.type;var r=new s.default(t,this,e);this.handleMapBrowserEvent(r)}},{key:"handleMapBrowserEvent",value:function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===y.default.POINTERDOWN||r===i.default.WHEEL||r===i.default.KEYDOWN){var n=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(a===n?n.documentElement:a).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var s=this.getInteractions().getArray().slice(),l=s.length-1;l>=0;l--){var u=s[l];if(u.getMap()===this&&u.getActive()&&this.getTargetElement())if(!u.handleEvent(e)||e.propagationStopped)break}}}},{key:"handlePostRender",value:function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[_.default.ANIMATING]||i[_.default.INTERACTING]){var a=Date.now()-e.time>8;r=a?0:8,n=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(c.default.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(c.default.RENDERCOMPLETE,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new d.default(h.default.LOADEND,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new d.default(h.default.LOADSTART,this,e))));for(var o=this.postRenderFunctions_,s=0,l=o.length;s<l;++s)o[s](this,e);o.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)(0,P.unlistenByKey)(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(i.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(i.default.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,x.removeNode)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);var r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}var a=this.getTarget(),o="string"==typeof a?document.getElementById(a):a;if(this.targetElement_=o,o){for(var s in o.appendChild(this.viewport_),this.renderer_||(this.renderer_=new n.default(this)),this.mapBrowserEventHandler_=new l.default(this,this.moveTolerance_),u.default)this.mapBrowserEventHandler_.addEventListener(u.default[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(i.default.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(i.default.WHEEL,this.boundHandleBrowserEvent_,!!E.PASSIVE_EVENT_LISTENERS&&{passive:!1});var d=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[(0,P.listen)(d,i.default.KEYDOWN,this.handleBrowserEvent,this),(0,P.listen)(d,i.default.KEYPRESS,this.handleBrowserEvent,this)];var h=o.getRootNode();h instanceof ShadowRoot&&this.resizeObserver_.observe(h.host),this.resizeObserver_.observe(o)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&((0,P.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,P.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,P.listen)(e,f.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,P.listen)(e,i.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new o.GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[(0,P.listen)(e,f.default.PROPERTYCHANGE,this.render,this),(0,P.listen)(e,i.default.CHANGE,this.render,this),(0,P.listen)(e,"addlayer",this.handleLayerAdd_,this),(0,P.listen)(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"flushDeclutterItems",value:function(){var e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}},{key:"removeControl",value:function(e){return this.getControls().remove(e)}},{key:"removeInteraction",value:function(e){return this.getInteractions().remove(e)}},{key:"removeLayer",value:function(e){return this.getLayerGroup().getLayers().remove(e)}},{key:"handleLayerRemove_",value:function(e){Z(e.layer)}},{key:"removeOverlay",value:function(e){return this.getOverlays().remove(e)}},{key:"renderFrame_",value:function(e){var t=this,r=this.getSize(),n=this.getView(),i=this.frameState_,a=null;if(void 0!==r&&(0,k.hasArea)(r)&&n&&n.isDef()){var o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,C.getForViewAndSize)(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:o,wantedTiles:{},mapId:(0,O.getUid)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var l=isNaN(s.nextRotation)?s.rotation:s.nextRotation;a.nextExtent=(0,C.getForViewAndSize)(s.nextCenter,s.nextResolution,l,r)}}if(this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),i)(!this.previousExtent_||!(0,C.isEmpty)(this.previousExtent_)&&!(0,C.equals)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new d.default(h.default.MOVESTART,this,i)),this.previousExtent_=(0,C.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!a.viewHints[_.default.ANIMATING]&&!a.viewHints[_.default.INTERACTING]&&!(0,C.equals)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new d.default(h.default.MOVEEND,this,a)),(0,C.clone)(a.extent,this.previousExtent_))}this.dispatchEvent(new d.default(h.default.POSTRENDER,this,a)),this.renderComplete_=this.hasListener(h.default.LOADSTART)||this.hasListener(h.default.LOADEND)||this.hasListener(c.default.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()},0))}},{key:"setLayerGroup",value:function(e){var t=this.getLayerGroup();t&&this.handleLayerRemove_(new o.GroupEvent("removelayer",t)),this.set(v.default.LAYERGROUP,e)}},{key:"setSize",value:function(e){this.set(v.default.SIZE,e)}},{key:"setTarget",value:function(e){this.set(v.default.TARGET,e)}},{key:"setView",value:function(e){if(!e||e instanceof g.default)this.set(v.default.VIEW,e);else{this.set(v.default.VIEW,new g.default);var t=this;e.then(function(e){t.setView(new g.default(e))})}}},{key:"updateSize",value:function(){var e=this.getTargetElement(),t=void 0;if(e){var r=getComputedStyle(e),n=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),i=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(i)||(t=[n,i],!(0,k.hasArea)(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&(0,I.warn)("No map visible because the map container's width or height are 0."))}var a=this.getSize();!t||a&&(0,b.equals)(t,a)||(this.setSize(t),this.updateViewportSize_())}},{key:"updateViewportSize_",value:function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}}}]),A}();function ee(e){var r=null;void 0!==e.keyboardEventTarget&&(r="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var n,i,a,s={},l=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new o.default({layers:e.layers});return s[v.default.LAYERGROUP]=l,s[v.default.TARGET]=e.target,s[v.default.VIEW]=e.view instanceof g.default?e.view:new g.default,void 0!==e.controls&&(Array.isArray(e.controls)?n=new t.default(e.controls.slice()):((0,T.assert)("function"==typeof e.controls.getArray,47),n=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?i=new t.default(e.interactions.slice()):((0,T.assert)("function"==typeof e.interactions.getArray,48),i=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?a=new t.default(e.overlays.slice()):((0,T.assert)("function"==typeof e.overlays.getArray,49),a=e.overlays):a=new t.default,{controls:n,interactions:i,keyboardEventTarget:r,overlays:a,values:s}}var te=$;exports.default=te;
},{"./Object.js":"PhPh","./Collection.js":"FnDa","./CollectionEventType.js":"BTrx","./renderer/Composite.js":"MHsB","./events/EventType.js":"C8cu","./layer/Layer.js":"GCgv","./layer/Group.js":"q0nK","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserEventType.js":"YhDM","./MapEvent.js":"vFcA","./MapEventType.js":"xLGm","./MapProperty.js":"zlNQ","./ObjectEventType.js":"zehl","./pointer/EventType.js":"TaSm","./render/EventType.js":"z39m","./TileQueue.js":"tHOl","./View.js":"hNqE","./ViewHint.js":"cuLW","./has.js":"f3Nv","./functions.js":"RgA2","./transform.js":"P4eA","./asserts.js":"fLG6","./extent.js":"QDir","./control/defaults.js":"cZGD","./interaction/defaults.js":"PYDc","./array.js":"luEr","./proj.js":"Diht","./util.js":"KniQ","./size.js":"TAHd","./events.js":"UqnM","./dom.js":"Xno5","./console.js":"n6up"}],"qWcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./Object.js")),t=s(require("./MapEventType.js")),n=require("./css.js"),i=require("./extent.js"),r=require("./events.js"),o=require("./dom.js");function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=d(e,"string");return"symbol"===a(t)?t:String(t)}function d(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=m();return function(){var n,i=P(e);if(t){var r=P(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},O=function(s){h(l,e.default);var a=v(l);function l(e){var t;return u(this,l),(t=a.call(this)).on,t.once,t.un,t.options=e,t.id=e.id,t.insertFirst=void 0===e.insertFirst||e.insertFirst,t.stopEvent=void 0===e.stopEvent||e.stopEvent,t.element=document.createElement("div"),t.element.className=void 0!==e.className?e.className:"ol-overlay-container "+n.CLASS_SELECTABLE,t.element.style.position="absolute",t.element.style.pointerEvents="auto",t.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,t.rendered={transform_:"",visible:!0},t.mapPostrenderListenerKey=null,t.addChangeListener(b.ELEMENT,t.handleElementChanged),t.addChangeListener(b.MAP,t.handleMapChanged),t.addChangeListener(b.OFFSET,t.handleOffsetChanged),t.addChangeListener(b.POSITION,t.handlePositionChanged),t.addChangeListener(b.POSITIONING,t.handlePositioningChanged),void 0!==e.element&&t.setElement(e.element),t.setOffset(void 0!==e.offset?e.offset:[0,0]),t.setPositioning(e.positioning||"top-left"),void 0!==e.position&&t.setPosition(e.position),t}return f(l,[{key:"getElement",value:function(){return this.get(b.ELEMENT)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(b.MAP)||null}},{key:"getOffset",value:function(){return this.get(b.OFFSET)}},{key:"getPosition",value:function(){return this.get(b.POSITION)}},{key:"getPositioning",value:function(){return this.get(b.POSITIONING)}},{key:"handleElementChanged",value:function(){(0,o.removeChildren)(this.element);var e=this.getElement();e&&this.element.appendChild(e)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&((0,o.removeNode)(this.element),(0,r.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,r.listen)(e,t.default.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(e){this.set(b.ELEMENT,e)}},{key:"setMap",value:function(e){this.set(b.MAP,e)}},{key:"setOffset",value:function(e){this.set(b.OFFSET,e)}},{key:"setPosition",value:function(e){this.set(b.POSITION,e)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(b.POSITION)){var n=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[(0,o.outerWidth)(r),(0,o.outerHeight)(r)]),a=void 0===(e=e||{}).margin?20:e.margin;if(!(0,i.containsExtent)(n,s)){var u=s[0]-n[0],l=n[2]-s[2],f=s[1]-n[1],c=n[3]-s[3],d=[0,0];if(u<0?d[0]=u-a:l<0&&(d[0]=Math.abs(l)+a),f<0?d[1]=f-a:c<0&&(d[1]=Math.abs(c)+a),0!==d[0]||0!==d[1]){var h=t.getView().getCenterInternal(),p=t.getPixelFromCoordinateInternal(h);if(!p)return;var v=[p[0]+d[0],p[1]+d[1]],g=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(v),duration:g.duration,easing:g.easing})}}}}},{key:"getRect",value:function(e,t){var n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+t[0],r+t[1]]}},{key:"setPositioning",value:function(e){this.set(b.POSITIONING,e)}},{key:"setVisible",value:function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}},{key:"updatePixelPosition",value:function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(e,t){var n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=Math.round(e[0]+i[0])+"px",s=Math.round(e[1]+i[1])+"px",a="0%",u="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?a="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(a="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?u="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(u="-50%");var l="translate(".concat(a,", ").concat(u,") translate(").concat(o,", ").concat(s,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l)}},{key:"getOptions",value:function(){return this.options}}]),l}(),E=O;exports.default=E;
},{"./Object.js":"PhPh","./MapEventType.js":"xLGm","./css.js":"HgMV","./extent.js":"QDir","./events.js":"UqnM","./dom.js":"Xno5"}],"oMDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var n=o(e,"string");return"symbol"===t(n)?n:String(n)}function o(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}var u=function(){function t(e){n(this,t),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return i(t,[{key:"canExpireCache",value:function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(e){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(e){return this.entries_.hasOwnProperty(e)}},{key:"forEach",value:function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer}},{key:"get",value:function(t,n){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)}},{key:"remove",value:function(t){var n=this.entries_[t];return(0,e.assert)(void 0!==n,15),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}},{key:"getValues",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(e){if(this.containsKey(e))return this.entries_[e].value_}},{key:"pop",value:function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}},{key:"replace",value:function(e,t){this.get(e),this.entries_[e].value_=t}},{key:"set",value:function(t,n){(0,e.assert)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}},{key:"setSize",value:function(e){this.highWaterMark=e}}]),t}(),l=u;exports.default=l;
},{"../asserts.js":"fLG6"}],"faTr":[function(require,module,exports) {
"use strict";function t(t,n){return u(t)||o(t,n)||e(t,n)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,i,a=[],l=!0,c=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=u.call(e)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){c=!0,o=f}finally{try{if(!l&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function u(t){if(Array.isArray(t))return t}function i(t,r,e,n){return void 0!==n?(n[0]=t,n[1]=r,n[2]=e,n):[t,r,e]}function a(t,r,e){return t+"/"+r+"/"+e}function l(t){return a(t[0],t[1],t[2])}function c(r){var e=t(r.substring(r.lastIndexOf("/")+1,r.length).split(",").map(Number),3);return a(e[0],e[1],e[2])}function f(t){return t.split("/").map(Number)}function s(t){return(t[1]<<t[0])+t[2]}function p(t,r){var e=t[0],n=t[1],o=t[2];if(r.getMinZoom()>e||e>r.getMaxZoom())return!1;var u=r.getFullTileRange(e);return!u||u.containsXY(n,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i,exports.fromKey=f,exports.getCacheKeyForTileKey=c,exports.getKey=l,exports.getKeyZXY=a,exports.hash=s,exports.withinExtentAndZ=p;
},{}],"YFDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./structs/LRUCache.js")),t=require("./tilecoord.js");function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===n(t)?t:String(t)}function f(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=v();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(r){p(i,e.default);var n=y(i);function i(){return o(this,i),n.apply(this,arguments)}return u(i,[{key:"clear",value:function(){for(;this.getCount()>0;)this.pop().release();l(d(i.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().release()}}},{key:"pruneExceptNewestZ",value:function(){var e=this;if(0!==this.getCount()){var r=this.peekFirstKey(),n=(0,t.fromKey)(r)[0];this.forEach(function(r){r.tileCoord[0]!==n&&(e.remove((0,t.getKey)(r.tileCoord)),r.release())})}}}]),i}(),O=m;exports.default=O;
},{"./structs/LRUCache.js":"oMDz","./tilecoord.js":"faTr"}],"snev":[function(require,module,exports) {
"use strict";function t(i){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,r(e.key),e)}}function e(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(i){var n=a(i,"string");return"symbol"===t(n)?n:String(n)}function a(i,n){if("object"!==t(i)||null===i)return i;var e=i[Symbol.toPrimitive];if(void 0!==e){var r=e.call(i,n||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=m,exports.default=void 0;var o=function(){function t(n,e,r,a){i(this,t),this.minX=n,this.maxX=e,this.minY=r,this.maxY=a}return e(t,[{key:"contains",value:function(t){return this.containsXY(t[1],t[2])}},{key:"containsTileRange",value:function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}},{key:"containsXY",value:function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}},{key:"equals",value:function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}},{key:"extend",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}]),t}();function m(t,i,n,e,r){return void 0!==r?(r.minX=t,r.maxX=i,r.minY=n,r.maxY=e,r):new o(t,i,n,e)}var u=o;exports.default=u;
},{}],"C8Du":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Tile.js")),t=require("./dom.js"),r=require("./util.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=a(e,"string");return"symbol"===o(t)?t:String(t)}function a(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=s(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=h();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=[],m=function(n){p(u,e.default);var o=d(u);function u(e,t,r,n){var c;return i(this,u),(c=o.call(this,e,t,{transition:0})).context_={},c.executorGroups={},c.declutterExecutorGroups={},c.loadingSourceTiles=0,c.hitDetectionImageData={},c.replayState_={},c.sourceTiles=[],c.errorTileKeys={},c.wantedResolution,c.getSourceTiles=n.bind(void 0,b(c)),c.wrappedTileCoord=r,c}return c(u,[{key:"getContext",value:function(e){var n=(0,r.getUid)(e);return n in this.context_||(this.context_[n]=(0,t.createCanvasContext2D)(1,1,_)),this.context_[n]}},{key:"hasContext",value:function(e){return(0,r.getUid)(e)in this.context_}},{key:"getImage",value:function(e){return this.hasContext(e)?this.getContext(e).canvas:null}},{key:"getReplayState",value:function(e){var t=(0,r.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}},{key:"load",value:function(){this.getSourceTiles()}},{key:"release",value:function(){for(var e in this.context_){var r=this.context_[e];(0,t.releaseCanvas)(r),_.push(r.canvas),delete this.context_[e]}f(g(u.prototype),"release",this).call(this)}}]),u}(),O=m;exports.default=O;
},{"./Tile.js":"IWZI","./dom.js":"Xno5","./util.js":"KniQ"}],"yj80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Tile.js")),e=r(require("./TileState.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=c(t,"string");return"symbol"===n(e)?e:String(e)}function c(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){a(u,t.default);var n=s(u);function u(t,e,r,i,f,c){var a;return o(this,u),(a=n.call(this,t,e,c)).extent=null,a.format_=i,a.features_=null,a.loader_,a.projection=null,a.resolution,a.tileLoadFunction_=f,a.url_=r,a.key=r,a}return i(u,[{key:"getFormat",value:function(){return this.format_}},{key:"getFeatures",value:function(){return this.features_}},{key:"load",value:function(){this.state==e.default.IDLE&&(this.setState(e.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}},{key:"onLoad",value:function(t,e){this.setFeatures(t)}},{key:"onError",value:function(){this.setState(e.default.ERROR)}},{key:"setFeatures",value:function(t){this.features_=t,this.setState(e.default.LOADED)}},{key:"setLoader",value:function(t){this.loader_=t}}]),u}(),v=h;exports.default=v;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG"}],"DRei":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AssertionError",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Collection",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Disposable",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Feature",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Geolocation",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Graticule",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ImageBase",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ImageTile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Kinetic",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Map",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"MapBrowserEvent",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"MapBrowserEventHandler",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"MapEvent",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Object",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Observable",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Overlay",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"TileCache",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"TileQueue",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"TileRange",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return E.VERSION}}),Object.defineProperty(exports,"VectorRenderTile",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"getUid",{enumerable:!0,get:function(){return E.getUid}});var e=I(require("./AssertionError.js")),r=I(require("./Collection.js")),t=I(require("./Disposable.js")),n=I(require("./Feature.js")),u=I(require("./Geolocation.js")),i=I(require("./layer/Graticule.js")),o=I(require("./Image.js")),a=I(require("./ImageBase.js")),l=I(require("./ImageCanvas.js")),f=I(require("./ImageTile.js")),s=I(require("./Kinetic.js")),c=I(require("./Map.js")),p=I(require("./MapBrowserEvent.js")),b=I(require("./MapBrowserEventHandler.js")),d=I(require("./MapEvent.js")),j=I(require("./Object.js")),g=I(require("./Observable.js")),O=I(require("./Overlay.js")),m=I(require("./Tile.js")),y=I(require("./TileCache.js")),x=I(require("./TileQueue.js")),P=I(require("./TileRange.js")),q=I(require("./VectorRenderTile.js")),v=I(require("./VectorTile.js")),T=I(require("./View.js")),E=require("./util.js");function I(e){return e&&e.__esModule?e:{default:e}}
},{"./AssertionError.js":"ygGQ","./Collection.js":"FnDa","./Disposable.js":"DDda","./Feature.js":"mYW9","./Geolocation.js":"X4ix","./layer/Graticule.js":"wXs0","./Image.js":"DHWK","./ImageBase.js":"Ojbp","./ImageCanvas.js":"K7j2","./ImageTile.js":"TOsW","./Kinetic.js":"gAnK","./Map.js":"kYy5","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapEvent.js":"vFcA","./Object.js":"PhPh","./Observable.js":"IdSm","./Overlay.js":"qWcX","./Tile.js":"IWZI","./TileCache.js":"YFDe","./TileQueue.js":"tHOl","./TileRange.js":"snev","./VectorRenderTile.js":"C8Du","./VectorTile.js":"yj80","./View.js":"hNqE","./util.js":"KniQ"}],"fF5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERROR_THRESHOLD=void 0;var e=.5;exports.ERROR_THRESHOLD=e;
},{}],"BiRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),r=require("../proj.js"),e=require("../math.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function s(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var r=u(t,"string");return"symbol"===i(r)?r:String(r)}function u(t,r){if("object"!==i(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,r||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}var h=10,c=.25,d=function(){function i(e,n,s,a,u,c){var d=this;o(this,i),this.sourceProj_=e,this.targetProj_=n;var l={},f=(0,r.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var r=t[0]+"/"+t[1];return l[r]||(l[r]=f(t)),l[r]},this.maxSourceExtent_=a,this.errorThresholdSquared_=u*u,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(a)>=(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var _=(0,t.getTopLeft)(s),g=(0,t.getTopRight)(s),v=(0,t.getBottomRight)(s),m=(0,t.getBottomLeft)(s),W=this.transformInv_(_),p=this.transformInv_(g),y=this.transformInv_(v),b=this.transformInv_(m),x=h+(c?Math.max(0,Math.ceil(Math.log2((0,t.getArea)(s)/(c*c*256*256)))):0);if(this.addQuad_(_,g,v,m,W,p,y,b,x),this.wrapsXInSource_){var j=1/0;this.triangles_.forEach(function(t,r,e){j=Math.min(j,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-j>d.sourceWorldWidth_/2){var r=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];r[0][0]-j>d.sourceWorldWidth_/2&&(r[0][0]-=d.sourceWorldWidth_),r[1][0]-j>d.sourceWorldWidth_/2&&(r[1][0]-=d.sourceWorldWidth_),r[2][0]-j>d.sourceWorldWidth_/2&&(r[2][0]-=d.sourceWorldWidth_);var e=Math.min(r[0][0],r[1][0],r[2][0]);Math.max(r[0][0],r[1][0],r[2][0])-e<d.sourceWorldWidth_/2&&(t.source=r)}})}l={}}return s(i,[{key:"addTriangle_",value:function(t,r,e,i,o,n){this.triangles_.push({source:[i,o,n],target:[t,r,e]})}},{key:"addQuad_",value:function(r,i,o,n,s,a,u,h,d){var l=(0,t.boundingExtent)([s,a,u,h]),f=this.sourceWorldWidth_?(0,t.getWidth)(l)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&f>.5&&f<1,v=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var m=(0,t.boundingExtent)([r,i,o,n]);v=(0,t.getWidth)(m)/this.targetWorldWidth_>c||v}!g&&this.sourceProj_.isGlobal()&&f&&(v=f>c||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||(0,t.intersects)(l,this.maxSourceExtent_)){var W=0;if(!(v||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(h[0])&&isFinite(h[1])))if(d>0)v=!0;else if(1!=(W=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1))&&2!=W&&4!=W&&8!=W)return;if(d>0){if(!v){var p,y=[(r[0]+o[0])/2,(r[1]+o[1])/2],b=this.transformInv_(y);if(g)p=((0,e.modulo)(s[0],_)+(0,e.modulo)(u[0],_))/2-(0,e.modulo)(b[0],_);else p=(s[0]+u[0])/2-b[0];var x=(s[1]+u[1])/2-b[1];v=p*p+x*x>this.errorThresholdSquared_}if(v){if(Math.abs(r[0]-o[0])<=Math.abs(r[1]-o[1])){var j=[(i[0]+o[0])/2,(i[1]+o[1])/2],F=this.transformInv_(j),P=[(n[0]+r[0])/2,(n[1]+r[1])/2],S=this.transformInv_(P);this.addQuad_(r,i,j,P,s,a,F,S,d-1),this.addQuad_(P,j,o,n,S,F,u,h,d-1)}else{var E=[(r[0]+i[0])/2,(r[1]+i[1])/2],I=this.transformInv_(E),T=[(o[0]+n[0])/2,(o[1]+n[1])/2],M=this.transformInv_(T);this.addQuad_(r,E,T,n,s,I,M,h,d-1),this.addQuad_(E,i,o,T,I,a,u,M,d-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&W)&&this.addTriangle_(r,o,n,s,u,h),0==(14&W)&&this.addTriangle_(r,o,i,s,u,a),W&&(0==(13&W)&&this.addTriangle_(i,n,r,a,h,s),0==(7&W)&&this.addTriangle_(i,n,o,a,h,u))}}},{key:"calculateSourceExtent",value:function(){var r=(0,t.createEmpty)();return this.triangles_.forEach(function(e,i,o){var n=e.source;(0,t.extendCoordinate)(r,n[0]),(0,t.extendCoordinate)(r,n[1]),(0,t.extendCoordinate)(r,n[2])}),r}},{key:"getTriangles",value:function(){return this.triangles_}}]),i}(),l=d;exports.default=l;
},{"../extent.js":"QDir","../proj.js":"Diht","../math.js":"B96G"}],"U255":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceExtentResolution=g,exports.calculateSourceResolution=c,exports.canvasPool=void 0,exports.render=u;var e,t=require("./extent.js"),a=require("./dom.js"),r=require("./proj.js"),o=require("./math.js"),n=[];function i(e,t,a,r,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,a),e.lineTo(r,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,r)+1,Math.max(a,o)),e.restore()}function s(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function l(){if(void 0===e){var t=(0,a.createCanvasContext2D)(6,6,n);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",i(t,4,5,4,0),i(t,4,5,0,5);var r=t.getImageData(0,0,3,3).data;e=s(r,0)||s(r,4)||s(r,8),(0,a.releaseCanvas)(t),n.push(t.canvas)}return e}function c(e,a,o,n){var i=(0,r.transform)(o,a,e),s=(0,r.getPointResolution)(a,n,o),l=a.getMetersPerUnit();void 0!==l&&(s*=l);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var g=e.getExtent();if(!g||(0,t.containsCoordinate)(g,i)){var u=(0,r.getPointResolution)(e,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function g(e,a,r,o){var n=(0,t.getCenter)(r),i=c(e,a,n,o);return(!isFinite(i)||i<=0)&&(0,t.forEachCorner)(r,function(t){return i=c(e,a,t,o),isFinite(i)&&i>0}),i}function u(e,r,i,s,c,g,u,v,h,f,m,d){var p=(0,a.createCanvasContext2D)(Math.round(i*e),Math.round(i*r),n);if(d||(p.imageSmoothingEnabled=!1),0===h.length)return p.canvas;function x(e){return Math.round(e*i)/i}p.scale(i,i),p.globalCompositeOperation="lighter";var T=(0,t.createEmpty)();h.forEach(function(e,a,r){(0,t.extend)(T,e.extent)});var C=(0,t.getWidth)(T),b=(0,t.getHeight)(T),M=(0,a.createCanvasContext2D)(Math.round(i*C/s),Math.round(i*b/s),n);d||(M.imageSmoothingEnabled=!1);var P=i/s;h.forEach(function(e,a,r){var o=e.extent[0]-T[0],n=-(e.extent[3]-T[3]),i=(0,t.getWidth)(e.extent),s=(0,t.getHeight)(e.extent);e.image.width>0&&e.image.height>0&&M.drawImage(e.image,f,f,e.image.width-2*f,e.image.height-2*f,o*P,n*P,i*P,s*P)});var E=(0,t.getTopLeft)(u);return v.getTriangles().forEach(function(e,t,a){var r=e.source,n=e.target,c=r[0][0],u=r[0][1],v=r[1][0],h=r[1][1],f=r[2][0],m=r[2][1],C=x((n[0][0]-E[0])/g),b=x(-(n[0][1]-E[1])/g),P=x((n[1][0]-E[0])/g),S=x(-(n[1][1]-E[1])/g),j=x((n[2][0]-E[0])/g),y=x(-(n[2][1]-E[1])/g),R=c,q=u;c=0,u=0;var w=[[v-=R,h-=q,0,0,P-C],[f-=R,m-=q,0,0,j-C],[0,0,v,h,S-b],[0,0,f,m,y-b]],D=(0,o.solveLinearSystem)(w);if(D){if(p.save(),p.beginPath(),l()||!d){p.moveTo(P,S);for(var O=C-P,k=b-S,F=0;F<4;F++)p.lineTo(P+x((F+1)*O/4),S+x(F*k/3)),3!=F&&p.lineTo(P+x((F+1)*O/4),S+x((F+1)*k/3));p.lineTo(j,y)}else p.moveTo(P,S),p.lineTo(C,b),p.lineTo(j,y);p.clip(),p.transform(D[0],D[2],D[1],D[3],C,b),p.translate(T[0]-R,T[3]-q),p.scale(s/i,-s/i),p.drawImage(M.canvas,0,0),p.restore()}}),(0,a.releaseCanvas)(M),n.push(M.canvas),m&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,v.getTriangles().forEach(function(e,t,a){var r=e.target,o=(r[0][0]-E[0])/g,n=-(r[0][1]-E[1])/g,i=(r[1][0]-E[0])/g,s=-(r[1][1]-E[1])/g,l=(r[2][0]-E[0])/g,c=-(r[2][1]-E[1])/g;p.beginPath(),p.moveTo(i,s),p.lineTo(o,n),p.lineTo(l,c),p.closePath(),p.stroke()}),p.restore()),p.canvas}exports.canvasPool=n;
},{"./extent.js":"QDir","./dom.js":"Xno5","./proj.js":"Diht","./math.js":"B96G"}],"WlOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=c(require("../events/EventType.js")),r=c(require("../Tile.js")),n=c(require("../TileState.js")),i=c(require("./Triangulation.js")),o=require("../reproj.js"),u=require("../math.js"),s=require("../extent.js"),a=require("../events.js"),l=require("../dom.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function h(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=_(e,"string");return"symbol"===f(t)?t:String(t)}function _(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=v(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=O();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(c){T(p,r.default);var f=E(p);function p(t,r,a,l,c,h,y,_,g,v,T,b){var E;d(this,p),(E=f.call(this,c,n.default.IDLE,{interpolate:!!b})).renderEdges_=void 0!==T&&T,E.pixelRatio_=y,E.gutter_=_,E.canvas_=null,E.sourceTileGrid_=r,E.targetTileGrid_=l,E.wrappedTileCoord_=h||c,E.sourceTiles_=[],E.sourcesListenerKeys_=null,E.sourceZ_=0;var j=l.getTileCoordExtent(E.wrappedTileCoord_),O=E.targetTileGrid_.getExtent(),R=E.sourceTileGrid_.getExtent(),w=O?(0,s.getIntersection)(j,O):j;if(0===(0,s.getArea)(w))return E.state=n.default.EMPTY,m(E);var x=t.getExtent();x&&(R=R?(0,s.getIntersection)(R,x):x);var P=l.getResolution(E.wrappedTileCoord_[0]),S=(0,o.calculateSourceExtentResolution)(t,a,w,P);if(!isFinite(S)||S<=0)return E.state=n.default.EMPTY,m(E);var D=void 0!==v?v:e.ERROR_THRESHOLD;if(E.triangulation_=new i.default(t,a,w,R,S*D,P),0===E.triangulation_.getTriangles().length)return E.state=n.default.EMPTY,m(E);E.sourceZ_=r.getZForResolution(S);var L=E.triangulation_.calculateSourceExtent();if(R&&(t.canWrapX()?(L[1]=(0,u.clamp)(L[1],R[1],R[3]),L[3]=(0,u.clamp)(L[3],R[1],R[3])):L=(0,s.getIntersection)(L,R)),(0,s.getArea)(L)){for(var C=r.getTileRangeForExtentAndZ(L,E.sourceZ_),G=C.minX;G<=C.maxX;G++)for(var I=C.minY;I<=C.maxY;I++){var q=g(E.sourceZ_,G,I,y);q&&E.sourceTiles_.push(q)}0===E.sourceTiles_.length&&(E.state=n.default.EMPTY)}else E.state=n.default.EMPTY;return E}return h(p,[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var e=this,t=[];if(this.sourceTiles_.forEach(function(r){r&&r.getState()==n.default.LOADED&&t.push({extent:e.sourceTileGrid_.getTileCoordExtent(r.tileCoord),image:r.getImage()})}),this.sourceTiles_.length=0,0===t.length)this.state=n.default.ERROR;else{var r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),u="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(r),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,o.render)(u,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=n.default.LOADED}this.changed()}},{key:"load",value:function(){var e=this;if(this.state==n.default.IDLE){this.state=n.default.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i){var o=i.getState();if(o==n.default.IDLE||o==n.default.LOADING){r++;var u=(0,a.listen)(i,t.default.CHANGE,function(e){var t=i.getState();t!=n.default.LOADED&&t!=n.default.ERROR&&t!=n.default.EMPTY||((0,a.unlistenByKey)(u),0===--r&&(this.unlistenSources_(),this.reproject_()))},e);e.sourcesListenerKeys_.push(u)}}),0===r?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,t,r){e.getState()==n.default.IDLE&&e.load()})}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(a.unlistenByKey),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&((0,l.releaseCanvas)(this.canvas_.getContext("2d")),o.canvasPool.push(this.canvas_),this.canvas_=null),g(R(p.prototype),"release",this).call(this)}}]),p}(),x=w;exports.default=x;
},{"./common.js":"fF5X","../events/EventType.js":"C8cu","../Tile.js":"IWZI","../TileState.js":"u3kG","./Triangulation.js":"BiRY","../reproj.js":"U255","../math.js":"B96G","../extent.js":"QDir","../events.js":"UqnM","../dom.js":"Xno5"}],"KXhD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"dpZ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../TileRange.js")),t=require("./common.js"),i=require("../asserts.js"),r=require("../math.js"),o=require("../extent.js"),n=require("../tilecoord.js"),s=require("../geom/flat/intersectsextent.js"),l=require("../array.js"),a=require("../size.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(u=function(e){return e?i:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=u(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,i&&i.set(e,r),r}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function m(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){var t=d(e,"string");return"symbol"===g(t)?t:String(t)}function d(e,t){if("object"!==g(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v=[0,0,0],p=5,y=function(){function u(r){var n;if(f(this,u),this.minZoom=void 0!==r.minZoom?r.minZoom:0,this.resolutions_=r.resolutions,(0,i.assert)((0,l.isSorted)(this.resolutions_,function(e,t){return t-e},!0),17),!r.origins)for(var s=0,a=this.resolutions_.length-1;s<a;++s)if(n){if(this.resolutions_[s]/this.resolutions_[s+1]!==n){n=void 0;break}}else n=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==r.origin?r.origin:null,this.origins_=null,void 0!==r.origins&&(this.origins_=r.origins,(0,i.assert)(this.origins_.length==this.resolutions_.length,20));var h=r.extent;void 0===h||this.origin_||this.origins_||(this.origin_=(0,o.getTopLeft)(h)),(0,i.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==r.tileSizes&&(this.tileSizes_=r.tileSizes,(0,i.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==r.tileSize?r.tileSize:this.tileSizes_?null:t.DEFAULT_TILE_SIZE,(0,i.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==r.sizes?this.fullTileRanges_=r.sizes.map(function(t,i){var r=new e.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(h){var o=this.getTileRangeForExtentAndZ(h,i);r.minX=Math.max(o.minX,r.minX),r.maxX=Math.min(o.maxX,r.maxX),r.minY=Math.max(o.minY,r.minY),r.maxY=Math.min(o.maxY,r.maxY)}return r},this):h&&this.calculateTileRanges_(h)}return m(u,[{key:"forEachTileCoord",value:function(e,t,i){for(var r=this.getTileRangeForExtentAndZ(e,t),o=r.minX,n=r.maxX;o<=n;++o)for(var s=r.minY,l=r.maxY;s<=l;++s)i([t,o,s])}},{key:"forEachTileCoordParentTileRange",value:function(t,i,r,o){var n,s,l,a=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],l=t[2]):a=this.getTileCoordExtent(t,o);u>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),n=(0,e.createOrUpdate)(s,s,l,l,r)):n=this.getTileRangeForExtentAndZ(a,u,r),i(u,n))return!0;--u}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(e){return this.origin_?this.origin_:this.origins_[e]}},{key:"getResolution",value:function(e){return this.resolutions_[e]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(t,i,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],n=2*t[2];return(0,e.createOrUpdate)(o,o+1,n,n+1,i)}var s=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null}},{key:"getTileRangeForTileCoordAndZ",value:function(t,i,r){if(i>this.maxZoom||i<this.minZoom)return null;var o=t[0],n=t[1],s=t[2];if(i===o)return(0,e.createOrUpdate)(n,s,n,s,r);if(this.zoomFactor_){var l=Math.pow(this.zoomFactor_,i-o),a=Math.floor(n*l),u=Math.floor(s*l);if(i<o)return(0,e.createOrUpdate)(a,a,u,u,r);var h=Math.floor(l*(n+1))-1,g=Math.floor(l*(s+1))-1;return(0,e.createOrUpdate)(a,h,u,g,r)}var f=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,i,r)}},{key:"getTileRangeForExtentAndZ",value:function(t,i,r){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,v);var o=v[1],n=v[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,v);var s=v[1],l=v[2];return(0,e.createOrUpdate)(o,s,n,l,r)}},{key:"getTileCoordCenter",value:function(e){var t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=(0,a.toSize)(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}},{key:"getTileCoordExtent",value:function(e,t){var i=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=(0,a.toSize)(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*n[0]*r,l=i[1]-(e[2]+1)*n[1]*r,u=s+n[0]*r,h=l+n[1]*r;return(0,o.createOrUpdate)(s,l,u,h,t)}},{key:"getTileCoordForCoordAndResolution",value:function(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}},{key:"getTileCoordForXYAndResolution_",value:function(e,t,i,o,s){var l=this.getZForResolution(i),u=i/this.getResolution(l),h=this.getOrigin(l),g=(0,a.toSize)(this.getTileSize(l),this.tmpSize_),f=u*(e-h[0])/i/g[0],c=u*(h[1]-t)/i/g[1];return o?(f=(0,r.ceil)(f,p)-1,c=(0,r.ceil)(c,p)-1):(f=(0,r.floor)(f,p),c=(0,r.floor)(c,p)),(0,n.createOrUpdate)(l,f,c,s)}},{key:"getTileCoordForXYAndZ_",value:function(e,t,i,o,s){var l=this.getOrigin(i),u=this.getResolution(i),h=(0,a.toSize)(this.getTileSize(i),this.tmpSize_),g=(e-l[0])/u/h[0],f=(l[1]-t)/u/h[1];return o?(g=(0,r.ceil)(g,p)-1,f=(0,r.ceil)(f,p)-1):(g=(0,r.floor)(g,p),f=(0,r.floor)(f,p)),(0,n.createOrUpdate)(i,g,f,s)}},{key:"getTileCoordForCoordAndZ",value:function(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}},{key:"getTileCoordResolution",value:function(e){return this.resolutions_[e[0]]}},{key:"getTileSize",value:function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}},{key:"getFullTileRange",value:function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}},{key:"getZForResolution",value:function(e,t){var i=(0,l.linearFindNearest)(this.resolutions_,e,t||0);return(0,r.clamp)(i,this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(e,t){return(0,s.intersectsLinearRing)(t,0,t.length,2,this.getTileCoordExtent(e))}},{key:"calculateTileRanges_",value:function(e){for(var t=this.resolutions_.length,i=new Array(t),r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}]),u}(),T=y;exports.default=T;
},{"../TileRange.js":"snev","./common.js":"mOEX","../asserts.js":"fLG6","../math.js":"B96G","../extent.js":"QDir","../tilecoord.js":"faTr","../geom/flat/intersectsextent.js":"GZir","../array.js":"luEr","../size.js":"TAHd"}],"ExRx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createForExtent=s,exports.createForProjection=c,exports.createXYZ=l,exports.extentFromProjection=f,exports.getForProjection=u,exports.wrapX=a;var e=n(require("./tilegrid/TileGrid.js")),t=require("./tilegrid/common.js"),r=require("./proj.js"),o=require("./extent.js"),i=require("./size.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.getDefaultTileGrid();return t||(t=c(e),e.setDefaultTileGrid(t)),t}function a(e,t,r){var i=t[0],n=e.getTileCoordCenter(t),u=f(r);if(!(0,o.containsCoordinate)(u,n)){var a=(0,o.getWidth)(u),s=Math.ceil((u[0]-n[0])/a);return n[0]+=a*s,e.getTileCoordForCoordAndZ(n,i)}return t}function s(t,r,i,n){n=void 0!==n?n:"top-left";var u=d(t,r,i);return new e.default({extent:t,origin:(0,o.getCorner)(t,n),resolutions:u,tileSize:i})}function l(t){var o=t||{},i=o.extent||(0,r.get)("EPSG:3857").getExtent(),n={extent:i,minZoom:o.minZoom,tileSize:o.tileSize,resolutions:d(i,o.maxZoom,o.tileSize,o.maxResolution)};return new e.default(n)}function d(e,r,n,u){r=void 0!==r?r:t.DEFAULT_MAX_ZOOM,n=(0,i.toSize)(void 0!==n?n:t.DEFAULT_TILE_SIZE);var a=(0,o.getHeight)(e),s=(0,o.getWidth)(e);u=u>0?u:Math.max(s/n[0],a/n[1]);for(var l=r+1,d=new Array(l),c=0;c<l;++c)d[c]=u/Math.pow(2,c);return d}function c(e,t,r,o){return s(f(e),t,r,o)}function f(e){var t=(e=(0,r.get)(e)).getExtent();if(!t){var i=180*r.METERS_PER_UNIT.degrees/e.getMetersPerUnit();t=(0,o.createOrUpdate)(-i,-i,i,i)}return t}
},{"./tilegrid/TileGrid.js":"dpZ6","./tilegrid/common.js":"mOEX","./proj.js":"Diht","./extent.js":"QDir","./size.js":"TAHd"}],"JECm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var e=s(require("../events/Event.js")),t=s(require("./Source.js")),r=s(require("../TileCache.js")),i=s(require("../TileState.js")),n=require("../util.js"),o=require("../asserts.js"),u=require("../proj.js"),l=require("../tilecoord.js"),a=require("../tilegrid.js"),c=require("../size.js");function s(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function h(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=d(e,"string");return"symbol"===f(t)?t:String(t)}function d(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=g(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=S();return function(){var r,i=O(e);if(t){var n=O(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){j(f,t.default);var s=k(f);function f(e){var t;p(this,f),(t=s.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})).on,t.once,t.un,t.opaque_=void 0!==e.opaque&&e.opaque,t.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,t.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;return t.tileGrid&&(0,c.toSize)(t.tileGrid.getTileSize(t.tileGrid.getMinZoom()),[256,256]),t.tileCache=new r.default(e.cacheSize||0),t.tmpSize=[0,0],t.key_=e.key||"",t.tileOptions={transition:e.transition,interpolate:e.interpolate},t.zDirection=e.zDirection?e.zDirection:0,t}return h(f,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);r&&r.expireCache(t)}},{key:"forEachLoadedTile",value:function(e,t,r,n){var o=this.getTileCacheForProjection(e);if(!o)return!1;for(var u,a,c,s=!0,f=r.minX;f<=r.maxX;++f)for(var p=r.minY;p<=r.maxY;++p)a=(0,l.getKeyZXY)(t,f,p),c=!1,o.containsKey(a)&&(c=(u=o.get(a)).getState()===i.default.LOADED)&&(c=!1!==n(u)),c||(s=!1);return s}},{key:"getGutterForProjection",value:function(e){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(e){this.key_!==e&&(this.key_=e,this.changed())}},{key:"getOpaque",value:function(e){return this.opaque_}},{key:"getResolutions",value:function(e){var t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}},{key:"getTile",value:function(e,t,r,i,o){return(0,n.abstract)()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(e){return this.tileGrid?this.tileGrid:(0,a.getForProjection)(e)}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return(0,o.assert)(null===t||(0,u.equivalent)(t,e),68),this.tileCache}},{key:"getTilePixelRatio",value:function(e){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(e,t,r){var i=this.getTileGridForProjection(r),n=this.getTilePixelRatio(t),o=(0,c.toSize)(i.getTileSize(e),this.tmpSize);return 1==n?o:(0,c.scale)(o,n,this.tmpSize)}},{key:"getTileCoordForTileUrlFunction",value:function(e,t){t=void 0!==t?t:this.getProjection();var r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=(0,a.wrapX)(r,e,t)),(0,l.withinExtentAndZ)(e,r)?e:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),b(O(f.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(e,t){var r=this.getTileCacheForProjection(t);e>r.highWaterMark&&(r.highWaterMark=e)}},{key:"useTile",value:function(e,t,r,i){}}]),f}(),x=function(t){j(i,e.default);var r=k(i);function i(e,t){var n;return p(this,i),(n=r.call(this,e)).tile=t,n}return h(i)}();exports.TileSourceEvent=x;var _=w;exports.default=_;
},{"../events/Event.js":"fKNg","./Source.js":"H38a","../TileCache.js":"YFDe","../TileState.js":"u3kG","../util.js":"KniQ","../asserts.js":"fLG6","../proj.js":"Diht","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../size.js":"TAHd"}],"p1vZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.expandUrl=i,exports.nullTileUrlFunction=u;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(i,c,l){if(i)return e.replace(n,i[0].toString()).replace(o,i[1].toString()).replace(a,i[2].toString()).replace(u,function(){var e=i[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()-i[2]-1).toString()})}}function o(r,e){for(var t=r.length,o=new Array(t),u=0;u<t;++u)o[u]=n(r[u],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var u=(0,t.hash)(n),i=(0,e.modulo)(u,r.length);return r[i](n,o,a)}}}function u(r,e,t){}function i(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n,o=t[1].charCodeAt(0),a=t[2].charCodeAt(0);for(n=o;n<=a;++n)e.push(r.replace(t[0],String.fromCharCode(n)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r)){for(var u=parseInt(t[2],10),i=parseInt(t[1],10);i<=u;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}
},{"./asserts.js":"fLG6","./math.js":"B96G","./tilecoord.js":"faTr"}],"uv9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./TileEventType.js")),e=l(require("./Tile.js")),r=c(require("../TileState.js")),n=require("../tileurlfunction.js"),i=require("../tilecoord.js"),o=require("../util.js");function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(u=function(t){return t?r:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=u(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var l=i?Object.getOwnPropertyDescriptor(t,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function c(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=d(t,"string");return"symbol"===a(e)?e:String(e)}function d(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=j();return function(){var r,n=T(t);if(e){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U=function(u){h(c,e.default);var l=v(c);function c(t){var e;return s(this,c),(e=l.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).generateTileUrlFunction_=e.tileUrlFunction===c.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return p(c,[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(n){var i,u=n.target,l=(0,o.getUid)(u),c=u.getState();c==r.default.LOADING?(this.tileLoadingKeys_[l]=!0,i=t.default.TILELOADSTART):l in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[l],i=c==r.default.ERROR?t.default.TILELOADERROR:c==r.default.LOADED?t.default.TILELOADEND:void 0),null!=i&&this.dispatchEvent(new e.TileSourceEvent(i,u))}},{key:"setTileLoadFunction",value:function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}},{key:"setTileUrlFunction",value:function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}},{key:"setUrl",value:function(t){var e=(0,n.expandUrl)(t);this.urls=e,this.setUrls(e)}},{key:"setUrls",value:function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,n.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)}},{key:"tileUrlFunction",value:function(t,e,r){}},{key:"useTile",value:function(t,e,r){var n=(0,i.getKeyZXY)(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}]),c}(),w=U;exports.default=w;
},{"./TileEventType.js":"KXhD","./Tile.js":"JECm","../TileState.js":"u3kG","../tileurlfunction.js":"p1vZ","../tilecoord.js":"faTr","../util.js":"KniQ"}],"udAI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../events/EventType.js")),t=s(require("../ImageTile.js")),r=s(require("../reproj/Tile.js")),i=s(require("../TileCache.js")),o=s(require("../TileState.js")),n=s(require("./UrlTile.js")),l=require("../proj.js"),c=require("../tilecoord.js"),a=require("../tilegrid.js"),u=require("../util.js");function s(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,y(i.key),i)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=v(e,"string");return"symbol"===h(t)?t:String(t)}function v(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=j(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=m();return function(){var r,i=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return F(this,r)}}function F(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(s){P(p,n.default);var h=C(p);function p(e){var r;return f(this,p),(r=h.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:E,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:t.default,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return d(p,[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);for(var i in this.tileCache.expireCache(this.tileCache==r?t:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[i];o.expireCache(o==r?t:{})}}},{key:"getGutterForProjection",value:function(e){return this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var e=g(O(p.prototype),"getKey",this).call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e}},{key:"getOpaque",value:function(e){return!(this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e))&&g(O(p.prototype),"getOpaque",this).call(this,e)}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();if(this.tileGrid&&(!t||(0,l.equivalent)(t,e)))return this.tileGrid;var r=(0,u.getUid)(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=(0,a.getForProjection)(e)),this.tileGridForProjection[r]}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();if(!t||(0,l.equivalent)(t,e))return this.tileCache;var r=(0,u.getUid)(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new i.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}},{key:"createTile_",value:function(t,r,i,n,l,c){var a=[t,r,i],u=this.getTileCoordForTileUrlFunction(a,l),s=u?this.tileUrlFunction(u,n,l):void 0,h=new this.tileClass(a,void 0!==s?o.default.IDLE:o.default.EMPTY,void 0!==s?s:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=c,h.addEventListener(e.default.CHANGE,this.handleTileChange.bind(this)),h}},{key:"getTile",value:function(e,t,i,o,n){var a=this,u=this.getProjection();if(!u||!n||(0,l.equivalent)(u,n))return this.getTileInternal(e,t,i,o,u||n);var s,h=this.getTileCacheForProjection(n),f=[e,t,i],p=(0,c.getKey)(f);h.containsKey(p)&&(s=h.get(p));var d=this.getKey();if(s&&s.key==d)return s;var y=this.getTileGridForProjection(u),v=this.getTileGridForProjection(n),g=this.getTileCoordForTileUrlFunction(f,n),j=new r.default(u,y,n,v,f,g,this.getTilePixelRatio(o),this.getGutter(),function(e,t,r,i){return a.getTileInternal(e,t,r,i,u)},this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return j.key=d,s?(j.interimTile=s,j.refreshInterimChain(),h.replace(p,j)):h.set(p,j),j}},{key:"getTileInternal",value:function(e,t,r,i,n){var l=null,a=(0,c.getKeyZXY)(e,t,r),u=this.getKey();if(this.tileCache.containsKey(a)){if((l=this.tileCache.get(a)).key!=u){var s=l;l=this.createTile_(e,t,r,i,n,u),s.getState()==o.default.IDLE?l.interimTile=s.interimTile:l.interimTile=s,l.refreshInterimChain(),this.tileCache.replace(a,l)}}else l=this.createTile_(e,t,r,i,n,u),this.tileCache.set(a,l);return l}},{key:"setRenderReprojectionEdges",value:function(e){if(this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(e,t){var r=(0,l.get)(e);if(r){var i=(0,u.getUid)(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}},{key:"clear",value:function(){for(var e in g(O(p.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}]),p}();function E(e,t){e.getImage().src=t}var w=k;exports.default=w;
},{"../events/EventType.js":"C8cu","../ImageTile.js":"TOsW","../reproj/Tile.js":"WlOd","../TileCache.js":"YFDe","../TileState.js":"u3kG","./UrlTile.js":"uv9E","../proj.js":"Diht","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../util.js":"KniQ"}],"TDA1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_VERSION=void 0;var e="1.3.0";exports.DEFAULT_VERSION=e;
},{}],"n7G7":[function(require,module,exports) {
"use strict";function e(e,n){var o=[];Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&o.push(e+"="+encodeURIComponent(n[e]))});var r=o.join("&");return e=e.replace(/[?&]$/,""),(e+=e.includes("?")?"&":"?")+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendParams=e;
},{}],"IcO7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("./TileImage.js")),t=require("./wms.js"),r=require("../uri.js"),i=require("../asserts.js"),o=require("../extent.js"),n=require("../size.js"),s=require("../reproj.js"),a=require("../string.js"),u=require("../proj.js"),l=require("../math.js"),c=require("../tilecoord.js");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,d(i.key),i)}}function g(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=y(e,"string");return"symbol"===p(t)?t:String(t)}function y(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=R();return function(){var r,i=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(f){_(v,e.default);var p=S(v);function v(e){var t;h(this,v),e=e||{};var r=Object.assign({},e.params),i=!("TRANSPARENT"in r)||r.TRANSPARENT;return(t=p.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!i,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).gutter_=void 0!==e.gutter?e.gutter:0,t.params_=r,t.v13_=!0,t.serverType_=e.serverType,t.hidpi_=void 0===e.hidpi||e.hidpi,t.tmpExtent_=(0,o.createEmpty)(),t.updateV13_(),t.setKey(t.getKeyForParams_()),t}return g(v,[{key:"getFeatureInfoUrl",value:function(e,r,i,a){var l=(0,u.get)(i),c=this.getProjection(),f=this.getTileGrid();f||(f=this.getTileGridForProjection(l));var p=f.getZForResolution(r,this.zDirection),h=f.getTileCoordForCoordAndZ(e,p);if(!(f.getResolutions().length<=h[0])){var v=f.getResolution(h[0]),g=f.getTileCoordExtent(h,this.tmpExtent_),d=(0,n.toSize)(f.getTileSize(h[0]),this.tmpSize),y=this.gutter_;0!==y&&(d=(0,n.buffer)(d,y,this.tmpSize),g=(0,o.buffer)(g,v*y,g)),c&&c!==l&&(v=(0,s.calculateSourceResolution)(c,l,e,v),g=(0,u.transformExtent)(g,l,c),e=(0,u.transform)(e,l,c));var _={SERVICE:"WMS",VERSION:t.DEFAULT_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(_,this.params_,a);var m=Math.floor((e[0]-g[0])/v),S=Math.floor((g[3]-e[1])/v);return _[this.v13_?"I":"X"]=m,_[this.v13_?"J":"Y"]=S,this.getRequestUrl_(h,d,g,1,c||l,_)}}},{key:"getLegendUrl",value:function(e,i){if(void 0!==this.urls[0]){var o={SERVICE:"WMS",VERSION:t.DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===i||void 0===i.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;o.LAYER=n}if(void 0!==e){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=e*s/28e-5}return Object.assign(o,i),(0,r.appendParams)(this.urls[0],o)}}},{key:"getGutter",value:function(){return this.gutter_}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,t,o,n,s,a){var u=this.urls;if(u){if(a.WIDTH=t[0],a.HEIGHT=t[1],a[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":var f=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+f:a.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":a.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":a.DPI=90*n;break;default:(0,i.assert)(!1,52)}var p,h,v=s.getAxisOrientation(),g=o;if(this.v13_&&"ne"==v.substr(0,2))p=o[0],g[0]=o[1],g[1]=p,p=o[2],g[2]=o[3],g[3]=p;if(a.BBOX=g.join(","),1==u.length)h=u[0];else h=u[(0,l.modulo)((0,c.hash)(e),u.length)];return(0,r.appendParams)(h,a)}}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_&&void 0!==this.serverType_?e:1}},{key:"getKeyForParams_",value:function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}},{key:"updateV13_",value:function(){var e=this.params_.VERSION||t.DEFAULT_VERSION;this.v13_=(0,a.compareVersions)(e,"1.3")>=0}},{key:"tileUrlFunction",value:function(e,r,i){var s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),!(s.getResolutions().length<=e[0])){1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var a=s.getResolution(e[0]),u=s.getTileCoordExtent(e,this.tmpExtent_),l=(0,n.toSize)(s.getTileSize(e[0]),this.tmpSize),c=this.gutter_;0!==c&&(l=(0,n.buffer)(l,c,this.tmpSize),u=(0,o.buffer)(u,a*c,u)),1!=r&&(l=(0,n.scale)(l,r,this.tmpSize));var f={SERVICE:"WMS",VERSION:t.DEFAULT_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(f,this.params_),this.getRequestUrl_(e,l,u,r,i,f)}}}]),v}(),j=O;exports.default=j;
},{"./TileImage.js":"udAI","./wms.js":"TDA1","../uri.js":"n7G7","../asserts.js":"fLG6","../extent.js":"QDir","../size.js":"TAHd","../reproj.js":"U255","../string.js":"AiCK","../proj.js":"Diht","../math.js":"B96G","../tilecoord.js":"faTr"}],"M5pz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"HTO1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Layer.js")),t=r(require("./TileProperty.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===n(t)?t:String(t)}function f(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=v();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(r){s(i,e.default);var n=y(i);function i(e){var t;o(this,i),e=e||{};var r=Object.assign({},e);return delete r.preload,delete r.useInterimTilesOnError,(t=n.call(this,r)).on,t.once,t.un,t.setPreload(void 0!==e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t}return u(i,[{key:"getPreload",value:function(){return this.get(t.default.PRELOAD)}},{key:"setPreload",value:function(e){this.set(t.default.PRELOAD,e)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)}},{key:"getData",value:function(e){return l(O(i.prototype),"getData",this).call(this,e)}}]),i}(),m=h;exports.default=m;
},{"./Layer.js":"GCgv","./TileProperty.js":"M5pz"}],"hkMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./Layer.js")),t=d(require("../../ImageTile.js")),r=d(require("../../reproj/Tile.js")),i=d(require("../../TileRange.js")),n=d(require("../../TileState.js")),o=require("../../transform.js"),a=require("../../array.js"),l=require("../../extent.js"),s=require("../../proj.js"),u=require("../../util.js"),c=require("../../size.js");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function p(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=y(e,"string");return"symbol"===f(t)?t:String(t)}function y(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T(){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=m(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=S();return function(){var r,i=E(e);if(t){var n=E(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(d){x(h,e.default);var f=R(h);function h(e){var t;return g(this,h),(t=f.call(this,e)).extentChanged=!0,t.renderedExtent_=null,t.renderedPixelRatio,t.renderedProjection=null,t.renderedRevision,t.renderedTiles=[],t.newTiles_=!1,t.tmpExtent=(0,l.createEmpty)(),t.tmpTileRange_=new i.default(0,0,0,0),t}return p(h,[{key:"isDrawableTile",value:function(e){var t=this.getLayer(),r=e.getState(),i=t.getUseInterimTilesOnError();return r==n.default.LOADED||r==n.default.EMPTY||r==n.default.ERROR&&!i}},{key:"getTile",value:function(e,t,r,i){var o=i.pixelRatio,a=i.viewState.projection,l=this.getLayer(),s=l.getSource().getTile(e,t,r,o,a);return s.getState()==n.default.ERROR&&l.getUseInterimTilesOnError()&&l.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(s)||(s=s.getInterimTile()),s}},{key:"getData",value:function(e){var i=this.frameState;if(!i)return null;var a=this.getLayer(),s=(0,o.apply)(i.pixelToCoordinateTransform,e.slice()),u=a.getExtent();if(u&&!(0,l.containsCoordinate)(u,s))return null;for(var d=i.pixelRatio,f=i.viewState.projection,g=i.viewState,h=a.getRenderSource(),p=h.getTileGridForProjection(g.projection),v=h.getTilePixelRatio(i.pixelRatio),y=p.getZForResolution(g.resolution);y>=p.getMinZoom();--y){var T=p.getTileCoordForCoordAndZ(s,y),m=h.getTile(y,T[1],T[2],d,f);if(!(m instanceof t.default||m instanceof r.default)||m instanceof r.default&&m.getState()===n.default.EMPTY)return null;if(m.getState()===n.default.LOADED){var x=p.getOrigin(y),b=(0,c.toSize)(p.getTileSize(y)),R=p.getResolution(y),w=Math.floor(v*((s[0]-x[0])/R-T[1]*b[0])),j=Math.floor(v*((x[1]-s[1])/R-T[2]*b[1])),S=Math.round(v*h.getGutterForProjection(g.projection));return this.getImageData(m.getImage(),w+S,j+S)}}return null}},{key:"loadedTileCallback",value:function(e,t,r){return!!this.isDrawableTile(r)&&T(E(h.prototype),"loadedTileCallback",this).call(this,e,t,r)}},{key:"prepareFrame",value:function(e){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(e,t){var r=e.layerStatesArray[e.layerIndex],i=e.viewState,c=i.projection,d=i.resolution,f=i.center,g=i.rotation,h=e.pixelRatio,p=this.getLayer(),v=p.getSource(),y=v.getRevision(),T=v.getTileGridForProjection(c),m=T.getZForResolution(d,v.zDirection),x=T.getResolution(m),b=e.extent,R=e.viewState.resolution,w=v.getTilePixelRatio(h),j=Math.round((0,l.getWidth)(b)/R*h),S=Math.round((0,l.getHeight)(b)/R*h),E=r.extent&&(0,s.fromUserExtent)(r.extent,c);E&&(b=(0,l.getIntersection)(b,(0,s.fromUserExtent)(r.extent,c)));var P=x*j/2/w,C=x*S/2/w,O=[f[0]-P,f[1]-C,f[0]+P,f[1]+C],_=T.getTileRangeForExtentAndZ(b,m),I={};I[m]={};var k=this.createLoadedTileFinder(v,c,I),D=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var q=g?(0,l.getRotatedViewport)(i.center,R,g,e.size):void 0,A=_.minX;A<=_.maxX;++A)for(var F=_.minY;F<=_.maxY;++F)if(!g||T.tileCoordIntersectsViewport([m,A,F],q)){var U=this.getTile(m,A,F,e);if(this.isDrawableTile(U)){var L=(0,u.getUid)(this);if(U.getState()==n.default.LOADED){I[m][U.tileCoord.toString()]=U;var z=U.inTransition(L);z&&1!==r.opacity&&(U.endTransition(L),z=!1),this.newTiles_||!z&&this.renderedTiles.includes(U)||(this.newTiles_=!0)}if(1===U.getAlpha(L,e.time))continue}var Z=T.getTileCoordChildTileRange(U.tileCoord,M,D),Y=!1;Z&&(Y=k(m+1,Z)),Y||T.forEachTileCoordParentTileRange(U.tileCoord,k,M,D)}var G=x/d*h/w;(0,o.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/h,1/h,g,-j/2,-S/2);var K=(0,o.toString)(this.pixelTransform);this.useContainer(t,K,this.getBackground(e));var V=this.context,X=V.canvas;(0,o.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,o.compose)(this.tempTransform,j/2,S/2,G,G,0,-j/2,-S/2),X.width!=j||X.height!=S?(X.width=j,X.height=S):this.containerReused||V.clearRect(0,0,j,S),E&&this.clipUnrotated(V,e,E),v.getInterpolate()||(V.imageSmoothingEnabled=!1),this.preRender(V,e),this.renderedTiles.length=0;var B,N,Q,H=Object.keys(I).map(Number);H.sort(a.ascending),1!==r.opacity||this.containerReused&&!v.getOpaque(e.viewState.projection)?(B=[],N=[]):H=H.reverse();for(var W=H.length-1;W>=0;--W){var J=H[W],$=v.getTilePixelSize(J,h,c),ee=T.getResolution(J)/x,te=$[0]*ee*G,re=$[1]*ee*G,ie=T.getTileCoordForCoordAndZ((0,l.getTopLeft)(O),J),ne=T.getTileCoordExtent(ie),oe=(0,o.apply)(this.tempTransform,[w*(ne[0]-O[0])/x,w*(O[3]-ne[3])/x]),ae=w*v.getGutterForProjection(c),le=I[J];for(var se in le){var ue=le[se],ce=ue.tileCoord,de=ie[1]-ce[1],fe=Math.round(oe[0]-(de-1)*te),ge=ie[2]-ce[2],he=Math.round(oe[1]-(ge-1)*re),pe=Math.round(oe[0]-de*te),ve=Math.round(oe[1]-ge*re),ye=fe-pe,Te=he-ve,me=m===J,xe=me&&1!==ue.getAlpha((0,u.getUid)(this),e.time),be=!1;if(!xe)if(B){Q=[pe,ve,pe+ye,ve,pe+ye,ve+Te,pe,ve+Te];for(var Re=0,we=B.length;Re<we;++Re)if(m!==J&&J<N[Re]){var je=B[Re];(0,l.intersects)([pe,ve,pe+ye,ve+Te],[je[0],je[3],je[4],je[7]])&&(be||(V.save(),be=!0),V.beginPath(),V.moveTo(Q[0],Q[1]),V.lineTo(Q[2],Q[3]),V.lineTo(Q[4],Q[5]),V.lineTo(Q[6],Q[7]),V.moveTo(je[6],je[7]),V.lineTo(je[4],je[5]),V.lineTo(je[2],je[3]),V.lineTo(je[0],je[1]),V.clip())}B.push(Q),N.push(J)}else V.clearRect(pe,ve,ye,Te);this.drawTileImage(ue,e,pe,ve,ye,Te,ae,me),B&&!xe?(be&&V.restore(),this.renderedTiles.unshift(ue)):this.renderedTiles.push(ue),this.updateUsedTiles(e.usedTiles,v,ue)}}return this.renderedRevision=y,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!(0,l.equals)(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=h,this.renderedProjection=c,this.manageTilePyramid(e,v,T,h,c,b,m,p.getPreload()),this.scheduleExpireCache(e,v),this.postRender(V,e),r.extent&&V.restore(),V.imageSmoothingEnabled=!0,K!==X.style.transform&&(X.style.transform=K),this.container}},{key:"drawTileImage",value:function(e,t,r,i,n,o,a,l){var s=this.getTileImage(e);if(s){var c=(0,u.getUid)(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(c,t.time):1),g=f!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(s,a,a,s.width-2*a,s.height-2*a,r,i,n,o),g&&this.context.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(c)}}},{key:"getImage",value:function(){var e=this.context;return e?e.canvas:null}},{key:"getTileImage",value:function(e){return e.getImage()}},{key:"scheduleExpireCache",value:function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=(0,u.getUid)(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}}},{key:"updateUsedTiles",value:function(e,t,r){var i=(0,u.getUid)(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}},{key:"manageTilePyramid",value:function(e,t,r,i,o,a,s,c,d){var f=(0,u.getUid)(t);f in e.wantedTiles||(e.wantedTiles[f]={});var g,h,p,v,y,T,m=e.wantedTiles[f],x=e.tileQueue,b=r.getMinZoom(),R=e.viewState.rotation,w=R?(0,l.getRotatedViewport)(e.viewState.center,e.viewState.resolution,R,e.size):void 0,j=0;for(T=b;T<=s;++T)for(h=r.getTileRangeForExtentAndZ(a,T,h),p=r.getResolution(T),v=h.minX;v<=h.maxX;++v)for(y=h.minY;y<=h.maxY;++y)R&&!r.tileCoordIntersectsViewport([T,v,y],w)||(s-T<=c?(++j,(g=t.getTile(T,v,y,i,o)).getState()==n.default.IDLE&&(m[g.getKey()]=!0,x.isKeyQueued(g.getKey())||x.enqueue([g,f,r.getTileCoordCenter(g.tileCoord),p])),void 0!==d&&d(g)):t.useTile(T,v,y,o));t.updateCacheSize(j,o)}}]),h}(),C=P;exports.default=C;
},{"./Layer.js":"vPfl","../../ImageTile.js":"TOsW","../../reproj/Tile.js":"WlOd","../../TileRange.js":"snev","../../TileState.js":"u3kG","../../transform.js":"P4eA","../../array.js":"luEr","../../extent.js":"QDir","../../proj.js":"Diht","../../util.js":"KniQ","../../size.js":"TAHd"}],"BUEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseTile.js")),e=r(require("../renderer/canvas/TileLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){l(u,t.default);var n=s(u);function u(t){return o(this,u),n.call(this,t)}return i(u,[{key:"createRenderer",value:function(){return new e.default(this)}}]),u}(),m=v;exports.default=m;
},{"./BaseTile.js":"HTO1","../renderer/canvas/TileLayer.js":"hkMV"}],"SCyv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UNSIGNED_SHORT=exports.UNSIGNED_INT=exports.UNSIGNED_BYTE=exports.STREAM_DRAW=exports.STATIC_DRAW=exports.FLOAT=exports.ELEMENT_ARRAY_BUFFER=exports.DYNAMIC_DRAW=exports.ARRAY_BUFFER=void 0,exports.getContext=_,exports.getSupportedExtensions=N;var e=require("./has.js"),r=34962;exports.ARRAY_BUFFER=r;var t=34963;exports.ELEMENT_ARRAY_BUFFER=t;var o=35040;exports.STREAM_DRAW=o;var s=35044;exports.STATIC_DRAW=s;var p=35048;exports.DYNAMIC_DRAW=p;var x=5121;exports.UNSIGNED_BYTE=x;var a=5123;exports.UNSIGNED_SHORT=a;var A=5125;exports.UNSIGNED_INT=A;var n=5126;exports.FLOAT=n;var E,R=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function _(r,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!e.SAFARI_BUG_237906},t);for(var o=R.length,s=0;s<o;++s)try{var p=r.getContext(R[s],t);if(p)return p}catch(x){}return null}function N(){if(!E){var e=_(document.createElement("canvas"));e&&(E=e.getSupportedExtensions())}return E}
},{"./has.js":"f3Nv"}],"zsRd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.BufferUsage=void 0,exports.getArrayClassForType=f;var r=require("../webgl.js"),t=require("../asserts.js");function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function n(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function o(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,u(n.key),n)}}function i(r,t,e){return t&&o(r.prototype,t),e&&o(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function u(r){var t=a(r,"string");return"symbol"===e(t)?t:String(t)}function a(r,t){if("object"!==e(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}var s={STATIC_DRAW:r.STATIC_DRAW,STREAM_DRAW:r.STREAM_DRAW,DYNAMIC_DRAW:r.DYNAMIC_DRAW};exports.BufferUsage=s;var y=function(){function e(o,i){n(this,e),this.array=null,this.type=o,(0,t.assert)(o===r.ARRAY_BUFFER||o===r.ELEMENT_ARRAY_BUFFER,62),this.usage=void 0!==i?i:s.STATIC_DRAW}return i(e,[{key:"ofSize",value:function(r){return this.array=new(f(this.type))(r),this}},{key:"fromArray",value:function(r){return this.array=f(this.type).from(r),this}},{key:"fromArrayBuffer",value:function(r){return this.array=new(f(this.type))(r),this}},{key:"getType",value:function(){return this.type}},{key:"getArray",value:function(){return this.array}},{key:"getUsage",value:function(){return this.usage}},{key:"getSize",value:function(){return this.array?this.array.length:0}}]),e}();function f(t){switch(t){case r.ARRAY_BUFFER:return Float32Array;case r.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}var l=y;exports.default=l;
},{"../webgl.js":"SCyv","../asserts.js":"fLG6"}],"HqWy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};exports.default=e;
},{}],"glXL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function a(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=o(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",f="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n",T=function(){function r(e){var i=this;t(this,r),this.gl_=e.webGlContext;var a=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=a.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=a.createFramebuffer(),this.depthBuffer_=a.createRenderbuffer();var n=a.createShader(a.VERTEX_SHADER);a.shaderSource(n,e.vertexShader||u),a.compileShader(n);var o=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(o,e.fragmentShader||f),a.compileShader(o),this.renderTargetProgram_=a.createProgram(),a.attachShader(this.renderTargetProgram_,n),a.attachShader(this.renderTargetProgram_,o),a.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),a.STATIC_DRAW),this.renderTargetAttribLocation_=a.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(r){i.uniforms_.push({value:e.uniforms[r],location:a.getUniformLocation(i.renderTargetProgram_,r)})})}return a(r,[{key:"getGL",value:function(){return this.gl_}},{key:"init",value:function(e){var r=this.getGL(),t=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.bindRenderbuffer(r.RENDERBUFFER,this.getDepthBuffer()),r.viewport(0,0,t[0],t[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==t[0]||this.renderTargetTextureSize_[1]!==t[1]){this.renderTargetTextureSize_=t;var i=r.RGBA,a=r.RGBA,n=r.UNSIGNED_BYTE;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,0,i,t[0],t[1],0,a,n,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t[0],t[1]),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,this.depthBuffer_)}}},{key:"apply",value:function(r,t,i,a){var n=this.getGL(),o=r.size;if(n.bindFramebuffer(n.FRAMEBUFFER,t?t.getFrameBuffer():null),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),!t){var u=(0,e.getUid)(n.canvas);if(!r.renderTargets[u]){var f=n.getContextAttributes();f&&f.preserveDrawingBuffer&&(n.clearColor(0,0,0,0),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)),r.renderTargets[u]=!0}}n.disable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.useProgram(this.renderTargetProgram_),n.enableVertexAttribArray(this.renderTargetAttribLocation_),n.vertexAttribPointer(this.renderTargetAttribLocation_,2,n.FLOAT,!1,0,0),n.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),n.uniform1i(this.renderTargetTextureLocation_,0);var T=r.layerStatesArray[r.layerIndex].opacity;n.uniform1f(this.renderTargetOpacityLocation_,T),this.applyUniforms(r),i&&i(n,r),n.drawArrays(n.TRIANGLES,0,6),a&&a(n,r)}},{key:"getFrameBuffer",value:function(){return this.frameBuffer_}},{key:"getDepthBuffer",value:function(){return this.depthBuffer_}},{key:"applyUniforms",value:function(e){var r,t=this.getGL(),i=1;this.uniforms_.forEach(function(a){if((r="function"==typeof a.value?a.value(e):a.value)instanceof HTMLCanvasElement||r instanceof ImageData)a.texture||(a.texture=t.createTexture()),t.activeTexture(t["TEXTURE".concat(i)]),t.bindTexture(t.TEXTURE_2D,a.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(a.location,i++);else if(Array.isArray(r))switch(r.length){case 2:return void t.uniform2f(a.location,r[0],r[1]);case 3:return void t.uniform3f(a.location,r[0],r[1],r[2]);case 4:return void t.uniform4f(a.location,r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&t.uniform1f(a.location,r)})}}]),r}(),s=T;exports.default=s;
},{"../util.js":"KniQ"}],"UkOi":[function(require,module,exports) {
"use strict";function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e,r){return e[0]=r[0],e[1]=r[1],e[4]=r[2],e[5]=r[3],e[12]=r[4],e[13]=r[5],e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.fromTransform=r;
},{}],"w1WE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderType=exports.DefaultUniform=exports.AttributeType=void 0,exports.computeAttributesStride=I,exports.default=void 0;var e=u(require("../webgl/ContextEventType.js")),t=u(require("../Disposable.js")),r=u(require("./PostProcessingPass.js")),n=require("../webgl.js"),o=require("../obj.js"),a=require("../transform.js"),i=require("../vec/mat4.js"),s=require("../util.js");function u(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function _(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=E(e,"string");return"symbol"===f(t)?t:String(t)}function E(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=p();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};exports.ShaderType=b;var R={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"};exports.DefaultUniform=R;var P={UNSIGNED_BYTE:n.UNSIGNED_BYTE,UNSIGNED_SHORT:n.UNSIGNED_SHORT,UNSIGNED_INT:n.UNSIGNED_INT,FLOAT:n.FLOAT};exports.AttributeType=P;var S={};function L(e){return"shared/"+e}var U=0;function x(){var e="unique/"+U;return U+=1,e}function A(e){var t=S[e];if(!t){var r=document.createElement("canvas");r.width=1,r.height=1,r.style.position="absolute",r.style.left="0",t={users:0,context:(0,n.getContext)(r)},S[e]=t}return t.users+=1,t.context}function O(e){var t=S[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.context,n=r.getExtension("WEBGL_lose_context");n&&n.loseContext();var o=r.canvas;o.width=1,o.height=1,delete S[e]}}var D=function(u){m(c,t.default);var f=v(c);function c(t){var n;l(this,c),t=t||{},(n=f.call(this)).boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(d(n)),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(d(n)),n.canvasCacheKey_=t.canvasCacheKey?L(t.canvasCacheKey):x(),n.gl_=A(n.canvasCacheKey_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null;var o=n.gl_.canvas;return o.addEventListener(e.default.LOST,n.boundHandleWebGLContextLost_),o.addEventListener(e.default.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=(0,a.create)(),n.offsetScaleMatrix_=(0,a.create)(),n.tmpMat4_=(0,i.create)(),n.uniformLocationsByProgram_={},n.attribLocationsByProgram_={},n.uniforms_=[],t.uniforms&&n.setUniforms(t.uniforms),n.postProcessPasses_=t.postProcesses?t.postProcesses.map(function(e){return new r.default({webGlContext:n.gl_,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})}):[new r.default({webGlContext:n.gl_})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return _(c,[{key:"setUniforms",value:function(e){for(var t in this.uniforms_=[],e)this.uniforms_.push({name:t,value:e[t]})}},{key:"canvasCacheKeyMatches",value:function(e){return this.canvasCacheKey_===L(e)}},{key:"getExtension",value:function(e){if(e in this.extensionCache_)return this.extensionCache_[e];var t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}},{key:"bindBuffer",value:function(e){var t=this.gl_,r=(0,s.getUid)(e),n=this.bufferCache_[r];n||(n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=n);t.bindBuffer(e.getType(),n.webGlBuffer)}},{key:"flushBufferData",value:function(e){var t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}},{key:"deleteBuffer",value:function(e){var t=this.gl_,r=(0,s.getUid)(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]}},{key:"disposeInternal",value:function(){var t=this.gl_.canvas;t.removeEventListener(e.default.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(e.default.RESTORED,this.boundHandleWebGLContextRestored_),O(this.canvasCacheKey_),delete this.gl_}},{key:"prepareDraw",value:function(e,t,r){var n=this.gl_,o=this.getCanvas(),a=e.size,i=e.pixelRatio;o.width===a[0]*i&&o.height===a[1]*i||(o.width=a[0]*i,o.height=a[1]*i,o.style.width=a[0]+"px",o.style.height=a[1]+"px");for(var s=this.postProcessPasses_.length-1;s>=0;s--)this.postProcessPasses_[s].init(e);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,t?n.ZERO:n.ONE_MINUS_SRC_ALPHA),r?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}},{key:"bindTexture",value:function(e,t,r){var n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(r),t)}},{key:"prepareDrawToRenderTarget",value:function(e,t,r,n){var o=this.gl_,a=t.getSize();o.bindFramebuffer(o.FRAMEBUFFER,t.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,t.getDepthbuffer()),o.viewport(0,0,a[0],a[1]),o.bindTexture(o.TEXTURE_2D,t.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),n?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}},{key:"drawElements",value:function(e,t){var r=this.gl_;this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,o=t-e,a=4*e;r.drawElements(r.TRIANGLES,o,n,a)}},{key:"finalizeDraw",value:function(e,t,r){for(var n=0,o=this.postProcessPasses_.length;n<o;n++)n===o-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}},{key:"getCanvas",value:function(){return this.gl_.canvas}},{key:"getGL",value:function(){return this.gl_}},{key:"applyFrameState",value:function(e){var t=e.size,r=e.viewState.rotation,n=e.pixelRatio,o=(0,a.reset)(this.offsetScaleMatrix_);(0,a.scale)(o,2/t[0],2/t[1]);var s=(0,a.reset)(this.offsetRotateMatrix_);0!==r&&(0,a.rotate)(s,-r),this.setUniformMatrixValue(R.OFFSET_SCALE_MATRIX,(0,i.fromTransform)(this.tmpMat4_,o)),this.setUniformMatrixValue(R.OFFSET_ROTATION_MATRIX,(0,i.fromTransform)(this.tmpMat4_,s)),this.setUniformFloatValue(R.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(R.ZOOM,e.viewState.zoom),this.setUniformFloatValue(R.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(R.PIXEL_RATIO,n),this.setUniformFloatVec2(R.VIEWPORT_SIZE_PX,[t[0],t[1]])}},{key:"applyHitDetectionUniform",value:function(e){var t=this.getUniformLocation(R.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0)}},{key:"applyUniforms",value:function(e){var t,r=this,n=this.gl_,o=0;this.uniforms_.forEach(function(a){if((t="function"==typeof a.value?a.value(e):a.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(o)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(!(t instanceof HTMLImageElement)||t.complete)&&a.prevValue!==t&&(a.prevValue=t,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),n.uniform1i(r.getUniformLocation(a.name),o++);else if(Array.isArray(t)&&6===t.length)r.setUniformMatrixValue(a.name,(0,i.fromTransform)(r.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void n.uniform2f(r.getUniformLocation(a.name),t[0],t[1]);case 3:return void n.uniform3f(r.getUniformLocation(a.name),t[0],t[1],t[2]);case 4:return void n.uniform4f(r.getUniformLocation(a.name),t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&n.uniform1f(r.getUniformLocation(a.name),t)})}},{key:"useProgram",value:function(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}},{key:"compileShader",value:function(e,t){var r=this.gl_,n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}},{key:"getProgram",value:function(e,t){var r=this.gl_,n=this.compileShader(e,r.FRAGMENT_SHADER),o=this.compileShader(t,r.VERTEX_SHADER),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,o),r.linkProgram(a),!r.getShaderParameter(n,r.COMPILE_STATUS)){var i="Fragment shader compilation failed: ".concat(r.getShaderInfoLog(n));throw new Error(i)}if(r.deleteShader(n),!r.getShaderParameter(o,r.COMPILE_STATUS)){var s="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(o));throw new Error(s)}if(r.deleteShader(o),!r.getProgramParameter(a,r.LINK_STATUS)){var u="GL program linking failed: ".concat(r.getProgramInfoLog(a));throw new Error(u)}return a}},{key:"getUniformLocation",value:function(e){var t=(0,s.getUid)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[t]&&(this.uniformLocationsByProgram_[t]={}),void 0===this.uniformLocationsByProgram_[t][e]&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}},{key:"getAttributeLocation",value:function(e){var t=(0,s.getUid)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[t]&&(this.attribLocationsByProgram_[t]={}),void 0===this.attribLocationsByProgram_[t][e]&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}},{key:"makeProjectionTransform",value:function(e,t){var r=e.size,n=e.viewState.rotation,o=e.viewState.resolution,i=e.viewState.center;return(0,a.compose)(t,0,0,2/(o*r[0]),2/(o*r[1]),-n,-i[0],-i[1]),t}},{key:"setUniformFloatValue",value:function(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec2",value:function(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec4",value:function(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}},{key:"setUniformMatrixValue",value:function(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}},{key:"enableAttributeArray_",value:function(e,t,r,n,o){var a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,t,r,!1,n,o))}},{key:"enableAttributes",value:function(e){for(var t=I(e),r=0,o=0;o<e.length;o++){var a=e[o];this.enableAttributeArray_(a.name,a.size,a.type||n.FLOAT,t,r),r+=a.size*N(a.type)}}},{key:"handleWebGLContextLost",value:function(){(0,o.clear)(this.bufferCache_),this.currentProgram_=null}},{key:"handleWebGLContextRestored",value:function(){}},{key:"createTexture",value:function(e,t,r){var n=this.gl_;r=r||n.createTexture();var o=n.RGBA,a=n.RGBA,i=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,0,o,a,i,t):n.texImage2D(n.TEXTURE_2D,0,o,e[0],e[1],0,a,i,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r}}]),c}();function I(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*N(n.type)}return t}function N(e){switch(e){case P.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case P.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case P.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case P.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var C=D;exports.default=C;
},{"../webgl/ContextEventType.js":"HqWy","../Disposable.js":"DDda","./PostProcessingPass.js":"glXL","../webgl.js":"SCyv","../obj.js":"mH6q","../transform.js":"P4eA","../vec/mat4.js":"UkOi","../util.js":"KniQ"}],"nUxs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../../layer/Property.js")),t=s(require("../Layer.js")),r=s(require("../../render/Event.js")),n=s(require("../../render/EventType.js")),o=s(require("../../webgl/Helper.js")),i=require("../../transform.js");function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=p(e,"string");return"symbol"===a(t)?t:String(t)}function p(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=O();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(s){v(l,t.default);var a=m(l);function l(t,r){var n;return u(this,l),r=r||{},(n=a.call(this,t)).inversePixelTransform_=(0,i.create)(),n.pixelContext_=null,n.postProcesses_=r.postProcesses,n.uniforms_=r.uniforms,n.helper,t.addChangeListener(e.default.MAP,n.removeHelper.bind(P(n))),n.dispatchPreComposeEvent=n.dispatchPreComposeEvent.bind(P(n)),n.dispatchPostComposeEvent=n.dispatchPostComposeEvent.bind(P(n)),n}return f(l,[{key:"dispatchPreComposeEvent",value:function(e,t){var o=this.getLayer();if(o.hasListener(n.default.PRECOMPOSE)){var i=new r.default(n.default.PRECOMPOSE,void 0,t,e);o.dispatchEvent(i)}}},{key:"dispatchPostComposeEvent",value:function(e,t){var o=this.getLayer();if(o.hasListener(n.default.POSTCOMPOSE)){var i=new r.default(n.default.POSTCOMPOSE,void 0,t,e);o.dispatchEvent(i)}}},{key:"reset",value:function(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}},{key:"removeHelper",value:function(){this.helper&&(this.helper.dispose(),delete this.helper)}},{key:"prepareFrame",value:function(e){if(this.getLayer().getRenderSource()){for(var t,r=!0,n=-1,i=0,s=e.layerStatesArray.length;i<s;i++){var a=e.layerStatesArray[i].layer,u=a.getRenderer();if(u instanceof l){var f=a.getClassName();if((r||f!==t)&&(n+=1,r=!1),t=f,u===this)break}else r=!0}var c="map/"+e.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(c)||(this.removeHelper(),this.helper=new o.default({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:c}),t&&(this.helper.getCanvas().className=t),this.afterHelperCreated())}return this.prepareFrameInternal(e)}},{key:"afterHelperCreated",value:function(){}},{key:"prepareFrameInternal",value:function(e){return!0}},{key:"disposeInternal",value:function(){this.removeHelper(),h(E(l.prototype),"disposeInternal",this).call(this)}},{key:"dispatchRenderEvent_",value:function(e,t,n){var o=this.getLayer();if(o.hasListener(e)){(0,i.compose)(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);var s=new r.default(e,this.inversePixelTransform_,n,t);o.dispatchEvent(s)}}},{key:"preRender",value:function(e,t){this.dispatchRenderEvent_(n.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(n.default.POSTRENDER,e,t)}}]),l}(),R=g;exports.default=R;
},{"../../layer/Property.js":"HbeD","../Layer.js":"fpOz","../../render/Event.js":"EB6P","../../render/EventType.js":"z39m","../../webgl/Helper.js":"w1WE","../../transform.js":"P4eA"}],"KkPv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../array.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var r=n(e,"string");return"symbol"===t(r)?r:String(r)}function n(e,r){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,r||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var f=new Uint8Array(4),s=function(){function t(e,i){r(this,t),this.helper_=e;var a=e.getGL();this.texture_=a.createTexture(),this.framebuffer_=a.createFramebuffer(),this.depthbuffer_=a.createRenderbuffer(),this.size_=i||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return a(t,[{key:"setSize",value:function(t){(0,e.equals)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}},{key:"getSize",value:function(){return this.size_}},{key:"clearCachedData",value:function(){this.dataCacheDirty_=!0}},{key:"readAll",value:function(){if(this.dataCacheDirty_){var e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}},{key:"readPixel",value:function(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return f[0]=0,f[1]=0,f[2]=0,f[3]=0,f;this.readAll();var r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return f[0]=this.data_[4*r],f[1]=this.data_[4*r+1],f[2]=this.data_[4*r+2],f[3]=this.data_[4*r+3],f}},{key:"getTexture",value:function(){return this.texture_}},{key:"getFramebuffer",value:function(){return this.framebuffer_}},{key:"getDepthbuffer",value:function(){return this.depthbuffer_}},{key:"updateSize_",value:function(){var e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}]),t}(),o=s;exports.default=o;
},{"../array.js":"luEr"}],"D9I6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLWorkerMessageType=void 0;var E={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};exports.WebGLWorkerMessageType=E;
},{}],"d3f1":[function(require,module,exports) {
"use strict";function e(e,t,x){x=x||2;var i,u,v,o,p,a,y,h=t&&t.length,l=h?t[0]*x:e.length,s=n(e,0,l,x,!0),c=[];if(!s||s.next===s.prev)return c;if(h&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=o=e[1];for(var Z=x;Z<l;Z+=x)(p=e[Z])<i&&(i=p),(a=e[Z+1])<u&&(u=a),p>v&&(v=p),a>o&&(o=a);y=0!==(y=Math.max(v-i,o-u))?32767/y:0}return r(s,c,x,i,u,y,0),c}function n(e,n,t,r,x){var i,u;if(x===D(e,n,t,r)>0)for(i=n;i<t;i+=r)u=A(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=A(i,e[i],e[i+1],u);return u&&w(u,u.next)&&(B(u),u=u.next),u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!w(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(B(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,o,p,a,y){if(e){!y&&a&&h(e,o,p,a);for(var l,s,c=e;e.prev!==e.next;)if(l=e.prev,s=e.next,a?i(e,o,p,a):x(e))n.push(l.i/f|0),n.push(e.i/f|0),n.push(s.i/f|0),B(e),e=s.next,c=s.next;else if((e=s)===c){y?1===y?r(e=u(t(e),n,f),n,f,o,p,a,2):2===y&&v(e,n,f,o,p,a):r(t(e),n,f,o,p,a,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(g(n,t,r)>=0)return!1;for(var x=n.x,i=t.x,u=r.x,v=n.y,f=t.y,o=r.y,p=x<i?x<u?x:u:i<u?i:u,a=v<f?v<o?v:o:f<o?f:o,y=x>i?x>u?x:u:i>u?i:u,h=v>f?v>o?v:o:f>o?f:o,l=r.next;l!==n;){if(l.x>=p&&l.x<=y&&l.y>=a&&l.y<=h&&Z(x,v,i,f,u,o,l.x,l.y)&&g(l.prev,l,l.next)>=0)return!1;l=l.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(g(x,i,u)>=0)return!1;for(var v=x.x,f=i.x,o=u.x,p=x.y,a=i.y,y=u.y,h=v<f?v<o?v:o:f<o?f:o,l=p<a?p<y?p:y:a<y?a:y,c=v>f?v>o?v:o:f>o?f:o,d=p>a?p>y?p:y:a>y?a:y,w=s(h,l,n,t,r),M=s(c,d,n,t,r),z=e.prevZ,m=e.nextZ;z&&z.z>=w&&m&&m.z<=M;){if(z.x>=h&&z.x<=c&&z.y>=l&&z.y<=d&&z!==x&&z!==u&&Z(v,p,f,a,o,y,z.x,z.y)&&g(z.prev,z,z.next)>=0)return!1;if(z=z.prevZ,m.x>=h&&m.x<=c&&m.y>=l&&m.y<=d&&m!==x&&m!==u&&Z(v,p,f,a,o,y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;z&&z.z>=w;){if(z.x>=h&&z.x<=c&&z.y>=l&&z.y<=d&&z!==x&&z!==u&&Z(v,p,f,a,o,y,z.x,z.y)&&g(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;m&&m.z<=M;){if(m.x>=h&&m.x<=c&&m.y>=l&&m.y<=d&&m!==x&&m!==u&&Z(v,p,f,a,o,y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function u(e,n,r){var x=e;do{var i=x.prev,u=x.next.next;!w(i,u)&&M(i,x,x.next,u)&&k(i,u)&&k(u,i)&&(n.push(i.i/r|0),n.push(x.i/r|0),n.push(u.i/r|0),B(x),B(x.next),x=e=u),x=x.next}while(x!==e);return t(x)}function v(e,n,x,i,u,v){var f=e;do{for(var o=f.next.next;o!==f.prev;){if(f.i!==o.i&&d(f,o)){var p=q(f,o);return f=t(f,f.next),p=t(p,p.next),r(f,n,x,i,u,v,0),void r(p,n,x,i,u,v,0)}o=o.next}f=f.next}while(f!==e)}function f(e,t,r,x){var i,u,v,f=[];for(i=0,u=t.length;i<u;i++)(v=n(e,t[i]*x,i<u-1?t[i+1]*x:e.length,x,!1))===v.next&&(v.steiner=!0),f.push(c(v));for(f.sort(o),i=0;i<f.length;i++)r=p(f[i],r);return r}function o(e,n){return e.x-n.x}function p(e,n){var r=a(e,n);if(!r)return n;var x=q(r,e);return t(x,x.next),t(r,r.next)}function a(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u&&(u=v,t=r.x<r.next.x?r:r.next,v===x))return t}r=r.next}while(r!==n);if(!t)return null;var f,o=t,p=t.x,a=t.y,h=1/0;r=t;do{x>=r.x&&r.x>=p&&x!==r.x&&Z(i<a?x:u,i,p,a,i<a?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),k(r,e)&&(f<h||f===h&&(r.x>t.x||r.x===t.x&&y(t,r)))&&(t=r,h=f)),r=r.next}while(r!==o);return t}function y(e,n){return g(e.prev,e,n.prev)<0&&g(n.next,e,e.next)<0}function h(e,n,t,r){var x=e;do{0===x.z&&(x.z=s(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,l(x)}function l(e){var n,t,r,x,i,u,v,f,o=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<o&&(v++,r=r.nextZ);n++);for(f=o;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,o*=2}while(u>1);return e}function s(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-t)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*x|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function c(e){var n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function Z(e,n,t,r,x,i,u,v){return(x-u)*(n-v)>=(e-u)*(i-v)&&(e-u)*(r-v)>=(t-u)*(n-v)&&(t-u)*(i-v)>=(x-u)*(r-v)}function d(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!b(e,n)&&(k(e,n)&&k(n,e)&&j(e,n)&&(g(e.prev,e,n.prev)||g(e,n.prev,n))||w(e,n)&&g(e.prev,e,e.next)>0&&g(n.prev,n,n.next)>0)}function g(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function w(e,n){return e.x===n.x&&e.y===n.y}function M(e,n,t,r){var x=m(g(e,n,t)),i=m(g(e,n,r)),u=m(g(t,r,e)),v=m(g(t,r,n));return x!==i&&u!==v||(!(0!==x||!z(e,t,n))||(!(0!==i||!z(e,r,n))||(!(0!==u||!z(t,e,r))||!(0!==v||!z(t,n,r)))))}function z(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function m(e){return e>0?1:e<0?-1:0}function b(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&M(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function k(e,n){return g(e.prev,e,e.next)<0?g(e,n,e.next)>=0&&g(e,e.prev,n)>=0:g(e,n,e.prev)<0||g(e,e.next,n)<0}function j(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function q(e,n){var t=new C(e.i,e.x,e.y),r=new C(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function A(e,n,t,r){var x=new C(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}module.exports=e,module.exports.default=e,e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(D(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var o=n[v]*t,p=v<f-1?n[v+1]*t:e.length;u-=Math.abs(D(e,o,p,t))}var a=0;for(v=0;v<r.length;v+=3){var y=r[v]*t,h=r[v+1]*t,l=r[v+2]*t;a+=Math.abs((e[y]-e[l])*(e[h+1]-e[y+1])-(e[y]-e[h])*(e[l+1]-e[y+1]))}return 0===u&&0===a?0:Math.abs((a-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t};
},{}],"fgD8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.colorDecodeId=m,exports.colorEncodeId=g,exports.getBlankImageData=y,exports.writeLineSegmentToBuffers=d,exports.writePointFeatureToBuffers=h,exports.writePolygonTrianglesToBuffers=v;var t=n(require("earcut")),r=require("../../transform.js"),e=require("../../math.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return l(t)||i(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,r){if(t){if("string"==typeof t)return s(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,r):void 0}}function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function l(t){if(Array.isArray(t))return s(t)}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var c=[],p={vertexPosition:0,indexPosition:0};function f(t,r,e,n,o){t[r+0]=e,t[r+1]=n,t[r+2]=o}function h(t,r,e,n,o,a){var u=3+o,i=t[r+0],l=t[r+1],s=c;s.length=o;for(var h=0;h<s.length;h++)s[h]=t[r+2+h];var d=a?a.vertexPosition:0,v=a?a.indexPosition:0,y=d/u;return f(e,d,i,l,0),s.length&&e.set(s,d+3),f(e,d+=u,i,l,1),s.length&&e.set(s,d+3),f(e,d+=u,i,l,2),s.length&&e.set(s,d+3),f(e,d+=u,i,l,3),s.length&&e.set(s,d+3),d+=u,n[v++]=y,n[v++]=y+1,n[v++]=y+3,n[v++]=y+1,n[v++]=y+2,n[v++]=y+3,p.vertexPosition=d,p.indexPosition=v,p}function d(t,n,a,u,i,l,s,c,p,f){var h=5+c.length,d=l.length/h,v=[t[n+0],t[n+1]],y=[t[a],t[a+1]],g=(0,r.apply)(f,[].concat(v)),m=(0,r.apply)(f,[].concat(y));function M(t,r,e){return Math.round(1500*r)+1e4*Math.round(1500*e)+1e4*t*1e4}function x(t,r,n){var o=Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1])),a=[(r[0]-t[0])/o,(r[1]-t[1])/o],u=[-a[1],a[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),l=[(n[0]-t[0])/i,(n[1]-t[1])/i],s=0===o||0===i?0:Math.acos((0,e.clamp)(l[0]*a[0]+l[1]*a[1],-1,1));return l[0]*u[0]+l[1]*u[1]>0?s:2*Math.PI-s}var b=null!==i,P=0,A=0;if(null!==u){var I=[t[u],t[u+1]];P=x(g,m,(0,r.apply)(f,[].concat(I)))}if(b){var w=[t[i],t[i+1]];A=x(m,g,(0,r.apply)(f,[].concat(w)))}l.push(v[0],v[1],y[0],y[1],M(0,P,A)),l.push.apply(l,o(c)),l.push(v[0],v[1],y[0],y[1],M(1,P,A)),l.push.apply(l,o(c)),l.push(v[0],v[1],y[0],y[1],M(2,P,A)),l.push.apply(l,o(c)),l.push(v[0],v[1],y[0],y[1],M(3,P,A)),l.push.apply(l,o(c)),s.push(d,d+1,d+2,d+1,d+3,d+2)}function v(r,e,n,a,u){var i=2+u,l=e,s=r.slice(l,l+u);l+=u;for(var c=r[l++],p=0,f=new Array(c-1),h=0;h<c;h++)p+=r[l++],h<c-1&&(f[h]=p);for(var d=r.slice(l,l+2*p),v=(0,t.default)(d,f,2),y=0;y<v.length;y++)a.push(v[y]+n.length/i);for(var g=0;g<d.length;g+=2)n.push.apply(n,[d[g],d[g+1]].concat(o(s)));return l+2*p}function y(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t}function g(t,r){return(r=r||[])[0]=Math.floor(t/256/256/256)/255,r[1]=Math.floor(t/256/256)%256/255,r[2]=Math.floor(t/256)%256/255,r[3]=t%256/255,r}function m(t){var r=0;return r+=Math.round(256*t[0]*256*256*255),r+=Math.round(256*t[1]*256*255),r+=Math.round(256*t[2]*255),r+=Math.round(255*t[3])}
},{"earcut":"d3f1","../../transform.js":"P4eA","../../math.js":"B96G"}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"z0A1":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(){var t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS",r={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:\'`renderMode` must be `"hybrid"` or `"vector"`\',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class o extends Error{constructor(e){const t=r[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var i=o;function a(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function s(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);const o=t[0],a=t[1],s=t[2],u=t[3],f=t[4],x=t[5];return e[0]=u/n,e[1]=-a/n,e[2]=-s/n,e[3]=o/n,e[4]=(s*x-u*f)/n,e[5]=-(o*x-a*f)/n,e}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var f={exports:{}};function x(e,t,n){n=n||2;var r,o,i,a,s,u,f,x=t&&t.length,h=x?t[0]*n:e.length,v=l(e,0,h,n,!0),d=[];if(!v||v.next===v.prev)return d;if(x&&(v=function(e,t,n,r){var o,i,a,s=[];for(o=0,i=t.length;o<i;o++)(a=l(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(A(a));for(s.sort(b),o=0;o<s.length;o++)n=g(s[o],n);return n}(e,t,v,n)),e.length>80*n){r=i=e[0],o=a=e[1];for(var y=n;y<h;y+=n)(s=e[y])<r&&(r=s),(u=e[y+1])<o&&(o=u),s>i&&(i=s),u>a&&(a=u);f=0!==(f=Math.max(i-r,a-o))?32767/f:0}return c(v,d,n,r,o,f,0),d}function l(e,t,n,r,o){var i,a;if(o===P(e,t,n,r)>0)for(i=t;i<n;i+=r)a=k(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=k(i,e[i],e[i+1],a);return a&&F(a,a.next)&&(R(a),a=a.next),a}function h(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!F(r,r.next)&&0!==Z(r.prev,r,r.next))r=r.next;else{if(R(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function c(e,t,n,r,o,i,a){if(e){!a&&i&&function(e,t,n,r){var o=e;do{0===o.z&&(o.z=w(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,a,s,u,f=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<f&&(s++,r=r.nextZ);t++);for(u=f;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,f*=2}while(a>1)}(o)}(e,r,o,i);for(var s,u,f=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?d(e,r,o,i):v(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),R(e),e=u.next,f=u.next;else if((e=u)===f){a?1===a?c(e=y(h(e),t,n),t,n,r,o,i,2):2===a&&p(e,t,n,r,o,i):c(h(e),t,n,r,o,i,1);break}}}function v(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)>=0)return!1;for(var o=t.x,i=n.x,a=r.x,s=t.y,u=n.y,f=r.y,x=o<i?o<a?o:a:i<a?i:a,l=s<u?s<f?s:f:u<f?u:f,h=o>i?o>a?o:a:i>a?i:a,c=s>u?s>f?s:f:u>f?u:f,v=r.next;v!==t;){if(v.x>=x&&v.x<=h&&v.y>=l&&v.y<=c&&E(o,s,i,u,a,f,v.x,v.y)&&Z(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function d(e,t,n,r){var o=e.prev,i=e,a=e.next;if(Z(o,i,a)>=0)return!1;for(var s=o.x,u=i.x,f=a.x,x=o.y,l=i.y,h=a.y,c=s<u?s<f?s:f:u<f?u:f,v=x<l?x<h?x:h:l<h?l:h,d=s>u?s>f?s:f:u>f?u:f,y=x>l?x>h?x:h:l>h?l:h,p=w(c,v,t,n,r),b=w(d,y,t,n,r),g=e.prevZ,m=e.nextZ;g&&g.z>=p&&m&&m.z<=b;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;g&&g.z>=p;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;m&&m.z<=b;){if(m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function y(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!F(o,i)&&T(o,r,r.next,i)&&z(o,i)&&z(i,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),R(r),R(r.next),r=e=i),r=r.next}while(r!==e);return h(r)}function p(e,t,n,r,o,i){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&M(a,s)){var u=U(a,s);return a=h(a,a.next),u=h(u,u.next),c(a,t,n,r,o,i,0),void c(u,t,n,r,o,i,0)}s=s.next}a=a.next}while(a!==e)}function b(e,t){return e.x-t.x}function g(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===o))return n}r=r.next}while(r!==t);if(!n)return null;var u,f=n,x=n.x,l=n.y,h=1/0;r=n;do{o>=r.x&&r.x>=x&&o!==r.x&&E(i<l?o:a,i,x,l,i<l?a:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),z(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&m(n,r)))&&(n=r,h=u)),r=r.next}while(r!==f);return n}(e,t);if(!n)return t;var r=U(n,e);return h(r,r.next),h(n,n.next)}function m(e,t){return Z(e.prev,e,t.prev)<0&&Z(t.next,e,e.next)<0}function w(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function A(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function E(e,t,n,r,o,i,a,s){return(o-a)*(t-s)>=(e-a)*(i-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(i-s)>=(o-a)*(r-s)}function M(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&T(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||F(e,t)&&Z(e.prev,e,e.next)>0&&Z(t.prev,t,t.next)>0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function F(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,n,r){var o=S(Z(e,t,n)),i=S(Z(e,t,r)),a=S(Z(n,r,e)),s=S(Z(n,r,t));return o!==i&&a!==s||(!(0!==o||!I(e,n,t))||(!(0!==i||!I(e,r,t))||(!(0!==a||!I(n,e,r))||!(0!==s||!I(n,t,r)))))}function I(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function S(e){return e>0?1:e<0?-1:0}function z(e,t){return Z(e.prev,e,e.next)<0?Z(e,t,e.next)>=0&&Z(e,e.prev,t)>=0:Z(e,t,e.prev)<0||Z(e,e.next,t)<0}function U(e,t){var n=new B(e.i,e.x,e.y),r=new B(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function k(e,t,n,r){var o=new B(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function R(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}f.exports=x,f.exports.default=x,x.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(P(e,0,i,n));if(o)for(var s=0,u=t.length;s<u;s++){var f=t[s]*n,x=s<u-1?t[s+1]*n:e.length;a-=Math.abs(P(e,f,x,n))}var l=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,c=r[s+1]*n,v=r[s+2]*n;l+=Math.abs((e[h]-e[v])*(e[c+1]-e[h+1])-(e[h]-e[c])*(e[v+1]-e[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},x.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n};var N=u(f.exports);const _=[],O={vertexPosition:0,indexPosition:0};function q(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function L(e,t,n,r,o,i){const a=3+o,s=e[t+0],u=e[t+1],f=_;f.length=o;for(let n=0;n<f.length;n++)f[n]=e[t+2+n];let x=i?i.vertexPosition:0,l=i?i.indexPosition:0;const h=x/a;return q(n,x,s,u,0),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,1),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,2),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,3),f.length&&n.set(f,x+3),x+=a,r[l++]=h,r[l++]=h+1,r[l++]=h+3,r[l++]=h+1,r[l++]=h+2,r[l++]=h+3,O.vertexPosition=x,O.indexPosition=l,O}function C(e,t,n,r,o,i,s,u,f,x){const l=5+u.length,h=i.length/l,c=[e[t+0],e[t+1]],v=[e[n],e[n+1]],d=a(x,[...c]),y=a(x,[...v]);function p(e,t,n){const r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],a=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),s=[(n[0]-e[0])/a,(n[1]-e[1])/a],u=0===r||0===a?0:Math.acos((f=s[0]*o[0]+s[1]*o[1],x=-1,l=1,Math.min(Math.max(f,x),l)));var f,x,l;return s[0]*i[0]+s[1]*i[1]>0?u:2*Math.PI-u}const g=null!==o;let m=0,w=0;if(null!==r){m=b(d,y,a(x,[...[e[r],e[r+1]]]))}if(g){w=b(y,d,a(x,[...[e[o],e[o+1]]]))}i.push(c[0],c[1],v[0],v[1],p(0,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(1,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(2,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(3,m,w)),i.push(...u),s.push(h,h+1,h+2,h+1,h+3,h+2)}function G(e,t,n,r,o){const i=2+o;let a=t;const s=e.slice(a,a+o);a+=o;const u=e[a++];let f=0;const x=new Array(u-1);for(let t=0;t<u;t++)f+=e[a++],t<u-1&&(x[t]=f);const l=e.slice(a,a+2*f),h=N(l,x,2);for(let e=0;e<h.length;e++)r.push(h[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...s);return a+2*f}const j=self;j.onmessage=r=>{const o=r.data;switch(o.type){case t:{const e=3,t=2,n=o.customAttributesSize,r=t+n,i=new Float32Array(o.renderInstructions),a=i.length/r,s=4*a*(n+e),u=new Uint32Array(6*a),f=new Float32Array(s);let x;for(let e=0;e<i.length;e+=r)x=L(i,e,f,u,n,x);const l=Object.assign({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);j.postMessage(l,[f.buffer,u.buffer,i.buffer]);break}case n:{const e=[],t=[],n=o.customAttributesSize,r=2,i=new Float32Array(o.renderInstructions);let a=0;const u=o.renderInstructionsTransform,f=[1,0,0,1,0,0];let x,l;for(s(f,u);a<i.length;){l=Array.from(i.slice(a,a+n)),a+=n,x=i[a++];for(let n=0;n<x-1;n++)C(i,a+n*r,a+(n+1)*r,n>0?a+(n-1)*r:null,n<x-2?a+(n+2)*r:null,e,t,l,0,f);a+=x*r}const h=Uint32Array.from(t),c=Float32Array.from(e),v=Object.assign({vertexBuffer:c.buffer,indexBuffer:h.buffer,renderInstructions:i.buffer},o);j.postMessage(v,[c.buffer,h.buffer,i.buffer]);break}case e:{const e=[],t=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let i=0;for(;i<r.length;)i=G(r,i,e,t,n);const a=Uint32Array.from(t),s=Float32Array.from(e),u=Object.assign({vertexBuffer:s.buffer,indexBuffer:a.buffer,renderInstructions:r.buffer},o);j.postMessage(u,[s.buffer,a.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+e.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=t;
},{"buffer":"aMB2"}],"m8cI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=_(require("../../layer/BaseVector.js")),t=_(require("../../source/VectorEventType.js")),r=_(require("../../ViewHint.js")),n=_(require("../../webgl/Buffer.js")),i=_(require("./Layer.js")),o=_(require("../../webgl/RenderTarget.js")),a=require("../../webgl.js"),s=require("../../webgl/Helper.js"),u=require("../../render/webgl/constants.js"),f=require("../../transform.js"),l=require("../../asserts.js"),c=require("../../extent.js"),h=require("../../render/webgl/utils.js"),d=require("../../worker/webgl.js"),p=require("../../util.js"),y=require("../../events.js");function _(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return T(e)||g(e,t)||w(e,t)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(l){f=!0,i=l}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(f)throw i}}return s}}function T(e){if(Array.isArray(e))return e}function E(e){return S(e)||R(e)||w(e)||A()}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function R(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function S(e){if(Array.isArray(e))return j(e)}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}function F(e,t,r){return t&&C(e.prototype,t),r&&C(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e){var t=O(e,"string");return"symbol"===b(t)?t:String(t)}function O(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function P(){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=D(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function D(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=U();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return q(this,r)}}function q(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(_){k(m,i.default);var b=L(m);function m(e,r){var i,o,l;I(this,m);var h=r.uniforms||{},_=(0,f.create)();h[s.DefaultUniform.PROJECTION_MATRIX]=_,(l=b.call(this,e,{uniforms:h,postProcesses:r.postProcesses})).sourceRevision_=-1,l.verticesBuffer_=new n.default(a.ARRAY_BUFFER,a.DYNAMIC_DRAW),l.indicesBuffer_=new n.default(a.ELEMENT_ARRAY_BUFFER,a.DYNAMIC_DRAW),l.vertexShader_=r.vertexShader,l.fragmentShader_=r.fragmentShader,l.program_,l.hitDetectionEnabled_=null===(i=r.hitDetectionEnabled)||void 0===i||i;var v=r.attributes?r.attributes.map(function(e){return{name:"a_"+e.name,size:1,type:s.AttributeType.FLOAT}}):[];l.attributes=[{name:"a_position",size:2,type:s.AttributeType.FLOAT},{name:"a_index",size:1,type:s.AttributeType.FLOAT}],l.hitDetectionEnabled_&&(l.attributes.push({name:"a_hitColor",size:4,type:s.AttributeType.FLOAT}),l.attributes.push({name:"a_featureUid",size:1,type:s.AttributeType.FLOAT})),(o=l.attributes).push.apply(o,E(v)),l.customAttributes=r.attributes?r.attributes:[],l.previousExtent_=(0,c.createEmpty)(),l.currentTransform_=_,l.renderTransform_=(0,f.create)(),l.invertRenderTransform_=(0,f.create)(),l.renderInstructions_=new Float32Array(0),l.hitRenderTarget_,l.lastSentId=0,l.worker_=(0,d.create)(),l.worker_.addEventListener("message",function(e){var t=e.data;if(t.type===u.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS){var r=t.projectionTransform;l.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),l.helper.flushBufferData(l.verticesBuffer_),l.indicesBuffer_.fromArrayBuffer(t.indexBuffer),l.helper.flushBufferData(l.indicesBuffer_),l.renderTransform_=r,(0,f.makeInverse)(l.invertRenderTransform_,l.renderTransform_),l.renderInstructions_=new Float32Array(e.data.renderInstructions),t.id===l.lastSentId&&(l.ready=!0),l.getLayer().changed()}}),l.featureCache_={},l.featureCount_=0;var g=l.getLayer().getSource();return l.sourceListenKeys_=[(0,y.listen)(g,t.default.ADDFEATURE,l.handleSourceFeatureAdded_,M(l)),(0,y.listen)(g,t.default.CHANGEFEATURE,l.handleSourceFeatureChanged_,M(l)),(0,y.listen)(g,t.default.REMOVEFEATURE,l.handleSourceFeatureDelete_,M(l)),(0,y.listen)(g,t.default.CLEAR,l.handleSourceFeatureClear_,M(l))],g.forEachFeature(function(e){l.featureCache_[(0,p.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},l.featureCount_++}),l}return F(m,[{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new o.default(this.helper))}},{key:"handleSourceFeatureAdded_",value:function(e){var t=e.feature;this.featureCache_[(0,p.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}},{key:"handleSourceFeatureChanged_",value:function(e){var t=e.feature;this.featureCache_[(0,p.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}},{key:"handleSourceFeatureDelete_",value:function(e){var t=e.feature;delete this.featureCache_[(0,p.getUid)(t)],this.featureCount_--}},{key:"handleSourceFeatureClear_",value:function(){this.featureCache_={},this.featureCount_=0}},{key:"renderFrame",value:function(e){var t=this.helper.getGL();this.preRender(t,e);var r=v(this.getWorldParameters_(e),3),n=r[0],i=r[1],o=r[2];this.renderWorlds(e,!1,n,i,o),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var a=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,n,i,o),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),a}},{key:"getWorldParameters_",value:function(e){var t=e.viewState.projection,r=this.getLayer().getSource().getWrapX()&&t.canWrapX(),n=t.getExtent(),i=e.extent,o=r?(0,c.getWidth)(n):null,a=r?Math.ceil((i[2]-n[2])/o)+1:1;return[r?Math.floor((i[0]-n[0])/o):0,a,o]}},{key:"prepareFrameInternal",value:function(t){var n=this.getLayer(),i=n.getSource(),o=t.viewState,a=!t.viewHints[r.default.ANIMATING]&&!t.viewHints[r.default.INTERACTING],s=!(0,c.equals)(this.previousExtent_,t.extent),u=this.sourceRevision_<i.getRevision();if(u&&(this.sourceRevision_=i.getRevision()),a&&(s||u)){var f=o.projection,l=o.resolution,h=n instanceof e.default?n.getRenderBuffer():0,d=(0,c.buffer)(t.extent,h*l);i.loadFeatures(d,l,f),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}},{key:"rebuildBuffers_",value:function(e){var t=(0,f.create)();this.helper.makeProjectionTransform(e,t);var r,n,i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,o=i*this.featureCount_;this.renderInstructions_&&this.renderInstructions_.length===o||(this.renderInstructions_=new Float32Array(o));var a=[],s=[],l=-1;for(var c in this.featureCache_)if((n=(r=this.featureCache_[c]).geometry)&&"Point"===n.getType()){if(a[0]=n.getFlatCoordinates()[0],a[1]=n.getFlatCoordinates()[1],(0,f.apply)(t,a),this.renderInstructions_[++l]=a[0],this.renderInstructions_[++l]=a[1],this.hitDetectionEnabled_){var d=(0,h.colorEncodeId)(l+5,s);this.renderInstructions_[++l]=d[0],this.renderInstructions_[++l]=d[1],this.renderInstructions_[++l]=d[2],this.renderInstructions_[++l]=d[3],this.renderInstructions_[++l]=Number(c)}for(var p=0;p<this.customAttributes.length;p++){var y=this.customAttributes[p].callback(r.feature,r.properties);this.renderInstructions_[++l]=y}}var _={id:++this.lastSentId,type:u.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};_.projectionTransform=t,this.ready=!1,this.worker_.postMessage(_,[this.renderInstructions_.buffer]),this.renderInstructions_=null}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){if((0,l.assert)(this.hitDetectionEnabled_,66),this.renderInstructions_&&this.hitDetectionEnabled_){var o=(0,f.apply)(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=(0,h.colorDecodeId)(s),c=this.renderInstructions_[u],d=Math.floor(c).toString(),p=this.getLayer().getSource().getFeatureByUid(d);return p?n(p,this.getLayer(),null):void 0}}},{key:"renderWorlds",value:function(e,t,r,n,i){var o=r;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),(0,f.translate)(this.currentTransform_,o*i,0),(0,f.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);var a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<n)}},{key:"disposeInternal",value:function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){(0,y.unlistenByKey)(e)}),this.sourceListenKeys_=null,P(N(m.prototype),"disposeInternal",this).call(this)}}]),m}(),z=W;exports.default=z;
},{"../../layer/BaseVector.js":"pskK","../../source/VectorEventType.js":"s8Fc","../../ViewHint.js":"cuLW","../../webgl/Buffer.js":"zsRd","./Layer.js":"nUxs","../../webgl/RenderTarget.js":"KkPv","../../webgl.js":"SCyv","../../webgl/Helper.js":"w1WE","../../render/webgl/constants.js":"D9I6","../../transform.js":"P4eA","../../asserts.js":"fLG6","../../extent.js":"QDir","../../render/webgl/utils.js":"fgD8","../../worker/webgl.js":"z0A1","../../util.js":"KniQ","../../events.js":"UqnM"}],"I4BI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./BaseVector.js")),t=o(require("../renderer/webgl/PointsLayer.js")),n=require("../math.js"),r=require("../dom.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=c(e,"string");return"symbol"===i(t)?t:String(t)}function c(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=_();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},m=["#00f","#0ff","#0f0","#ff0","#f00"],b=function(r){s(i,e.default);var o=v(i);function i(e){var t;a(this,i),e=e||{};var n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,(t=o.call(this,n)).gradient_=null,t.addChangeListener(y.GRADIENT,t.handleGradientChanged_),t.setGradient(e.gradient?e.gradient:m),t.setBlur(void 0!==e.blur?e.blur:15),t.setRadius(void 0!==e.radius?e.radius:8);var r=e.weight?e.weight:"weight";return t.weightFunction_="string"==typeof r?function(e){return e.get(r)}:r,t.setRenderOrder(null),t}return l(i,[{key:"getBlur",value:function(){return this.get(y.BLUR)}},{key:"getGradient",value:function(){return this.get(y.GRADIENT)}},{key:"getRadius",value:function(){return this.get(y.RADIUS)}},{key:"handleGradientChanged_",value:function(){this.gradient_=x(this.getGradient())}},{key:"setBlur",value:function(e){this.set(y.BLUR,e)}},{key:"setGradient",value:function(e){this.set(y.GRADIENT,e)}},{key:"setRadius",value:function(e){this.set(y.RADIUS,e)}},{key:"createRenderer",value:function(){var e=this;return new t.default(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var r=e.weightFunction_(t);return void 0!==r?(0,n.clamp)(r,0,1):1}}],hitDetectionEnabled:!0,vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n        uniform mediump int u_hitDetection;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n          if (u_hitDetection > 0) {\n            if (alpha < 0.05) {\n              discard;\n            }\n            gl_FragColor = v_hitColor;\n          }\n      }",uniforms:{u_size:function(){return 2*(e.get(y.RADIUS)+e.get(y.BLUR))},u_blurSlope:function(){return e.get(y.RADIUS)/Math.max(1,e.get(y.BLUR))}},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return e.gradient_},u_opacity:function(){return e.getOpacity()}}}]})}},{key:"renderDeclutter",value:function(){}}]),i}();function x(e){for(var t=(0,r.createCanvasContext2D)(1,256),n=t.createLinearGradient(0,0,1,256),o=1/(e.length-1),i=0,a=e.length;i<a;++i)n.addColorStop(i*o,e[i]);return t.fillStyle=n,t.fillRect(0,0,1,256),t.canvas}var C=b;exports.default=C;
},{"./BaseVector.js":"pskK","../renderer/webgl/PointsLayer.js":"m8cI","../math.js":"B96G","../dom.js":"Xno5"}],"ZHEI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Layer.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)}function i(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){f(n,t.default);var r=a(n);function n(t){return c(this,n),t=t||{},r.call(this,t)}return o(n)}(),v=d;exports.default=v;
},{"./Layer.js":"GCgv"}],"rzNj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./Layer.js")),t=a(require("../../ImageState.js")),r=a(require("../../ViewHint.js")),n=require("../../transform.js"),i=require("../../extent.js"),o=require("../../proj.js");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=h(e,"string");return"symbol"===u(t)?t:String(t)}function h(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=v();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(a){p(s,e.default);var u=y(s);function s(e){var t;return l(this,s),(t=u.call(this,e)).image_=null,t}return f(s,[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(e){var n=e.layerStatesArray[e.layerIndex],a=e.pixelRatio,u=e.viewState,l=u.resolution,s=this.getLayer().getSource(),f=e.viewHints,c=e.extent;if(void 0!==n.extent&&(c=(0,i.getIntersection)(c,(0,o.fromUserExtent)(n.extent,u.projection))),!f[r.default.ANIMATING]&&!f[r.default.INTERACTING]&&!(0,i.isEmpty)(c))if(s){var h=u.projection,p=s.getImage(c,l,a,h);p&&(this.loadImage(p)?this.image_=p:p.getState()===t.default.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}},{key:"getData",value:function(e){var t=this.frameState;if(!t)return null;var r=this.getLayer(),o=(0,n.apply)(t.pixelToCoordinateTransform,e.slice()),a=r.getExtent();if(a&&!(0,i.containsCoordinate)(a,o))return null;var u=this.image_.getExtent(),l=this.getImage(),s=(0,i.getWidth)(u),f=Math.floor(l.width*((o[0]-u[0])/s));if(f<0||f>=l.width)return null;var c=(0,i.getHeight)(u),h=Math.floor(l.height*((u[3]-o[1])/c));return h<0||h>=l.height?null:this.getImageData(l,f,h)}},{key:"renderFrame",value:function(e,t){var r=this.image_,a=r.getExtent(),u=r.getResolution(),l=r.getPixelRatio(),s=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,c=e.viewState,h=c.center,p=f*u/(c.resolution*l),g=e.extent,y=c.resolution,m=c.rotation,d=Math.round((0,i.getWidth)(g)/y*f),v=Math.round((0,i.getHeight)(g)/y*f);(0,n.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/f,1/f,m,-d/2,-v/2),(0,n.makeInverse)(this.inversePixelTransform,this.pixelTransform);var b=(0,n.toString)(this.pixelTransform);this.useContainer(t,b,this.getBackground(e));var x=this.context,w=x.canvas;w.width!=d||w.height!=v?(w.width=d,w.height=v):this.containerReused||x.clearRect(0,0,d,v);var j=!1,S=!0;if(s.extent){var _=(0,o.fromUserExtent)(s.extent,c.projection);(j=(S=(0,i.intersects)(_,e.extent))&&!(0,i.containsExtent)(_,e.extent))&&this.clipUnrotated(x,e,_)}var I=this.getImage(),E=(0,n.compose)(this.tempTransform,d/2,v/2,p,p,0,l*(a[0]-h[0])/u,l*(h[1]-a[3])/u);this.renderedResolution=u*f/l;var O=I.width*E[0],R=I.height*E[3];if(this.getLayer().getSource().getInterpolate()||(x.imageSmoothingEnabled=!1),this.preRender(x,e),S&&O>=.5&&R>=.5){var P,T=E[4],A=E[5],M=s.opacity;1!==M&&(P=x.globalAlpha,x.globalAlpha=M),x.drawImage(I,0,0,+I.width,+I.height,T,A,O,R),1!==M&&(x.globalAlpha=P)}return this.postRender(x,e),j&&x.restore(),x.imageSmoothingEnabled=!0,b!==w.style.transform&&(w.style.transform=b),this.container}}]),s}(),w=x;exports.default=w;
},{"./Layer.js":"vPfl","../../ImageState.js":"u3kG","../../ViewHint.js":"cuLW","../../transform.js":"P4eA","../../extent.js":"QDir","../../proj.js":"Diht"}],"KHBf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseImage.js")),e=r(require("../renderer/canvas/ImageLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=l(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(r){p(u,t.default);var n=y(u);function u(t){return o(this,u),n.call(this,t)}return i(u,[{key:"createRenderer",value:function(){return new e.default(this)}},{key:"getData",value:function(t){return a(h(u.prototype),"getData",this).call(this,t)}}]),u}(),O=m;exports.default=O;
},{"./BaseImage.js":"ZHEI","../renderer/canvas/ImageLayer.js":"rzNj"}],"Kylu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.transformExtentWithOptions=s,exports.transformGeometryWithOptions=f;var t=require("../util.js"),e=require("../proj.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var c=function(){function r(){n(this,r),this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return a(r,[{key:"getReadOptions",value:function(t,r){if(r){var n=r.dataProjection?(0,e.get)(r.dataProjection):this.readProjection(t);r.extent&&n&&"tile-pixels"===n.getUnits()&&(n=(0,e.get)(n)).setWorldExtent(r.extent),r={dataProjection:n,featureProjection:r.featureProjection}}return this.adaptOptions(r)}},{key:"adaptOptions",value:function(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}},{key:"getType",value:function(){return(0,t.abstract)()}},{key:"readFeature",value:function(e,r){return(0,t.abstract)()}},{key:"readFeatures",value:function(e,r){return(0,t.abstract)()}},{key:"readGeometry",value:function(e,r){return(0,t.abstract)()}},{key:"readProjection",value:function(e){return(0,t.abstract)()}},{key:"writeFeature",value:function(e,r){return(0,t.abstract)()}},{key:"writeFeatures",value:function(e,r){return(0,t.abstract)()}},{key:"writeGeometry",value:function(e,r){return(0,t.abstract)()}}]),r}(),l=c;function f(t,r,n){var o,a=n?(0,e.get)(n.featureProjection):null,i=n?(0,e.get)(n.dataProjection):null;if(o=a&&i&&!(0,e.equivalent)(a,i)?(r?t.clone():t).transform(r?a:i,r?i:a):t,r&&n&&void 0!==n.decimals){var u=Math.pow(10,n.decimals);o===t&&(o=t.clone()),o.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*u)/u;return t})}return o}function s(t,r){var n=r?(0,e.get)(r.featureProjection):null,o=r?(0,e.get)(r.dataProjection):null;return n&&o&&!(0,e.equivalent)(n,o)?(0,e.transformExtent)(t,o,n):t}exports.default=l;
},{"../util.js":"KniQ","../proj.js":"Diht"}],"fbCo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("./LineString.js")),e=f(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),n=require("../extent.js"),i=require("./flat/deflate.js"),o=require("./flat/simplify.js"),s=require("../array.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),u=require("./flat/intersectsextent.js");function f(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function y(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=v(t,"string");return"symbol"===c(e)?e:String(e)}function v(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=j();return function(){var r,n=S(t);if(e){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(f){g(h,e.default);var c=_(h);function h(t,e,r){var n;if(d(this,h),(n=c.call(this)).ends_=[],n.maxDelta_=-1,n.maxDeltaRevision_=-1,Array.isArray(t[0]))n.setCoordinates(t,e);else if(void 0!==e&&r)n.setFlatCoordinates(e,t),n.ends_=r;else{for(var i=n.getLayout(),o=t,a=[],l=[],u=0,f=o.length;u<f;++u){var y=o[u];0===u&&(i=y.getLayout()),(0,s.extend)(a,y.getFlatCoordinates()),l.push(a.length)}n.setFlatCoordinates(i,a),n.ends_=l}return n}return y(h,[{key:"appendLineString",value:function(t){this.flatCoordinates?(0,s.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new h(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,i,o){return o<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,o))}},{key:"getCoordinateAtM",value:function(t,e,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,r=void 0!==r&&r,(0,l.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,e,r))}},{key:"getCoordinates",value:function(){return(0,a.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(e){return e<0||this.ends_.length<=e?null:new t.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLineStrings",value:function(){for(var e=this.flatCoordinates,r=this.ends_,n=this.layout,i=[],o=0,s=0,a=r.length;s<a;++s){var l=r[s],u=new t.default(e.slice(o,l),n);i.push(u),o=l}return i}},{key:"getFlatMidpoints",value:function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var u=n[o],f=(0,l.interpolatePoint)(e,r,u,i,.5);(0,s.extend)(t,f),r=u}return t}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],r=[];return e.length=(0,o.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,r),new h(e,"XY",r)}},{key:"getType",value:function(){return"MultiLineString"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,i.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}]),h}(),w=x;exports.default=w;
},{"./LineString.js":"DfxW","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","../array.js":"luEr","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir"}],"dNu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Point.js")),e=s(require("./SimpleGeometry.js")),r=require("../extent.js"),n=require("./flat/deflate.js"),o=require("../array.js"),i=require("./flat/inflate.js"),a=require("../math.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=y(t,"string");return"symbol"===u(e)?e:String(e)}function y(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=C();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(s){h(l,e.default);var u=v(l);function l(t,e){var r;return f(this,l),r=u.call(this),e&&!Array.isArray(t[0])?r.setFlatCoordinates(e,t):r.setCoordinates(t,e),r}return c(l,[{key:"appendPoint",value:function(t){this.flatCoordinates?(0,o.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}},{key:"clone",value:function(){var t=new l(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,o){if(o<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,e))return o;for(var i=this.flatCoordinates,s=this.stride,u=0,f=i.length;u<f;u+=s){var l=(0,a.squaredDistance)(t,e,i[u],i[u+1]);if(l<o){o=l;for(var c=0;c<s;++c)n[c]=i[u+c];n.length=s}}return o}},{key:"getCoordinates",value:function(){return(0,i.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(e){var r=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||r<=e?null:new t.default(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var e=this.flatCoordinates,r=this.layout,n=this.stride,o=[],i=0,a=e.length;i<a;i+=n){var s=new t.default(e.slice(i,i+n),r);o.push(s)}return o}},{key:"getType",value:function(){return"MultiPoint"}},{key:"intersectsExtent",value:function(t){for(var e=this.flatCoordinates,n=this.stride,o=0,i=e.length;o<i;o+=n){var a=e[o],s=e[o+1];if((0,r.containsXY)(t,a,s))return!0}return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),l}(),P=j;exports.default=P;
},{"./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","../extent.js":"QDir","./flat/deflate.js":"FNhl","../array.js":"luEr","./flat/inflate.js":"znXl","../math.js":"B96G"}],"VjQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"QDir"}],"ouhF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=v(require("./MultiPoint.js")),e=v(require("./Polygon.js")),i=v(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),n=require("../extent.js"),s=require("./flat/deflate.js"),o=require("../array.js"),a=require("./flat/interiorpoint.js"),l=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),d=require("./flat/area.js"),h=require("./flat/center.js"),c=require("./flat/contains.js"),y=require("./flat/simplify.js");function v(t){return t&&t.__esModule?t:{default:t}}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function C(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t){var e=m(t,"string");return"symbol"===g(e)?e:String(e)}function m(t,e){if("object"!==g(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}function j(t,e){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=w();return function(){var i,r=F(t);if(e){var n=F(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return O(this,i)}}function O(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(v){P(_,i.default);var g=R(_);function _(t,e,i){var r;if(p(this,_),(r=g.call(this)).endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var n=r.getLayout(),s=t,a=[],l=[],u=0,f=s.length;u<f;++u){var d=s[u];0===u&&(n=d.getLayout());for(var h=a.length,c=d.getEnds(),y=0,v=c.length;y<v;++y)c[y]+=h;(0,o.extend)(a,d.getFlatCoordinates()),l.push(c)}e=n,t=a,i=l}return void 0!==e&&i?(r.setFlatCoordinates(e,t),r.endss_=i):r.setCoordinates(t,e),r}return C(_,[{key:"appendPolygon",value:function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;(0,o.extend)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,n=(e=t.getEnds().slice()).length;r<n;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}},{key:"clone",value:function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();var r=new _(this.flatCoordinates.slice(),this.layout,e);return r.applyProperties(this),r}},{key:"closestPointXY",value:function(t,e,i,s){return s<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}},{key:"containsXY",value:function(t,e){return(0,c.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}},{key:"getArea",value:function(){return(0,d.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,l.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,h.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,a.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new t.default(this.getFlatInteriorPoints().slice(),"XYM")}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],i=[];return e.length=(0,y.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new _(e,"XY",i)}},{key:"getPolygon",value:function(t){if(t<0||this.endss_.length<=t)return null;var i;if(0===t)i=0;else{var r=this.endss_[t-1];i=r[r.length-1]}var n=this.endss_[t].slice(),s=n[n.length-1];if(0!==i)for(var o=0,a=n.length;o<a;++o)n[o]-=i;return new e.default(this.flatCoordinates.slice(i,s),this.layout,n)}},{key:"getPolygons",value:function(){for(var t=this.layout,i=this.flatCoordinates,r=this.endss_,n=[],s=0,o=0,a=r.length;o<a;++o){var l=r[o].slice(),u=l[l.length-1];if(0!==s)for(var f=0,d=l.length;f<d;++f)l[f]-=s;var h=new e.default(i.slice(s,u),t,l);n.push(h),s=u}return n}},{key:"getType",value:function(){return"MultiPolygon"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,s.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}}]),_}(),k=x;exports.default=k;
},{"./MultiPoint.js":"dNu5","./Polygon.js":"Nwwk","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","../array.js":"luEr","./flat/interiorpoint.js":"UDvN","./flat/inflate.js":"znXl","./flat/intersectsextent.js":"GZir","./flat/orient.js":"cJkE","./flat/area.js":"EOSm","./flat/center.js":"VjQP","./flat/contains.js":"dzdN","./flat/simplify.js":"IEpt"}],"UzHN":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,r=1/e,s=12,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(t,i,e){var r,s,n=e.buf;if(r=(112&(s=n[e.pos++]))>>4,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<3,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<10,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<17,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<24,s<128)return a(t,r,i);if(r|=(1&(s=n[e.pos++]))<<31,s<128)return a(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function h(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function u(t,i){var e,r;if(t>=0?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),f(e,r,i),d(r,i)}function f(t,i,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}function d(t,i){var e=(7&t)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t)))))}function p(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));e.realloc(r);for(var s=e.pos-1;s>=t;s--)e.buf[s+r]=e.buf[s]}function l(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function c(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function w(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function F(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function g(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function b(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function x(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function v(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function y(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function V(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function S(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function B(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function k(t,i,e){for(var r="",s=i;s<e;){var n,o,h,a=t[s],u=null,f=a>239?4:a>223?3:a>191?2:1;if(s+f>e)break;1===f?a<128&&(u=a):2===f?128==(192&(n=t[s+1]))&&(u=(31&a)<<6|63&n)<=127&&(u=null):3===f?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((u=(15&a)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===f&&(n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&((u=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,f=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),s+=f}return r}function M(t,i,e){return n.decode(t.subarray(i,e))}function P(t,i,e){for(var r,s,n=0;n<i.length;n++){if((r=i.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=63&r|128)}return e}i.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,i,this),this.pos===n&&this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=V(this.buf,this.pos)+V(this.buf,this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=V(this.buf,this.pos)+B(this.buf,this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var i=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(t){var i,e,r=this.buf;return i=127&(e=r[this.pos++]),e<128?i:(i|=(127&(e=r[this.pos++]))<<7,e<128?i:(i|=(127&(e=r[this.pos++]))<<14,e<128?i:(i|=(127&(e=r[this.pos++]))<<21,e<128?i:o(i|=(15&(e=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=s&&n?M(this.buf,i,t):k(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=h(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?u(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var i=this.pos;this.pos=P(this.buf,t,this.pos);var e=this.pos-i;e>=128&&p(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),t.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),t.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var r=this.pos-e;r>=128&&p(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,l,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,c,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,g,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,w,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,F,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,b,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,x,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,v,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,y,i)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
},{"ieee754":"Quj6"}],"AyCw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./SimpleGeometry.js")),e=require("../extent.js"),r=require("./flat/deflate.js"),n=require("./flat/transform.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=p();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(o){c(a,t.default);var i=h(a);function a(t,e,r){var n;return s(this,a),n=i.call(this),void 0!==r&&void 0===e?n.setFlatCoordinates(r,t):(e=e||0,n.setCenterAndRadius(t,e,r)),n}return u(a,[{key:"clone",value:function(){var t=new a(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){var o=this.flatCoordinates,i=t-o[0],s=e-o[1],a=i*i+s*s;if(a<n){if(0===a)for(var u=0;u<this.stride;++u)r[u]=o[u];else{var f=this.getRadius()/Math.sqrt(a);r[0]=o[0]+f*i,r[1]=o[1]+f*s;for(var l=2;l<this.stride;++l)r[l]=o[l]}return r.length=this.stride,a}return n}},{key:"containsXY",value:function(t,e){var r=this.flatCoordinates,n=t-r[0],o=e-r[1];return n*n+o*o<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(t){var r=this.flatCoordinates,n=r[this.stride]-r[0];return(0,e.createOrUpdate)(r[0]-n,r[1]-n,r[0]+n,r[1]+n,t)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}},{key:"getType",value:function(){return"Circle"}},{key:"intersectsExtent",value:function(t){var r=this.getExtent();if((0,e.intersects)(t,r)){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||(0,e.forEachCorner)(t,this.intersectsCoordinate.bind(this)))}return!1}},{key:"setCenter",value:function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var o=1;o<e;++o)n[e+o]=t[o];this.setFlatCoordinates(this.layout,n),this.changed()}},{key:"setCenterAndRadius",value:function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=(0,r.deflateCoordinate)(o,0,t,this.stride);o[i++]=o[0]+e;for(var s=1,a=this.stride;s<a;++s)o[i++]=o[s];o.length=i,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(t,e){}},{key:"setRadius",value:function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}},{key:"rotate",value:function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,n.rotate)(r,0,r.length,o,t,e,r)),this.changed()}}]),a}();C.prototype.transform;var g=C;exports.default=g;
},{"./SimpleGeometry.js":"pnrv","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/transform.js":"LGwr"}],"HvLT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../events/EventType.js")),t=i(require("./Geometry.js")),r=require("../extent.js"),n=require("../events.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=c(e,"string");return"symbol"===o(t)?t:String(t)}function c(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=h(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=d();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(i){y(u,t.default);var o=g(u);function u(e){var t;return s(this,u),(t=o.call(this)).geometries_=e||null,t.changeEventsKeys_=[],t.listenGeometriesChange_(),t}return a(u,[{key:"unlistenGeometriesChange_",value:function(){this.changeEventsKeys_.forEach(n.unlistenByKey),this.changeEventsKeys_.length=0}},{key:"listenGeometriesChange_",value:function(){if(this.geometries_)for(var t=0,r=this.geometries_.length;t<r;++t)this.changeEventsKeys_.push((0,n.listen)(this.geometries_[t],e.default.CHANGE,this.changed,this))}},{key:"clone",value:function(){var e=new u(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,n,i){if(i<(0,r.closestSquaredDistanceXY)(this.getExtent(),e,t))return i;for(var o=this.geometries_,s=0,u=o.length;s<u;++s)i=o[s].closestPointXY(e,t,n,i);return i}},{key:"containsXY",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(e,t))return!0;return!1}},{key:"computeExtent",value:function(e){(0,r.createOrUpdateEmpty)(e);for(var t=this.geometries_,n=0,i=t.length;n<i;++n)(0,r.extend)(e,t[n].getExtent());return e}},{key:"getGeometries",value:function(){return G(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getGeometriesArrayRecursive",value:function(){for(var e=[],t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}},{key:"getSimplifiedGeometry",value:function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,n=!1,i=0,o=r.length;i<o;++i){var s=r[i],a=s.getSimplifiedGeometry(e);t.push(a),a!==s&&(n=!0)}if(n){var l=new u(null);return l.setGeometriesArray(t),l}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}},{key:"getType",value:function(){return"GeometryCollection"}},{key:"intersectsExtent",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(e,t);this.changed()}},{key:"scale",value:function(e,t,n){n||(n=(0,r.getCenter)(this.getExtent()));for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].scale(e,t,n);this.changed()}},{key:"setGeometries",value:function(e){this.setGeometriesArray(G(e))}},{key:"setGeometriesArray",value:function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}},{key:"translate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(e,t);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),f(_(u.prototype),"disposeInternal",this).call(this)}}]),u}();function G(e){for(var t=[],r=0,n=e.length;r<n;++r)t.push(e[r].clone());return t}var k=b;exports.default=k;
},{"../events/EventType.js":"C8cu","./Geometry.js":"F8sI","../extent.js":"QDir","../events.js":"UqnM"}],"V3SP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GeometryCollection",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LineString",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"LinearRing",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"MultiLineString",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MultiPoint",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"MultiPolygon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"SimpleGeometry",{enumerable:!0,get:function(){return m.default}});var e=c(require("./geom/Circle.js")),r=c(require("./geom/Geometry.js")),t=c(require("./geom/GeometryCollection.js")),n=c(require("./geom/LinearRing.js")),o=c(require("./geom/LineString.js")),u=c(require("./geom/MultiLineString.js")),i=c(require("./geom/MultiPoint.js")),l=c(require("./geom/MultiPolygon.js")),f=c(require("./geom/Point.js")),g=c(require("./geom/Polygon.js")),m=c(require("./geom/SimpleGeometry.js"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./geom/Circle.js":"AyCw","./geom/Geometry.js":"F8sI","./geom/GeometryCollection.js":"HvLT","./geom/LinearRing.js":"jRgU","./geom/LineString.js":"DfxW","./geom/MultiLineString.js":"fbCo","./geom/MultiPoint.js":"dNu5","./geom/MultiPolygon.js":"ouhF","./geom/Point.js":"gLcY","./geom/Polygon.js":"Nwwk","./geom/SimpleGeometry.js":"pnrv"}],"IFOM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.toFeature=C,exports.toGeometry=P;var t=d(require("../Feature.js")),e=require("../geom.js"),r=require("../transform.js"),n=require("../extent.js"),i=require("../array.js"),o=require("../geom/flat/interiorpoint.js"),s=require("../proj.js"),a=require("../geom/flat/orient.js"),l=require("../geom/flat/interpolate.js"),u=require("../geom/flat/center.js"),f=require("../geom/flat/transform.js");function d(t){return t&&t.__esModule?t:{default:t}}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function p(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=_(t,"string");return"symbol"===g(e)?e:String(e)}function _(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var v=(0,r.create)(),m=function(){function t(e,r,n,i,o){h(this,t),this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=i}return p(t,[{key:"get",value:function(t){return this.properties_[t]}},{key:"getExtent",value:function(){return this.extent_||(this.extent_="Point"===this.type_?(0,n.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,n.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}},{key:"getFlatInteriorPoint",value:function(){if(!this.flatInteriorPoints_){var t=(0,n.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,o.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}},{key:"getFlatInteriorPoints",value:function(){if(!this.flatInteriorPoints_){var t=(0,u.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,o.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_}},{key:"getFlatMidpoint",value:function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,l.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}},{key:"getFlatMidpoints",value:function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,o=r.length;n<o;++n){var s=r[n],a=(0,l.interpolatePoint)(t,e,s,2,.5);(0,i.extend)(this.flatMidpoints_,a),e=s}}return this.flatMidpoints_}},{key:"getId",value:function(){return this.id_}},{key:"getOrientedFlatCoordinates",value:function(){return this.flatCoordinates_}},{key:"getGeometry",value:function(){return this}},{key:"getSimplifiedGeometry",value:function(t){return this}},{key:"simplifyTransformed",value:function(t,e){return this}},{key:"getProperties",value:function(){return this.properties_}},{key:"getStride",value:function(){return 2}},{key:"getStyleFunction",value:function(){return this.styleFunction}},{key:"getType",value:function(){return this.type_}},{key:"transform",value:function(t){var e=(t=(0,s.get)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){var o=(0,n.getHeight)(i)/(0,n.getHeight)(e);(0,r.compose)(v,i[0],i[3],o,-o,0,0,0),(0,f.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,v,this.flatCoordinates_)}}},{key:"getEnds",value:function(){return this.ends_}}]),t}();function P(t){var r=t.getType();switch(r){case"Point":return new e.Point(t.getFlatCoordinates());case"MultiPoint":return new e.MultiPoint(t.getFlatCoordinates(),"XY");case"LineString":return new e.LineString(t.getFlatCoordinates(),"XY");case"MultiLineString":return new e.MultiLineString(t.getFlatCoordinates(),"XY",t.getEnds());case"Polygon":var n=t.getFlatCoordinates(),i=t.getEnds(),o=(0,a.inflateEnds)(n,i);return o.length>1?new e.MultiPolygon(n,"XY",o):new e.Polygon(n,"XY",i);default:throw new Error("Invalid geometry type:"+r)}}function C(e,r){var n=e.getId(),i=P(e),o=e.getProperties(),s=new t.default;return void 0!==r&&s.setGeometryName(r),s.setGeometry(i),void 0!==n&&s.setId(n),s.setProperties(o,!0),s}m.prototype.getEndss=m.prototype.getEnds,m.prototype.getFlatCoordinates=m.prototype.getOrientedFlatCoordinates;var b=m;exports.default=b;
},{"../Feature.js":"mYW9","../geom.js":"V3SP","../transform.js":"P4eA","../extent.js":"QDir","../array.js":"luEr","../geom/flat/interiorpoint.js":"UDvN","../proj.js":"Diht","../geom/flat/orient.js":"cJkE","../geom/flat/interpolate.js":"rDTq","../geom/flat/center.js":"VjQP","../geom/flat/transform.js":"LGwr"}],"bjcz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=v(require("./Feature.js")),t=y(require("../geom/LineString.js")),r=y(require("../geom/MultiLineString.js")),n=y(require("../geom/MultiPoint.js")),o=y(require("../geom/MultiPolygon.js")),a=y(require("pbf")),i=y(require("../geom/Point.js")),u=y(require("../geom/Polygon.js")),s=y(require("../proj/Projection.js")),l=y(require("../render/Feature.js")),f=require("../asserts.js"),c=require("../proj.js"),p=require("../geom/flat/orient.js");function y(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function g(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e){var t=P(e,"string");return"symbol"===m(t)?t:String(t)}function P(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=x();return function(){var r,n=M(e);if(t){var o=M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(y){_(v,e.default);var d=O(v);function v(e){var t;return h(this,v),e=e||{},(t=d.call(this)).dataProjection=new s.default({code:"",units:"tile-pixels"}),t.featureClass_=e.featureClass?e.featureClass:l.default,t.geometryName_=e.geometryName,t.layerName_=e.layerName?e.layerName:"layer",t.layers_=e.layers?e.layers:null,t.idProperty_=e.idProperty,t.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],t}return g(v,[{key:"readRawGeometry_",value:function(e,t,r,n){e.pos=t.geometry;for(var o=e.readVarint()+e.pos,a=1,i=0,u=0,s=0,l=0,c=0;e.pos<o;){if(!i){var p=e.readVarint();a=7&p,i=p>>3}i--,1===a||2===a?(u+=e.readSVarint(),s+=e.readSVarint(),1===a&&l>c&&(n.push(l),c=l),r.push(u,s),l+=2):7===a?l>c&&(r.push(r[c],r[c+1]),l+=2):(0,f.assert)(!1,59)}l>c&&(n.push(l),c=l)}},{key:"createFeature_",value:function(a,s,f){var c,y=s.type;if(0===y)return null;var d,v=s.properties;this.idProperty_?(d=v[this.idProperty_],delete v[this.idProperty_]):d=s.id,v[this.layerName_]=s.layer.name;var m=[],h=[];this.readRawGeometry_(a,s,m,h);var b=R(y,h.length);if(this.featureClass_===l.default)(c=new this.featureClass_(b,m,h,v,d)).transform(f.dataProjection);else{var g;if("Polygon"==b){var j=(0,p.inflateEnds)(m,h);g=j.length>1?new o.default(m,"XY",j):new u.default(m,"XY",h)}else g="Point"===b?new i.default(m,"XY"):"LineString"===b?new t.default(m,"XY"):"MultiPoint"===b?new n.default(m,"XY"):"MultiLineString"===b?new r.default(m,"XY",h):null;c=new(0,this.featureClass_),this.geometryName_&&c.setGeometryName(this.geometryName_);var P=(0,e.transformGeometryWithOptions)(g,!1,f);c.setGeometry(P),void 0!==d&&c.setId(d),c.setProperties(v,!0)}return c}},{key:"getType",value:function(){return"arraybuffer"}},{key:"readFeatures",value:function(e,t){var r=this.layers_;t=this.adaptOptions(t);var n=(0,c.get)(t.dataProjection);n.setWorldExtent(t.extent),t.dataProjection=n;var o=new a.default(e),i=o.readFields(q,{}),u=[];for(var s in i)if(!r||r.includes(s)){var l=i[s],f=l?[0,0,l.extent,l.extent]:null;n.setExtent(f);for(var p=0,y=l.length;p<y;++p){var d=E(o,l,p),v=this.createFeature_(o,d,t);null!==v&&u.push(v)}}return u}},{key:"readProjection",value:function(e){return this.dataProjection}},{key:"setLayers",value:function(e){this.layers_=e}}]),v}();function q(e,t,r){if(3===e){var n={keys:[],values:[],features:[]},o=r.readVarint()+r.pos;r.readFields(N,n,o),n.length=n.features.length,n.length&&(t[n.name]=n)}}function N(e,t,r){if(15===e)t.version=r.readVarint();else if(1===e)t.name=r.readString();else if(5===e)t.extent=r.readVarint();else if(2===e)t.features.push(r.pos);else if(3===e)t.keys.push(r.readString());else if(4===e){for(var n=null,o=r.readVarint()+r.pos;r.pos<o;)n=1===(e=r.readVarint()>>3)?r.readString():2===e?r.readFloat():3===e?r.readDouble():4===e?r.readVarint64():5===e?r.readVarint():6===e?r.readSVarint():7===e?r.readBoolean():null;t.values.push(n)}}function F(e,t,r){if(1==e)t.id=r.readVarint();else if(2==e)for(var n=r.readVarint()+r.pos;r.pos<n;){var o=t.layer.keys[r.readVarint()],a=t.layer.values[r.readVarint()];t.properties[o]=a}else 3==e?t.type=r.readVarint():4==e&&(t.geometry=r.pos)}function E(e,t,r){e.pos=t.features[r];var n=e.readVarint()+e.pos,o={layer:t,type:0,properties:{}};return e.readFields(F,o,n),o}function R(e,t){var r;return 1===e?r=1===t?"Point":"MultiPoint":2===e?r=1===t?"LineString":"MultiLineString":3===e&&(r="Polygon"),r}var C=k;exports.default=C;
},{"./Feature.js":"Kylu","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","pbf":"UzHN","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","../proj/Projection.js":"WUar","../render/Feature.js":"IFOM","../asserts.js":"fLG6","../proj.js":"Diht","../geom/flat/orient.js":"cJkE"}],"UST7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../../render/canvas/BuilderGroup.js")),t=f(require("../../render/canvas/ExecutorGroup.js")),r=f(require("./TileLayer.js")),n=f(require("../../TileState.js")),o=f(require("../../ViewHint.js")),i=require("../../render/canvas/hitdetect.js"),a=require("../../transform.js"),l=require("../../extent.js"),u=require("../vector.js"),d=require("../../util.js"),s=require("../../size.js"),c=require("../../coordinate.js");function f(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=T(e,"string");return"symbol"===g(t)?t:String(t)}function T(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function R(){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=m(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=E();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},I={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},O=function(f){b(v,r.default);var g=x(v);function v(e){var t;return p(this,v),(t=g.call(this,e)).boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(C(t)),t.renderedLayerRevision_,t.renderedPixelToCoordinateTransform_=null,t.renderedRotation_,t.tmpTransform_=(0,a.create)(),t}return h(v,[{key:"prepareTile",value:function(e,t,r){var o,i=e.getState();return i!==n.default.LOADED&&i!==n.default.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e)&&(o=!0)),o}},{key:"getTile",value:function(e,t,r,n){var i=n.pixelRatio,a=n.viewState,l=a.resolution,u=a.projection,d=this.getLayer(),s=d.getSource().getTile(e,t,r,i,u),c=n.viewHints,f=!(c[o.default.ANIMATING]||c[o.default.INTERACTING]);return!f&&s.wantedResolution||(s.wantedResolution=l),this.prepareTile(s,i,u)&&(f||Date.now()-n.time<8)&&"vector"!==d.getRenderMode()&&this.renderTileImage_(s,n),R(_(v.prototype),"getTile",this).call(this,e,t,r,n)}},{key:"isDrawableTile",value:function(e){var t=this.getLayer();return R(_(v.prototype),"isDrawableTile",this).call(this,e)&&("vector"===t.getRenderMode()?(0,d.getUid)(t)in e.executorGroups:e.hasContext(t))}},{key:"getTileImage",value:function(e){return e.getImage(this.getLayer())}},{key:"prepareFrame",value:function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),R(_(v.prototype),"prepareFrame",this).call(this,e)}},{key:"updateExecutorGroup_",value:function(r,o,i){var a=this,s=this.getLayer(),c=s.getRevision(),f=s.getRenderOrder()||null,g=r.wantedResolution,p=r.getReplayState(s);if(p.dirty||p.renderedResolution!==g||p.renderedRevision!=c||p.renderedRenderOrder!=f){var v=s.getSource(),h=s.getDeclutter(),y=v.getTileGrid(),T=v.getTileGridForProjection(i).getTileCoordExtent(r.wrappedTileCoord),R=v.getSourceTiles(o,i,r),m=(0,d.getUid)(s);delete r.hitDetectionImageData[m],r.executorGroups[m]=[],h&&(r.declutterExecutorGroups[m]=[]),p.dirty=!1;for(var b=function(){var i=R[S];if(i.getState()!=n.default.LOADED)return 1;var d=i.tileCoord,c=y.getTileCoordExtent(d),b=(0,l.getIntersection)(T,c),x=(0,l.buffer)(b,s.getRenderBuffer()*g,a.tmpExtent),w=(0,l.equals)(c,b)?null:x,C=new e.default(0,x,g,o),E=h?new e.default(0,b,g,o):void 0,_=(0,u.getSquaredTolerance)(g,o),j=function(e){var t,r=e.getStyleFunction()||s.getStyleFunction();if(r&&(t=r(e,g)),t){var n=this.renderFeature(e,_,t,C,E);p.dirty=p.dirty||n}},I=i.getFeatures();f&&f!==p.renderedRenderOrder&&I.sort(f);for(var O=0,P=I.length;O<P;++O){var D=I[O];w&&!(0,l.intersects)(w,D.getGeometry().getExtent())||j.call(a,D)}var L=C.finish(),G="vector"!==s.getRenderMode()&&h&&1===R.length?null:b,A=new t.default(G,g,o,v.getOverlaps(),L,s.getRenderBuffer());if(r.executorGroups[m].push(A),E){var F=new t.default(null,g,o,v.getOverlaps(),E.finish(),s.getRenderBuffer());r.declutterExecutorGroups[m].push(F)}},S=0,x=R.length;S<x;++S)b();p.renderedRevision=c,p.renderedRenderOrder=f,p.renderedResolution=g}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){var i=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var u=this.getLayer(),s=u.getSource().getTileGridForProjection(t.viewState.projection),c=(0,l.boundingExtent)([e]);(0,l.buffer)(c,i*r,c);for(var f,g={},p=function(e,t,r){var i=e.getId();void 0===i&&(i=(0,d.getUid)(e));var a=g[i];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return g[i]=!0,o.splice(o.lastIndexOf(a),1),n(e,u,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return g[i]=!0,n(e,u,t);o.push(g[i]={feature:e,layer:u,geometry:t,distanceSq:r,callback:n})}},v=this.renderedTiles,h=function(){var n=v[y],o=s.getTileCoordExtent(n.wrappedTileCoord);if(!(0,l.intersects)(o,c))return 1;var g=(0,d.getUid)(u),h=[n.executorGroups[g]],T=n.declutterExecutorGroups[g];T&&h.push(T),h.some(function(n){for(var o=n===T?t.declutterTree.all().map(function(e){return e.value}):null,l=0,u=n.length;l<u;++l){var d=n[l];if(f=d.forEachFeatureAtCoordinate(e,i,a,r,p,o))return!0}})},y=0,T=v.length;!f&&y<T;++y)h();return f}},{key:"getFeatures",value:function(e){var t=this;return new Promise(function(r,o){for(var u,f=t.getLayer(),g=(0,d.getUid)(f),p=f.getSource(),v=t.renderedProjection,h=v.getExtent(),y=t.renderedResolution,T=p.getTileGridForProjection(v),R=(0,a.apply)(t.renderedPixelToCoordinateTransform_,e.slice()),m=T.getTileCoordForCoordAndResolution(R,y),b=0,S=t.renderedTiles.length;b<S;++b)if(m.toString()===t.renderedTiles[b].tileCoord.toString()){if((u=t.renderedTiles[b]).getState()===n.default.LOADED){var x=T.getTileCoordExtent(u.tileCoord);p.getWrapX()&&v.canWrapX()&&!(0,l.containsExtent)(h,x)&&(0,c.wrapX)(R,v);break}u=void 0}if(!u||u.loadingSourceTiles>0)r([]);else{var w=T.getTileCoordExtent(u.wrappedTileCoord),C=(0,l.getTopLeft)(w),E=[(R[0]-C[0])/y,(C[1]-R[1])/y],_=u.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),j=u.hitDetectionImageData[g];if(!j){var I=(0,s.toSize)(T.getTileSize(T.getZForResolution(y,p.zDirection))),O=t.renderedRotation_,P=[t.getRenderTransform(T.getTileCoordCenter(u.wrappedTileCoord),y,0,i.HIT_DETECT_RESOLUTION,I[0]*i.HIT_DETECT_RESOLUTION,I[1]*i.HIT_DETECT_RESOLUTION,0)];j=(0,i.createHitDetectionImageData)(I,P,_,f.getStyleFunction(),T.getTileCoordExtent(u.wrappedTileCoord),u.getReplayState(f).renderedResolution,O),u.hitDetectionImageData[g]=j}r((0,i.hitDetect)(E,_,j))}})}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"renderDeclutter",value:function(e){var t=this.context,r=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();for(var n=e.viewHints,i=!(n[o.default.ANIMATING]||n[o.default.INTERACTING]),a=this.renderedTiles,l=0,u=a.length;l<u;++l){var s=a[l],c=s.declutterExecutorGroups[(0,d.getUid)(this.getLayer())];if(c)for(var f=c.length-1;f>=0;--f)c[f].execute(this.context,1,this.getTileRenderTransform(s,e),e.viewState.rotation,i,void 0,e.declutterTree)}t.globalAlpha=r}},{key:"getTileRenderTransform",value:function(e,t){var r=t.pixelRatio,n=t.viewState,o=n.center,i=n.resolution,l=n.rotation,u=t.size,d=Math.round(u[0]*r),s=Math.round(u[1]*r),c=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),f=e.tileCoord,g=c.getTileCoordExtent(e.wrappedTileCoord),p=c.getTileCoordExtent(f,this.tmpExtent)[0]-g[0];return(0,a.multiply)((0,a.scale)(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,i,l,r,d,s,p))}},{key:"postRender",value:function(e,t){var r=t.viewHints,n=!(r[o.default.ANIMATING]||r[o.default.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;var i=this.getLayer(),a=i.getRenderMode(),u=e.globalAlpha;e.globalAlpha=i.getOpacity();for(var s=I[a],c=t.viewState,f=c.rotation,g=i.getSource(),p=g.getTileGridForProjection(c.projection).getZForResolution(c.resolution,g.zDirection),h=this.renderedTiles,y=[],T=[],m=!0,b=h.length-1;b>=0;--b){var S=h[b];m=m&&!S.getReplayState(i).dirty;var x=S.executorGroups[(0,d.getUid)(i)].filter(function(e){return e.hasExecutors(s)});if(0!==x.length){var w=this.getTileRenderTransform(S,t),C=S.tileCoord[0],E=!1,j=x[0].getClipCoords(w);if(j){for(var O=0,P=y.length;O<P;++O)if(p!==C&&C<T[O]){var D=y[O];(0,l.intersects)([j[0],j[3],j[4],j[7]],[D[0],D[3],D[4],D[7]])&&(E||(e.save(),E=!0),e.beginPath(),e.moveTo(j[0],j[1]),e.lineTo(j[2],j[3]),e.lineTo(j[4],j[5]),e.lineTo(j[6],j[7]),e.moveTo(D[6],D[7]),e.lineTo(D[4],D[5]),e.lineTo(D[2],D[3]),e.lineTo(D[0],D[1]),e.clip())}y.push(j),T.push(C)}for(var L=0,G=x.length;L<G;++L){x[L].execute(e,1,w,f,n,s)}E&&e.restore()}}e.globalAlpha=u,this.ready=m,R(_(v.prototype),"postRender",this).call(this,e,t)}},{key:"renderFeature",value:function(e,t,r,n,o){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var a=0,l=r.length;a<l;++a)i=(0,u.renderFeature)(n,e,r[a],t,this.boundHandleStyleImageChange_,void 0,o)||i;else i=(0,u.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,void 0,o);return i}},{key:"tileImageNeedsRender_",value:function(e){var t=this.getLayer();if("vector"===t.getRenderMode())return!1;var r=e.getReplayState(t),n=t.getRevision(),o=e.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==n}},{key:"renderTileImage_",value:function(e,t){var r=this.getLayer(),n=e.getReplayState(r),o=r.getRevision(),i=e.executorGroups[(0,d.getUid)(r)];n.renderedTileRevision=o;var l=e.wrappedTileCoord,u=l[0],s=r.getSource(),c=t.pixelRatio,f=t.viewState.projection,g=s.getTileGridForProjection(f),p=g.getResolution(e.tileCoord[0]),v=t.pixelRatio/e.wantedResolution*p,h=g.getResolution(u),y=e.getContext(r);c=Math.round(Math.max(c,v/c));var T=s.getTilePixelSize(u,c,f);y.canvas.width=T[0],y.canvas.height=T[1];var R=c/v;if(1!==R){var m=(0,a.reset)(this.tmpTransform_);(0,a.scale)(m,R,R),y.setTransform.apply(y,m)}var b=g.getTileCoordExtent(l,this.tmpExtent),S=v/h,x=(0,a.reset)(this.tmpTransform_);(0,a.scale)(x,S,-S),(0,a.translate)(x,-b[0],-b[3]);for(var w=0,C=i.length;w<C;++w){i[w].execute(y,R,x,0,!0,j[r.getRenderMode()])}n.renderedTileResolution=e.wantedResolution}}]),v}(),P=O;exports.default=P;
},{"../../render/canvas/BuilderGroup.js":"vqHd","../../render/canvas/ExecutorGroup.js":"ngEc","./TileLayer.js":"hkMV","../../TileState.js":"u3kG","../../ViewHint.js":"cuLW","../../render/canvas/hitdetect.js":"MrCe","../../transform.js":"P4eA","../../extent.js":"QDir","../vector.js":"UCah","../../util.js":"KniQ","../../size.js":"TAHd","../../coordinate.js":"nGsj"}],"zOJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./BaseVector.js")),t=o(require("../renderer/canvas/VectorTileLayer.js")),r=o(require("./TileProperty.js")),n=require("../asserts.js");function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=a(e,"string");return"symbol"===u(t)?t:String(t)}function a(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=p(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=h();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(o){y(c,e.default);var u=b(c);function c(e){var t;i(this,c),e=e||{};var r=Object.assign({},e);delete r.preload,delete r.useInterimTilesOnError,(t=u.call(this,r)).on,t.once,t.un;var o=e.renderMode||"hybrid";return(0,n.assert)("hybrid"==o||"vector"==o,28),t.renderMode_=o,t.setPreload(e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t.getBackground,t.setBackground,t}return l(c,[{key:"createRenderer",value:function(){return new t.default(this)}},{key:"getFeatures",value:function(e){return s(g(c.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderMode",value:function(){return this.renderMode_}},{key:"getPreload",value:function(){return this.get(r.default.PRELOAD)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(r.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setPreload",value:function(e){this.set(r.default.PRELOAD,e)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(r.default.USE_INTERIM_TILES_ON_ERROR,e)}}]),c}(),_=m;exports.default=_;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorTileLayer.js":"UST7","./TileProperty.js":"M5pz","../asserts.js":"fLG6"}],"A6uo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.defaultLoadFunction=L;var e=p(require("../events/EventType.js")),t=p(require("../VectorTile.js")),r=p(require("../TileCache.js")),i=p(require("../tilegrid/TileGrid.js")),o=p(require("../TileState.js")),n=p(require("./UrlTile.js")),l=p(require("../VectorRenderTile.js")),u=require("../tilegrid/common.js"),a=require("../extent.js"),c=require("../tilegrid.js"),s=require("../tilecoord.js"),f=require("../obj.js"),d=require("../featureloader.js"),h=require("../size.js");function p(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,b(i.key),i)}}function T(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){var t=m(e,"string");return"symbol"===g(t)?t:String(t)}function m(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==g(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function C(){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=E(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=F();return function(){var r,i=P(e);if(t){var o=P(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(d){j(g,n.default);var p=O(g);function g(e){var i;y(this,g);var o=e.projection||"EPSG:3857",n=e.extent||(0,c.extentFromProjection)(o),l=e.tileGrid||(0,c.createXYZ)({extent:n,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(i=p.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:o,state:e.state,tileGrid:l,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:L,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})).format_=e.format?e.format:null,i.sourceTileCache=new r.default(i.tileCache.highWaterMark),i.overlaps_=null==e.overlaps||e.overlaps,i.tileClass=e.tileClass?e.tileClass:t.default,i.tileGrids_={},i}return T(g,[{key:"getFeaturesInExtent",value:function(e){var t=[],r=this.tileCache;if(0===r.getCount())return t;var i=(0,s.fromKey)(r.peekFirstKey())[0],n=this.tileGrid;return r.forEach(function(r){if(r.tileCoord[0]===i&&r.getState()===o.default.LOADED)for(var l=r.getSourceTiles(),u=0,c=l.length;u<c;++u){var s=l[u],f=s.tileCoord;if((0,a.intersects)(e,n.getTileCoordExtent(f))){var d=s.getFeatures();if(d)for(var h=0,p=d.length;h<p;++h){var g=d[h],y=g.getGeometry();(0,a.intersects)(e,y.getExtent())&&t.push(g)}}}}),t}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"clear",value:function(){this.tileCache.clear(),this.sourceTileCache.clear()}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e),i=Object.keys(t).reduce(function(e,t){var i=(0,s.getCacheKeyForTileKey)(t),o=r.peek(i);if(o)for(var n=o.sourceTiles,l=0,u=n.length;l<u;++l)e[n[l].getKey()]=!0;return e},{});C(P(g.prototype),"expireCache",this).call(this,e,t),this.sourceTileCache.expireCache(i)}},{key:"getSourceTiles",value:function(t,r,i){var n=this;if(i.getState()===o.default.IDLE){i.setState(o.default.LOADING);var l=i.wrappedTileCoord,u=this.getTileGridForProjection(r),c=u.getTileCoordExtent(l),s=l[0],d=u.getResolution(s);(0,a.buffer)(c,-d,c);var h=this.tileGrid,p=h.getExtent();p&&(0,a.getIntersection)(c,p,c);var g=h.getZForResolution(d,this.zDirection);h.forEachTileCoord(c,g,function(l){var u=n.tileUrlFunction(l,t,r),a=n.sourceTileCache.containsKey(u)?n.sourceTileCache.get(u):new n.tileClass(l,u?o.default.IDLE:o.default.EMPTY,u,n.format_,n.tileLoadFunction);i.sourceTiles.push(a);var c=a.getState();if(c<o.default.LOADED){a.addEventListener(e.default.CHANGE,function t(r){n.handleTileChange(r);var l=a.getState();if(l===o.default.LOADED||l===o.default.ERROR){var u=a.getKey();u in i.errorTileKeys?a.getState()===o.default.LOADED&&delete i.errorTileKeys[u]:i.loadingSourceTiles--,l===o.default.ERROR?i.errorTileKeys[u]=!0:a.removeEventListener(e.default.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,f.isEmpty)(i.errorTileKeys)?o.default.LOADED:o.default.ERROR)}}),i.loadingSourceTiles++}c===o.default.IDLE&&(a.extent=h.getTileCoordExtent(l),a.projection=r,a.resolution=h.getResolution(l[0]),n.sourceTileCache.set(u,a),a.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(function(e){return e.getState()===o.default.ERROR})?o.default.ERROR:o.default.LOADED)}return i.sourceTiles}},{key:"getTile",value:function(e,t,r,i,n){var u,c=this,f=(0,s.getKeyZXY)(e,t,r),d=this.getKey();if(this.tileCache.containsKey(f)&&(u=this.tileCache.get(f)).key===d)return u;var h=[e,t,r],p=this.getTileCoordForTileUrlFunction(h,n),g=this.getTileGrid().getExtent(),y=this.getTileGridForProjection(n);if(p&&g){var v=y.getTileCoordExtent(p);(0,a.buffer)(v,-y.getResolution(e),v),(0,a.intersects)(g,v)||(p=null)}var T=!0;if(null!==p){var b=this.tileGrid,m=y.getResolution(e),C=b.getZForResolution(m,1),E=y.getTileCoordExtent(p);(0,a.buffer)(E,-m,E),b.forEachTileCoord(E,C,function(e){T=T&&!c.tileUrlFunction(e,i,n)})}var j=new l.default(h,T?o.default.EMPTY:o.default.IDLE,p,this.getSourceTiles.bind(this,i,n));return j.key=d,u?(j.interimTile=u,j.refreshInterimChain(),this.tileCache.replace(f,j)):this.tileCache.set(f,j),j}},{key:"getTileGridForProjection",value:function(e){var t=e.getCode(),r=this.tileGrids_[t];if(!r){for(var o=this.tileGrid,n=o.getResolutions().slice(),l=n.map(function(e,t){return o.getOrigin(t)}),a=n.map(function(e,t){return o.getTileSize(t)}),c=u.DEFAULT_MAX_ZOOM+1,s=n.length;s<c;++s)n.push(n[s-1]/2),l.push(l[s-1]),a.push(a[s-1]);r=new i.default({extent:o.getExtent(),origins:l,resolutions:n,tileSizes:a}),this.tileGrids_[t]=r}return r}},{key:"getTilePixelRatio",value:function(e){return e}},{key:"getTilePixelSize",value:function(e,t,r){var i=this.getTileGridForProjection(r),o=(0,h.toSize)(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}},{key:"updateCacheSize",value:function(e,t){C(P(g.prototype),"updateCacheSize",this).call(this,2*e,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}]),g}(),D=w;function L(e,t){e.setLoader(function(r,i,o){(0,d.loadFeaturesXhr)(t,e.getFormat(),r,i,o,e.onLoad.bind(e),e.onError.bind(e))})}exports.default=D;
},{"../events/EventType.js":"C8cu","../VectorTile.js":"yj80","../TileCache.js":"YFDe","../tilegrid/TileGrid.js":"dpZ6","../TileState.js":"u3kG","./UrlTile.js":"uv9E","../VectorRenderTile.js":"C8Du","../tilegrid/common.js":"mOEX","../extent.js":"QDir","../tilegrid.js":"ExRx","../tilecoord.js":"faTr","../obj.js":"mH6q","../featureloader.js":"U3JP","../size.js":"TAHd"}],"RA7M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Feature.js")),t=require("../util.js");function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)}function a(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=p();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(r){f(u,e.default);var n=s(u);function u(){return o(this,u),n.call(this)}return i(u,[{key:"getType",value:function(){return"json"}},{key:"readFeature",value:function(e,t){return this.readFeatureFromObject(O(e),this.getReadOptions(e,t))}},{key:"readFeatures",value:function(e,t){return this.readFeaturesFromObject(O(e),this.getReadOptions(e,t))}},{key:"readFeatureFromObject",value:function(e,r){return(0,t.abstract)()}},{key:"readFeaturesFromObject",value:function(e,r){return(0,t.abstract)()}},{key:"readGeometry",value:function(e,t){return this.readGeometryFromObject(O(e),this.getReadOptions(e,t))}},{key:"readGeometryFromObject",value:function(e,r){return(0,t.abstract)()}},{key:"readProjection",value:function(e){return this.readProjectionFromObject(O(e))}},{key:"readProjectionFromObject",value:function(e){return(0,t.abstract)()}},{key:"writeFeature",value:function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}},{key:"writeFeatureObject",value:function(e,r){return(0,t.abstract)()}},{key:"writeFeatures",value:function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}},{key:"writeFeaturesObject",value:function(e,r){return(0,t.abstract)()}},{key:"writeGeometry",value:function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}},{key:"writeGeometryObject",value:function(e,r){return(0,t.abstract)()}}]),u}();function O(e){if("string"==typeof e){var t=JSON.parse(e);return t||null}return null!==e?e:null}var j=d;exports.default=j;
},{"./Feature.js":"Kylu","../util.js":"KniQ"}],"qBlb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../Feature.js")),t=p(require("../geom/GeometryCollection.js")),r=p(require("./JSONFeature.js")),o=p(require("../geom/LineString.js")),n=p(require("../geom/MultiLineString.js")),i=p(require("../geom/MultiPoint.js")),u=p(require("../geom/MultiPolygon.js")),a=p(require("../geom/Point.js")),c=p(require("../geom/Polygon.js")),s=require("../asserts.js"),l=require("../proj.js"),f=require("../obj.js"),y=require("./Feature.js");function p(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,j(o.key),o)}}function b(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e){var t=v(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=F();return function(){var r,o=G(e);if(t){var n=G(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(t){P(n,r.default);var o=O(n);function n(e){var t;return m(this,n),e=e||{},(t=o.call(this)).dataProjection=(0,l.get)(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(t.defaultFeatureProjection=(0,l.get)(e.featureProjection)),t.geometryName_=e.geometryName,t.extractGeometryName_=e.extractGeometryName,t.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],t}return b(n,[{key:"readFeatureFromObject",value:function(t,r){var o=null,n=_((o="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,r),i=new e.default;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&i.setGeometryName(o.geometry_name),i.setGeometry(n),"id"in o&&i.setId(o.id),o.properties&&i.setProperties(o.properties,!0),i}},{key:"readFeaturesFromObject",value:function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,i=o.length;n<i;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r}},{key:"readGeometryFromObject",value:function(e,t){return _(e,t)}},{key:"readProjectionFromObject",value:function(e){var t,r=e.crs;return r?"name"==r.type?t=(0,l.get)(r.properties.name):"EPSG"===r.type?t=(0,l.get)("EPSG:"+r.properties.code):(0,s.assert)(!1,36):t=this.dataProjection,t}},{key:"writeFeatureObject",value:function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(r.id=o),!e.hasProperties())return r;var n=e.getProperties(),i=e.getGeometry();return i&&(r.geometry=R(i,t),delete n[e.getGeometryName()]),(0,f.isEmpty)(n)||(r.properties=n),r}},{key:"writeFeaturesObject",value:function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}}},{key:"writeGeometryObject",value:function(e,t){return R(e,this.adaptOptions(t))}}]),n}();function _(e,t){if(!e)return null;var r;switch(e.type){case"Point":r=M(e);break;case"LineString":r=q(e);break;case"Polygon":r=L(e);break;case"MultiPoint":r=E(e);break;case"MultiLineString":r=N(e);break;case"MultiPolygon":r=x(e);break;case"GeometryCollection":r=C(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,y.transformGeometryWithOptions)(r,!1,t)}function C(e,r){var o=e.geometries.map(function(e){return _(e,r)});return new t.default(o)}function M(e){return new a.default(e.coordinates)}function q(e){return new o.default(e.coordinates)}function N(e){return new n.default(e.coordinates)}function E(e){return new i.default(e.coordinates)}function x(e){return new u.default(e.coordinates)}function L(e){return new c.default(e.coordinates)}function R(e,t){var r,o=(e=(0,y.transformGeometryWithOptions)(e,!0,t)).getType();switch(o){case"Point":r=U(e,t);break;case"LineString":r=B(e,t);break;case"Polygon":r=W(e,t);break;case"MultiPoint":r=I(e,t);break;case"MultiLineString":r=H(e,t);break;case"MultiPolygon":r=J(e,t);break;case"GeometryCollection":r=T(e,t);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o)}return r}function T(e,t){return delete(t=Object.assign({},t)).featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){return R(e,t)})}}function B(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function H(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function I(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function J(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function U(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function W(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var A=S;exports.default=A;
},{"../Feature.js":"mYW9","../geom/GeometryCollection.js":"HvLT","./JSONFeature.js":"RA7M","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","../asserts.js":"fLG6","../proj.js":"Diht","../obj.js":"mH6q","./Feature.js":"Kylu"}],"rc7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=s(require("../events/EventType.js")),r=s(require("../ImageBase.js")),n=s(require("../ImageState.js")),o=s(require("./Triangulation.js")),i=require("../reproj.js"),u=require("../extent.js"),a=require("../events.js");function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=h(t,"string");return"symbol"===c(e)?e:String(e)}function h(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=_(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=O();return function(){var r,n=E(t);if(e){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(s){d(f,r.default);var c=b(f);function f(e,r,a,s,p,y,h){var g;l(this,f);var _=e.getExtent();_&&e.canWrapX()&&((_=_.slice())[0]=-1/0,_[2]=1/0);var d=r.getExtent();d&&r.canWrapX()&&((d=d.slice())[0]=-1/0,d[2]=1/0);var v=d?(0,u.getIntersection)(a,d):a,b=(0,u.getCenter)(v),m=(0,i.calculateSourceResolution)(e,r,b,s),j=t.ERROR_THRESHOLD,O=new o.default(e,r,v,_,m*j,s),E=O.calculateSourceExtent(),R=(0,u.isEmpty)(E)?null:y(E,m,p),x=R?n.default.IDLE:n.default.EMPTY,P=R?R.getPixelRatio():1;return(g=c.call(this,a,s,P,x)).targetProj_=r,g.maxSourceExtent_=_,g.triangulation_=O,g.targetResolution_=s,g.targetExtent_=a,g.sourceImage_=R,g.sourcePixelRatio_=P,g.interpolate_=h,g.canvas_=null,g.sourceListenerKey_=null,g}return p(f,[{key:"disposeInternal",value:function(){this.state==n.default.LOADING&&this.unlistenSource_(),g(E(f.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"getProjection",value:function(){return this.targetProj_}},{key:"reproject_",value:function(){var t=this.sourceImage_.getState();if(t==n.default.LOADED){var e=(0,u.getWidth)(this.targetExtent_)/this.targetResolution_,r=(0,u.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,i.render)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}},{key:"load",value:function(){if(this.state==n.default.IDLE){this.state=n.default.LOADING,this.changed();var t=this.sourceImage_.getState();t==n.default.LOADED||t==n.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,a.listen)(this.sourceImage_,e.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=n.default.LOADED&&e!=n.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}},{key:"unlistenSource_",value:function(){(0,a.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null}}]),f}(),x=R;exports.default=x;
},{"./common.js":"fF5X","../events/EventType.js":"C8cu","../ImageBase.js":"Ojbp","../ImageState.js":"u3kG","./Triangulation.js":"BiRY","../reproj.js":"U255","../extent.js":"QDir","../events.js":"UqnM"}],"XHvt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ImageSourceEventType=exports.ImageSourceEvent=void 0,exports.defaultImageLoadFunction=E;var e=s(require("../events/Event.js")),t=s(require("../ImageState.js")),r=s(require("../reproj/Image.js")),n=s(require("./Source.js")),o=require("../util.js"),i=require("../extent.js"),u=require("../proj.js"),a=require("../array.js");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=d(e,"string");return"symbol"===c(t)?t:String(t)}function d(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=j();return function(){var r,n=I(e);if(t){var o=I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};exports.ImageSourceEventType=_;var O=function(t){v(n,e.default);var r=h(n);function n(e,t){var o;return g(this,n),(o=r.call(this,e)).image=t,o}return f(n)}();exports.ImageSourceEvent=O;var R=function(e){v(c,n.default);var s=h(c);function c(e){var t;return g(this,c),(t=s.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate})).on,t.once,t.un,t.resolutions_=void 0!==e.resolutions?e.resolutions:null,t.reprojectedImage_=null,t.reprojectedRevision_=0,t}return f(c,[{key:"getResolutions",value:function(){return this.resolutions_}},{key:"setResolutions",value:function(e){this.resolutions_=e}},{key:"findNearestResolution",value:function(e){var t=this.getResolutions();t&&(e=t[(0,a.linearFindNearest)(t,e,0)]);return e}},{key:"getImage",value:function(e,t,n,o){var a=this,s=this.getProjection();if(!s||!o||(0,u.equivalent)(s,o))return s&&(o=s),this.getImageInternal(e,t,n,o);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,u.equivalent)(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==t&&(0,i.equals)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new r.default(s,o,e,t,n,function(e,t,r){return a.getImageInternal(e,t,r,s)},this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}},{key:"getImageInternal",value:function(e,t,r,n){return(0,o.abstract)()}},{key:"handleImageChange",value:function(e){var r,n=e.target;switch(n.getState()){case t.default.LOADING:this.loading=!0,r=_.IMAGELOADSTART;break;case t.default.LOADED:this.loading=!1,r=_.IMAGELOADEND;break;case t.default.ERROR:this.loading=!1,r=_.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new O(r,n))}}]),c}();function E(e,t){e.getImage().src=t}var S=R;exports.default=S;
},{"../events/Event.js":"fKNg","../ImageState.js":"u3kG","../reproj/Image.js":"rc7I","./Source.js":"H38a","../util.js":"KniQ","../extent.js":"QDir","../proj.js":"Diht","../array.js":"luEr"}],"w95b":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.RasterSourceEvent=exports.Processor=void 0,exports.newImageData=A;var t=v(require("../Disposable.js")),r=v(require("../events/Event.js")),n=v(require("../events/EventType.js")),a=v(require("../ImageCanvas.js")),i=v(require("../layer/Image.js")),o=v(require("./Image.js")),s=v(require("./Source.js")),u=v(require("../layer/Tile.js")),l=v(require("../TileQueue.js")),f=v(require("./Tile.js")),c=require("../dom.js"),h=require("../transform.js"),d=require("../extent.js"),p=require("../util.js");function v(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=m(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function w(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){var t=O(e,"string");return"symbol"===g(t)?t:String(t)}function O(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=C();return function(){var r,n=I(e);if(t){var a=I(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E,T=!0;try{new ImageData(10,10)}catch(G){T=!1}function A(e,t,r){if(T)return new ImageData(e,t,r);E||(E=document.createElement("canvas").getContext("2d"));var n=E.createImageData(t,r);return n.data.set(e),n}function P(e){var t=!0;try{new ImageData(10,10)}catch(G){t=!1}function r(e,r,n){return t?new ImageData(e,r,n):{data:e,width:r,height:n}}return function(t){var n=t.buffers,a=t.meta,i=t.imageOps,o=t.width,s=t.height,u=n.length,l=n[0].byteLength;if(i){for(var f=new Array(u),c=0;c<u;++c)f[c]=r(new Uint8ClampedArray(n[c]),o,s);return e(f,a).data.buffer}for(var h=new Uint8ClampedArray(l),d=new Array(u),p=new Array(u),v=0;v<u;++v)d[v]=new Uint8ClampedArray(n[v]),p[v]=[0,0,0,0];for(var g=0;g<l;g+=4){for(var _=0;_<u;++_){var m=d[_];p[_][0]=m[g],p[_][1]=m[g+1],p[_][2]=m[g+2],p[_][3]=m[g+3]}var y=e(p,a);h[g]=y[0],h[g+1]=y[1],h[g+2]=y[2],h[g+3]=y[3]}return h.buffer}}function F(t,r){var n=Object.keys(t.lib||{}).map(function(e){return"const "+e+" = "+t.lib[e].toString()+";"}).concat(["const __minion__ = ("+P.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),a=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+e.from(n.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return a.addEventListener("message",r),a}function L(e,t){var r=P(e.operation),n=!1;return{postMessage:function(e){setTimeout(function(){n||t({data:{buffer:r(e),meta:e.meta}})},0)},terminate:function(){n=!0}}}var M=function(e){j(n,t.default);var r=R(n);function n(e){var t,a;y(this,n),(t=r.call(this))._imageOps=!!e.imageOps,a=0===e.threads?0:t._imageOps?1:e.threads||1;var i=new Array(a);if(a)for(var o=0;o<a;++o)i[o]=F(e,t._onWorkerMessage.bind(q(t),o));else i[0]=L(e,t._onWorkerMessage.bind(q(t),0));return t._workers=i,t._queue=[],t._maxQueueLength=e.queue||1/0,t._running=0,t._dataLookup={},t._job=null,t}return w(n,[{key:"process",value:function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()}},{key:"_enqueue",value:function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}},{key:"_dispatch",value:function(){if(!this._running&&0!==this._queue.length){var e=this._queue.shift();this._job=e;var t=e.inputs[0].width,r=e.inputs[0].height,n=e.inputs.map(function(e){return e.data.buffer}),a=this._workers.length;if(this._running=a,1!==a)for(var i=e.inputs[0].data.length,o=4*Math.ceil(i/4/a),s=0;s<a;++s){for(var u=s*o,l=[],f=0,c=n.length;f<c;++f)l.push(n[f].slice(u,u+o));this._workers[s].postMessage({buffers:l,meta:e.meta,imageOps:this._imageOps,width:t,height:r},l)}else this._workers[0].postMessage({buffers:n,meta:e.meta,imageOps:this._imageOps,width:t,height:r},n)}}},{key:"_onWorkerMessage",value:function(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())}},{key:"_resolveJob",value:function(){var e,t,r=this._job,n=this._workers.length;if(1===n)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var a=r.inputs[0].data.length;e=new Uint8ClampedArray(a),t=new Array(n);for(var i=4*Math.ceil(a/4/n),o=0;o<n;++o){var s=this._dataLookup[o].buffer,u=o*i;e.set(new Uint8ClampedArray(s),u),t[o]=this._dataLookup[o].meta}}this._job=null,this._dataLookup={},r.callback(null,A(e,r.inputs[0].width,r.inputs[0].height),t),this._dispatch()}},{key:"disposeInternal",value:function(){for(var e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}]),n}();exports.Processor=M;var D={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"},U=function(e){j(n,r.default);var t=R(n);function n(e,r,a){var i;return y(this,n),(i=t.call(this,e)).extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=a,i}return w(n)}();exports.RasterSourceEvent=U;var z=function(e){j(r,o.default);var t=R(r);function r(e){var a;y(this,r),(a=t.call(this,{projection:null})).on,a.once,a.un,a.processor_=null,a.operationType_=void 0!==e.operationType?e.operationType:"pixel",a.threads_=void 0!==e.threads?e.threads:1,a.layers_=Q(e.sources);for(var i=a.changed.bind(q(a)),o=0,u=a.layers_.length;o<u;++o)a.layers_[o].addEventListener(n.default.CHANGE,i);return a.useResolutions_=null!==e.resolutions,a.tileQueue_=new l.default(function(){return 1},a.processSources_.bind(q(a))),a.requestedFrameState_,a.renderedImageCanvas_=null,a.renderedRevision_,a.frameState_={animate:!1,coordinateToPixelTransform:(0,h.create)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:N(a.layers_),pixelRatio:1,pixelToCoordinateTransform:(0,h.create)(),postRenderFunctions:[],size:[0,0],tileQueue:a.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,p.getUid)(q(a)),renderTargets:{}},a.setAttributions(function(t){for(var r=[],n=0,a=e.sources.length;n<a;++n){var i=e.sources[n],o=i instanceof s.default?i:i.getSource();if(o){var u=o.getAttributions();if("function"==typeof u){var l=u(t);r.push.apply(r,l)}}}return 0!==r.length?r:null}),void 0!==e.operation&&a.setOperation(e.operation,e.lib),a}return w(r,[{key:"setOperation",value:function(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new M({operation:e,imageOps:"image"===this.operationType_,queue:1,lib:t,threads:this.threads_}),this.changed()}},{key:"updateFrameState_",value:function(e,t,r){var n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);var a=(0,d.getCenter)(e);n.size[0]=Math.ceil((0,d.getWidth)(e)/t),n.size[1]=Math.ceil((0,d.getHeight)(e)/t),n.extent=[a[0]-n.size[0]*t/2,a[1]-n.size[1]*t/2,a[0]+n.size[0]*t/2,a[1]+n.size[1]*t/2],n.time=Date.now();var i=n.viewState;return i.center=a,i.projection=r,i.resolution=t,n}},{key:"allSourcesReady_",value:function(){for(var e,t=!0,r=0,n=this.layers_.length;r<n;++r)if(!(e=this.layers_[r].getSource())||"ready"!==e.getState()){t=!1;break}return t}},{key:"getImage",value:function(e,t,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);var a=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=a,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();t===i&&(0,d.equals)(a.extent,o)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),a.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}},{key:"processSources_",value:function(){for(var e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t),n=0;n<t;++n){e.layerIndex=n,e.renderTargets={};var a=B(this.layers_[n],e);if(!a)return;r[n]=a}var i={};this.dispatchEvent(new U(D.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}},{key:"onWorkerComplete_",value:function(e,t,r,n){if(!t&&r){var i=e.extent,o=e.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&(0,d.equals)(i,this.requestedFrameState_.extent)){var s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else{var u=Math.round((0,d.getWidth)(i)/o),l=Math.round((0,d.getHeight)(i)/o);s=(0,c.createCanvasContext2D)(u,l),this.renderedImageCanvas_=new a.default(i,o,1,s.canvas)}s.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new U(D.AFTEROPERATIONS,e,n))}}}},{key:"getResolutions",value:function(e){if(!this.useResolutions_)return null;var t=_(I(r.prototype),"getResolutions",this).call(this);if(!t)for(var n=0,a=this.layers_.length;n<a;++n){if(t=this.layers_[n].getSource().getResolutions(e))break}return t}},{key:"disposeInternal",value:function(){this.processor_&&this.processor_.dispose(),_(I(r.prototype),"disposeInternal",this).call(this)}}]),r}();z.prototype.dispose;var W=null;function B(e,t){var r=e.getRenderer();if(!r)throw new Error("Unsupported layer type: "+e);if(!r.prepareFrame(t))return null;var n=t.size[0],a=t.size[1];if(0===n||0===a)return null;var i,o=r.renderFrame(t,null);if(o instanceof HTMLCanvasElement)i=o;else{if(o&&(i=o.firstElementChild),!(i instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+i);if(i.width===n&&i.height===a)return i.getContext("2d").getImageData(0,0,n,a)}if(W){var s=W.canvas;s.width!==n||s.height!==a?W=(0,c.createCanvasContext2D)(n,a,void 0,{willReadFrequently:!0}):W.clearRect(0,0,n,a)}else W=(0,c.createCanvasContext2D)(n,a,void 0,{willReadFrequently:!0});return W.drawImage(i,0,0,n,a),W.getImageData(0,0,n,a)}function N(e){return e.map(function(e){return e.getLayerState()})}function Q(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=H(e[n]);return r}function H(e){var t;return e instanceof s.default?e instanceof f.default?t=new u.default({source:e}):e instanceof o.default&&(t=new i.default({source:e})):t=e,t}var J=z;exports.default=J;
},{"../Disposable.js":"DDda","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../ImageCanvas.js":"K7j2","../layer/Image.js":"KHBf","./Image.js":"XHvt","./Source.js":"H38a","../layer/Tile.js":"BUEc","../TileQueue.js":"tHOl","./Tile.js":"JECm","../dom.js":"Xno5","../transform.js":"P4eA","../extent.js":"QDir","../util.js":"KniQ","buffer":"aMB2"}],"SU9K":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResponseError=exports.ClientError=void 0,exports.getJSON=g,exports.jsonp=h,exports.overrideXHR=j,exports.resolveUrl=R,exports.restoreXHR=x;var t=require("./util.js");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var t=u(e,"string");return"symbol"===r(t)?t:String(t)}function u(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function a(e){var t=d();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!v(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,m(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function y(e,t,r){return(y=d()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&b(o,r.prototype),o}).apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,r,n,o){var i=document.createElement("script"),u="olc_"+(0,t.getUid)(r);function c(){delete window[u],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(e.includes("?")?"&":"?")+(o||"callback")+"="+u;var s=setTimeout(function(){c(),n&&n()},1e4);window[u]=function(e){clearTimeout(s),c(),r(e)},document.head.appendChild(i)}var w=function(e){s(r,l(Error));var t=a(r);function r(e){var n;c(this,r);var o="Unexpected response status: "+e.status;return(n=t.call(this,o)).name="ResponseError",n.response=e,n}return o(r)}();exports.ResponseError=w;var O,E=function(e){s(r,l(Error));var t=a(r);function r(e){var n;return c(this,r),(n=t.call(this,"Failed to issue request")).name="ClientError",n.client=e,n}return o(r)}();function g(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.addEventListener("load",function(e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var o;try{o=JSON.parse(n.responseText)}catch(u){var i="Error parsing response text as JSON: "+u.message;return void r(new Error(i))}t(o)}else r(new w(n))}),n.addEventListener("error",function(e){r(new E(e.target))}),n.open("GET",e),n.setRequestHeader("Accept","application/json"),n.send()})}function R(e,t){return t.includes("://")?t:new URL(t,e).href}function j(t){"undefined"!=typeof XMLHttpRequest&&(O=XMLHttpRequest),e.XMLHttpRequest=t}function x(){e.XMLHttpRequest=O}exports.ClientError=E;
},{"./util.js":"KniQ"}],"V9RY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./TileImage.js")),t=require("../extent.js"),r=require("../asserts.js"),n=require("../tileurlfunction.js"),o=require("../tilegrid.js"),i=require("../proj.js"),u=require("../net.js");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=d(e,"string");return"symbol"===l(t)?t:String(t)}function d(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=m();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(s){y(c,e.default);var l=h(c);function c(e){var t;if(a(this,c),(t=l.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:(0,i.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).tileJSON_=null,t.tileSize_=e.tileSize,e.url)if(e.jsonp)(0,u.jsonp)(e.url,t.handleTileJSONResponse.bind(S(t)),t.handleTileJSONError.bind(S(t)));else{var n=new XMLHttpRequest;n.addEventListener("load",t.onXHRLoad_.bind(S(t))),n.addEventListener("error",t.onXHRError_.bind(S(t))),n.open("GET",e.url),n.send()}else e.tileJSON?t.handleTileJSONResponse(e.tileJSON):(0,r.assert)(!1,51);return t}return f(c,[{key:"onXHRLoad_",value:function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var r;try{r=JSON.parse(t.responseText)}catch(n){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(e){this.handleTileJSONError()}},{key:"getTileJSON",value:function(){return this.tileJSON_}},{key:"handleTileJSONResponse",value:function(e){var r,u=(0,i.get)("EPSG:4326"),s=this.getProjection();if(void 0!==e.bounds){var l=(0,i.getTransformFromProjections)(u,s);r=(0,t.applyTransform)(e.bounds,l)}var a=(0,o.extentFromProjection)(s),c=e.minzoom||0,f=e.maxzoom||22,p=(0,o.createXYZ)({extent:a,maxZoom:f,minZoom:c,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=(0,n.createFromTemplates)(e.tiles,p),e.attribution&&!this.getAttributions()){var d=void 0!==r?r:a;this.setAttributions(function(r){return(0,t.intersects)(d,r.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}},{key:"handleTileJSONError",value:function(){this.setState("error")}}]),c}(),T=j;exports.default=T;
},{"./TileImage.js":"udAI","../extent.js":"QDir","../asserts.js":"fLG6","../tileurlfunction.js":"p1vZ","../tilegrid.js":"ExRx","../proj.js":"Diht","../net.js":"SU9K"}],"CreQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addMapboxLayer=si,exports.default=exports.apply=Aa,exports.applyBackground=ya,exports.applyStyle=fa,exports.getFeatureState=ii,exports.getLayer=ti,exports.getLayers=ri,exports.getMapboxLayer=oi,exports.getSource=ni,exports.getStyleForLayer=Gi,exports.recordStyleLayer=Ri,exports.removeMapboxLayer=li,exports.renderTransparent=Pi,exports.setFeatureState=ai,exports.stylefunction=Ui,exports.updateMapboxLayer=ui;var e=A(require("ol/style/Circle.js")),t=A(require("ol/style/Fill.js")),r=A(require("ol/style/Icon.js")),n=A(require("ol/render/Feature.js")),a=A(require("ol/style/Stroke.js")),i=A(require("ol/style/Style.js")),o=A(require("ol/style/Text.js")),s=require("ol/render/canvas.js"),u=require("ol/tileurlfunction.js"),l=A(require("ol/format/GeoJSON.js")),p=A(require("ol/layer/Image.js")),f=A(require("ol/layer/Layer.js")),c=A(require("ol/layer/Group.js")),d=A(require("ol/format/MVT.js")),y=A(require("ol/Map.js")),m=A(require("ol/source/Raster.js")),h=A(require("ol/source/Source.js")),v=A(require("ol/tilegrid/TileGrid.js")),g=A(require("ol/source/TileJSON.js")),b=A(require("ol/layer/Tile.js")),x=A(require("ol/layer/Vector.js")),w=A(require("ol/source/Vector.js")),k=A(require("ol/layer/VectorTile.js")),z=T(require("ol/source/VectorTile.js")),M=A(require("ol/View.js")),S=require("ol/proj.js"),q=require("ol/loadingstrategy.js"),j=require("ol/tilegrid.js"),_=require("ol/extent.js"),E=require("ol/util.js");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function A(e){return e&&e.__esModule?e:{default:e}}function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P,D={},F={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function O(e){return(e=Math.round(e))<0?0:e>255?255:e}function L(e){return e<0?0:e>1?1:e}function R(e){return"%"===e[e.length-1]?O(parseFloat(e)/100*255):O(parseInt(e))}function N(e){return"%"===e[e.length-1]?L(parseFloat(e)/100):L(parseFloat(e))}function U(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function G(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in F)return F[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var n=r.indexOf("("),a=r.indexOf(")");if(-1!==n&&a+1===r.length){var i=r.substr(0,n),o=r.substr(n+1,a-(n+1)).split(","),s=1;switch(i){case"rgba":if(4!==o.length)return null;s=N(o.pop());case"rgb":return 3!==o.length?null:[R(o[0]),R(o[1]),R(o[2]),s];case"hsla":if(4!==o.length)return null;s=N(o.pop());case"hsl":if(3!==o.length)return null;var u=(parseFloat(o[0])%360+360)%360/360,l=N(o[1]),p=N(o[2]),f=p<=.5?p*(l+1):p+l-p*l,c=2*p-f;return[O(255*U(c,f,u+1/3)),O(255*U(c,f,u)),O(255*U(c,f,u-1/3)),s];default:return null}}return null}try{P=D.parseCSSColor=G}catch(Vi){}var V=function(e,t,r,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n};V.parse=function(e){if(e){if(e instanceof V)return e;if("string"==typeof e){var t=P(e);if(t)return new V(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},V.prototype.toString=function(){var e=this.toArray(),t=e[0],r=e[1],n=e[2],a=e[3];return"rgba("+Math.round(t)+","+Math.round(r)+","+Math.round(n)+","+a+")"},V.prototype.toArray=function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]},V.prototype.toArray01=function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[e/n,t/n,r/n,n]},V.prototype.toArray01PremultipliedAlpha=function(){return[this.r,this.g,this.b,this.a]},V.black=new V(0,0,0,1),V.white=new V(1,1,1,1),V.transparent=new V(0,0,0,0),V.red=new V(1,0,0,1),V.blue=new V(0,0,1,1);var W=V;function J(e){return"object"==typeof e?["literal",e]:e}function Z(e,t){var r=e.stops;if(!r)return $(e,t);var n=r&&"object"==typeof r[0][0],a=n||void 0!==e.property,i=n||!a;return r=r.map(function(e){return!a&&t.tokens&&"string"==typeof e[1]?[e[0],ne(e[1])]:[e[0],J(e[1])]}),n?X(e,t,r):i?Q(e,t,r):K(e,t,r)}function $(e,t){var r=["get",e.property];if(void 0===e.default)return"string"===t.type?["string",r]:r;if("enum"===t.type)return["match",r,Object.keys(t.values),r,e.default];var n=["color"===t.type?"to-color":t.type,r,J(e.default)];return"array"===t.type&&n.splice(1,0,t.value,t.length||null),n}function B(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function X(e,t,r){for(var n={},a={},i=[],o=0;o<r.length;o++){var s=r[o],u=s[0].zoom;void 0===n[u]&&(n[u]={zoom:u,type:e.type,property:e.property,default:e.default},a[u]=[],i.push(u)),a[u].push([s[0].value,s[1]])}if("exponential"===re({},t)){for(var l=[B(e),["linear"],["zoom"]],p=0,f=i;p<f.length;p+=1){var c=f[p];te(l,c,K(n[c],t,a[c]),!1)}return l}for(var d=["step",["zoom"]],y=0,m=i;y<m.length;y+=1){var h=m[y];te(d,h,K(n[h],t,a[h]),!0)}return ee(d),d}function H(e,t){return void 0!==e?e:void 0!==t?t:void 0}function Y(e,t){var r=J(H(e.default,t.default));return void 0===r&&"resolvedImage"===t.type?"":r}function K(e,t,r){var n=re(e,t),a=["get",e.property];if("categorical"===n&&"boolean"==typeof r[0][0]){for(var i=["case"],o=0,s=r;o<s.length;o+=1){var u=s[o];i.push(["==",a,u[0]],u[1])}return i.push(Y(e,t)),i}if("categorical"===n){for(var l=["match",a],p=0,f=r;p<f.length;p+=1){var c=f[p];te(l,c[0],c[1],!1)}return l.push(Y(e,t)),l}if("interval"===n){for(var d=["step",["number",a]],y=0,m=r;y<m.length;y+=1){var h=m[y];te(d,h[0],h[1],!0)}return ee(d),void 0===e.default?d:["case",["==",["typeof",a],"number"],d,J(e.default)]}if("exponential"===n){for(var v=void 0!==e.base?e.base:1,g=[B(e),1===v?["linear"]:["exponential",v],["number",a]],b=0,x=r;b<x.length;b+=1){var w=x[b];te(g,w[0],w[1],!1)}return void 0===e.default?g:["case",["==",["typeof",a],"number"],g,J(e.default)]}throw new Error("Unknown property function type "+n)}function Q(e,t,r,n){void 0===n&&(n=["zoom"]);var a,i=re(e,t),o=!1;if("interval"===i)a=["step",n],o=!0;else{if("exponential"!==i)throw new Error('Unknown zoom function type "'+i+'"');var s=void 0!==e.base?e.base:1;a=[B(e),1===s?["linear"]:["exponential",s],n]}for(var u=0,l=r;u<l.length;u+=1){var p=l[u];te(a,p[0],p[1],o)}return ee(a),a}function ee(e){"step"===e[0]&&3===e.length&&(e.push(0),e.push(e[3]))}function te(e,t,r,n){e.length>3&&t===e[e.length-2]||(n&&2===e.length||e.push(t),e.push(r))}function re(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function ne(e){for(var t=["concat"],r=/{([^{}]+)}/g,n=0,a=r.exec(e);null!==a;a=r.exec(e)){var i=e.slice(n,r.lastIndex-a[0].length);n=r.lastIndex,i.length>0&&t.push(i),t.push(["get",a[1]])}if(1===t.length)return e;if(n<e.length)t.push(e.slice(n));else if(2===t.length)return["to-string",t[1]];return t}var ae=function(e){function t(t,r){e.call(this,r),this.message=r,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ie=ae,oe=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,n=t;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];this.bindings[i]=o}};oe.prototype.concat=function(e){return new oe(this,e)},oe.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},oe.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var se=oe,ue={kind:"null"},le={kind:"number"},pe={kind:"string"},fe={kind:"boolean"},ce={kind:"color"},de={kind:"object"},ye={kind:"value"},me={kind:"error"},he={kind:"collator"},ve={kind:"formatted"},ge={kind:"resolvedImage"};function be(e,t){return{kind:"array",itemType:e,N:t}}function xe(e){if("array"===e.kind){var t=xe(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var we=[ue,le,pe,fe,ce,ve,de,be(ye),ge];function ke(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ke(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var r=0,n=we;r<n.length;r+=1){if(!ke(n[r],t))return null}}return"Expected "+xe(e)+" but found "+xe(t)+" instead."}function ze(e,t){return t.some(function(t){return t.kind===e.kind})}function Me(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e})}var Se=function(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Se.prototype.compare=function(e,t){return this.collator.compare(e,t)},Se.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var qe=Se,je=function(e,t,r,n,a){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=a},_e=function(e){this.sections=e};_e.fromString=function(e){return new _e([new je(e,null,null,null,null)])},_e.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},_e.factory=function(e){return e instanceof _e?e:_e.fromString(e)},_e.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")},_e.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];if(n.image)e.push(["image",n.image.name]);else{e.push(n.text);var a={};n.fontStack&&(a["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(a["font-scale"]=n.scale),n.textColor&&(a["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(a)}}return e};var Ee=_e,Ce=function(e){this.name=e.name,this.available=e.available};Ce.prototype.toString=function(){return this.name},Ce.fromString=function(e){return e?new Ce({name:e,available:!1}):null},Ce.prototype.serialize=function(){return["image",this.name]};var Te=Ce;function Ae(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[e,t,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ie(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof W)return!0;if(e instanceof qe)return!0;if(e instanceof Ee)return!0;if(e instanceof Te)return!0;if(Array.isArray(e)){for(var t=0,r=e;t<r.length;t+=1){if(!Ie(r[t]))return!1}return!0}if("object"==typeof e){for(var n in e)if(!Ie(e[n]))return!1;return!0}return!1}function Pe(e){if(null===e)return ue;if("string"==typeof e)return pe;if("boolean"==typeof e)return fe;if("number"==typeof e)return le;if(e instanceof W)return ce;if(e instanceof qe)return he;if(e instanceof Ee)return ve;if(e instanceof Te)return ge;if(Array.isArray(e)){for(var t,r=e.length,n=0,a=e;n<a.length;n+=1){var i=Pe(a[n]);if(t){if(t===i)continue;t=ye;break}t=i}return be(t||ye,r)}return de}function De(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof W||e instanceof Ee||e instanceof Te?e.toString():JSON.stringify(e)}var Fe=function(e,t){this.type=e,this.value=t};Fe.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Ie(e[1]))return t.error("invalid value");var r=e[1],n=Pe(r),a=t.expectedType;return"array"!==n.kind||0!==n.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(n=a),new Fe(n,r)},Fe.prototype.evaluate=function(){return this.value},Fe.prototype.eachChild=function(){},Fe.prototype.outputDefined=function(){return!0},Fe.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof W?["rgba"].concat(this.value.toArray()):this.value instanceof Ee?this.value.serialize():this.value};var Oe=Fe,Le=function(e){this.name="ExpressionEvaluationError",this.message=e};Le.prototype.toJSON=function(){return this.message};var Re=Le,Ne={string:pe,number:le,boolean:fe,object:de},Ue=function(e,t){this.type=e,this.args=t};Ue.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r,n=1,a=e[0];if("array"===a){var i,o;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in Ne)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ne[s],n++}else i=ye;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],n++}r=be(i,o)}else r=Ne[a];for(var u=[];n<e.length;n++){var l=t.parse(e[n],n,ye);if(!l)return null;u.push(l)}return new Ue(r,u)},Ue.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!ke(this.type,Pe(r)))return r;if(t===this.args.length-1)throw new Re("Expected value to be of type "+xe(this.type)+", but found "+xe(Pe(r))+" instead.")}return null},Ue.prototype.eachChild=function(e){this.args.forEach(e)},Ue.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ue.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var Ge=Ue,Ve=function(e){this.type=ve,this.sections=e};Ve.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");for(var n=[],a=!1,i=1;i<=e.length-1;++i){var o=e[i];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;var s=null;if(o["font-scale"]&&!(s=t.parse(o["font-scale"],1,le)))return null;var u=null;if(o["text-font"]&&!(u=t.parse(o["text-font"],1,be(pe))))return null;var l=null;if(o["text-color"]&&!(l=t.parse(o["text-color"],1,ce)))return null;var p=n[n.length-1];p.scale=s,p.font=u,p.textColor=l}else{var f=t.parse(e[i],1,ye);if(!f)return null;var c=f.type.kind;if("string"!==c&&"value"!==c&&"null"!==c&&"resolvedImage"!==c)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:f,scale:null,font:null,textColor:null})}}return new Ve(n)},Ve.prototype.evaluate=function(e){return new Ee(this.sections.map(function(t){var r=t.content.evaluate(e);return Pe(r)===ge?new je("",r,null,null,null):new je(De(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Ve.prototype.eachChild=function(e){for(var t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}},Ve.prototype.outputDefined=function(){return!1},Ve.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e.push(n.content.serialize());var a={};n.scale&&(a["font-scale"]=n.scale.serialize()),n.font&&(a["text-font"]=n.font.serialize()),n.textColor&&(a["text-color"]=n.textColor.serialize()),e.push(a)}return e};var We=Ve,Je=function(e){this.type=ge,this.input=e};Je.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,pe);return r?new Je(r):t.error("No image name provided.")},Je.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=Te.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r},Je.prototype.eachChild=function(e){e(this.input)},Je.prototype.outputDefined=function(){return!1},Je.prototype.serialize=function(){return["image",this.input.serialize()]};var Ze=Je,$e={"to-boolean":fe,"to-color":ce,"to-number":le,"to-string":pe},Be=function(e,t){this.type=e,this.args=t};Be.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");for(var n=$e[r],a=[],i=1;i<e.length;i++){var o=t.parse(e[i],i,ye);if(!o)return null;a.push(o)}return new Be(n,a)},Be.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,r,n=0,a=this.args;n<a.length;n+=1){if(r=null,(t=a[n].evaluate(e))instanceof W)return t;if("string"==typeof t){var i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Ae(t[0],t[1],t[2],t[3])))return new W(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Re(r||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(e)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new Re("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?Ee.fromString(De(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Te.fromString(De(this.args[0].evaluate(e))):De(this.args[0].evaluate(e))},Be.prototype.eachChild=function(e){this.args.forEach(e)},Be.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Be.prototype.serialize=function(){if("formatted"===this.type.kind)return new We([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ze(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Xe=Be,He=["Unknown","Point","LineString","Polygon"],Ye=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};Ye.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},Ye.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?He[this.feature.type]:this.feature.type:null},Ye.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ye.prototype.canonicalID=function(){return this.canonical},Ye.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ye.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,r=this.featureTileCoord,n=r.x,a=r.y,i=n*t-e[0],o=a*t-e[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*o}return 0},Ye.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=W.parse(e)),t};var Ke=Ye,Qe=function(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n};function et(e){return Array.isArray(e)?"("+e.map(xe).join(", ")+")":"("+xe(e.type)+"...)"}Qe.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Qe.prototype.eachChild=function(e){this.args.forEach(e)},Qe.prototype.outputDefined=function(){return!1},Qe.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Qe.parse=function(e,t){var r,n=e[0],a=Qe.definitions[n];if(!a)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(a)?a[0]:a.type,o=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,s=o.filter(function(t){var r=t[0];return!Array.isArray(r)||r.length===e.length-1}),u=null,l=0,p=s;l<p.length;l+=1){var f=p[l],c=f[0],d=f[1];u=new Ft(t.registry,t.path,null,t.scope);for(var y=[],m=!1,h=1;h<e.length;h++){var v=e[h],g=Array.isArray(c)?c[h-1]:c.type,b=u.parse(v,1+y.length,g);if(!b){m=!0;break}y.push(b)}if(!m)if(Array.isArray(c)&&c.length!==y.length)u.error("Expected "+c.length+" arguments, but found "+y.length+" instead.");else{for(var x=0;x<y.length;x++){var w=Array.isArray(c)?c[x]:c.type,k=y[x];u.concat(x+1).checkSubtype(w,k.type)}if(0===u.errors.length)return new Qe(n,i,d,y)}}if(1===s.length)(r=t.errors).push.apply(r,u.errors);else{for(var z=(s.length?s:o).map(function(e){return et(e[0])}).join(" | "),M=[],S=1;S<e.length;S++){var q=t.parse(e[S],1+M.length);if(!q)return null;M.push(xe(q.type))}t.error("Expected arguments of type "+z+", but found ("+M.join(", ")+") instead.")}return null},Qe.register=function(e,t){for(var r in Qe.definitions=t,t)e[r]=Qe};var tt=Qe,rt=function(e,t,r){this.type=he,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t};rt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");var n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,fe);if(!n)return null;var a=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,fe);if(!a)return null;var i=null;return r.locale&&!(i=t.parse(r.locale,1,pe))?null:new rt(n,a,i)},rt.prototype.evaluate=function(e){return new qe(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},rt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},rt.prototype.outputDefined=function(){return!1},rt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var nt=rt,at=8192;function it(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ot(e){return(180+e)/360}function st(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ut(e,t){return!(e[0]<=t[0])&&(!(e[2]>=t[2])&&(!(e[1]<=t[1])&&!(e[3]>=t[3])))}function lt(e,t){var r=ot(e[0]),n=st(e[1]),a=Math.pow(2,t.z);return[Math.round(r*a*at),Math.round(n*a*at)]}function pt(e,t,r){var n=e[0]-t[0],a=e[1]-t[1],i=e[0]-r[0],o=e[1]-r[1];return n*o-i*a==0&&n*i<=0&&a*o<=0}function ft(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function ct(e,t){for(var r=!1,n=0,a=t.length;n<a;n++)for(var i=t[n],o=0,s=i.length;o<s-1;o++){if(pt(e,i[o],i[o+1]))return!1;ft(e,i[o],i[o+1])&&(r=!r)}return r}function dt(e,t){for(var r=0;r<t.length;r++)if(ct(e,t[r]))return!0;return!1}function yt(e,t){return e[0]*t[1]-e[1]*t[0]}function mt(e,t,r,n){var a=e[0]-r[0],i=e[1]-r[1],o=t[0]-r[0],s=t[1]-r[1],u=n[0]-r[0],l=n[1]-r[1],p=a*l-u*i,f=o*l-u*s;return p>0&&f<0||p<0&&f>0}function ht(e,t,r,n){var a=[t[0]-e[0],t[1]-e[1]];return 0!==yt([n[0]-r[0],n[1]-r[1]],a)&&!(!mt(e,t,r,n)||!mt(r,n,e,t))}function vt(e,t,r){for(var n=0,a=r;n<a.length;n+=1)for(var i=a[n],o=0;o<i.length-1;++o)if(ht(e,t,i[o],i[o+1]))return!0;return!1}function gt(e,t){for(var r=0;r<e.length;++r)if(!ct(e[r],t))return!1;for(var n=0;n<e.length-1;++n)if(vt(e[n],e[n+1],t))return!1;return!0}function bt(e,t){for(var r=0;r<t.length;r++)if(gt(e,t[r]))return!0;return!1}function xt(e,t,r){for(var n=[],a=0;a<e.length;a++){for(var i=[],o=0;o<e[a].length;o++){var s=lt(e[a][o],r);it(t,s),i.push(s)}n.push(i)}return n}function wt(e,t,r){for(var n=[],a=0;a<e.length;a++){var i=xt(e[a],t,r);n.push(i)}return n}function kt(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){var a=.5*n,i=e[0]-r[0]>a?-n:r[0]-e[0]>a?n:0;0===i&&(i=e[0]-r[2]>a?-n:r[2]-e[0]>a?n:0),e[0]+=i}it(t,e)}function zt(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function Mt(e,t,r,n){var a=Math.pow(2,n.z)*at,i=[n.x*at,n.y*at],o=[];if(!e)return o;for(var s=0,u=e;s<u.length;s+=1)for(var l=0,p=u[s];l<p.length;l+=1){var f=p[l],c=[f.x+i[0],f.y+i[1]];kt(c,t,r,a),o.push(c)}return o}function St(e,t,r,n){var a=Math.pow(2,n.z)*at,i=[n.x*at,n.y*at],o=[];if(!e)return o;for(var s=0,u=e;s<u.length;s+=1){for(var l=[],p=0,f=u[s];p<f.length;p+=1){var c=f[p],d=[c.x+i[0],c.y+i[1]];it(t,d),l.push(d)}o.push(l)}if(t[2]-t[0]<=a/2){zt(t);for(var y=0,m=o;y<m.length;y+=1)for(var h=0,v=m[y];h<v.length;h+=1){kt(v[h],t,r,a)}}return o}function qt(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===t.type){var i=xt(t.coordinates,n,a),o=Mt(e.geometry(),r,n,a);if(!ut(r,n))return!1;for(var s=0,u=o;s<u.length;s+=1){if(!ct(u[s],i))return!1}}if("MultiPolygon"===t.type){var l=wt(t.coordinates,n,a),p=Mt(e.geometry(),r,n,a);if(!ut(r,n))return!1;for(var f=0,c=p;f<c.length;f+=1){if(!dt(c[f],l))return!1}}return!0}function jt(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===t.type){var i=xt(t.coordinates,n,a),o=St(e.geometry(),r,n,a);if(!ut(r,n))return!1;for(var s=0,u=o;s<u.length;s+=1){if(!gt(u[s],i))return!1}}if("MultiPolygon"===t.type){var l=wt(t.coordinates,n,a),p=St(e.geometry(),r,n,a);if(!ut(r,n))return!1;for(var f=0,c=p;f<c.length;f+=1){if(!bt(c[f],l))return!1}}return!0}var _t=function(e,t){this.type=fe,this.geojson=e,this.geometries=t};_t.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Ie(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var n=0;n<r.features.length;++n){var a=r.features[n].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new _t(r,r.features[n].geometry)}else if("Feature"===r.type){var i=r.geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new _t(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new _t(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},_t.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return qt(e,this.geometries);if("LineString"===e.geometryType())return jt(e,this.geometries)}return!1},_t.prototype.eachChild=function(){},_t.prototype.outputDefined=function(){return!0},_t.prototype.serialize=function(){return["within",this.geojson]};var Et=_t;function Ct(e){if(e instanceof tt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Et)return!1;var t=!0;return e.eachChild(function(e){t&&!Ct(e)&&(t=!1)}),t}function Tt(e){if(e instanceof tt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!Tt(e)&&(t=!1)}),t}function At(e,t){if(e instanceof tt&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(e){r&&!At(e,t)&&(r=!1)}),r}var It=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};It.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var r=e[1];return t.scope.has(r)?new It(r,t.scope.get(r)):t.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},It.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},It.prototype.eachChild=function(){},It.prototype.outputDefined=function(){return!1},It.prototype.serialize=function(){return["var",this.name]};var Pt=It,Dt=function(e,t,r,n,a){void 0===t&&(t=[]),void 0===n&&(n=new se),void 0===a&&(a=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=n,this.errors=a,this.expectedType=r};Dt.prototype.parse=function(e,t,r,n,a){return void 0===a&&(a={}),t?this.concat(t,r,n)._parse(e,a):this._parse(e,a)},Dt.prototype._parse=function(e,t){function r(e,t,r){return"assert"===r?new Ge(t,[e]):"coerce"===r?new Xe(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var a=this.registry[n];if(a){var i=a.parse(e,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,s=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else i=r(i,o,t.typeAnnotation||"coerce");else i=r(i,o,t.typeAnnotation||"assert")}if(!(i instanceof Oe)&&"resolvedImage"!==i.type.kind&&Ot(i)){var u=new Ke;try{i=new Oe(i.type,i.evaluate(u))}catch(Vi){return this.error(Vi.message),null}}return i}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},Dt.prototype.concat=function(e,t,r){var n="number"==typeof e?this.path.concat(e):this.path,a=r?this.scope.concat(r):this.scope;return new Dt(this.registry,n,t||null,a,this.errors)},Dt.prototype.error=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var n=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new ie(n,e))},Dt.prototype.checkSubtype=function(e,t){var r=ke(e,t);return r&&this.error(r),r};var Ft=Dt;function Ot(e){if(e instanceof Pt)return Ot(e.boundExpression);if(e instanceof tt&&"error"===e.name)return!1;if(e instanceof nt)return!1;if(e instanceof Et)return!1;var t=e instanceof Xe||e instanceof Ge,r=!0;return e.eachChild(function(e){r=t?r&&Ot(e):r&&e instanceof Oe}),!!r&&(Ct(e)&&At(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function Lt(e,t){for(var r,n,a=e.length-1,i=0,o=a,s=0;i<=o;)if(r=e[s=Math.floor((i+o)/2)],n=e[s+1],r<=t){if(s===a||t<n)return s;i=s+1}else{if(!(r>t))throw new Re("Input is not a number.");o=s-1}return 0}var Rt=function(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var n=0,a=r;n<a.length;n+=1){var i=a[n],o=i[0],s=i[1];this.labels.push(o),this.outputs.push(s)}};Rt.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var r=t.parse(e[1],1,le);if(!r)return null;var n=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(var i=1;i<e.length;i+=2){var o=1===i?-1/0:e[i],s=e[i+1],u=i,l=i+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=t.parse(s,l,a);if(!p)return null;a=a||p.type,n.push([o,p])}return new Rt(a,r,n)},Rt.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var a=t.length;return n>=t[a-1]?r[a-1].evaluate(e):r[Lt(t,n)].evaluate(e)},Rt.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},Rt.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Rt.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Nt=Rt,Ut=Gt;function Gt(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=r,this.p2y=n}Gt.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Gt.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Gt.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Gt.prototype.solveCurveX=function(e,t){var r,n,a,i,o;for(void 0===t&&(t=1e-6),a=e,o=0;o<8;o++){if(i=this.sampleCurveX(a)-e,Math.abs(i)<t)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=i/s}if((a=e)<(r=0))return r;if(a>(n=1))return n;for(;r<n;){if(i=this.sampleCurveX(a),Math.abs(i-e)<t)return a;e>i?r=a:n=a,a=.5*(n-r)+r}return a},Gt.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var Vt=I(Ut);function Wt(e,t,r){return e*(1-r)+t*r}function Jt(e,t,r){return new W(Wt(e.r,t.r,r),Wt(e.g,t.g,r),Wt(e.b,t.b,r),Wt(e.a,t.a,r))}function Zt(e,t,r){return e.map(function(e,n){return Wt(e,t[n],r)})}var $t=Object.freeze({__proto__:null,number:Wt,color:Jt,array:Zt}),Bt=.95047,Xt=1,Ht=1.08883,Yt=4/29,Kt=6/29,Qt=3*Kt*Kt,er=Kt*Kt*Kt,tr=Math.PI/180,rr=180/Math.PI;function nr(e){return e>er?Math.pow(e,1/3):e/Qt+Yt}function ar(e){return e>Kt?e*e*e:Qt*(e-Yt)}function ir(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function or(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function sr(e){var t=or(e.r),r=or(e.g),n=or(e.b),a=nr((.4124564*t+.3575761*r+.1804375*n)/Bt),i=nr((.2126729*t+.7151522*r+.072175*n)/Xt);return{l:116*i-16,a:500*(a-i),b:200*(i-nr((.0193339*t+.119192*r+.9503041*n)/Ht)),alpha:e.a}}function ur(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=Xt*ar(t),r=Bt*ar(r),n=Ht*ar(n),new W(ir(3.2404542*r-1.5371385*t-.4985314*n),ir(-.969266*r+1.8760108*t+.041556*n),ir(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function lr(e,t,r){return{l:Wt(e.l,t.l,r),a:Wt(e.a,t.a,r),b:Wt(e.b,t.b,r),alpha:Wt(e.alpha,t.alpha,r)}}function pr(e){var t=sr(e),r=t.l,n=t.a,a=t.b,i=Math.atan2(a,n)*rr;return{h:i<0?i+360:i,c:Math.sqrt(n*n+a*a),l:r,alpha:e.a}}function fr(e){var t=e.h*tr,r=e.c;return ur({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})}function cr(e,t,r){var n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function dr(e,t,r){return{h:cr(e.h,t.h,r),c:Wt(e.c,t.c,r),l:Wt(e.l,t.l,r),alpha:Wt(e.alpha,t.alpha,r)}}var yr={forward:sr,reverse:ur,interpolate:lr},mr={forward:pr,reverse:fr,interpolate:dr},hr=function(e,t,r,n,a){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var i=0,o=a;i<o.length;i+=1){var s=o[i],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function vr(e,t,r,n){var a=n-r,i=e-r;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}hr.interpolationFactor=function(e,t,r,n){var a=0;if("exponential"===e.name)a=vr(t,e.base,r,n);else if("linear"===e.name)a=vr(t,1,r,n);else if("cubic-bezier"===e.name){var i=e.controlPoints;a=new Vt(i[0],i[1],i[2],i[3]).solve(vr(t,1,r,n))}return a},hr.parse=function(e,t){var r=e[0],n=e[1],a=e[2],i=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(a=t.parse(a,2,le)))return null;var u=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=ce:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var p=0;p<i.length;p+=2){var f=i[p],c=i[p+1],d=p+3,y=p+4;if("number"!=typeof f)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(u.length&&u[u.length-1][0]>=f)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=t.parse(c,y,l);if(!m)return null;l=l||m.type,u.push([f,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new hr(l,r,n,a,u):t.error("Type "+xe(l)+" is not interpolatable.")},hr.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var a=t.length;if(n>=t[a-1])return r[a-1].evaluate(e);var i=Lt(t,n),o=t[i],s=t[i+1],u=hr.interpolationFactor(this.interpolation,n,o,s),l=r[i].evaluate(e),p=r[i+1].evaluate(e);return"interpolate"===this.operator?$t[this.type.kind.toLowerCase()](l,p,u):"interpolate-hcl"===this.operator?mr.reverse(mr.interpolate(mr.forward(l),mr.forward(p),u)):yr.reverse(yr.interpolate(yr.forward(l),yr.forward(p),u))},hr.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},hr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},hr.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var gr=hr,br=function(e,t){this.type=e,this.args=t};br.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var r=null,n=t.expectedType;n&&"value"!==n.kind&&(r=n);for(var a=[],i=0,o=e.slice(1);i<o.length;i+=1){var s=o[i],u=t.parse(s,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,a.push(u)}var l=n&&a.some(function(e){return ke(n,e.type)});return new br(l?ye:r,a)},br.prototype.evaluate=function(e){for(var t,r=null,n=0,a=0,i=this.args;a<i.length;a+=1){if(n++,(r=i[a].evaluate(e))&&r instanceof Te&&!r.available&&(t||(t=r),r=null,n===this.args.length))return t;if(null!==r)break}return r},br.prototype.eachChild=function(e){this.args.forEach(e)},br.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},br.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var xr=br,wr=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};wr.prototype.evaluate=function(e){return this.result.evaluate(e)},wr.prototype.eachChild=function(e){for(var t=0,r=this.bindings;t<r.length;t+=1){e(r[t][1])}e(this.result)},wr.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var r=[],n=1;n<e.length-1;n+=2){var a=e[n];if("string"!=typeof a)return t.error("Expected string, but found "+typeof a+" instead.",n);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);var i=t.parse(e[n+1],n+1);if(!i)return null;r.push([a,i])}var o=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return o?new wr(r,o):null},wr.prototype.outputDefined=function(){return this.result.outputDefined()},wr.prototype.serialize=function(){for(var e=["let"],t=0,r=this.bindings;t<r.length;t+=1){var n=r[t],a=n[0],i=n[1];e.push(a,i.serialize())}return e.push(this.result.serialize()),e};var kr=wr,zr=function(e,t,r){this.type=e,this.index=t,this.input=r};zr.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,le),n=t.parse(e[2],2,be(t.expectedType||ye));if(!r||!n)return null;var a=n.type;return new zr(a.itemType,r,n)},zr.prototype.evaluate=function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Re("Array index out of bounds: "+t+" < 0.");if(t>=r.length)throw new Re("Array index out of bounds: "+t+" > "+(r.length-1)+".");if(t!==Math.floor(t))throw new Re("Array index must be an integer, but found "+t+" instead.");return r[t]},zr.prototype.eachChild=function(e){e(this.index),e(this.input)},zr.prototype.outputDefined=function(){return!1},zr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Mr=zr,Sr=function(e,t){this.type=fe,this.needle=e,this.haystack=t};Sr.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,ye),n=t.parse(e[2],2,ye);return r&&n?ze(r.type,[fe,pe,le,ue,ye])?new Sr(r,n):t.error("Expected first argument to be of type boolean, string, number or null, but found "+xe(r.type)+" instead"):null},Sr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!Me(t,["boolean","string","number","null"]))throw new Re("Expected first argument to be of type boolean, string, number or null, but found "+xe(Pe(t))+" instead.");if(!Me(r,["string","array"]))throw new Re("Expected second argument to be of type array or string, but found "+xe(Pe(r))+" instead.");return r.indexOf(t)>=0},Sr.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Sr.prototype.outputDefined=function(){return!0},Sr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var qr=Sr,jr=function(e,t,r){this.type=le,this.needle=e,this.haystack=t,this.fromIndex=r};jr.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,ye),n=t.parse(e[2],2,ye);if(!r||!n)return null;if(!ze(r.type,[fe,pe,le,ue,ye]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+xe(r.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,le);return a?new jr(r,n,a):null}return new jr(r,n)},jr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Me(t,["boolean","string","number","null"]))throw new Re("Expected first argument to be of type boolean, string, number or null, but found "+xe(Pe(t))+" instead.");if(!Me(r,["string","array"]))throw new Re("Expected second argument to be of type array or string, but found "+xe(Pe(r))+" instead.");if(this.fromIndex){var n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)},jr.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},jr.prototype.outputDefined=function(){return!1},jr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var _r=jr,Er=function(e,t,r,n,a,i){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=a,this.otherwise=i};Er.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var a={},i=[],o=2;o<e.length-1;o+=2){var s=e[o],u=e[o+1];Array.isArray(s)||(s=[s]);var l=t.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0,f=s;p<f.length;p+=1){var c=f[p];if("number"!=typeof c&&"string"!=typeof c)return l.error("Branch labels must be numbers or strings.");if("number"==typeof c&&Math.abs(c)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof c&&Math.floor(c)!==c)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,Pe(c)))return null}else r=Pe(c);if(void 0!==a[String(c)])return l.error("Branch labels must be unique.");a[String(c)]=i.length}var d=t.parse(u,o,n);if(!d)return null;n=n||d.type,i.push(d)}var y=t.parse(e[1],1,ye);if(!y)return null;var m=t.parse(e[e.length-1],e.length-1,n);return m?"value"!==y.type.kind&&t.concat(1).checkSubtype(r,y.type)?null:new Er(r,n,y,a,i,m):null},Er.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Pe(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Er.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Er.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Er.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],r=[],n={},a=0,i=Object.keys(this.cases).sort();a<i.length;a+=1){var o=i[a];void 0===(f=n[this.cases[o]])?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[f][1].push(o)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,l=r;u<l.length;u+=1){var p=l[u],f=p[0],c=p[1];1===c.length?t.push(s(c[0])):t.push(c.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Cr=Er,Tr=function(e,t,r){this.type=e,this.branches=t,this.otherwise=r};Tr.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var n=[],a=1;a<e.length-1;a+=2){var i=t.parse(e[a],a,fe);if(!i)return null;var o=t.parse(e[a+1],a+1,r);if(!o)return null;n.push([i,o]),r=r||o.type}var s=t.parse(e[e.length-1],e.length-1,r);return s?new Tr(r,n,s):null},Tr.prototype.evaluate=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],a=n[0],i=n[1];if(a.evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},Tr.prototype.eachChild=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],a=n[0],i=n[1];e(a),e(i)}e(this.otherwise)},Tr.prototype.outputDefined=function(){return this.branches.every(function(e){return e[0],e[1].outputDefined()})&&this.otherwise.outputDefined()},Tr.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ar=Tr,Ir=function(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n};Ir.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,ye),n=t.parse(e[2],2,le);if(!r||!n)return null;if(!ze(r.type,[be(ye),pe,ye]))return t.error("Expected first argument to be of type array or string, but found "+xe(r.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,le);return a?new Ir(r.type,r,n,a):null}return new Ir(r.type,r,n)},Ir.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!Me(t,["string","array"]))throw new Re("Expected first argument to be of type array or string, but found "+xe(Pe(t))+" instead.");if(this.endIndex){var n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)},Ir.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Ir.prototype.outputDefined=function(){return!1},Ir.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Pr=Ir;function Dr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Fr(e,t,r){return t===r}function Or(e,t,r){return t!==r}function Lr(e,t,r){return t<r}function Rr(e,t,r){return t>r}function Nr(e,t,r){return t<=r}function Ur(e,t,r){return t>=r}function Gr(e,t,r,n){return 0===n.compare(t,r)}function Vr(e,t,r,n){return!Gr(e,t,r,n)}function Wr(e,t,r,n){return n.compare(t,r)<0}function Jr(e,t,r,n){return n.compare(t,r)>0}function Zr(e,t,r,n){return n.compare(t,r)<=0}function $r(e,t,r,n){return n.compare(t,r)>=0}function Br(e,t,r){var n="=="!==e&&"!="!==e;return function(){function a(e,t,r){this.type=fe,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return a.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],i=t.parse(e[1],1,ye);if(!i)return null;if(!Dr(r,i.type))return t.concat(1).error('"'+r+"\" comparisons are not supported for type '"+xe(i.type)+"'.");var o=t.parse(e[2],2,ye);if(!o)return null;if(!Dr(r,o.type))return t.concat(2).error('"'+r+"\" comparisons are not supported for type '"+xe(o.type)+"'.");if(i.type.kind!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '"+xe(i.type)+"' and '"+xe(o.type)+"'.");n&&("value"===i.type.kind&&"value"!==o.type.kind?i=new Ge(o.type,[i]):"value"!==i.type.kind&&"value"===o.type.kind&&(o=new Ge(i.type,[o])));var s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,he)))return null}return new a(i,o,s)},a.prototype.evaluate=function(a){var i=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){var s=Pe(i),u=Pe(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Re('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var l=Pe(i),p=Pe(o);if("string"!==l.kind||"string"!==p.kind)return t(a,i,o)}return this.collator?r(a,i,o,this.collator.evaluate(a)):t(a,i,o)},a.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},a}()}var Xr=Br("==",Fr,Gr),Hr=Br("!=",Or,Vr),Yr=Br("<",Lr,Wr),Kr=Br(">",Rr,Jr),Qr=Br("<=",Nr,Zr),en=Br(">=",Ur,$r),tn=function(e,t,r,n,a,i){this.type=pe,this.number=e,this.locale=t,this.currency=r,this.unit=n,this.minFractionDigits=a,this.maxFractionDigits=i};tn.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,le);if(!r)return null;var n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");var a=null;if(n.locale&&!(a=t.parse(n.locale,1,pe)))return null;var i=null;if(n.currency&&!(i=t.parse(n.currency,1,pe)))return null;var o=null;if(n.unit&&!(o=t.parse(n.unit,1,pe)))return null;var s=null;if(n["min-fraction-digits"]&&!(s=t.parse(n["min-fraction-digits"],1,le)))return null;var u=null;return n["max-fraction-digits"]&&!(u=t.parse(n["max-fraction-digits"],1,le))?null:new tn(r,a,i,o,s,u)},tn.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},tn.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var rn=tn,nn=function(e){this.type=le,this.input=e};nn.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error("Expected argument of type string or array, but found "+xe(r.type)+" instead."):new nn(r):null},nn.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Re("Expected value to be of type string or array, but found "+xe(Pe(t))+" instead.")},nn.prototype.eachChild=function(e){e(this.input)},nn.prototype.outputDefined=function(){return!1},nn.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var an=nn,on={"==":Xr,"!=":Hr,">":Kr,"<":Yr,">=":en,"<=":Qr,array:Ge,at:Mr,boolean:Ge,case:Ar,coalesce:xr,collator:nt,format:We,image:Ze,in:qr,"index-of":_r,interpolate:gr,"interpolate-hcl":gr,"interpolate-lab":gr,length:an,let:kr,literal:Oe,match:Cr,number:Ge,"number-format":rn,object:Ge,slice:Pr,step:Nt,string:Ge,"to-boolean":Xe,"to-color":Xe,"to-number":Xe,"to-string":Xe,var:Pt,within:Et};function sn(e,t){var r=t[0],n=t[1],a=t[2],i=t[3];r=r.evaluate(e),n=n.evaluate(e),a=a.evaluate(e);var o=i?i.evaluate(e):1,s=Ae(r,n,a,o);if(s)throw new Re(s);return new W(r/255*o,n/255*o,a/255*o,o)}function un(e,t){return e in t}function ln(e,t){var r=t[e];return void 0===r?null:r}function pn(e,t,r,n){for(;r<=n;){var a=r+n>>1;if(t[a]===e)return!0;t[a]>e?n=a-1:r=a+1}return!1}function fn(e){return{type:e}}tt.register(on,{error:[me,[pe],function(e,t){var r=t[0];throw new Re(r.evaluate(e))}],typeof:[pe,[ye],function(e,t){return xe(Pe(t[0].evaluate(e)))}],"to-rgba":[be(le,4),[ce],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[ce,[le,le,le],sn],rgba:[ce,[le,le,le,le],sn],has:{type:fe,overloads:[[[pe],function(e,t){return un(t[0].evaluate(e),e.properties())}],[[pe,de],function(e,t){var r=t[0],n=t[1];return un(r.evaluate(e),n.evaluate(e))}]]},get:{type:ye,overloads:[[[pe],function(e,t){return ln(t[0].evaluate(e),e.properties())}],[[pe,de],function(e,t){var r=t[0],n=t[1];return ln(r.evaluate(e),n.evaluate(e))}]]},"feature-state":[ye,[pe],function(e,t){return ln(t[0].evaluate(e),e.featureState||{})}],properties:[de,[],function(e){return e.properties()}],"geometry-type":[pe,[],function(e){return e.geometryType()}],id:[ye,[],function(e){return e.id()}],zoom:[le,[],function(e){return e.globals.zoom}],pitch:[le,[],function(e){return e.globals.pitch||0}],"distance-from-center":[le,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[le,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[le,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[le,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[ye,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[le,fn(le),function(e,t){for(var r=0,n=0,a=t;n<a.length;n+=1){r+=a[n].evaluate(e)}return r}],"*":[le,fn(le),function(e,t){for(var r=1,n=0,a=t;n<a.length;n+=1){r*=a[n].evaluate(e)}return r}],"-":{type:le,overloads:[[[le,le],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)-n.evaluate(e)}],[[le],function(e,t){return-t[0].evaluate(e)}]]},"/":[le,[le,le],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)/n.evaluate(e)}],"%":[le,[le,le],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)%n.evaluate(e)}],ln2:[le,[],function(){return Math.LN2}],pi:[le,[],function(){return Math.PI}],e:[le,[],function(){return Math.E}],"^":[le,[le,le],function(e,t){var r=t[0],n=t[1];return Math.pow(r.evaluate(e),n.evaluate(e))}],sqrt:[le,[le],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[le,[le],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[le,[le],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[le,[le],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[le,[le],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[le,[le],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[le,[le],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[le,[le],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[le,[le],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[le,[le],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[le,fn(le),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[le,fn(le),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[le,[le],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[le,[le],function(e,t){var r=t[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[le,[le],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[le,[le],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[fe,[pe,ye],function(e,t){var r=t[0],n=t[1];return e.properties()[r.value]===n.value}],"filter-id-==":[fe,[ye],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[fe,[pe],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[fe,[pe,ye],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a<i}],"filter-id-<":[fe,[ye],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n<a}],"filter->":[fe,[pe,ye],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a>i}],"filter-id->":[fe,[ye],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n>a}],"filter-<=":[fe,[pe,ye],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a<=i}],"filter-id-<=":[fe,[ye],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n<=a}],"filter->=":[fe,[pe,ye],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a>=i}],"filter-id->=":[fe,[ye],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n>=a}],"filter-has":[fe,[ye],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[fe,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[fe,[be(pe)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[fe,[be(ye)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[fe,[pe,be(ye)],function(e,t){var r=t[0];return t[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[fe,[pe,be(ye)],function(e,t){var r=t[0],n=t[1];return pn(e.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:fe,overloads:[[[fe,fe],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)&&n.evaluate(e)}],[fn(fe),function(e,t){for(var r=0,n=t;r<n.length;r+=1){if(!n[r].evaluate(e))return!1}return!0}]]},any:{type:fe,overloads:[[[fe,fe],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)||n.evaluate(e)}],[fn(fe),function(e,t){for(var r=0,n=t;r<n.length;r+=1){if(n[r].evaluate(e))return!0}return!1}]]},"!":[fe,[fe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[fe,[pe],function(e,t){var r=t[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[pe,[pe],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[pe,[pe],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[pe,fn(ye),function(e,t){return t.map(function(t){return De(t.evaluate(e))}).join("")}],"resolved-locale":[pe,[he],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var cn=on;function dn(e){return{result:"success",value:e}}function yn(e){return{result:"error",value:e}}function mn(e){return"data-driven"===e["property-type"]}function hn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function vn(e){return!!e.expression&&e.expression.interpolated}function gn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}var bn=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ke,this._defaultValue=t?jn(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function xn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in cn}function wn(e,t){var r=new Ft(cn,[],t?qn(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?dn(new bn(n,t)):yn(r.errors)}bn.prototype.evaluateWithoutErrorHandling=function(e,t,r,n,a,i,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)},bn.prototype.evaluate=function(e,t,r,n,a,i,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var u=this.expression.evaluate(this._evaluator);if(null==u||"number"==typeof u&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Re("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(u)+" instead.");return u}catch(Vi){return this._warningHistory[Vi.message]||(this._warningHistory[Vi.message]=!0,"undefined"!=typeof console&&console.warn(Vi.message)),this._defaultValue}};var kn=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Tt(t.expression)};kn.prototype.evaluateWithoutErrorHandling=function(e,t,r,n,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,a,i)},kn.prototype.evaluate=function(e,t,r,n,a,i){return this._styleExpression.evaluate(e,t,r,n,a,i)};var zn=function(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Tt(t.expression),this.interpolationType=n};function Mn(e,t){if("error"===(e=wn(e,t)).result)return e;var r=e.value.expression,n=Ct(r);if(!n&&!mn(t))return yn([new ie("","data expressions not supported")]);var a=At(r,["zoom","pitch","distance-from-center"]);if(!a&&!hn(t))return yn([new ie("","zoom expressions not supported")]);var i=Sn(r);if(!i&&!a)return yn([new ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof ie)return yn([i]);if(i instanceof gr&&!vn(t))return yn([new ie("",'"interpolate" expressions cannot be used with this property')]);if(!i)return dn(new kn(n?"constant":"source",e.value));var o=i instanceof gr?i.interpolation:void 0;return dn(new zn(n?"camera":"composite",e.value,i.labels,o))}function Sn(e){var t=null;if(e instanceof kr)t=Sn(e.result);else if(e instanceof xr)for(var r=0,n=e.args;r<n.length;r+=1){var a=n[r];if(t=Sn(a))break}else(e instanceof Nt||e instanceof gr)&&e.input instanceof tt&&"zoom"===e.input.name&&(t=e);return t instanceof ie?t:(e.eachChild(function(e){var r=Sn(e);r instanceof ie?t=r:!t&&r?t=new ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new ie("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function qn(e){var t={color:ce,string:pe,number:le,enum:pe,boolean:fe,formatted:ve,resolvedImage:ge};return"array"===e.type?be(t[e.value]||ye,e.length):t[e.type]}function jn(e){return"color"===e.type&&(gn(e.default)||Array.isArray(e.default))?new W(0,0,0,0):"color"===e.type?W.parse(e.default)||null:void 0===e.default?null:e.default}function _n(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function En(e){if(Array.isArray(e))return e.map(En);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var r in e)t[r]=En(e[r]);return t}return _n(e)}zn.prototype.evaluateWithoutErrorHandling=function(e,t,r,n,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,a,i)},zn.prototype.evaluate=function(e,t,r,n,a,i){return this._styleExpression.evaluate(e,t,r,n,a,i)},zn.prototype.interpolationFactor=function(e,t,r){return this.interpolationType?gr.interpolationFactor(this.interpolationType,e,t,r):0};var Cn={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Tn(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var n=r[t];if(!Tn(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}function An(e,t){if(void 0===t&&(t="fill"),null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Tn(e)||(e=Gn(e));var r=e,n=!0;try{n=In(r)}catch(Vi){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(r,null,2)+"\n        ")}var a=Cn["filter_"+t],i=wn(n,a),o=null;if("error"===i.result)throw new Error(i.value.map(function(e){return e.key+": "+e.message}).join(", "));o=function(e,t,r){return i.value.evaluate(e,t,{},r)};var s=null,u=null;if(n!==r){var l=wn(r,a);if("error"===l.result)throw new Error(l.value.map(function(e){return e.key+": "+e.message}).join(", "));s=function(e,t,r,n,a){return l.value.evaluate(e,t,{},r,void 0,void 0,n,a)},u=!Ct(l.value.expression)}return{filter:o=o,dynamicFilter:s||void 0,needGeometry:Un(n),needFeature:!!u}}function In(e){if(!Fn(e))return e;var t=En(e);return Dn(t),t=Pn(t)}function Pn(e){if(!Array.isArray(e))return e;var t=Rn(e);return!0===t?t:t.map(function(e){return Pn(e)})}function Dn(e){var t=!1,r=[];if("case"===e[0]){for(var n=1;n<e.length-1;n+=2)t=t||Fn(e[n]),r.push(e[n+1]);r.push(e[e.length-1])}else if("match"===e[0]){t=t||Fn(e[1]);for(var a=2;a<e.length-1;a+=2)r.push(e[a+1]);r.push(e[e.length-1])}else if("step"===e[0]){t=t||Fn(e[1]);for(var i=1;i<e.length-1;i+=2)r.push(e[i+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(r)));for(var o=1;o<e.length;o++)Dn(e[o])}function Fn(e){if(!Array.isArray(e))return!1;if(On(e[0]))return!0;for(var t=1;t<e.length;t++){if(Fn(e[t]))return!0}return!1}function On(e){return"pitch"===e||"distance-from-center"===e}var Ln=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Rn(e){if(Ln.has(e[0]))for(var t=1;t<e.length;t++){if(Fn(e[t]))return!0}return e}function Nn(e,t){return e<t?-1:e>t?1:0}function Un(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Un(e[t]))return!0;return!1}function Gn(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?Vn(e[1],e[2],"=="):"!="===t?$n(Vn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Vn(e[1],e[2],t):"any"===t?Wn(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(Gn)):"none"===t?["all"].concat(e.slice(1).map(Gn).map($n)):"in"===t?Jn(e[1],e.slice(2)):"!in"===t?$n(Jn(e[1],e.slice(2))):"has"===t?Zn(e[1]):"!has"===t?$n(Zn(e[1])):"within"!==t||e}function Vn(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function Wn(e){return["any"].concat(e.map(Gn))}function Jn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Nn)]]:["filter-in-small",e,["literal",t]]}}function Zn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function $n(e){return["!",e]}var Bn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Xn(e,t){var r={};for(var n in e)"ref"!==n&&(r[n]=e[n]);return Bn.forEach(function(e){e in t&&(r[e]=t[e])}),r}function Hn(e){e=e.slice();for(var t=Object.create(null),r=0;r<e.length;r++)t[e[r].id]=e[r];for(var n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Xn(e[n],t[e[n].ref]));return e}var Yn={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Kn=" ",Qn=/(italic|oblique)$/i,ea={},ta=function(e,t,r){var n=ea[e];if(!n){Array.isArray(e)||(e=[e]);for(var a=400,i="normal",o=[],s=0,u=e.length;s<u;++s){var l=e[s].split(" "),p=l[l.length-1].toLowerCase();for(var f in"normal"==p||"italic"==p||"oblique"==p?(i=p,l.pop(),p=l[l.length-1].toLowerCase()):Qn.test(p)&&(p=p.replace(Qn,""),i=l[l.length-1].replace(p,"")),Yn){var c=l.length>1?l[l.length-2].toLowerCase():"";if(p==f||p==f.replace("-","")||c+"-"+p==f){a=Yn[f],l.pop(),c&&f.startsWith(c)&&l.pop();break}}"number"==typeof p&&(a=p);var d=l.join(Kn).replace("Klokantech Noto Sans","Noto Sans");-1!==d.indexOf(Kn)&&(d='"'+d+'"'),o.push(d)}n=ea[e]=[i,a,o]}return n[0]+Kn+n[1]+Kn+t+"px"+(r?"/"+r:"")+Kn+n[2]},ra=I(ta);function na(e,t){var r,n,a,i,o,s,u,l,p,f,c,d,y,m,h,v,g,b,x,w,k=e[0],z=k.width,M=k.height,S=k.data,q=new Uint8ClampedArray(S.length),j=2*t.resolution,_=z-1,E=M-1,C=[0,0,0,0],T=2*Math.PI,A=Math.PI/2,I=Math.PI*t.sunEl/180,P=Math.PI*t.sunAz/180,D=Math.cos(I),F=Math.sin(I),O=t.highlightColor,L=t.shadowColor,R=t.accentColor,N=t.encoding;function U(e,t){return void 0===t&&(t="mapbox"),"mapbox"===t?.1*(256*e[0]*256+256*e[1]+e[2])-1e4:"terrarium"===t?256*e[0]+e[1]+e[2]/256-32768:void 0}for(n=0;n<=E;++n)for(i=0===n?0:n-1,o=n===E?E:n+1,r=0;r<=_;++r)a=r===_?_:r+1,s=4*(n*z+(0===r?0:r-1)),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],u=t.vert*U(C,N),s=4*(n*z+a),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],l=(t.vert*U(C,N)-u)/j,s=4*(i*z+r),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],u=t.vert*U(C,N),s=4*(o*z+r),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],p=(t.vert*U(C,N)-u)/j,c=(c=Math.atan2(p,-l))<0?A-c:c>A?T-c+A:A-c,f=Math.atan(Math.sqrt(l*l+p*p)),w=F*Math.cos(f)+D*Math.sin(f)*Math.cos(P-c),d=Math.cos(f),y=255*w,g=Math.min(Math.max(2*t.sunEl,0),1),b=1.875-1.75*t.opacity,x=.5!==t.opacity?A*((Math.pow(b,f)-1)/(Math.pow(b,A)-1)):f,h={r:(1-d)*R.r*g*255,g:(1-d)*R.g*g*255,b:(1-d)*R.b*g*255,a:(1-d)*R.a*g*255},m=Math.abs(((c+P)/Math.PI+.5)%2-1),v={r:(O.r*(1-m)+L.r*m)*y,g:(O.g*(1-m)+L.g*m)*y,b:(O.b*(1-m)+L.b*m)*y,a:(O.a*(1-m)+L.a*m)*y},q[s=4*(n*z+r)]=h.r*(1-m)+v.r,q[s+1]=h.g*(1-m)+v.g,q[s+2]=h.b*(1-m)+v.b,q[s+3]=S[s+3]*t.opacity*g*Math.sin(x);return new ImageData(q,z,M)}var aa="https://api.mapbox.com";function ia(e){return 0!==e.indexOf("mapbox://")?"":e.slice("mapbox://".length)}function oa(e,t,r){var n=ia(e);if(!n)return decodeURI(new URL(e,r).href);if(0!==n.indexOf("sprites/"))throw new Error("unexpected sprites url: "+e);var a=n.slice("sprites/".length);return aa+"/styles/v1/"+a+"/sprite?access_token="+t}function sa(e,t){var r=ia(e);if(!r)return decodeURI(new URL(e,location.href).href);if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: "+e);var n=r.slice("styles/".length);return aa+"/styles/v1/"+n+"?&access_token="+t}function ua(e,t,r,n){var a=new URL(e,n),i=ia(e);return i?"mapbox.satellite"===i?"https://api.mapbox.com/v4/"+i+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+t:"https://{a-d}.tiles.mapbox.com/v4/"+i+"/{z}/{x}/{y}.vector.pbf?access_token="+t:t?(a.searchParams.set(r,t),decodeURI(a.href)):decodeURI(a.href)}function la(e,t){return void 0===t&&(t=512),e.getExtent()?(0,j.createXYZ)({extent:e.getExtent(),tileSize:t,maxZoom:22}).getResolutions():Va}function pa(e,t){t.accessToken||(t=Object.assign({},t),new URL(e).searchParams.forEach(function(e,r){t.accessToken=e,t.accessTokenParam=r}));return t}function fa(e,t,r,n,a){var i,o,s,u;void 0===r&&(r=""),void 0===n&&(n={}),void 0===a&&(a=void 0);var l=!0;return"string"==typeof r||Array.isArray(r)?u=r:(u=(s=r).source||s.layers,n=s),"string"==typeof n?(i=n,s={}):(i=n.styleUrl,s=n),!1===s.updateSource&&(l=!1),a||(a=s.resolutions),i||"string"!=typeof t||t.trim().startsWith("{")||(i=t),i&&(i=i.startsWith("data:")?location.href:sa(i,s.accessToken),s=pa(i,s)),new Promise(function(r,n){Ba(t,s).then(function(t){if(8!=t.version)return n(new Error("glStyle version 8 required."));if(!(e instanceof x.default||e instanceof k.default))return n(new Error("Can only apply to VectorLayer or VectorTileLayer"));var p,f,c,d=e instanceof k.default?"vector":"geojson";if(u?o=Array.isArray(u)?t.layers.find(function(e){return e.id===u[0]}).source:u:(o=Object.keys(t.sources).find(function(e){return t.sources[e].type===d}),u=o),!o)return n(new Error("No "+d+" source found in the glStyle."));function y(){if(!l)return Promise.resolve();if(e instanceof k.default)return xa(t.sources[o],i,s).then(function(t){var r=e.getSource();if(r?t!==r&&(r.setTileUrlFunction(t.getTileUrlFunction()),"function"==typeof r.setUrls&&"function"==typeof t.getUrls&&r.setUrls(t.getUrls()),r.format_||(r.format_=t.format_),r.getAttributions()||r.setAttributions(t.getAttributions()),r.getTileLoadFunction()===z.defaultLoadFunction&&r.setTileLoadFunction(t.getTileLoadFunction()),(0,S.equivalent)(r.getProjection(),t.getProjection())&&(r.tileGrid=t.getTileGrid())):e.setSource(t),!isFinite(e.getMaxResolution())&&!isFinite(e.getMinZoom())){var n=e.getSource().getTileGrid();e.setMaxResolution(n.getResolution(n.getMinZoom()))}});var r=t.sources[o],n=e.getSource();n&&n.get("mapbox-source")===r||(n=Sa(r,i,s));var a=e.getSource();return a?n!==a&&(a.getAttributions()||a.setAttributions(n.getAttributions()),a.format_||(a.format_=n.getFormat()),a.url_=n.getUrl()):e.setSource(n),Promise.resolve()}function m(){if(c||t.sprite&&!p)c?(e.setStyle(c),y().then(r).catch(n)):n(new Error("Something went wrong trying to apply style."));else{if(s.projection&&!a){var i=(0,S.get)(s.projection).getUnits();"m"!==i&&(a=Va.map(function(e){return e/S.METERS_PER_UNIT[i]}))}c=Ui(e,t,u,a,p,f,ki,s.getImage),e.getStyle()?y().then(r).catch(n):n(new Error("Nothing to show for source ["+o+"]"))}}if(t.sprite){var h=new URL(oa(t.sprite,s.accessToken,i||location.href)),v=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",g=h.origin+h.pathname+v+".json"+h.search;new Promise(function(e,t){$a("Sprite",g,s).then(e).catch(function(r){$a("Sprite",g=h.origin+h.pathname+".json"+h.search,s).then(e).catch(t)})}).then(function(e){if(void 0===e&&n(new Error("No sprites found.")),p=e,f=h.origin+h.pathname+v+".png"+h.search,s.transformRequest){var t=s.transformRequest(f,"SpriteImage");t instanceof Request&&(f=encodeURI(t.url))}m()}).catch(function(e){n(new Error("Sprites cannot be loaded: "+g+": "+e.message))})}else m()}).catch(n)})}var ca={};function da(e,t,r){t.layers.some(function(t){if("background"===t.type){if(e instanceof f.default)return e.setBackground(function(e){return ga(t,e,r,{})}),!0;if(e instanceof y.default||e instanceof c.default)return e.getLayers().push(ba(t,r,{})),!0}})}function ya(e,t,r){return void 0===r&&(r={}),Ba(t,r).then(function(t){da(e,t,r)})}function ma(e,t){var r;return e.some(function(e){if(e.id==t)return r=e.source,!0}),r}function ha(e,t){var r=e.bounds;if(r){var n=(0,S.fromLonLat)([r[0],r[1]],t),a=(0,S.fromLonLat)([r[2],r[3]],t);return[n[0],n[1],a[0],a[1]]}return(0,S.get)(t).getExtent()}function va(e,t,r){var n=new g.default({tileJSON:t,tileSize:e.tileSize||t.tileSize||512}),a=n.getTileJSON(),i=n.getTileGrid(),o=(0,S.get)(r.projection||"EPSG:3857"),s=ha(a,o),u=o.getExtent(),l=a.minzoom||0,p=a.maxzoom||22,f={attributions:n.getAttributions(),projection:o,tileGrid:new v.default({origin:u?(0,_.getTopLeft)(u):i.getOrigin(0),extent:s||i.getExtent(),minZoom:l,resolutions:la(o,t.tileSize).slice(0,p+1),tileSize:i.getTileSize(0)})};return Array.isArray(a.tiles)?f.urls=a.tiles:f.url=a.tiles,f}function ga(e,t,r,n){var a={id:e.id,type:e.type},i=e.layout||{},o=e.paint||{};a.paint=o;var s,u,l=Ja(t,r.resolutions||Va);return void 0!==o["background-color"]&&(s=Ci(a,"paint","background-color",l,ca,n)),void 0!==o["background-opacity"]&&(u=Ci(a,"paint","background-opacity",l,ca,n)),"none"==i.visibility?void 0:Di(s,u)}function ba(e,t,r){var n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new f.default({source:new h.default({}),render:function(a){var i=ga(e,a.viewState.resolution,t,r);return n.style.backgroundColor=i,n}})}function xa(e,t,r){return new Promise(function(n,a){Ya(e,t,r).then(function(t){var a=va(e,t,r);a.format=new d.default,n(new z.default(a))}).catch(a)})}function wa(e,t,r){var n=new k.default({declutter:!0,visible:!1});return xa(e,t,r).then(function(t){t.set("mapbox-source",e),n.setSource(t)}).catch(function(e){n.setSource(void 0)}),n}function ka(e){return"{bbox-"+(e?e.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}function za(e,t,r){var n=new b.default;return Ya(e,t,r).then(function(t){var a=new g.default({interpolate:void 0===r.interpolate||r.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:t});a.tileGrid=va(e,t,r).tileGrid,r.projection&&(a.projection=(0,S.get)(r.projection));var i=a.getTileUrlFunction();a.setTileUrlFunction(function(e,t,r){var n=ka(r),o=i(e,t,r);if(-1!=o.indexOf(n)){var s=a.getTileGrid().getTileCoordExtent(e);o=o.replace(n,s.toString())}return o}),a.set("mapbox-source",e),n.setSource(a)}).catch(function(e){n.setSource(void 0)}),n}function Ma(e,t,r){var n=za(e,t,r);return new p.default({source:new m.default({operationType:"image",operation:na,sources:[n]})})}function Sa(e,t,r){var n=r.projection?new l.default({dataProjection:r.projection}):new l.default,a=e.data,i={};if("string"==typeof a){var o=ua(a,r.accessToken,r.accessTokenParam||"access_token",t||location.href);if(r.transformRequest){var s=r.transformRequest(o,"GeoJSON");s instanceof Request&&(o=decodeURI(s.url))}if(/\{bbox-[0-9a-z-]+\}/.test(o)){var u=new w.default({attributions:e.attribution,format:n,url:function(e,t,r){var n=ka(r);return o.replace(n,""+e.join(","))},strategy:q.bbox});return u.set("mapbox-source",e),u}return new w.default({attributions:e.attribution,format:n,url:o})}i.features=n.readFeatures(a,{featureProjection:(0,S.getUserProjection)()||"EPSG:3857"});var p=new w.default(Object.assign({attributions:e.attribution,format:n},i));return p.set("mapbox-source",e),p}function qa(e,t,r){return new x.default({declutter:!0,source:Sa(e,t,r),visible:!1})}function ja(e,t,r){var n=null;return function(a){e.paint&&"raster-opacity"in e.paint&&a.frameState.viewState.zoom!==n&&(n=a.frameState.viewState.zoom,delete r[e.id],_a(e,t,n,r))}}function _a(e,t,r,n){var a=Ci(e,"paint","raster-opacity",r,ca,n);t.setOpacity(a)}function Ea(e,t){function r(){var r=t.get("mapbox-style");if(r){var n=Hn(r.layers),a=e.get("mapbox-layers"),i=n.filter(function(e){return a.includes(e.id)}).some(function(e){return!e.layout||!e.layout.visibility||"visible"===e.layout.visibility});e.get("visible")!==i&&e.setVisible(i)}}e.on("change",r),r()}function Ca(e,t,r,n){var a,i=Ra(e),o=e.layers,s=r.type,u=r.source||ma(o,r.ref),l=e.sources[u];if("background"==s)a=ba(r,n,i);else if("vector"==l.type)a=wa(l,t,n);else if("raster"==l.type)(a=za(l,t,n)).setVisible(!r.layout||"none"!==r.layout.visibility),a.on("prerender",ja(r,a,i));else if("geojson"==l.type)a=qa(l,t,n);else if("raster-dem"==l.type&&"hillshade"==r.type){var p=Ma(l,t,n);a=p,p.getSource().on("beforeoperations",function(e){var t=e.data;t.resolution=e.resolution;var a=Ja(e.resolution,n.resolutions||Va);t.encoding=l.encoding,t.vert=5*Ci(r,"paint","hillshade-exaggeration",a,ca,i),t.sunAz=Ci(r,"paint","hillshade-illumination-direction",a,ca,i),t.sunEl=35,t.opacity=.3,t.highlightColor=Ci(r,"paint","hillshade-highlight-color",a,ca,i),t.shadowColor=Ci(r,"paint","hillshade-shadow-color",a,ca,i),t.accentColor=Ci(r,"paint","hillshade-accent-color",a,ca,i)}),a.setVisible(!r.layout||"none"!==r.layout.visibility)}var f=u;return a&&a.set("mapbox-source",f),a}function Ta(e,t,r,n){var a=[],i=null;if(t instanceof y.default){if(!(i=t.getView()).isDef()&&!i.getRotation()&&!i.getResolutions()){var o=n.projection?(0,S.get)(n.projection):i.getProjection();i=new M.default(Object.assign(i.getProperties(),{maxResolution:Va[0]/S.METERS_PER_UNIT[o.getUnits()],projection:n.projection||i.getProjection()})),t.setView(i)}"center"in e&&!i.getCenter()&&i.setCenter((0,S.fromLonLat)(e.center,i.getProjection())),"zoom"in e&&void 0===i.getZoom()&&i.setResolution(Va[0]/S.METERS_PER_UNIT[i.getProjection().getUnits()]/Math.pow(2,e.zoom)),i.getCenter()&&void 0!==i.getZoom()||i.fit(i.getProjection().getExtent(),{nearest:!0,size:t.getSize()})}t.set("mapbox-style",e),t.set("mapbox-metadata",{styleUrl:r,options:n});for(var s,u,l,p=e.layers,f=[],c=0,d=p.length;c<d;++c){var m=p[c],h=m.type;if("heatmap"==h)throw new Error(h+" layers are not supported");(l=m.source||ma(p,m.ref))&&l==u||(f.length&&(a.push(Ia(s,f,e,r,t,n)),f=[]),(s=Ca(e,r,m,n))instanceof x.default||s instanceof k.default||(f=[]),u=s.get("mapbox-source")),f.push(m.id)}return a.push(Ia(s,f,e,r,t,n)),Promise.all(a)}function Aa(e,t,r){var n,a;if(void 0===r&&(r={}),a="string"==typeof e||e instanceof HTMLElement?new y.default({target:e}):e,"string"==typeof t){var i=t.startsWith("data:")?location.href:sa(t,r.accessToken);r=pa(i,r),n=new Promise(function(e,n){Ba(t,r).then(function(t){Ta(t,a,i,r).then(function(){e(a)}).catch(n)}).catch(function(e){n(new Error("Could not load "+t+": "+e.message))})})}else n=new Promise(function(e,n){Ta(t,a,!r.styleUrl||r.styleUrl.startsWith("data:")?location.href:sa(r.styleUrl,r.accessToken),r).then(function(){e(a)}).catch(n)});return n}function Ia(e,t,r,n,a,i){void 0===i&&(i={});for(var o=24,s=0,u=r.layers,l=0,p=u.length;l<p;++l){var f=u[l];-1!==t.indexOf(f.id)&&(o=Math.min("minzoom"in f?f.minzoom:0,o),s=Math.max("maxzoom"in f?f.maxzoom:24,s))}return new Promise(function(u,l){var p=function(){var p=e.getSource();if(p&&"error"!==p.getState()){if("getTileGrid"in p){var f=p.getTileGrid();if(f){var c=f.getMinZoom();(o>0||c>0)&&e.setMaxResolution(Math.min(Va[o],f.getResolution(c))+1e-9),s<24&&e.setMinResolution(Va[s]+1e-9)}}else o>0&&e.setMaxResolution(Va[o]+1e-9);p instanceof w.default||p instanceof z.default?fa(e,r,t,Object.assign({styleUrl:n},i)).then(function(){Ea(e,a),u()}).catch(l):u()}else l(new Error("Error accessing data for source "+e.get("mapbox-source")))};e.set("mapbox-layers",t);var f=a.getLayers();-1===f.getArray().indexOf(e)&&f.push(e),e.getSource()?p():e.once("change:source",p)})}var Pa={},Da={},Fa=0;function Oa(e){return e.id||(e.id=Fa++),e.id}function La(e,t){return Oa(e)+"."+(0,E.getUid)(t)}function Ra(e){var t=Pa[e.id];return t||(t={},Pa[Oa(e)]=t),t}function Na(){for(var e in Pa)delete Pa[e]}function Ua(e){var t=Da[e.id];return t||(t={},Da[Oa(e)]=t),t}function Ga(e){return e*Math.PI/180}var Va=function(){for(var e=[],t=78271.51696402048;e.length<=24;t/=2)e.push(t);return e}();function Wa(e,t){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(e,t);var r=document.createElement("canvas");return r.width=e,r.height=t,r}function Ja(e,t){for(var r=0,n=t.length;r<n;++r){if(t[r]<e&&r+1<n){var a=t[r]/t[r+1];return r+Math.log(t[r]/e)/Math.log(a)}}return n-1}var Za={};function $a(e,t,r,n){if(void 0===r&&(r={}),t in Za)return n&&(n.request=Za[t][0]),Za[t][1];var a=r.transformRequest&&r.transformRequest(t,e)||new Request(t);a.headers.get("Accept")||a.headers.set("Accept","application/json"),n&&(n.request=a);var i=fetch(a).then(function(e){return delete Za[t],e.ok?e.json():Promise.reject(new Error("Error fetching source "+t))}).catch(function(e){return delete Za[t],Promise.reject(new Error("Error fetching source "+t))});return Za[t]=[a,i],i}function Ba(e,t){if("string"!=typeof e)return Promise.resolve(e);if(!e.trim().startsWith("{"))return $a("Style",e=sa(e,t.accessToken),t);try{var r=JSON.parse(e);return Promise.resolve(r)}catch(yn){return Promise.reject(yn)}}function Xa(e,t){if(t.transformRequest){var r=t.transformRequest(e,"Tiles");if(r instanceof Request)return decodeURI(r.url)}return e}var Ha={};function Ya(e,t,r){void 0===r&&(r={});var n=[t,JSON.stringify(e)].toString(),a=Ha[n];if(!a||r.transformRequest){var i=e.url;if(i&&!e.tiles){var o=ua(i,r.accessToken,r.accessTokenParam||"access_token",t||location.href);if(i.startsWith("mapbox://"))a=Promise.resolve(Object.assign({},e,{url:void 0,tiles:(0,u.expandUrl)(o)}));else{var s={};a=$a("Source",o,r,s).then(function(e){return e.tiles=e.tiles.map(function(t){return"tms"===e.scheme&&(t=t.replace("{y}","{-y}")),Xa(ua(t,r.accessToken,r.accessTokenParam||"access_token",s.request.url),r)}),Promise.resolve(e)})}}else e=Object.assign({},e,{tiles:e.tiles.map(function(n){return"tms"===e.scheme&&(n=n.replace("{y}","{-y}")),Xa(ua(n,r.accessToken,r.accessTokenParam||"access_token",t||location.href),r)})}),a=Promise.resolve(Object.assign({},e));Ha[n]=a}return a}function Ka(e,t,r,n){var a=document.createElement("canvas"),i=[2*r*t.pixelRatio+t.width,2*r*t.pixelRatio+t.height];a.width=i[0],a.height=i[1];var o=a.getContext("2d");o.drawImage(e,t.x,t.y,t.width,t.height,r*t.pixelRatio,r*t.pixelRatio,t.width,t.height);var s=o.getImageData(0,0,i[0],i[1]);o.globalCompositeOperation="destination-over",o.fillStyle="rgba("+255*n.r+","+255*n.g+","+255*n.b+","+n.a+")";for(var u=s.data,l=0,p=s.width;l<p;++l)for(var f=0,c=s.height;f<c;++f){u[4*(f*p+l)+3]>0&&o.arc(l,f,r*t.pixelRatio,0,2*Math.PI)}return o.fill(),a}function Qa(e,t,r){var n=Math.max(0,Math.min(1,(r-e)/(t-e)));return n*n*(3-2*n)}function ei(e,t,r){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var a=n.getContext("2d");a.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);for(var i=a.getImageData(0,0,t.width,t.height),o=i.data,s=0,u=i.width;s<u;++s)for(var l=0,p=i.height;l<p;++l){var f=4*(l*u+s),c=Qa(.65,.85,o[f+3]/255);c>0?(o[f+0]=Math.round(255*r.r*c),o[f+1]=Math.round(255*r.g*c),o[f+2]=Math.round(255*r.b*c),o[f+3]=Math.round(255*c)):o[f+3]=0}return a.putImageData(i,0,0),n}function ti(e,t){for(var r=e.getLayers().getArray(),n=0,a=r.length;n<a;++n){var i=r[n].get("mapbox-layers");if(i&&-1!==i.indexOf(t))return r[n]}}function ri(e,t){for(var r=[],n=e.getLayers().getArray(),a=0,i=n.length;a<i;++a)n[a].get("mapbox-source")===t&&r.push(n[a]);return r}function ni(e,t){for(var r=e.getLayers().getArray(),n=0,a=r.length;n<a;++n){var i=r[n].getSource();if(r[n].get("mapbox-source")===t)return i}}function ai(e,t,r){for(var n=("getLayers"in e?ri(e,t.source):[e]),a=0,i=n.length;a<i;++a){var o=n[a].get("mapbox-featurestate");if(!o)throw new Error('Map or layer for source "'+t.source+'" not found.');r?o[t.id]=r:delete o[t.id],n[a].changed()}}function ii(e,t){for(var r=("getLayers"in e?ri(e,t.source):[e]),n=0,a=r.length;n<a;++n){var i=r[n].get("mapbox-featurestate");if(i&&i[t.id])return i[t.id]}}function oi(e,t){return e.get("mapbox-style").layers.find(function(e){return e.id===t})}function si(e,t,r){var n,a,i=e.get("mapbox-style"),o=i.layers,s=-1;if(void 0!==r){var u=oi(e,r);if(void 0===u)throw new Error('Layer with id "'+r+'" not found.');n=o.indexOf(u)}else n=o.length;if(n>0&&o[n-1].source===t.source?(s=n-1,a=-1):n<o.length&&o[n].source===t.source&&(s=n,a=0),-1===s){var l=e.get("mapbox-metadata"),p=l.options,f=l.styleUrl,c=Ca(i,f,t,p);if(r){var d=ti(e,r),y=e.getLayers().getArray().indexOf(d);e.getLayers().insertAt(y,c)}return o.splice(n,0,t),Ia(c,[t.id],i,f,e,p)}if(o.some(function(e){return e.id===t.id}))throw new Error('Layer with id "'+t.id+'" already exists.');var m=o[s].id,h=Ni[La(e.get("mapbox-style"),ti(e,m))];if(o.splice(n,0,t),h){var v=h[0],g=h[1],b=h[2],x=h[3],w=h[4],k=h[5],z=h[6],M=h[7];if(Array.isArray(b)){var S=b.indexOf(m)+a;b.splice(S,0,t.id)}Ui(v,g,b,x,w,k,z,M)}else ti(e,o[s].id).changed();return Promise.resolve()}function ui(e,t){var r=e.get("mapbox-style"),n=r.layers,a=n.findIndex(function(e){return e.id===t.id});if(-1===a)throw new Error('Layer with id "'+t.id+'" not found.');if(n[a].source!==t.source)throw new Error("Updated layer and previous version must use the same source.");delete Ra(r)[t.id],delete Ua(r)[t.id],n[a]=t;var i=Ni[La(e.get("mapbox-style"),ti(e,t.id))];i?Ui.apply(void 0,i):ti(e,t.id).changed()}function li(e,t){var r="string"==typeof t?t:t.id,n=ti(e,r),a=n.get("mapbox-layers");if(1===a.length)throw new Error("Cannot remove last Mapbox layer from an OpenLayers layer.");a.splice(a.indexOf(r),1);var i=e.get("mapbox-style"),o=i.layers;o.splice(o.findIndex(function(e){return e.id===r}),1);var s=Ni[La(i,n)];if(s){var u=s[0],l=s[1],p=s[2],f=s[3],c=s[4],d=s[5],y=s[6],m=s[7];Array.isArray(p)&&p.splice(p.findIndex(function(e){return e===r}),1),Ui(u,l,p,f,c,d,y,m)}else ti(e,r).changed()}var pi,fi=Array(256).join("");function ci(e,t){if(t>=.05){for(var r="",n=e.split("\n"),a=fi.slice(0,Math.round(t/.1)),i=0,o=n.length;i<o;++i)i>0&&(r+="\n"),r+=n[i].split("").join(a);return r}return e}function di(){return pi||(pi=Wa(1,1).getContext("2d")),pi}function yi(e,t){return di().measureText(e).width+(e.length-1)*t}var mi={};function hi(e,t,r,n){if(-1!==e.indexOf("\n")){for(var a=e.split("\n"),i=[],o=0,s=a.length;o<s;++o)i.push(hi(a[o],t,r,n));return i.join("\n")}var u=r+","+t+","+e+","+n,l=mi[u];if(!l){var p=e.split(" ");if(p.length>1){var f=di();f.font=t;for(var c=f.measureText("M").width*r,d="",y=[],m=0,h=p.length;m<h;++m){var v=p[m],g=d+(d?" ":"")+v;yi(g,n)<=c?d=g:(d&&y.push(d),d=v)}d&&y.push(d);for(var b=0,x=y.length;b<x&&x>1;++b){var w=y[b];if(yi(w,n)<.35*c){var k=b>0?yi(y[b-1],n):1/0,z=b<x-1?yi(y[b+1],n):1/0;y.splice(b,1),x-=1,k<z?(y[b-1]+=" "+w,b-=1):y[b]=w+" "+y[b]}}for(var M=0,S=y.length-1;M<S;++M){var q=y[M],j=y[M+1];if(yi(q,n)>.7*c&&yi(j,n)<.6*c){var _=q.split(" "),E=_.pop();yi(E,n)<.2*c&&(y[M]=_.join(" "),y[M+1]=E+" "+j),S-=1}}l=y.join("\n")}else l=e;l=ci(l,n),mi[u]=l}return l}var vi,gi=/font-family: ?([^;]*);/,bi=/("|')/g;function xi(e){if(!vi){vi={};for(var t=document.styleSheets,r=0,n=t.length;r<n;++r){var a=t[r];try{var i=a.rules||a.cssRules;if(i)for(var o=0,s=i.length;o<s;++o){var u=i[o];if(5==u.type){var l=u.cssText.match(gi);vi[l[1].replace(bi,"")]=!0}}}catch(Vi){}}}return e in vi}var wi={};function ki(e,t){void 0===t&&(t="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css");var r=e.toString();if(r in wi)return wi[r];for(var n=[],a=0,i=e.length;a<i;++a){e[a]=e[a].replace("Arial Unicode MS","Arial");var o=e[a],u=ra(o,1);(0,s.registerFont)(u);var l=u.split(" ");n.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(var p=0,f=n.length;p<f;++p){var c=n[p],d=c[0];if(!xi(d)&&100!==s.checkedFonts.get(c[2]+"\n"+c[1]+" \n"+d)){var y=t.replace("{font-family}",d.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",d.replace(/ /g,"+")).replace("{fontweight}",c[1]).replace("{-fontstyle}",c[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c[2]);if(!document.querySelector('link[href="'+y+'"]')){var m=document.createElement("link");m.href=y,m.rel="stylesheet",document.head.appendChild(m)}}}return wi[r]=e,e}var zi,Mi,Si={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},qi={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},ji=function(e,t){var r=Mn(e,t);if("error"===r.result)throw new Error(r.value.map(function(e){return e.key+": "+e.message}).join(", "));return r.value},_i={},Ei={zoom:0};function Ci(e,t,r,n,a,i,o){var s=e.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[s]||(i[s]={});var u=i[s];if(!u[r]){var l=(e[t]||_i)[r],p=Cn[t+"_"+e.type][r];void 0===l&&(l=p.default);var f=xn(l);if(!f&&gn(l)&&(l=Z(l,p),f=!0),f){var c=ji(l,p);u[r]=c.evaluate.bind(c)}else"color"==p.type&&(l=W.parse(l)),u[r]=function(){return l}}return Ei.zoom=n,u[r](Ei,a,o)}function Ti(e,t,r,n){return Ci(e,"layout","icon-allow-overlap",t,r,n)?Ci(e,"layout","icon-ignore-placement",t,r,n)?"none":"obstacle":"declutter"}function Ai(e,t,r,n,a){return a||console.warn("No filterCache provided to evaluateFilter()"),e in a||(a[e]=An(t).filter),Ei.zoom=n,a[e](Ei,r)}var Ii=!1;function Pi(e){e!==Ii&&(Na(),Ii=e)}function Di(e,t){if(e){if(!Ii&&(0===e.a||0===t))return;var r=e.a;return t=void 0===t?1:t,0===r?"transparent":"rgba("+Math.round(255*e.r/r)+","+Math.round(255*e.g/r)+","+Math.round(255*e.b/r)+","+r*t+")"}return e}var Fi=/\{[^{}}]*\}/g;function Oi(e,t){return e.replace(Fi,function(e){return t[e.slice(1,-1)]||""})}var Li=!1;function Ri(e){void 0===e&&(e=!1),Li=e}var Ni={};function Ui(s,u,l,p,f,c,d,y){if(void 0===p&&(p=Va),void 0===f&&(f=void 0),void 0===c&&(c=void 0),void 0===d&&(d=void 0),void 0===y&&(y=void 0),"string"==typeof u&&(u=JSON.parse(u)),8!=u.version)throw new Error("glStyle version 8 required.");var m,h,v;if(Ni[La(u,s)]=Array.from(arguments),c)if("undefined"!=typeof Image){var g=new Image;g.crossOrigin="anonymous",g.onload=function(){m=g,h=[g.width,g.height],s.changed(),g.onload=null},g.src=c}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var b=self;b.postMessage({action:"loadImage",src:c}),b.addEventListener("message",function(e){"imageLoaded"===e.data.action&&e.data.src===c&&(m=e.data.image,h=[m.width,m.height])})}for(var x,w=Hn(u.layers),k={},z=[],M={},S={},q=Ra(u),j=Ua(u),_=0,E=w.length;_<E;++_){var C=w[_],T=C.id;if("string"==typeof l&&C.source==l||-1!==l.indexOf(T)){var A=C["source-layer"];if(x){if(C.source!==x)throw new Error('Layer "'+T+'" does not use source "'+x)}else{x=C.source;var I=u.sources[x];if(!I)throw new Error('Source "'+x+'" is not defined');var P=I.type;if("vector"!==P&&"geojson"!==P)throw new Error('Source "'+x+'" is not of type "vector" or "geojson", but "'+P+'"')}var D=k[A];D||(D=[],k[A]=D),D.push({layer:C,index:_}),z.push(T)}}var F=new a.default,O=new t.default,L=[],R=function(l,c,g){var b=l.getProperties(),x=k[b.layer];if(x){var w=p.indexOf(c);-1==w&&(w=Ja(c,p));for(var z,_=Si[l.getGeometry().getType()],E={id:l.getId(),properties:b,type:_},C=s.get("mapbox-featurestate")[l.getId()],T=-1,A=0,I=x.length;A<I;++A){var P=x[A],D=P.layer,R=D.id;if(void 0===g||g===R){var N=D.layout||_i,U=D.paint||_i;if(!("none"===N.visibility||"minzoom"in D&&w<D.minzoom||"maxzoom"in D&&w>=D.maxzoom)){var G=D.filter;if(!G||Ai(R,G,E,w,j)){z=D;var V=void 0,W=void 0,J=void 0,Z=void 0,$=void 0,B=void 0,X=P.index;if(3==_&&("fill"==D.type||"fill-extrusion"==D.type))if(W=Ci(D,"paint",D.type+"-opacity",w,E,q,C),D.type+"-pattern"in U){var H=Ci(D,"paint",D.type+"-pattern",w,E,q,C);if(H){var Y="string"==typeof H?Oi(H,b):H.toString();if(m&&f&&f[Y]){(B=L[++T])&&B.getFill()&&!B.getStroke()&&!B.getText()||(B=new i.default({fill:new t.default}),L[T]=B),J=B.getFill(),B.setZIndex(X);var K=Y+"."+W,Q=S[K];if(!Q){var ee=f[Y],te=Wa(ee.width,ee.height),re=te.getContext("2d");re.globalAlpha=W,re.drawImage(m,ee.x,ee.y,ee.width,ee.height,0,0,ee.width,ee.height),Q=re.createPattern(te,"repeat"),S[K]=Q}J.setColor(Q)}}}else V=Di(Ci(D,"paint",D.type+"-color",w,E,q,C),W),D.type+"-outline-color"in U&&($=Di(Ci(D,"paint",D.type+"-outline-color",w,E,q,C),W)),$||($=V),(V||$)&&((!(B=L[++T])||V&&!B.getFill()||!V&&B.getFill()||$&&!B.getStroke()||!$&&B.getStroke()||B.getText())&&(B=new i.default({fill:V?new t.default:void 0,stroke:$?new a.default:void 0}),L[T]=B),V&&(J=B.getFill()).setColor(V),$&&((Z=B.getStroke()).setColor($),Z.setWidth(.5)),B.setZIndex(X));if(1!=_&&"line"==D.type){V=!("line-pattern"in U)&&"line-color"in U?Di(Ci(D,"paint","line-color",w,E,q,C),Ci(D,"paint","line-opacity",w,E,q,C)):void 0;var ne=Ci(D,"paint","line-width",w,E,q,C);V&&ne>0&&((B=L[++T])&&B.getStroke()&&!B.getFill()&&!B.getText()||(B=new i.default({stroke:new a.default}),L[T]=B),(Z=B.getStroke()).setLineCap(Ci(D,"layout","line-cap",w,E,q,C)),Z.setLineJoin(Ci(D,"layout","line-join",w,E,q,C)),Z.setMiterLimit(Ci(D,"layout","line-miter-limit",w,E,q,C)),Z.setColor(V),Z.setWidth(ne),Z.setLineDash(U["line-dasharray"]?Ci(D,"paint","line-dasharray",w,E,q,C).map(function(e){return e*ne}):null),B.setZIndex(X))}var ae=!1,ie=null,oe=0,se=void 0,ue=void 0,le=void 0;if((1==_||2==_)&&"icon-image"in N){var pe=Ci(D,"layout","icon-image",w,E,q,C);if(pe){se="string"==typeof pe?Oi(pe,b):pe.toString();var fe=void 0,ce=y?y(s,se):void 0;if(m&&f&&f[se]||ce){var de=Ci(D,"layout","icon-rotation-alignment",w,E,q,C);if(2==_){var ye=l.getGeometry();if(ye.getFlatMidpoint||ye.getFlatMidpoints){var me=ye.getExtent();if(Math.sqrt(Math.max(Math.pow((me[2]-me[0])/c,2),Math.pow((me[3]-me[1])/c,2)))>150){var he="MultiLineString"===ye.getType()?ye.getFlatMidpoints():ye.getFlatMidpoint();if(Mi||(zi=[NaN,NaN],Mi=new n.default("Point",zi,[],{},null)),fe=Mi,zi[0]=he[0],zi[1]=he[1],"line"===Ci(D,"layout","symbol-placement",w,E,q,C)&&"map"===de)for(var ve=ye.getStride(),ge=ye.getFlatCoordinates(),be=0,xe=ge.length-ve;be<xe;be+=ve){var we=ge[be],ke=ge[be+1],ze=ge[be+ve],Me=ge[be+ve+1],Se=Math.min(we,ze),qe=Math.min(ke,Me),je=Math.max(we,ze),_e=Math.max(ke,Me);if(he[0]>=Se&&he[0]<=je&&he[1]>=qe&&he[1]<=_e){oe=Math.atan2(ke-Me,ze-we);break}}}}}if(2!==_||fe){var Ee=Ci(D,"layout","icon-size",w,E,q,C),Ce=void 0!==U["icon-color"]?Ci(D,"paint","icon-color",w,E,q,C):null;if(!Ce||0!==Ce.a){var Te=Ci(D,"paint","icon-halo-color",w,E,q,C),Ae=Ci(D,"paint","icon-halo-width",w,E,q,C),Ie=se+"."+Ee+"."+Ae+"."+Te;if(null!==Ce&&(Ie+="."+Ce),!(ue=M[Ie])){var Pe=Ti(D,w,E,q),De=void 0;"icon-offset"in N&&((De=Ci(D,"layout","icon-offset",w,E,q,C).slice(0))[1]*=-1);var Fe=Ce?[255*Ce.r,255*Ce.g,255*Ce.b,Ce.a]:void 0;if(ce){var Oe={color:Fe,rotateWithView:"map"===de,displacement:De,declutterMode:Pe};"string"==typeof ce?Oe.src=ce:(Oe.img=ce,Oe.imgSize=[ce.width,ce.height]),ue=new r.default(Oe)}else{var Le=f[se],Re=void 0,Ne=void 0,Ue=void 0,Ge=void 0;Ae?(Le.sdf?(Re=Ka(ei(m,Le,Ce),{x:0,y:0,width:Le.width,height:Le.height,pixelRatio:Le.pixelRatio},Ae,Te),Fe=void 0):Re=Ka(m,Le,Ae,Te),Ne=[Re.width,Re.height]):(Le.sdf?(v||(v=ei(m,{x:0,y:0,width:h[0],height:h[1]},{r:1,g:1,b:1,a:1})),Re=v):Re=m,Ne=h,Ue=[Le.width,Le.height],Ge=[Le.x,Le.y]),ue=new r.default({color:Fe,img:Re,imgSize:Ne,size:Ue,offset:Ge,rotateWithView:"map"===de,scale:Ee/Le.pixelRatio,displacement:De,declutterMode:Pe})}M[Ie]=ue}}ue&&((B=L[++T])&&B.getImage()&&!B.getFill()&&!B.getStroke()||(B=new i.default,L[T]=B),B.setGeometry(fe),ue.setRotation(oe+Ga(Ci(D,"layout","icon-rotate",w,E,q,C))),ue.setOpacity(Ci(D,"paint","icon-opacity",w,E,q,C)),ue.setAnchor(qi[Ci(D,"layout","icon-anchor",w,E,q,C)]),B.setImage(ue),ie=B.getText(),B.setText(void 0),B.setZIndex(X),ae=!0,le=!1)}else le=!0}}}if(1==_&&"circle"===D.type){(B=L[++T])&&B.getImage()&&!B.getFill()&&!B.getStroke()||(B=new i.default,L[T]=B);var Ve="circle-radius"in U?Ci(D,"paint","circle-radius",w,E,q,C):5,We=Di(Ci(D,"paint","circle-stroke-color",w,E,q,C),Ci(D,"paint","circle-stroke-opacity",w,E,q,C)),Je=Di(Ci(D,"paint","circle-color",w,E,q,C),Ci(D,"paint","circle-opacity",w,E,q,C)),Ze=Ci(D,"paint","circle-stroke-width",w,E,q,C),$e=Ve+"."+We+"."+Je+"."+Ze;(ue=M[$e])||(ue=new e.default({radius:Ve,stroke:We&&Ze>0?new a.default({width:Ze,color:We}):void 0,fill:Je?new t.default({color:Je}):void 0,declutterMode:"none"}),M[$e]=ue),B.setImage(ue),ie=B.getText(),B.setText(void 0),B.setGeometry(void 0),B.setZIndex(X),ae=!0}var Be=void 0,Xe=void 0,He=void 0,Ye=void 0,Ke=void 0,Qe=void 0;if("text-field"in N){Ye=Math.round(Ci(D,"layout","text-size",w,E,q,C));var et=Ci(D,"layout","text-font",w,E,q,C);He=Ci(D,"layout","text-line-height",w,E,q,C),(Xe=ra(d?d(et,u.metadata?u.metadata["ol:webfonts"]:void 0):et,Ye,He)).includes("sans-serif")||(Xe+=",sans-serif"),Ke=Ci(D,"layout","text-letter-spacing",w,E,q,C),Qe=Ci(D,"layout","text-max-width",w,E,q,C);var tt=Ci(D,"layout","text-field",w,E,q,C);Be="object"==typeof tt&&tt.sections?1===tt.sections.length?tt.toString():tt.sections.reduce(function(e,t,r){var n=t.fontStack?t.fontStack.split(","):et,a=ra(d?d(n):n,Ye*(t.scale||1),He),i=t.text;if("\n"===i)return e.push("\n",""),e;if(2!=_){for(var o=0,s=(i=hi(i,a,Qe,Ke).split("\n")).length;o<s;++o)o>0&&e.push("\n",""),e.push(i[o],a);return e}e.push(ci(i,Ke),a)},[]):Oi(tt,b).trim(),W=Ci(D,"paint","text-opacity",w,E,q,C)}if(Be&&W&&!le){ae||((B=L[++T])&&B.getText()&&!B.getFill()&&!B.getStroke()||(B=new i.default,L[T]=B),B.setImage(void 0),B.setGeometry(void 0)),B.getText()||B.setText(ie||new o.default({padding:[2,2,2,2]})),ie=B.getText();var rt=N["text-transform"];"uppercase"==rt?Be=Array.isArray(Be)?Be.map(function(e,t){return t%2?e:e.toUpperCase()}):Be.toUpperCase():"lowercase"==rt&&(Be=Array.isArray(Be)?Be.map(function(e,t){return t%2?e:e.toLowerCase()}):Be.toLowerCase());var nt=Array.isArray(Be)?Be:2==_?ci(Be,Ke):hi(Be,Xe,Qe,Ke);ie.setText(nt),ie.setFont(Xe),ie.setRotation(Ga(Ci(D,"layout","text-rotate",w,E,q,C)));var at=Ci(D,"layout","text-anchor",w,E,q,C),it=ae||1==_?"point":Ci(D,"layout","symbol-placement",w,E,q,C),ot=void 0;if("line-center"===it?(ie.setPlacement("line"),ot="center"):ie.setPlacement(it),"line"===it&&"function"==typeof ie.setRepeat){var st=Ci(D,"layout","symbol-spacing",w,E,q,C);ie.setRepeat(2*st)}ie.setOverflow("point"===it);var ut=Ci(D,"paint","text-halo-width",w,E,q,C),lt=Ci(D,"layout","text-offset",w,E,q,C),pt=Ci(D,"paint","text-translate",w,E,q,C),ft=0,ct=0;if("point"==it){ot="center",-1!==at.indexOf("left")?(ot="left",ct=ut):-1!==at.indexOf("right")&&(ot="right",ct=-ut);var dt=Ci(D,"layout","text-rotation-alignment",w,E,q,C);ie.setRotateWithView("map"==dt)}else ie.setMaxAngle(Ga(Ci(D,"layout","text-max-angle",w,E,q,C))*Be.length/nt.length),ie.setRotateWithView(!1);ie.setTextAlign(ot);var yt="middle";0==at.indexOf("bottom")?(yt="bottom",ft=-ut-.5*(He-1)*Ye):0==at.indexOf("top")&&(yt="top",ft=ut+.5*(He-1)*Ye),ie.setTextBaseline(yt);var mt=Ci(D,"layout","text-justify",w,E,q,C);ie.setJustify("auto"===mt?void 0:mt),ie.setOffsetX(lt[0]*Ye+ct+pt[0]),ie.setOffsetY(lt[1]*Ye+ft+pt[1]),O.setColor(Di(Ci(D,"paint","text-color",w,E,q,C),W)),ie.setFill(O);var ht=Di(Ci(D,"paint","text-halo-color",w,E,q,C),W);if(ht){F.setColor(ht),ut*=2;var vt=.5*Ye;F.setWidth(ut<=vt?ut:vt),ie.setStroke(F)}else ie.setStroke(void 0);var gt=Ci(D,"layout","text-padding",w,E,q,C),bt=ie.getPadding();gt!==bt[0]&&(bt[0]=gt,bt[1]=gt,bt[2]=gt,bt[3]=gt),B.setZIndex(X)}}}}}return T>-1?(L.length=T+1,Li&&("set"in l?l.set("mapbox-layer",z):l.getProperties()["mapbox-layer"]=z),L):void 0}};return s.setStyle(R),s.set("mapbox-source",x),s.set("mapbox-layers",z),s.set("mapbox-featurestate",s.get("mapbox-featurestate")||{}),R}function Gi(e,t,r,n){var a=r.getStyleFunction();if(3===a.length)return a(e,t,n)}
},{"ol/style/Circle.js":"cdf1","ol/style/Fill.js":"AFcg","ol/style/Icon.js":"z2xv","ol/render/Feature.js":"IFOM","ol/style/Stroke.js":"TXDt","ol/style/Style.js":"he4w","ol/style/Text.js":"RPsG","ol/render/canvas.js":"iAG7","ol/tileurlfunction.js":"p1vZ","ol/format/GeoJSON.js":"qBlb","ol/layer/Image.js":"KHBf","ol/layer/Layer.js":"GCgv","ol/layer/Group.js":"q0nK","ol/format/MVT.js":"bjcz","ol/Map.js":"kYy5","ol/source/Raster.js":"w95b","ol/source/Source.js":"H38a","ol/tilegrid/TileGrid.js":"dpZ6","ol/source/TileJSON.js":"V9RY","ol/layer/Tile.js":"BUEc","ol/layer/Vector.js":"dflx","ol/source/Vector.js":"ZS12","ol/layer/VectorTile.js":"zOJv","ol/source/VectorTile.js":"A6uo","ol/View.js":"hNqE","ol/proj.js":"Diht","ol/loadingstrategy.js":"JpXE","ol/tilegrid.js":"ExRx","ol/extent.js":"QDir","ol/util.js":"KniQ"}],"VqZN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../events/Event.js")),t=u(require("../events/EventType.js")),r=u(require("../format/MVT.js")),n=u(require("../layer/VectorTile.js")),o=u(require("../source/VectorTile.js")),i=require("ol-mapbox-style");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=f(e,"string");return"symbol"===c(t)?t:String(t)}function f(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=h();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(r){d(o,e.default);var n=b(o);function o(e){var r;return p(this,o),(r=n.call(this,t.default.ERROR)).error=e,r}return l(o)}(),j=function(e){d(u,n.default);var t=b(u);function u(e){var n;p(this,u);var c=!("declutter"in e)||e.declutter,a=new o.default({state:"loading",format:new r.default});n=t.call(this,{source:a,background:e.background,declutter:c,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties}),e.accessToken&&(n.accessToken=e.accessToken);var l=e.styleUrl;return(0,i.applyStyle)(v(n),l,e.layers||e.source,{accessToken:n.accessToken}).then(function(){a.setState("ready")}).catch(function(e){n.dispatchEvent(new g(e)),n.getSource().setState("error")}),void 0===n.getBackground()&&(0,i.applyBackground)(v(n),e.styleUrl,{accessToken:n.accessToken}),n}return l(u)}(),w=j;exports.default=w;
},{"../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../format/MVT.js":"bjcz","../layer/VectorTile.js":"zOJv","../source/VectorTile.js":"A6uo","ol-mapbox-style":"CreQ"}],"GITV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./ImageLayer.js")),t=l(require("./VectorLayer.js")),r=l(require("../../events/EventType.js")),n=l(require("../../ImageCanvas.js")),o=l(require("../../ImageState.js")),i=l(require("rbush")),a=l(require("../../ViewHint.js")),u=require("../../transform.js"),c=require("../../extent.js");function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=v(e,"string");return"symbol"===s(t)?t:String(t)}function v(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=m(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=T();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(l){b(p,e.default);var s=_(p);function p(e){var r;return f(this,p),(r=s.call(this,e)).vectorRenderer_=new t.default(e),r.layerImageRatio_=e.getImageRatio(),r.coordinateToVectorPixelTransform_=(0,u.create)(),r.renderedPixelToCoordinateTransform_=null,r}return d(p,[{key:"disposeInternal",value:function(){this.vectorRenderer_.dispose(),h(w(p.prototype),"disposeInternal",this).call(this)}},{key:"getFeatures",value:function(e){if(!this.vectorRenderer_)return Promise.resolve([]);var t=(0,u.apply)(this.coordinateToVectorPixelTransform_,(0,u.apply)(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}},{key:"handleFontsChanged",value:function(){this.vectorRenderer_.handleFontsChanged()}},{key:"prepareFrame",value:function(e){var t=this,l=e.pixelRatio,s=e.viewState,f=s.resolution,p=e.viewHints,d=this.vectorRenderer_,y=e.extent;1!==this.layerImageRatio_&&(y=y.slice(0),(0,c.scaleFromCenter)(y,this.layerImageRatio_));var v=(0,c.getWidth)(y)/f,h=(0,c.getHeight)(y)/f;if(!p[a.default.ANIMATING]&&!p[a.default.INTERACTING]&&!(0,c.isEmpty)(y)){d.useContainer(null,null);var m=d.context,b=e.layerStatesArray[e.layerIndex],g=Object.assign({},b,{opacity:1}),_=Object.assign({},e,{declutterTree:new i.default(9),extent:y,size:[v,h],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[g],layerIndex:0}),R=!0,j=new n.default(y,f,l,m.canvas,function(e){d.prepareFrame(_)&&d.replayGroupChanged&&(d.clipping=!1,d.renderFrame(_,null)&&(d.renderDeclutter(_),R=!1),e())});j.addEventListener(r.default.CHANGE,function(){if(j.getState()===o.default.LOADED){t.image_=R?null:j;var e=j.getResolution(),r=j.getPixelRatio(),n=e*l/r;t.renderedResolution=n,t.coordinateToVectorPixelTransform_=(0,u.compose)(t.coordinateToVectorPixelTransform_,v/2,h/2,1/n,-1/n,0,-s.center[0],-s.center[1])}}),j.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"renderDeclutter",value:function(){}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,n,o):h(w(p.prototype),"forEachFeatureAtCoordinate",this).call(this,e,t,r,n,o)}}]),p}(),P=O;exports.default=P;
},{"./ImageLayer.js":"rzNj","./VectorLayer.js":"F2e3","../../events/EventType.js":"C8cu","../../ImageCanvas.js":"K7j2","../../ImageState.js":"u3kG","rbush":"XGea","../../ViewHint.js":"cuLW","../../transform.js":"P4eA","../../extent.js":"QDir"}],"VV4h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseVector.js")),e=r(require("../renderer/canvas/VectorImageLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(r){a(i,t.default);var n=s(i);function i(t){var e;o(this,i),t=t||{};var r=Object.assign({},t);return delete r.imageRatio,(e=n.call(this,r)).imageRatio_=void 0!==t.imageRatio?t.imageRatio:1,e}return u(i,[{key:"getImageRatio",value:function(){return this.imageRatio_}},{key:"createRenderer",value:function(){return new e.default(this)}}]),i}(),m=d;exports.default=m;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorImageLayer.js":"GITV"}],"kAnk":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(r,n){e(this,t),this.name=r,this.data=n,this.texture_=null}return n(t,[{key:"getTexture",value:function(t){if(!this.texture_){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}]),t}(),a=u;exports.default=a;
},{}],"cjIB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asArrayLike=m,exports.asImageLike=b,exports.default=void 0,exports.toArray=_;var t=n(require("./Tile.js")),e=n(require("./TileState.js")),r=require("./dom.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=h();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?t:null}function m(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}var g=null;function _(t){g||(g=(0,r.createCanvasContext2D)(t.width,t.height,void 0,{willReadFrequently:!0}));var e=g.canvas,n=t.width;e.width!==n&&(e.width=n);var o=t.height;return e.height!==o&&(e.height=o),g.clearRect(0,0,n,o),g.drawImage(t,0,0),g.getImageData(0,0,n,o).data}var w=[256,256],O=function(r){l(o,t.default);var n=d(o);function o(t){var r;i(this,o);var a=e.default.IDLE;return(r=n.call(this,t.tileCoord,a,{transition:t.transition,interpolate:t.interpolate})).loader_=t.loader,r.data_=null,r.error_=null,r.size_=t.size||null,r}return u(o,[{key:"getSize",value:function(){if(this.size_)return this.size_;var t=b(this.data_);return t?[t.width,t.height]:w}},{key:"getData",value:function(){return this.data_}},{key:"getError",value:function(){return this.error_}},{key:"load",value:function(){if(this.state===e.default.IDLE||this.state===e.default.ERROR){this.state=e.default.LOADING,this.changed();var t=this;this.loader_().then(function(r){t.data_=r,t.state=e.default.LOADED,t.changed()}).catch(function(r){t.error_=r,t.state=e.default.ERROR,t.changed()})}}}]),o}(),j=O;exports.default=j;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG","./dom.js":"Xno5"}],"Zsf8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=p(require("../DataTile.js")),r=c(require("../events/EventType.js")),i=c(require("../TileState.js")),o=c(require("./Triangulation.js")),n=require("../reproj.js"),a=require("../math.js"),u=require("../dom.js"),s=require("../extent.js"),l=require("../events.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_(i.key),i)}}function y(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){var t=v(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=w();return function(){var r,i=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(c){T(p,t.default);var f=E(p);function p(t){var r;h(this,p),(r=f.call(this,{tileCoord:t.tileCoord,loader:function(){return Promise.resolve(new Uint8Array(4))},interpolate:t.interpolate,transition:t.transition})).pixelRatio_=t.pixelRatio,r.gutter_=t.gutter,r.reprojData_=null,r.reprojError_=null,r.reprojSize_=void 0,r.sourceTileGrid_=t.sourceTileGrid,r.targetTileGrid_=t.targetTileGrid,r.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,r.sourceTiles_=[],r.sourcesListenerKeys_=null,r.sourceZ_=0;var u=r.targetTileGrid_.getTileCoordExtent(r.wrappedTileCoord_),l=r.targetTileGrid_.getExtent(),c=r.sourceTileGrid_.getExtent(),d=l?(0,s.getIntersection)(u,l):u;if(0===(0,s.getArea)(d))return r.state=i.default.EMPTY,j(r);var g=t.sourceProj,y=g.getExtent();y&&(c=c?(0,s.getIntersection)(c,y):y);var _=r.targetTileGrid_.getResolution(r.wrappedTileCoord_[0]),v=t.targetProj,T=(0,n.calculateSourceExtentResolution)(g,v,d,_);if(!isFinite(T)||T<=0)return r.state=i.default.EMPTY,j(r);var b=void 0!==t.errorThreshold?t.errorThreshold:e.ERROR_THRESHOLD;if(r.triangulation_=new o.default(g,v,d,c,T*b,_),0===r.triangulation_.getTriangles().length)return r.state=i.default.EMPTY,j(r);r.sourceZ_=r.sourceTileGrid_.getZForResolution(T);var E=r.triangulation_.calculateSourceExtent();if(c&&(g.canWrapX()?(E[1]=(0,a.clamp)(E[1],c[1],c[3]),E[3]=(0,a.clamp)(E[3],c[1],c[3])):E=(0,s.getIntersection)(E,c)),(0,s.getArea)(E)){for(var m=r.sourceTileGrid_.getTileRangeForExtentAndZ(E,r.sourceZ_),w=t.getTileFunction,x=m.minX;x<=m.maxX;x++)for(var O=m.minY;O<=m.maxY;O++){var P=w(r.sourceZ_,x,O,r.pixelRatio_);P&&r.sourceTiles_.push(P)}0===r.sourceTiles_.length&&(r.state=i.default.EMPTY)}else r.state=i.default.EMPTY;return r}return y(p,[{key:"getSize",value:function(){return this.reprojSize_}},{key:"getData",value:function(){return this.reprojData_}},{key:"getError",value:function(){return this.reprojError_}},{key:"reproject_",value:function(){var e=this,r=[];if(this.sourceTiles_.forEach(function(o){if(o&&o.getState()===i.default.LOADED){var n,a=o.getSize(),u=e.gutter_,s=(0,t.asArrayLike)(o.getData());n=s||(0,t.toArray)((0,t.asImageLike)(o.getData()));var l=[a[0]+2*u,a[1]+2*u],c=n instanceof Float32Array,f=l[0]*l[1],p=c?Float32Array:Uint8Array,d=new p(n.buffer),h=p.BYTES_PER_ELEMENT,g=h*d.length/f,y=d.byteLength/l[1],_=Math.floor(y/h/l[0]),v=f*_,T=d;if(d.length!==v){T=new p(v);for(var b=0,E=0,j=l[0]*_,m=0;m<l[1];++m){for(var w=0;w<j;++w)T[b++]=d[E+w];E+=y/h}}r.push({extent:e.sourceTileGrid_.getTileCoordExtent(o.tileCoord),data:new Uint8Array(T.buffer),dataType:p,bytesPerPixel:g,pixelSize:l})}}),this.sourceTiles_.length=0,0===r.length)this.state=i.default.ERROR;else{for(var o,a,s=this.wrappedTileCoord_[0],l=this.targetTileGrid_.getTileSize(s),c="number"==typeof l?l:l[0],f="number"==typeof l?l:l[1],p=this.targetTileGrid_.getResolution(s),d=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),g=r[0].bytesPerPixel,y=Math.ceil(g/3)-1;y>=0;--y){for(var _=[],v=0,T=r.length;v<T;++v){for(var b=r[v],E=b.data,j=b.pixelSize,m=j[0],w=j[1],x=(0,u.createCanvasContext2D)(m,w,n.canvasPool),O=x.createImageData(m,w),P=O.data,R=3*y,S=0,D=P.length;S<D;S+=4)P[S]=E[R],P[S+1]=E[R+1],P[S+2]=E[R+2],P[S+3]=255,R+=g;x.putImageData(O,0,0),_.push({extent:b.extent,image:x.canvas})}for(var C=(0,n.render)(c,f,this.pixelRatio_,d,this.sourceTileGrid_.getExtent(),p,h,this.triangulation_,_,this.gutter_,!1,!1),G=0,L=_.length;G<L;++G){var A=_[G].image.getContext("2d");(0,u.releaseCanvas)(A),n.canvasPool.push(A.canvas)}var M=C.getContext("2d"),k=M.getImageData(0,0,C.width,C.height);(0,u.releaseCanvas)(M),n.canvasPool.push(C),o||(a=new Uint8Array(g*k.width*k.height),o=new r[0].dataType(a.buffer));for(var I=k.data,q=3*y,Y=0,z=I.length;Y<z;Y+=4)255===I[Y+3]?(a[q]=I[Y],a[q+1]=I[Y+1],a[q+2]=I[Y+2]):(a[q]=0,a[q+1]=0,a[q+2]=0),q+=g}this.reprojData_=o,this.reprojSize_=[Math.round(c*this.pixelRatio_),Math.round(f*this.pixelRatio_)],this.state=i.default.LOADED}this.changed()}},{key:"load",value:function(){var e=this;if(this.state===i.default.IDLE||this.state===i.default.ERROR){this.state=i.default.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(o){var n=o.getState();if(n===i.default.IDLE||n===i.default.LOADING){t++;var a=(0,l.listen)(o,r.default.CHANGE,function(){var e=o.getState();e!=i.default.LOADED&&e!=i.default.ERROR&&e!=i.default.EMPTY||((0,l.unlistenByKey)(a),0===--t&&(this.unlistenSources_(),this.reproject_()))},e);e.sourcesListenerKeys_.push(a)}}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e){e.getState()==i.default.IDLE&&e.load()})}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(l.unlistenByKey),this.sourcesListenerKeys_=null}}]),p}(),P=O;exports.default=P;
},{"./common.js":"fF5X","../DataTile.js":"cjIB","../events/EventType.js":"C8cu","../TileState.js":"u3kG","./Triangulation.js":"BiRY","../reproj.js":"U255","../math.js":"B96G","../dom.js":"Xno5","../extent.js":"QDir","../events.js":"UqnM"}],"ct3z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../events/Target.js")),t=i(require("../events/EventType.js")),r=i(require("../ImageTile.js")),n=i(require("../TileState.js")),o=require("../util.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=s(e,"string");return"symbol"===u(t)?t:String(t)}function s(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=b();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(i){d(a,e.default);var u=y(a);function a(e){var t;return l(this,a),(t=u.call(this)).tile,t.handleTileChange_=t.handleTileChange_.bind(v(t)),t.gutter_=e.gutter||0,t.helper_=e.helper,t.loaded=!1,t.ready=!1,t}return f(a,[{key:"setTile",value:function(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(t.default.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===n.default.LOADED,this.loaded)this.uploadTile();else{if(e instanceof r.default){var o=e.getImage();o instanceof Image&&!o.crossOrigin&&(o.crossOrigin="anonymous")}e.addEventListener(t.default.CHANGE,this.handleTileChange_)}}},{key:"uploadTile",value:function(){(0,o.abstract)()}},{key:"setReady",value:function(){this.ready=!0,this.dispatchEvent(t.default.CHANGE)}},{key:"handleTileChange_",value:function(){this.tile.getState()===n.default.LOADED&&(this.loaded=!0,this.uploadTile())}},{key:"disposeInternal",value:function(){this.tile.removeEventListener(t.default.CHANGE,this.handleTileChange_)}}]),a}(),O=m;exports.default=O;
},{"../events/Target.js":"CR4Y","../events/EventType.js":"C8cu","../ImageTile.js":"TOsW","../TileState.js":"u3kG","../util.js":"KniQ"}],"uSmT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./BaseTileRepresentation.js")),t=f(require("../DataTile.js")),r=c(require("../events/EventType.js")),n=c(require("../ImageTile.js")),i=c(require("../reproj/Tile.js")),a=c(require("./Buffer.js")),o=require("../webgl.js"),u=require("../dom.js"),l=require("../size.js");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=_(e,"string");return"symbol"===h(t)?t:String(t)}function _(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=R();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function A(e,t,r,n){P(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}function w(e,t,r,n,i,a){var o,u,l=e.getGL();r instanceof Float32Array?(o=l.FLOAT,e.getExtension("OES_texture_float"),u=null!==e.getExtension("OES_texture_float_linear")):(o=l.UNSIGNED_BYTE,u=!0);P(l,t,a&&u);var s,f=r.byteLength/n[1],c=1;switch(f%8==0?c=8:f%4==0?c=4:f%2==0&&(c=2),i){case 1:s=l.LUMINANCE;break;case 2:s=l.LUMINANCE_ALPHA;break;case 3:s=l.RGB;break;case 4:s=l.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(i))}var h=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,c),l.texImage2D(l.TEXTURE_2D,0,s,n[0],n[1],0,s,o,r),l.pixelStorei(l.UNPACK_ALIGNMENT,h)}var D=null;function j(){D=(0,u.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})}var O=function(u){b(f,e.default);var s=E(f);function f(e){var t;p(this,f),(t=s.call(this,e)).textures=[],t.renderSize_=(0,l.toSize)(e.grid.getTileSize(e.tile.tileCoord[0])),t.bandCount=NaN;var r=new a.default(o.ARRAY_BUFFER,o.STATIC_DRAW);return r.fromArray([0,1,1,1,1,0,0,0]),t.helper_.flushBufferData(r),t.coords=r,t.setTile(e.tile),t}return y(f,[{key:"uploadTile",value:function(){var e,r=this.helper_,a=r.getGL(),o=this.tile;this.textures.length=0,e=o instanceof n.default||o instanceof i.default?o.getImage():o.getData();var u=(0,t.asImageLike)(e);if(u){var l=a.createTexture();return this.textures.push(l),this.bandCount=4,A(a,l,u,o.interpolate),void this.setReady()}e=(0,t.asArrayLike)(e);var s=o.getSize(),f=[s[0]+2*this.gutter_,s[1]+2*this.gutter_],c=e instanceof Float32Array,h=f[0]*f[1],p=c?Float32Array:Uint8Array,d=p.BYTES_PER_ELEMENT,y=e.byteLength/f[1];this.bandCount=Math.floor(y/d/f[0]);var v=Math.ceil(this.bandCount/4);if(1===v){var _=a.createTexture();return this.textures.push(_),w(r,_,e,f,this.bandCount,o.interpolate),void this.setReady()}for(var b=new Array(v),g=0;g<v;++g){var E=a.createTexture();this.textures.push(E);var T=g<v-1?4:(this.bandCount-1)%4+1;b[g]=new p(h*T)}for(var m=0,R=0,x=f[0]*this.bandCount,P=0;P<f[1];++P){for(var D=0;D<x;++D){var j=e[R+D],O=Math.floor(m/this.bandCount),S=D%this.bandCount,C=b[Math.floor(S/4)];C[O*(C.length/h)+S%4]=j,++m}R+=y/d}for(var I=0;I<v;++I){var N=this.textures[I],L=b[I];w(r,N,L,f,L.length/h,o.interpolate)}this.setReady()}},{key:"disposeInternal",value:function(){var e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(r.default.CHANGE,this.handleTileChange_)}},{key:"getImagePixelData_",value:function(e,t,r){var n=this.gutter_,i=this.renderSize_[0],a=this.renderSize_[1];D||j(),D.clearRect(0,0,1,1);var o,u=e.width-2*n,l=e.height-2*n,s=n+Math.floor(u*(t/i)),f=n+Math.floor(l*(r/a));try{D.drawImage(e,s,f,1,1,0,0,1,1),o=D.getImageData(0,0,1,1).data}catch(c){return D=null,null}return o}},{key:"getArrayPixelData_",value:function(e,t,r,n){var i=this.gutter_,a=this.renderSize_[0],o=this.renderSize_[1],u=t[0],l=t[1],s=u+2*i,f=l+2*i,c=i+Math.floor(u*(r/a)),h=i+Math.floor(l*(n/o));if(e instanceof DataView){var p=e.byteLength/(s*f),d=p*(h*s+c),y=e.buffer.slice(d,d+p);return new DataView(y)}var v=this.bandCount*(h*s+c);return e.slice(v,v+this.bandCount)}},{key:"getPixelData",value:function(e,r){if(!this.loaded)return null;if(this.tile instanceof t.default){var n=this.tile.getData(),i=(0,t.asArrayLike)(n);if(i){var a=this.tile.getSize();return this.getArrayPixelData_(i,a,e,r)}return this.getImagePixelData_((0,t.asImageLike)(n),e,r)}return this.getImagePixelData_(this.tile.getImage(),e,r)}}]),f}(),S=O;exports.default=S;
},{"./BaseTileRepresentation.js":"ct3z","../DataTile.js":"cjIB","../events/EventType.js":"C8cu","../ImageTile.js":"TOsW","../reproj/Tile.js":"WlOd","./Buffer.js":"zsRd","../webgl.js":"SCyv","../dom.js":"Xno5","../size.js":"TAHd"}],"WNeo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Uniforms=void 0,exports.getCacheKey=Z,exports.newTileRepresentationLookup=L;var e=h(require("../../structs/LRUCache.js")),t=h(require("../../reproj/DataTile.js")),r=h(require("../../reproj/Tile.js")),n=h(require("../../TileRange.js")),i=h(require("../../TileState.js")),o=h(require("./Layer.js")),a=require("../../util.js"),l=require("../../vec/mat4.js"),s=require("../../tilecoord.js"),u=require("../../transform.js"),c=require("../../array.js"),f=require("../../proj.js"),p=require("../../extent.js"),d=require("../../size.js");function h(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function g(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function b(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e){var t=_(e,"string");return"symbol"===y(t)?t:String(t)}function _(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function S(){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=w(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=A();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};exports.Uniforms=M;var q={};function k(e){return 1/(e+2)}function L(){return{tileIds:new Set,representationsByZ:{}}}function D(e,t){return e.tileIds.has((0,a.getUid)(t))}function z(e,t,r){var n=e.representationsByZ;r in n||(n[r]=new Set),n[r].add(t),e.tileIds.add((0,a.getUid)(t.tile))}function F(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=(0,p.getIntersection)(t,(0,f.fromUserExtent)(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=(0,p.getIntersection)(t,i))}return t}function Z(e,t){return"".concat(e.getKey(),",").concat((0,s.getKey)(t))}var U=function(f){O(y,o.default);var h=E(y);function y(t,r){var i;T(this,y),(i=h.call(this,t,{uniforms:r.uniforms,postProcesses:r.postProcesses})).renderComplete=!1,i.tileTransform_=(0,u.create)(),i.tempMat4=(0,l.create)(),i.tempTileRange_=new n.default(0,0,0,0),i.tempTileCoord_=(0,s.createOrUpdate)(0,0,0),i.tempSize_=[0,0];var o=void 0!==r.cacheSize?r.cacheSize:512;return i.tileRepresentationCache=new e.default(o),i.frameState=null,i.projection_=void 0,i}return b(y,[{key:"reset",value:function(e){S(I(y.prototype),"reset",this).call(this,{uniforms:e.uniforms})}},{key:"isDrawableTile_",value:function(e){var t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==i.default.LOADED||r==i.default.EMPTY||r==i.default.ERROR&&!n}},{key:"prepareFrameInternal",value:function(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;var t=this.getLayer().getRenderSource();return!!t&&(!(0,p.isEmpty)(F(e,e.extent))&&"ready"===t.getState())}},{key:"createTileRepresentation",value:function(e){return(0,a.abstract)()}},{key:"enqueueTiles",value:function(e,t,r,n,o){var l=e.viewState,u=this.getLayer(),c=u.getRenderSource(),f=c.getTileGridForProjection(l.projection),p=c.getGutterForProjection(l.projection),d=(0,a.getUid)(c);d in e.wantedTiles||(e.wantedTiles[d]={});for(var h=e.wantedTiles[d],y=this.tileRepresentationCache,v=u.getMapInternal(),g=Math.max(r-o,f.getMinZoom(),f.getZForResolution(Math.min(u.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(u.getMinZoom(),0)):f.getResolution(0)),c.zDirection)),m=r;m>=g;--m)for(var T=f.getTileRangeForExtentAndZ(t,m,this.tempTileRange_),j=f.getResolution(m),b=T.minX;b<=T.maxX;++b)for(var R=T.minY;R<=T.maxY;++R){var _=(0,s.createOrUpdate)(m,b,R,this.tempTileCoord_),S=Z(c,_),w=void 0,O=void 0;if(y.containsKey(S)&&(O=(w=y.get(S)).tile),w&&w.tile.key===c.getKey()||(O=c.getTile(m,b,R,e.pixelRatio,l.projection)),!D(n,O)){if(w)if(this.isDrawableTile_(O))w.setTile(O);else{var x=O.getInterimTile();w.setTile(x)}else w=this.createTileRepresentation({tile:O,grid:f,helper:this.helper,gutter:p}),y.set(S,w);z(n,w,m);var E=O.getKey();h[E]=!0,O.getState()===i.default.IDLE&&(e.tileQueue.isKeyQueued(E)||e.tileQueue.enqueue([O,d,f.getTileCoordCenter(_),j]))}}}},{key:"beforeTilesRender",value:function(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}},{key:"renderTile",value:function(e,t,r,n,i,o,a,l,s,u,c){}},{key:"drawTile_",value:function(e,t,r,n,i,o,a){if(t.loaded){var l=t.tile.tileCoord,c=(0,s.getKey)(l),f=c in o?o[c]:1,p=a.getResolution(r),h=(0,d.toSize)(a.getTileSize(r),this.tempSize_),y=a.getOrigin(r),v=a.getTileCoordExtent(l),g=f<1?-1:k(r);f<1&&(e.animate=!0);var m=e.viewState,T=m.center[0],j=m.center[1],b=h[0]+2*n,R=h[1]+2*n,_=b/R,S=(T-y[0])/(h[0]*p),w=(y[1]-j)/(h[1]*p),O=m.resolution/p,x=l[1],E=l[2];(0,u.reset)(this.tileTransform_),(0,u.scale)(this.tileTransform_,2/(e.size[0]*O/b),-2/(e.size[1]*O/b)),(0,u.rotate)(this.tileTransform_,m.rotation),(0,u.scale)(this.tileTransform_,1,1/_),(0,u.translate)(this.tileTransform_,(h[0]*(x-S)-n)/b,(h[1]*(E-w)-n)/R),this.renderTile(t,this.tileTransform_,e,i,p,h,y,v,g,n,f)}}},{key:"renderFrame",value:function(e){var n=this;this.frameState=e,this.renderComplete=!0;var o=this.helper.getGL();this.preRender(o,e);var l=e.viewState,u=this.getLayer(),f=u.getRenderSource(),p=f.getTileGridForProjection(l.projection),d=f.getGutterForProjection(l.projection),h=F(e,e.extent),y=p.getZForResolution(l.resolution,f.zDirection),g=L(),m=u.getPreload();if(e.nextExtent){var T=p.getZForResolution(l.nextResolution,f.zDirection),j=F(e,e.nextExtent);this.enqueueTiles(e,j,T,g,m)}this.enqueueTiles(e,h,y,g,0),m>0&&setTimeout(function(){n.enqueueTiles(e,h,y-1,g,m-1)},0);var b,R={},_=(0,a.getUid)(this),S=e.time,w=!1,O=v(g.representationsByZ[y]);try{for(O.s();!(b=O.n()).done;){var x=b.value,E=x.tile;if(!(E instanceof r.default||E instanceof t.default)||E.getState()!==i.default.EMPTY){var C=E.tileCoord;if(x.loaded){var P=E.getAlpha(_,S);if(1===P){E.endTransition(_);continue}w=!0,R[(0,s.getKey)(C)]=P}if(this.renderComplete=!1,!this.findAltTiles_(p,C,y+1,g))for(var A=p.getMinZoom(),I=y-1;I>=A;--I){if(this.findAltTiles_(p,C,I,g))break}}}}catch(J){O.e(J)}finally{O.f()}this.beforeTilesRender(e,w);for(var M=g.representationsByZ,k=Object.keys(M).map(Number).sort(c.descending),D=0,z=k.length;D<z;++D){var Z,U=k[D],K=v(M[U]);try{for(K.s();!(Z=K.n()).done;){var N=Z.value,X=N.tile.tileCoord;(0,s.getKey)(X)in R||this.drawTile_(e,N,U,d,h,R,p)}}catch(J){K.e(J)}finally{K.f()}}var B,G=v(M[y]);try{for(G.s();!(B=G.n()).done;){var Y=B.value,H=Y.tile.tileCoord;(0,s.getKey)(H)in R&&this.drawTile_(e,Y,y,d,h,R,p)}}catch(J){G.e(J)}finally{G.f()}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Q=this.helper.getCanvas(),W=this.tileRepresentationCache;W.canExpireCache();){W.pop().dispose()}return e.postRenderFunctions.push(function(e,t){f.updateCacheSize(.1,t.viewState.projection),f.expireCache(t.viewState.projection,q)}),this.postRender(o,e),Q}},{key:"findAltTiles_",value:function(e,t,r,n){var i=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!i)return!1;for(var o=!0,a=this.tileRepresentationCache,l=this.getLayer().getRenderSource(),s=i.minX;s<=i.maxX;++s)for(var u=i.minY;u<=i.maxY;++u){var c=Z(l,[r,s,u]),f=!1;if(a.containsKey(c)){var p=a.get(c);p.loaded&&!D(n,p.tile)&&(z(n,p,r),f=!0)}f||(o=!1)}return o}},{key:"clearCache",value:function(){var e=this.tileRepresentationCache;e.forEach(function(e){return e.dispose()}),e.clear()}},{key:"removeHelper",value:function(){this.helper&&this.clearCache(),S(I(y.prototype),"removeHelper",this).call(this)}},{key:"disposeInternal",value:function(){S(I(y.prototype),"disposeInternal",this).call(this),delete this.frameState}}]),y}(),K=U;exports.default=K;
},{"../../structs/LRUCache.js":"oMDz","../../reproj/DataTile.js":"Zsf8","../../reproj/Tile.js":"WlOd","../../TileRange.js":"snev","../../TileState.js":"u3kG","./Layer.js":"nUxs","../../util.js":"KniQ","../../vec/mat4.js":"UkOi","../../tilecoord.js":"faTr","../../transform.js":"P4eA","../../array.js":"luEr","../../proj.js":"Diht","../../extent.js":"QDir","../../size.js":"TAHd"}],"colh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Uniforms=exports.Attributes=void 0;var e=y(require("../../reproj/DataTile.js")),t=y(require("../../reproj/Tile.js")),r=y(require("../../TileState.js")),n=y(require("../../webgl/TileTexture.js")),i=y(require("../../webgl/Buffer.js")),o=d(require("./TileLayerBase.js")),u=require("../../webgl/Helper.js"),a=require("../../webgl.js"),l=require("../../transform.js"),s=require("../../extent.js"),f=require("../../proj.js"),c=require("../../vec/mat4.js"),p=require("../../size.js");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function y(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function _(e,t,r){return t&&T(e.prototype,t),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=O(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=x();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function I(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=A(e,"string");return"symbol"===b(t)?t:String(t)}function A(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var D=U(U({},o.Uniforms),{},{TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"});exports.Uniforms=D;var L={TEXTURE_COORD:"a_textureCoord"};exports.Attributes=L;var F=[{name:L.TEXTURE_COORD,size:2,type:u.AttributeType.FLOAT}],k=function(u){m(d,o.default);var h=j(d);function d(e,t){var r;return g(this,d),(r=h.call(this,e,t)).program_,r.vertexShader_=t.vertexShader,r.fragmentShader_=t.fragmentShader,r.indices_=new i.default(a.ELEMENT_ARRAY_BUFFER,a.STATIC_DRAW),r.indices_.fromArray([0,1,3,1,2,3]),r.paletteTextures_=t.paletteTextures||[],r}return _(d,[{key:"reset",value:function(e){v(S(d.prototype),"reset",this).call(this,e),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}},{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}},{key:"createTileRepresentation",value:function(e){return new n.default(e)}},{key:"beforeTilesRender",value:function(e,t){v(S(d.prototype),"beforeTilesRender",this).call(this,e,t),this.helper.useProgram(this.program_,e)}},{key:"renderTile",value:function(e,t,r,n,i,o,u,a,l,f,p){var h=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(F);for(var d=0;d<e.textures.length;){var y="".concat(D.TILE_TEXTURE_ARRAY,"[").concat(d,"]");this.helper.bindTexture(e.textures[d],d,y),++d}for(var b=0;b<this.paletteTextures_.length;++b){var g=this.paletteTextures_[b],T=g.getTexture(h);this.helper.bindTexture(T,d,g.name),++d}var _=r.viewState,v=o[0]+2*f,O=o[1]+2*f,m=e.tile.tileCoord,E=m[1],j=m[2];this.helper.setUniformMatrixValue(D.TILE_TRANSFORM,(0,c.fromTransform)(this.tempMat4,t)),this.helper.setUniformFloatValue(D.TRANSITION_ALPHA,p),this.helper.setUniformFloatValue(D.DEPTH,l);var R=n;f>0&&(R=a,(0,s.getIntersection)(R,n,R)),this.helper.setUniformFloatVec4(D.RENDER_EXTENT,R),this.helper.setUniformFloatValue(D.RESOLUTION,_.resolution),this.helper.setUniformFloatValue(D.ZOOM,_.zoom),this.helper.setUniformFloatValue(D.TEXTURE_PIXEL_WIDTH,v),this.helper.setUniformFloatValue(D.TEXTURE_PIXEL_HEIGHT,O),this.helper.setUniformFloatValue(D.TEXTURE_RESOLUTION,i),this.helper.setUniformFloatValue(D.TEXTURE_ORIGIN_X,u[0]+E*o[0]*i-f*i),this.helper.setUniformFloatValue(D.TEXTURE_ORIGIN_Y,u[1]-j*o[1]*i+f*i),this.helper.drawElements(0,this.indices_.getSize())}},{key:"getData",value:function(n){if(!this.helper.getGL())return null;var i=this.frameState;if(!i)return null;var u=this.getLayer(),a=(0,l.apply)(i.pixelToCoordinateTransform,n.slice()),c=i.viewState,h=u.getExtent();if(h&&!(0,s.containsCoordinate)((0,f.fromUserExtent)(h,c.projection),a))return null;var d,y,b,g=u.getSources((0,s.boundingExtent)([a]),c.resolution);for(d=g.length-1;d>=0;--d)if("ready"===(y=g[d]).getState()){if(b=y.getTileGridForProjection(c.projection),y.getWrapX())break;var T=b.getExtent();if(!T||(0,s.containsCoordinate)(T,a))break}if(d<0)return null;for(var _=this.tileRepresentationCache,v=b.getZForResolution(c.resolution);v>=b.getMinZoom();--v){var O=b.getTileCoordForCoordAndZ(a,v),m=(0,o.getCacheKey)(y,O);if(_.containsKey(m)){var E=_.get(m),j=E.tile;if((j instanceof t.default||j instanceof e.default)&&j.getState()===r.default.EMPTY)return null;if(E.loaded){var R=b.getOrigin(v),P=(0,p.toSize)(b.getTileSize(v)),x=b.getResolution(v),S=(a[0]-R[0])/x-O[1]*P[0],w=(R[1]-a[1])/x-O[2]*P[1];return E.getPixelData(S,w)}}}return null}},{key:"disposeInternal",value:function(){var e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_));v(S(d.prototype),"disposeInternal",this).call(this),delete this.indices_}}]),d}(),C=k;exports.default=C;
},{"../../reproj/DataTile.js":"Zsf8","../../reproj/Tile.js":"WlOd","../../TileState.js":"u3kG","../../webgl/TileTexture.js":"uSmT","../../webgl/Buffer.js":"zsRd","./TileLayerBase.js":"WNeo","../../webgl/Helper.js":"w1WE","../../webgl.js":"SCyv","../../transform.js":"P4eA","../../extent.js":"QDir","../../proj.js":"Diht","../../vec/mat4.js":"UkOi","../../size.js":"TAHd"}],"xlCh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValueTypes=exports.PALETTE_TEXTURE_ARRAY=exports.Operators=void 0,exports.arrayToGlsl=v,exports.colorToGlsl=N,exports.expressionToGlsl=O,exports.getStringNumberEquivalent=T,exports.getValueType=g,exports.isTypeUnique=y,exports.numberToGlsl=E,exports.stringToGlsl=w,exports.uniformNameForVariable=I;var t=r(require("../webgl/PaletteTexture.js")),n=require("../renderer/webgl/TileLayer.js"),e=require("../color.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return i(t)||u(t)||a(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,n){if(t){if("string"==typeof t)return l(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,n):void 0}}function u(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function i(t){if(Array.isArray(t))return l(t)}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var s={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0};function f(t){switch(t){case"string":return s.STRING;case"color":return s.COLOR;case"number":return s.NUMBER;case"boolean":return s.BOOLEAN;case"number[]":return s.NUMBER_ARRAY;default:throw new Error("Unrecognized type hint: ".concat(t))}}exports.ValueTypes=s;var p={};function g(t){if("number"==typeof t)return s.NUMBER;if("boolean"==typeof t)return s.BOOLEAN;if("string"==typeof t)return(0,e.isStringColor)(t)?s.COLOR|s.STRING:s.STRING;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every(function(t){return"number"==typeof t}))return 3===n.length||4===n.length?s.COLOR|s.NUMBER_ARRAY:s.NUMBER_ARRAY;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var r=p[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.getReturnType(n.slice(1))}function y(t){return Math.log2(t)%1==0}function R(t){var n=[];return(t&s.NUMBER)>0&&n.push("number"),(t&s.COLOR)>0&&n.push("color"),(t&s.BOOLEAN)>0&&n.push("boolean"),(t&s.NUMBER_ARRAY)>0&&n.push("number[]"),(t&s.STRING)>0&&n.push("string"),n.length>0?n.join(", "):"(no type)"}function h(t,n){return"operator_".concat(t,"_").concat(Object.keys(n.functions).length)}function E(t){var n=t.toString();return n.includes(".")?n:n+".0"}function v(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(E).join(", "),")")}function N(t){var n=(0,e.asArray)(t),r=n.length>3?n[3]:1;return v([n[0]/255*r,n[1]/255*r,n[2]/255*r,r])}function T(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function w(t,n){return E(T(t,n))}function O(t,n,e){var r=void 0!==e?e:s.NUMBER;if(Array.isArray(n)&&"string"==typeof n[0]){var o=p[n[0]];if(void 0===o)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return o.toGlsl(t,n.slice(1),r)}var c=g(n)&r;if(L(n,c,""),(c&s.NUMBER)>0)return E(n);if((c&s.BOOLEAN)>0)return n.toString();if((c&s.STRING)>0)return w(t,n.toString());if((c&s.COLOR)>0)return N(n);if((c&s.NUMBER_ARRAY)>0)return v(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(R(r),")"))}function d(t){if(0==(g(t)&s.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function m(t){for(var n=0;n<t.length;n++)d(t[n])}function A(t){if(0==(g(t)&s.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function B(t){if(0==(g(t)&s.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function G(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function b(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function x(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function U(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(JSON.stringify(t)," instead"))}function M(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(JSON.stringify(t)," instead"))}function L(t,n,e){if(n===s.NONE)throw new Error("No matching type was found for the following expression ".concat(e,": ").concat(JSON.stringify(t)))}function S(t,n,e){if(L(t,n,e),!y(n))throw new Error("Expected to have a unique type for the following expression ".concat(e,": ").concat(JSON.stringify(t),"\nGot the following types instead: ").concat(R(n)))}function _(t,n,e,r){if((n&e)===s.NONE)throw new Error("Expected the ".concat(r," type of the following expression: ").concat(JSON.stringify(t)," to be of the following types: ").concat(R(e),"\nGot these types instead: ").concat(R(n)))}function I(t){return"u_var_"+t}exports.Operators=p,p.get={getReturnType:function(t){return 2===t.length?f(t[1]):s.ANY},toGlsl:function(t,n,e){b(n,1),x(n,2),A(n[0]);var r=e&p.get.getReturnType(n);S(["get"].concat(o(n)),r,"");var c=n[0].toString(),a=t.attributes.find(function(t){return t.name===c});if(a){if(r!==a.type)throw new Error("The following attribute was used in different places with incompatible types: ".concat(c,"\nTypes were: ").concat(R(a.type)," and ").concat(R(r)))}else t.attributes.push({name:c,type:r});return(t.inFragmentShader?"v_":"a_")+c}},p.var={getReturnType:function(){return s.ANY},toGlsl:function(t,n,e){G(n,1),A(n[0]);var r=n[0].toString();if(!t.style.variables||void 0===t.style.variables[r])throw new Error("The following variable is missing from the style: ".concat(r));var c=e&g(t.style.variables[r]);S(["var"].concat(o(n)),c,"");var a=t.variables.find(function(t){return t.name===r});if(a){if(c!==a.type)throw new Error("The following variable was used in different places with incompatible types: ".concat(r,"\nTypes were: ").concat(R(a.type)," and ").concat(R(c)))}else t.variables.push({name:r,type:c});return I(r)}};var j="u_paletteTextures";exports.PALETTE_TEXTURE_ARRAY=j,p.palette={getReturnType:function(){return s.COLOR},toGlsl:function(n,r){G(r,2),d(r[0]);var o=O(n,r[0]),c=r[1];if(!Array.isArray(c))throw new Error("The second argument of palette must be an array");for(var a=c.length,u=new Uint8Array(4*a),i=0;i<a;i++){var l=c[i],s=void 0;if("string"==typeof l)s=(0,e.fromString)(l);else{if(!Array.isArray(l))throw new Error("The second argument of palette must be an array of strings or colors");var f=l.length;if(4===f)s=l;else{if(3!==f)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(f));s=[l[0],l[1],l[2],1]}}var p=4*i;u[p]=s[0],u[p+1]=s[1],u[p+2]=s[2],u[p+3]=255*s[3]}n.paletteTextures||(n.paletteTextures=[]);var g="".concat(j,"[").concat(n.paletteTextures.length,"]"),y=new t.default(g,u);return n.paletteTextures.push(y),"texture2D(".concat(g,", vec2((").concat(o," + 0.5) / ").concat(a,".0, 0.5))")}};var C="getBandValue";function Y(t){return{getReturnType:function(){return s.BOOLEAN},toGlsl:function(n,e){G(e,2);for(var r=s.ANY,o=0;o<e.length;o++)r&=g(e[o]);if(r===s.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(e)," instead"));return r&=~s.COLOR,"(".concat(O(n,e[0],r)," ").concat(t," ").concat(O(n,e[1],r),")")}}}function J(t){return{getReturnType:function(){return s.BOOLEAN},toGlsl:function(n,e){b(e,2);for(var r=0;r<e.length;r++)B(e[r]);var o=e.map(function(t){return O(n,t,s.BOOLEAN)}).join(" ".concat(t," "));return o="(".concat(o,")")}}}p.band={getReturnType:function(){return s.NUMBER},toGlsl:function(t,e){b(e,1),x(e,3);var r=e[0];if(!(C in t.functions)){for(var o="",c=t.bandCount||1,a=0;a<c;a++){var u=Math.floor(a/4),i=a%4;a===c-1&&1===i&&(i=3);var l="".concat(n.Uniforms.TILE_TEXTURE_ARRAY,"[").concat(u,"]");o+="\n          if (band == ".concat(a+1,".0) {\n            return texture2D(").concat(l,", v_textureCoord + vec2(dx, dy))[").concat(i,"];\n          }\n        ")}t.functions[C]="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(n.Uniforms.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(n.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(o,"\n        }\n      ")}var s=O(t,r),f=O(t,e[1]||0),p=O(t,e[2]||0);return"".concat(C,"(").concat(s,", ").concat(f,", ").concat(p,")")}},p.time={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,0),"u_time"}},p.zoom={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,0),"u_zoom"}},p.resolution={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,0),"u_resolution"}},p["geometry-type"]={getReturnType:function(){return s.STRING},toGlsl:function(t,n){G(n,0);var e="geometryType";return t.attributes.find(function(t){return t.name===e})||t.attributes.push({name:e,type:s.STRING,callback:function(t){return function t(n){var e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return t(n.getGeometries()[0])}}(t.getGeometry())}}),(t.inFragmentShader?"v_":"a_")+e}},p["*"]={getReturnType:function(t){for(var n=s.NUMBER|s.COLOR,e=0;e<t.length;e++)n&=g(t[e]);return n},toGlsl:function(t,n,e){b(n,2);for(var r=e,o=0;o<n.length;o++)r&=g(n[o]);return _(n,r,s.NUMBER|s.COLOR,"output"),"(".concat(n.map(function(n){return O(t,n,r)}).join(" * "),")")}},p["/"]={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,2),m(n),"(".concat(O(t,n[0])," / ").concat(O(t,n[1]),")")}},p["+"]={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return b(n,2),m(n),"(".concat(n.map(function(n){return O(t,n)}).join(" + "),")")}},p["-"]={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,2),m(n),"(".concat(O(t,n[0])," - ").concat(O(t,n[1]),")")}},p.clamp={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){G(n,3),m(n);var e=O(t,n[1]),r=O(t,n[2]);return"clamp(".concat(O(t,n[0]),", ").concat(e,", ").concat(r,")")}},p["%"]={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,2),m(n),"mod(".concat(O(t,n[0]),", ").concat(O(t,n[1]),")")}},p["^"]={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,2),m(n),"pow(".concat(O(t,n[0]),", ").concat(O(t,n[1]),")")}},p.abs={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,1),m(n),"abs(".concat(O(t,n[0]),")")}},p.floor={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,1),m(n),"floor(".concat(O(t,n[0]),")")}},p.round={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,1),m(n),"floor(".concat(O(t,n[0])," + 0.5)")}},p.ceil={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,1),m(n),"ceil(".concat(O(t,n[0]),")")}},p.sin={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,1),m(n),"sin(".concat(O(t,n[0]),")")}},p.cos={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,1),m(n),"cos(".concat(O(t,n[0]),")")}},p.atan={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return b(n,1),x(n,2),m(n),2===n.length?"atan(".concat(O(t,n[0]),", ").concat(O(t,n[1]),")"):"atan(".concat(O(t,n[0]),")")}},p.sqrt={getReturnType:function(){return s.NUMBER},toGlsl:function(t,n){return G(n,1),m(n),"sqrt(".concat(O(t,n[0]),")")}},p[">"]={getReturnType:function(){return s.BOOLEAN},toGlsl:function(t,n){return G(n,2),m(n),"(".concat(O(t,n[0])," > ").concat(O(t,n[1]),")")}},p[">="]={getReturnType:function(){return s.BOOLEAN},toGlsl:function(t,n){return G(n,2),m(n),"(".concat(O(t,n[0])," >= ").concat(O(t,n[1]),")")}},p["<"]={getReturnType:function(){return s.BOOLEAN},toGlsl:function(t,n){return G(n,2),m(n),"(".concat(O(t,n[0])," < ").concat(O(t,n[1]),")")}},p["<="]={getReturnType:function(){return s.BOOLEAN},toGlsl:function(t,n){return G(n,2),m(n),"(".concat(O(t,n[0])," <= ").concat(O(t,n[1]),")")}},p["=="]=Y("=="),p["!="]=Y("!="),p["!"]={getReturnType:function(){return s.BOOLEAN},toGlsl:function(t,n){return G(n,1),B(n[0]),"(!".concat(O(t,n[0],s.BOOLEAN),")")}},p.all=J("&&"),p.any=J("||"),p.between={getReturnType:function(){return s.BOOLEAN},toGlsl:function(t,n){G(n,3),m(n);var e=O(t,n[1]),r=O(t,n[2]),o=O(t,n[0]);return"(".concat(o," >= ").concat(e," && ").concat(o," <= ").concat(r,")")}},p.array={getReturnType:function(){return s.NUMBER_ARRAY},toGlsl:function(t,n){b(n,2),x(n,4),m(n);var e=n.map(function(n){return O(t,n)});return"vec".concat(n.length,"(").concat(e.join(", "),")")}},p.color={getReturnType:function(){return s.COLOR},toGlsl:function(t,n){b(n,3),x(n,4),m(n);var e=n.slice(0,3).map(function(n){return"".concat(O(t,n)," / 255.0")});if(3===n.length)return"vec4(".concat(e.join(", "),", 1.0)");var r=O(t,n[3]);return"(".concat(r," * vec4(").concat(e.join(", "),", 1.0))")}},p.interpolate={getReturnType:function(t){for(var n=s.COLOR|s.NUMBER,e=3;e<t.length;e+=2)n&=g(t[e]);return n},toGlsl:function(t,n,e){U(n),b(n,6);var r,c=n[0];switch(c[0]){case"linear":r=1;break;case"exponential":r=c[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(c)));var a=s.NUMBER,u=p.interpolate.getReturnType(n)&e;S(["interpolate"].concat(o(n)),u,"output");for(var i=O(t,n[1],a),l=E(r),f="",g=2;g<n.length-2;g+=2){var y=O(t,n[g],a),R=f||O(t,n[g+1],u),h=O(t,n[g+2],a),v=O(t,n[g+3],u),N=void 0;N=1===r?"(".concat(i," - ").concat(y,") / (").concat(h," - ").concat(y,")"):"(pow(".concat(l,", (").concat(i," - ").concat(y,")) - 1.0) / (pow(").concat(l,", (").concat(h," - ").concat(y,")) - 1.0)"),f="mix(".concat(R,", ").concat(v,", clamp(").concat(N,", 0.0, 1.0))")}return f}},p.match={getReturnType:function(t){for(var n=s.ANY,e=2;e<t.length;e+=2)n&=g(t[e]);return n&=g(t[t.length-1])},toGlsl:function(t,n,e){U(n),b(n,4);for(var r=g(n[0]),c=1;c<n.length-1;c+=2)r&=g(n[c]);_(["match"].concat(o(n)),r,s.STRING|s.NUMBER|s.BOOLEAN,"input"),r=(s.STRING|s.NUMBER|s.BOOLEAN)&r;var a=p.match.getReturnType(n)&e;S(["match"].concat(o(n)),a,"output");for(var u=O(t,n[0],r),i=O(t,n[n.length-1],a),l=null,f=n.length-3;f>=1;f-=2){var y=O(t,n[f],r),R=O(t,n[f+1],a);l="(".concat(u," == ").concat(y," ? ").concat(R," : ").concat(l||i,")")}return l}},p.case={getReturnType:function(t){for(var n=s.ANY,e=1;e<t.length;e+=2)n&=g(t[e]);return n&=g(t[t.length-1])},toGlsl:function(t,n,e){M(n),b(n,3);var r=p.case.getReturnType(n)&e;S(["case"].concat(o(n)),r,"output");for(var c=0;c<n.length-1;c+=2)B(n[c]);for(var a=O(t,n[n.length-1],r),u=null,i=n.length-3;i>=0;i-=2){var l=O(t,n[i],s.BOOLEAN),f=O(t,n[i+1],r);u="(".concat(l," ? ").concat(f," : ").concat(u||a,")")}return u}},p.in={getReturnType:function(t){return s.BOOLEAN},toGlsl:function(t,n){G(n,2);var e=n[0],r=n[1];if(!Array.isArray(r))throw new Error('The "in" operator expects an array literal as its second argument.');if("string"==typeof r[0]){if("literal"!==r[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(r[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');r=r[1]}for(var c=g(e),a=0;a<r.length-1;a+=1)c&=g(r[a]);_(["match"].concat(o(n)),c,s.STRING|s.NUMBER|s.BOOLEAN,"input"),c=(s.STRING|s.NUMBER|s.BOOLEAN)&c;for(var u=h("in",t),i=[],l=0;l<r.length;l+=1)i.push("  if (inputValue == ".concat(O(t,r[l],c),") { return true; }"));return t.functions[u]="bool ".concat(u,"(float inputValue) {\n").concat(i.join("\n"),"\n  return false;\n}"),"".concat(u,"(").concat(O(t,e,c),")")}};
},{"../webgl/PaletteTexture.js":"kAnk","../renderer/webgl/TileLayer.js":"colh","../color.js":"eucy"}],"iRdz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderBuilder=void 0;var n=require("../style/expressions.js"),t=require("../style/flat.js");function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,a(o.key),o)}}function r(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function a(n){var t=s(n,"string");return"symbol"===e(t)?t:String(t)}function s(n,t){if("object"!==e(n)||null===n)return n;var o=n[Symbol.toPrimitive];if(void 0!==o){var i=o.call(n,t||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}var l="uniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform vec4 u_renderExtent;\nuniform mediump int u_hitDetection;\n",f=(0,t.createDefaultStyle)(),c=function(){function t(){o(this,t),this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_="vec2(".concat((0,n.numberToGlsl)(f["circle-radius"]),")"),this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=(0,n.colorToGlsl)(f["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=(0,n.numberToGlsl)(f["stroke-width"]),this.strokeColorExpression_=(0,n.colorToGlsl)(f["stroke-color"]),this.hasFill_=!1,this.fillColorExpression_=(0,n.colorToGlsl)(f["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}return r(t,[{key:"addUniform",value:function(n){return this.uniforms_.push(n),this}},{key:"addAttribute",value:function(n){return this.attributes_.push(n),this}},{key:"addVarying",value:function(n,t,e){return this.varyings_.push({name:n,type:t,expression:e}),this}},{key:"setSymbolSizeExpression",value:function(n){return this.hasSymbol_=!0,this.symbolSizeExpression_=n,this}},{key:"getSymbolSizeExpression",value:function(){return this.symbolSizeExpression_}},{key:"setSymbolRotationExpression",value:function(n){return this.symbolRotationExpression_=n,this}},{key:"setSymbolOffsetExpression",value:function(n){return this.symbolOffsetExpression_=n,this}},{key:"setSymbolColorExpression",value:function(n){return this.hasSymbol_=!0,this.symbolColorExpression_=n,this}},{key:"getSymbolColorExpression",value:function(){return this.symbolColorExpression_}},{key:"setTextureCoordinateExpression",value:function(n){return this.texCoordExpression_=n,this}},{key:"setFragmentDiscardExpression",value:function(n){return this.discardExpression_=n,this}},{key:"setSymbolRotateWithView",value:function(n){return this.symbolRotateWithView_=n,this}},{key:"setStrokeWidthExpression",value:function(n){return this.hasStroke_=!0,this.strokeWidthExpression_=n,this}},{key:"setStrokeColorExpression",value:function(n){return this.hasStroke_=!0,this.strokeColorExpression_=n,this}},{key:"setFillColorExpression",value:function(n){return this.hasFill_=!0,this.fillColorExpression_=n,this}},{key:"addVertexShaderFunction",value:function(n){this.vertexShaderFunctions_.includes(n)||this.vertexShaderFunctions_.push(n)}},{key:"addFragmentShaderFunction",value:function(n){this.fragmentShaderFunctions_.includes(n)||this.fragmentShaderFunctions_.push(n)}},{key:"getSymbolVertexShader",value:function(){if(!this.hasSymbol_)return null;var n=this.symbolRotateWithView_?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix";return"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform mediump int u_hitDetection;\n\n".concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_hitColor;\n").concat(this.attributes_.map(function(n){return"attribute "+n+";"}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(n,";\n  vec2 halfSize = ").concat(this.symbolSizeExpression_," * 0.5;\n  vec2 offset = ").concat(this.symbolOffsetExpression_,";\n  float angle = ").concat(this.symbolRotationExpression_,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression_,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n  v_hitColor = a_hitColor;\n").concat(this.varyings_.map(function(n){return"  "+n.name+" = "+n.expression+";"}).join("\n"),"\n}")}},{key:"getSymbolFragmentShader",value:function(){return this.hasSymbol_?"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform mediump int u_hitDetection;\n".concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.symbolColorExpression_,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}"):null}},{key:"getStrokeVertexShader",value:function(){return this.hasStroke_?"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(l,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\nattribute vec4 a_hitColor;\n").concat(this.attributes_.map(function(n){return"attribute "+n+";"}).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = pxPos * 4.0 / u_viewportSizePx;\n  return vec4(screenPos.xy, 0.0, 0.0);\n}\n\nvec2 getOffsetDirection(vec2 normalPx, vec2 tangentPx, float joinAngle) {\n  if (cos(joinAngle) > 0.93) return normalPx - tangentPx;\n  float halfAngle = joinAngle / 2.0;\n  vec2 angleBisectorNormal = vec2(\n    sin(halfAngle) * normalPx.x + cos(halfAngle) * normalPx.y,\n    -cos(halfAngle) * normalPx.x + sin(halfAngle) * normalPx.y\n  );\n  float length = 1.0 / sin(halfAngle);\n  return angleBisectorNormal * length;\n}\n\nvoid main(void) {\n  float lineWidth = ").concat(this.strokeWidthExpression_,";\n  float anglePrecision = 1500.0;\n  float paramShift = 10000.0;\n  v_angleStart = fract(a_parameters / paramShift) * paramShift / anglePrecision;\n  v_angleEnd = fract(floor(a_parameters / paramShift + 0.5) / paramShift) * paramShift / anglePrecision;\n  float vertexNumber = floor(a_parameters / paramShift / paramShift + 0.0001);\n  vec2 tangentPx = worldToPx(a_segmentEnd) - worldToPx(a_segmentStart);\n  tangentPx = normalize(tangentPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 offsetPx = getOffsetDirection(normalPx * normalDir, tangentDir * tangentPx, angle) * lineWidth * 0.5;\n  vec2 position =  vertexNumber < 1.5 ? a_segmentStart : a_segmentEnd;\n  gl_Position = u_projectionMatrix * vec4(position, 0.0, 1.0) + pxToScreen(offsetPx);\n  v_segmentStart = worldToPx(a_segmentStart);\n  v_segmentEnd = worldToPx(a_segmentEnd);\n  v_width = lineWidth;\n  v_hitColor = a_hitColor;\n").concat(this.varyings_.map(function(n){return"  "+n.name+" = "+n.expression+";"}).join("\n"),"\n}"):null}},{key:"getStrokeFragmentShader",value:function(){return this.hasStroke_?"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(l,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float radius) {\n  vec2 startToPoint = point - start;\n  vec2 startToEnd = end - start;\n  float ratio = clamp(dot(startToPoint, startToEnd) / dot(startToEnd, startToEnd), 0.0, 1.0);\n  float dist = length(startToPoint - ratio * startToEnd);\n  return 1.0 - smoothstep(radius - 1.0, radius, dist);\n}\n\nvoid main(void) {\n  vec2 v_currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(v_currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.strokeColorExpression_," * u_globalAlpha;\n  gl_FragColor *= segmentDistanceField(v_currentPoint, v_segmentStart, v_segmentEnd, v_width);\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}"):null}},{key:"getFillVertexShader",value:function(){return this.hasFill_?"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(l,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute vec4 a_hitColor;\n").concat(this.attributes_.map(function(n){return"attribute "+n+";"}).join("\n"),"\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n").concat(this.varyings_.map(function(n){return"  "+n.name+" = "+n.expression+";"}).join("\n"),"\n}"):null}},{key:"getFillFragmentShader",value:function(){return this.hasFill_?"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(l,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvoid main(void) {\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(gl_FragCoord.xy / u_pixelRatio);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.fillColorExpression_," * u_globalAlpha;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}"):null}}]),t}();exports.ShaderBuilder=c;
},{"../style/expressions.js":"xlCh","../style/flat.js":"iE24"}],"DXJt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSymbolOpacityGlslFunction=m,exports.packColor=d,exports.parseLiteralStyle=E;var e=require("./ShaderBuilder.js"),r=require("../style/expressions.js"),t=require("../color.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach(function(r){i(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function i(e,r,t){return(r=s(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){var r=c(e,"string");return"symbol"===o(r)?r:String(r)}function c(e,r){if("object"!==o(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function l(e){return y(e)||f(e)||p(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,r){if(e){if("string"==typeof e)return b(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,r):void 0}}function f(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function y(e){if(Array.isArray(e))return b(e)}function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function m(e,r){switch(e){case"square":case"image":return"1.0";case"circle":return"(1.0-smoothstep(1.-4./".concat(r,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");case"triangle":var t="(v_quadCoord*2.-1.)",o="(atan(".concat(t,".x,").concat(t,".y))");return"(1.0-smoothstep(.5-3./".concat(r,",.5,cos(floor(.5+").concat(o,"/2.094395102)*2.094395102-").concat(o,")*length(").concat(t,")))");default:throw new Error("Unexpected symbol type: ".concat(e))}}function d(e){var r=(0,t.asArray)(e);return[256*r[0]+r[1],256*r[2]+Math.round(255*r[3])]}var v="vec4 unpackColor(vec2 packedColor) {\n  return fract(packedColor[1] / 256.0) * vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    1.0\n  );\n}";function g(e){return e===r.ValueTypes.COLOR?2:e===r.ValueTypes.NUMBER_ARRAY?4:1}function O(e){var r=g(e);return r>1?"vec".concat(r):"float"}function x(e,t,o,n,a){if("symbol"in e){var i=e.symbol;if("color"in i){var s=i.color,c=void 0!==i.opacity?i.opacity:1,l=(0,r.expressionToGlsl)(a,s,r.ValueTypes.COLOR),u=(0,r.expressionToGlsl)(a,c,r.ValueTypes.NUMBER);t.setSymbolColorExpression("vec4(".concat(l,".rgb, ").concat(l,".a * ").concat(u,")"))}if("image"===i.symbolType&&i.src){var p=new Image;p.crossOrigin=void 0===i.crossOrigin?"anonymous":i.crossOrigin,p.src=i.src,t.addUniform("sampler2D u_texture").setSymbolColorExpression("".concat(t.getSymbolColorExpression()," * texture2D(u_texture, v_texCoord)")),o.u_texture=p}else if("symbolType"in i){var f=t.getSymbolSizeExpression();"size"in i&&(f=(0,r.expressionToGlsl)(a,i.size,r.ValueTypes.NUMBER_ARRAY|r.ValueTypes.NUMBER));var y=m(i.symbolType,"vec2(".concat(f,").x"));t.setSymbolColorExpression("".concat(t.getSymbolColorExpression()," * vec4(1.0, 1.0, 1.0, ").concat(y,")"))}if("size"in i){var b=i.size,d=(0,r.expressionToGlsl)(n,b,r.ValueTypes.NUMBER_ARRAY|r.ValueTypes.NUMBER);t.setSymbolSizeExpression("vec2(".concat(d,")"))}"textureCoord"in i&&t.setTextureCoordinateExpression((0,r.expressionToGlsl)(n,i.textureCoord,r.ValueTypes.NUMBER_ARRAY)),"offset"in i&&t.setSymbolOffsetExpression((0,r.expressionToGlsl)(n,i.offset,r.ValueTypes.NUMBER_ARRAY)),"rotation"in i&&t.setSymbolRotationExpression((0,r.expressionToGlsl)(n,i.rotation,r.ValueTypes.NUMBER)),"rotateWithView"in i&&t.setSymbolRotateWithView(!!i.rotateWithView)}}function S(e,t,o,n,a){"stroke-color"in e&&t.setStrokeColorExpression((0,r.expressionToGlsl)(a,e["stroke-color"],r.ValueTypes.COLOR)),"stroke-width"in e&&t.setStrokeWidthExpression((0,r.expressionToGlsl)(n,e["stroke-width"],r.ValueTypes.NUMBER))}function T(e,t,o,n,a){"fill-color"in e&&t.setFillColorExpression((0,r.expressionToGlsl)(a,e["fill-color"],r.ValueTypes.COLOR))}function E(o){var n={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{},style:o},s={inFragmentShader:!0,variables:n.variables,attributes:[],stringLiteralsMap:n.stringLiteralsMap,functions:{},style:o},c=new e.ShaderBuilder,u={};if(x(o,c,u,n,s),S(o,c,u,n,s),T(o,c,u,n,s),o.filter){var p=(0,r.expressionToGlsl)(s,o.filter,r.ValueTypes.BOOLEAN);c.setFragmentDiscardExpression("!".concat(p))}s.variables.forEach(function(e){var a,i=(0,r.uniformNameForVariable)(e.name);c.addUniform("".concat(O(e.type)," ").concat(i)),a=e.type===r.ValueTypes.STRING?function(){return(0,r.getStringNumberEquivalent)(n,o.variables[e.name])}:e.type===r.ValueTypes.COLOR?function(){return d(l((0,t.asArray)(o.variables[e.name]||"#eee")))}:e.type===r.ValueTypes.BOOLEAN?function(){return o.variables[e.name]?1:0}:function(){return o.variables[e.name]},u[i]=a}),s.attributes.forEach(function(e){n.attributes.find(function(r){return r.name===e.name})||n.attributes.push(e);var t=O(e.type),o="a_".concat(e.name);e.type===r.ValueTypes.COLOR&&(t="vec4",o="unpackColor(".concat(o,")"),c.addVertexShaderFunction(v)),c.addVarying("v_".concat(e.name),t,o)}),n.attributes.forEach(function(e){c.addAttribute("".concat(O(e.type)," a_").concat(e.name))});var f=n.attributes.map(function(e){var o;return o=e.callback?e.callback:e.type===r.ValueTypes.STRING?function(t){return(0,r.getStringNumberEquivalent)(n,t.get(e.name))}:e.type===r.ValueTypes.COLOR?function(r){return d(l((0,t.asArray)(r.get(e.name)||"#eee")))}:e.type===r.ValueTypes.BOOLEAN?function(r){return r.get(e.name)?1:0}:function(r){return r.get(e.name)},{name:e.name,size:g(e.type),callback:o}});for(var y in n.functions)c.addVertexShaderFunction(n.functions[y]);for(var b in s.functions)c.addFragmentShaderFunction(s.functions[b]);return{builder:c,attributes:f.reduce(function(e,r){return a(a({},e),{},i({},r.name,{callback:r.callback,size:r.size}))},{}),uniforms:u}}
},{"./ShaderBuilder.js":"iRdz","../style/expressions.js":"xlCh","../color.js":"eucy"}],"sCa7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Layer.js")),t=n(require("../renderer/webgl/PointsLayer.js")),r=require("../webgl/styleparser.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=b(e,"string");return"symbol"===o(t)?t:String(t)}function b(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=v();return function(){var r,n=j(e);if(t){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(n){p(i,e.default);var o=d(i);function i(e){var t;a(this,i);var n=Object.assign({},e);return(t=o.call(this,n)).parseResult_=(0,r.parseLiteralStyle)(e.style),t.styleVariables_=e.style.variables||{},t.hitDetectionDisabled_=!!e.disableHitDetection,t}return l(i,[{key:"createRenderer",value:function(){var e=this,r=Object.keys(this.parseResult_.attributes).map(function(t){return u({name:t},e.parseResult_.attributes[t])});return new t.default(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:r})}},{key:"updateStyleVariables",value:function(e){Object.assign(this.styleVariables_,e),this.changed()}}]),i}(),g=m;exports.default=g;
},{"./Layer.js":"GCgv","../renderer/webgl/PointsLayer.js":"m8cI","../webgl/styleparser.js":"DXJt"}],"LDVw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./BaseTile.js")),t=i(require("../layer/Property.js")),r=a(require("../renderer/webgl/TileLayer.js")),n=require("../style/expressions.js");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function i(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=v(e,"string");return"symbol"===c(t)?t:String(t)}function v(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=y();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){var o="\n    attribute vec2 ".concat(r.Attributes.TEXTURE_COORD,";\n    uniform mat4 ").concat(r.Uniforms.TILE_TRANSFORM,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(r.Uniforms.TEXTURE_RESOLUTION,";\n    uniform float ").concat(r.Uniforms.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(r.Uniforms.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(r.Uniforms.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(r.Attributes.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(r.Uniforms.TEXTURE_ORIGIN_X," + ").concat(r.Uniforms.TEXTURE_RESOLUTION," * ").concat(r.Uniforms.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(r.Uniforms.TEXTURE_ORIGIN_Y," - ").concat(r.Uniforms.TEXTURE_RESOLUTION," * ").concat(r.Uniforms.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(r.Uniforms.TILE_TRANSFORM," * vec4(").concat(r.Attributes.TEXTURE_COORD,", ").concat(r.Uniforms.DEPTH,", 1.0);\n    }\n  "),a={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:t,style:e},i=[];if(void 0!==e.color){var c=(0,n.expressionToGlsl)(a,e.color,n.ValueTypes.COLOR);i.push("color = ".concat(c,";"))}if(void 0!==e.contrast){var s=(0,n.expressionToGlsl)(a,e.contrast,n.ValueTypes.NUMBER);i.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb - (").concat(s," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==e.exposure){var u=(0,n.expressionToGlsl)(a,e.exposure,n.ValueTypes.NUMBER);i.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==e.saturation){var l=(0,n.expressionToGlsl)(a,e.saturation,n.ValueTypes.NUMBER);i.push("\n      float saturation = ".concat(l," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==e.gamma){var f=(0,n.expressionToGlsl)(a,e.gamma,n.ValueTypes.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(f,"));"))}if(void 0!==e.brightness){var v=(0,n.expressionToGlsl)(a,e.brightness,n.ValueTypes.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(v,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var d={},p=a.variables.length;if(p>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(a.variables,")"));for(var m=function(){var t=a.variables[_];if(!(t.name in e.variables))throw new Error("Missing '".concat(t.name,"' in style variables"));var r=(0,n.uniformNameForVariable)(t.name);d[r]=function(){var r=e.variables[t.name];return"string"==typeof r&&(r=(0,n.getStringNumberEquivalent)(a,r)),void 0!==r?r:-9999999}},_=0;_<p;++_)m();var h=Object.keys(d).map(function(e){return"uniform float ".concat(e,";")}),y=Math.ceil(t/4);h.push("uniform sampler2D ".concat(r.Uniforms.TILE_TEXTURE_ARRAY,"[").concat(y,"];")),a.paletteTextures&&h.push("uniform sampler2D ".concat(n.PALETTE_TEXTURE_ARRAY,"[").concat(a.paletteTextures.length,"];"));var E=Object.keys(a.functions).map(function(e){return a.functions[e]});return{vertexShader:o,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(r.Uniforms.RENDER_EXTENT,";\n    uniform float ").concat(r.Uniforms.TRANSITION_ALPHA,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(r.Uniforms.RESOLUTION,";\n    uniform float ").concat(r.Uniforms.ZOOM,";\n\n    ").concat(h.join("\n"),"\n\n    ").concat(E.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(r.Uniforms.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(r.Uniforms.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(r.Uniforms.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(r.Uniforms.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(r.Uniforms.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(i.join("\n"),"\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(r.Uniforms.TRANSITION_ALPHA,";\n    }"),uniforms:d,paletteTextures:a.paletteTextures}}var g=function(n){d(a,e.default);var o=m(a);function a(e){var r;s(this,a);var n=(e=e?Object.assign({},e):{}).style||{};delete e.style;var i=e.cacheSize;return delete e.cacheSize,(r=o.call(this,e)).sources_=e.sources,r.renderedSource_=null,r.renderedResolution_=NaN,r.style_=n,r.cacheSize_=i,r.styleVariables_=r.style_.variables||{},r.addChangeListener(t.default.SOURCE,r.handleSourceUpdate_),r}return l(a,[{key:"getSources",value:function(e,t){var r=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(e,t):this.sources_:r?[r]:[]}},{key:"getRenderSource",value:function(){return this.renderedSource_||this.getSource()}},{key:"getSourceState",value:function(){var e=this.getRenderSource();return e?e.getState():"undefined"}},{key:"handleSourceUpdate_",value:function(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}},{key:"getSourceBandCount_",value:function(){var e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}},{key:"createRenderer",value:function(){var e=T(this.style_,this.getSourceBandCount_());return new r.default(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}},{key:"renderSources",value:function(e,t){for(var r,n=this.getRenderer(),o=0,a=t.length;o<a;++o)this.renderedSource_=t[o],n.prepareFrame(e)&&(r=n.renderFrame(e));return r}},{key:"render",value:function(e,t){var r=this;this.rendered=!0;for(var n=e.viewState,o=this.getSources(e.extent,n.resolution),a=!0,i=function(){var e=o[c],t=e.getState();if("loading"==t){e.addEventListener("change",function t(){"ready"==e.getState()&&(e.removeEventListener("change",t),r.changed())})}a=a&&"ready"==t},c=0,s=o.length;c<s;++c)i();var u=this.renderSources(e,o);if(this.getRenderer().renderComplete&&a)return this.renderedResolution_=n.resolution,u;if(this.renderedResolution_>.5*n.resolution){var l=this.getSources(e.extent,this.renderedResolution_).filter(function(e){return!o.includes(e)});if(l.length>0)return this.renderSources(e,l)}return u}},{key:"setStyle",value:function(e){this.styleVariables_=e.variables||{},this.style_=e;var t=T(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}),this.changed()}},{key:"updateStyleVariables",value:function(e){Object.assign(this.styleVariables_,e),this.changed()}}]),a}();g.prototype.dispose;var b=g;exports.default=b;
},{"./BaseTile.js":"HTO1","../layer/Property.js":"HbeD","../renderer/webgl/TileLayer.js":"colh","../style/expressions.js":"xlCh"}],"ZVaS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Graticule",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Heatmap",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"MapboxVector",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"VectorImage",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"WebGLPoints",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"WebGLTile",{enumerable:!0,get:function(){return p.default}});var e=b(require("./layer/Graticule.js")),r=b(require("./layer/Group.js")),t=b(require("./layer/Heatmap.js")),u=b(require("./layer/Image.js")),n=b(require("./layer/Layer.js")),o=b(require("./layer/MapboxVector.js")),a=b(require("./layer/Tile.js")),i=b(require("./layer/Vector.js")),l=b(require("./layer/VectorImage.js")),f=b(require("./layer/VectorTile.js")),c=b(require("./layer/WebGLPoints.js")),p=b(require("./layer/WebGLTile.js"));function b(e){return e&&e.__esModule?e:{default:e}}
},{"./layer/Graticule.js":"wXs0","./layer/Group.js":"q0nK","./layer/Heatmap.js":"I4BI","./layer/Image.js":"KHBf","./layer/Layer.js":"GCgv","./layer/MapboxVector.js":"VqZN","./layer/Tile.js":"BUEc","./layer/Vector.js":"dflx","./layer/VectorImage.js":"VV4h","./layer/VectorTile.js":"zOJv","./layer/WebGLPoints.js":"sCa7","./layer/WebGLTile.js":"LDVw"}],"e4Kb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../events/EventType.js")),t=g(require("./Image.js")),r=h(require("../Image.js")),i=require("./wms.js"),n=require("../uri.js"),o=require("../asserts.js"),a=require("../reproj.js"),s=require("../math.js"),u=require("../string.js"),c=require("../extent.js"),l=require("../dom.js"),f=require("../proj.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}function h(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,m(i.key),i)}}function y(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=O(e,"string");return"symbol"===d(t)?t:String(t)}function O(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=T();return function(){var r,i=P(e);if(t){var n=P(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=4,A=[101,101],w=function(p){b(h,t.default);var g=S(h);function h(e){var r;return v(this,h),e=e||{},(r=g.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).context_=(0,l.createCanvasContext2D)(1,1),r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:t.defaultImageLoadFunction,r.params_=Object.assign({},e.params),r.v13_=!0,r.updateV13_(),r.serverType_=e.serverType,r.hidpi_=void 0===e.hidpi||e.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==e.ratio?e.ratio:1.5,r}return y(h,[{key:"getFeatureInfoUrl",value:function(e,t,r,n){if(void 0!==this.url_){var o=(0,f.get)(r),u=this.getProjection();u&&u!==o&&(t=(0,a.calculateSourceResolution)(u,o,e,t),e=(0,f.transform)(e,o,u));var l=(0,c.getForViewAndSize)(e,t,0,A),p={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,this.params_,n);var g=(0,s.floor)((e[0]-l[0])/t,I),h=(0,s.floor)((l[3]-e[1])/t,I);return p[this.v13_?"I":"X"]=g,p[this.v13_?"J":"Y"]=h,this.getRequestUrl_(l,A,1,u||o,p)}}},{key:"getLegendUrl",value:function(e,t){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var o=this.params_.LAYERS;if(!(!Array.isArray(o)||1===o.length))return;r.LAYER=o}if(void 0!==e){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=e*a/28e-5}return Object.assign(r,t),(0,n.appendParams)(this.url_,r)}}},{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(t,n,o,a){if(void 0===this.url_)return null;n=this.findNearestResolution(n),1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);var u=n/o,l=(0,c.getCenter)(t),f=(0,s.ceil)((0,c.getWidth)(t)/u,I),p=(0,s.ceil)((0,c.getHeight)(t)/u,I),g=(0,c.getForViewAndSize)(l,u,0,[f,p]),h=f+2*(0,s.ceil)((this.ratio_-1)*f/2,I),d=p+2*(0,s.ceil)((this.ratio_-1)*p/2,I),v=(0,c.getForViewAndSize)(l,u,0,[h,d]),_=this.image_;if(_&&this.renderedRevision_==this.getRevision()&&_.getResolution()==n&&_.getPixelRatio()==o&&(0,c.containsExtent)(_.getExtent(),g))return _;var y={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(y,this.params_),this.imageSize_[0]=(0,s.round)((0,c.getWidth)(v)/u,I),this.imageSize_[1]=(0,s.round)((0,c.getHeight)(v)/u,I);var m=this.getRequestUrl_(v,this.imageSize_,o,a,y);return this.image_=new r.default(v,n,o,m,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(e.default.CHANGE,this.handleImageChange.bind(this)),this.image_}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getRequestUrl_",value:function(e,t,r,i,a){if((0,o.assert)(void 0!==this.url_,9),a[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=r)switch(this.serverType_){case"geoserver":var s=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+s:a.FORMAT_OPTIONS="dpi:"+s;break;case"mapserver":a.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":a.DPI=90*r;break;default:(0,o.assert)(!1,8)}a.WIDTH=t[0],a.HEIGHT=t[1];var u,c=i.getAxisOrientation();return u=this.v13_&&"ne"==c.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,a.BBOX=u.join(","),(0,n.appendParams)(this.url_,a)}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()}},{key:"updateV13_",value:function(){var e=this.params_.VERSION||i.DEFAULT_VERSION;this.v13_=(0,u.compareVersions)(e,"1.3")>=0}}]),h}(),L=w;exports.default=L;
},{"../events/EventType.js":"C8cu","./Image.js":"XHvt","../Image.js":"DHWK","./wms.js":"TDA1","../uri.js":"n7G7","../asserts.js":"fLG6","../reproj.js":"U255","../math.js":"B96G","../string.js":"AiCK","../extent.js":"QDir","../dom.js":"Xno5","../proj.js":"Diht"}],"vbl2":[function(require,module,exports) {
"use strict";require("ol/ol.css");var e=require("ol/"),r=s(require("ol/source/TileWMS")),o=s(require("ol/layer/Tile")),t=require("ol/layer"),i=s(require("ol/proj/Projection")),a=s(require("ol/source/ImageWMS"));function s(e){return e&&e.__esModule?e:{default:e}}var u=new i.default({code:"EPSG:32643",units:"m",axisOrientation:"neu",global:!1}),l=new r.default({url:"http://ec2-43-205-228-224.ap-south-1.compute.amazonaws.com:8080/geoserver/Curtorim/wms?service=WMS&version=1.1.0&request=GetMap&layers=Curtorim%3Acurtorim_cog&bbox=393138.47360920964%2C1691083.5993401834%2C394226.8364782684%2C1692292.8413278945&width=691&height=768&srs=EPSG%3A32643&styles=&format=application/openlayers",params:{LAYERS:"Curtorim:curtorim",VERSION:"1.1.1",FORMAT:"image/jpeg"}}),m=new o.default({source:l,visible:!0,name:"Curtorim"}),n=new a.default({url:"http://ec2-43-205-228-224.ap-south-1.compute.amazonaws.com:8080/geoserver/Curtorim/wms?service=WMS&version=1.1.0&request=GetMap&layers=Curtorim%3Acurtorim-lines&bbox=393233.14733829827%2C1691275.4924189565%2C394122.8538951294%2C1692210.637745393&width=730&height=768&srs=EPSG%3A32643&styles=&format=application/openlayers",params:{LAYERS:"Curtorim:curtorim-lines",VERSION:"1.1.1",FORMAT:"image/png"}}),c=new t.Image({source:n}),p=new e.View({center:[393615.64087,1691759.8813],zoom:15.7,extent:[392482.26872767013,1690868.0004283397,394920.8374327267,1692592.5770503664],projection:u}),w=new e.Map({target:"map2",layers:[m,c],view:p});
},{"ol/ol.css":"JiFC","ol/":"DRei","ol/source/TileWMS":"IcO7","ol/layer/Tile":"BUEc","ol/layer":"ZVaS","ol/proj/Projection":"WUar","ol/source/ImageWMS":"e4Kb"}]},{},["vbl2"], null)
//# sourceMappingURL=Map2.0d7855cc.js.map